 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML+RDFa 1.1//EN">
<html lang="en" dir="ltr" version="HTML+RDFa 1.1"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:dc="http://purl.org/dc/terms/"
xmlns:foaf="http://xmlns.com/foaf/0.1/"
xmlns:og="http://ogp.me/ns#"
xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
xmlns:sioc="http://rdfs.org/sioc/ns#"
xmlns:sioct="http://rdfs.org/sioc/types#"
xmlns:skos="http://www.w3.org/2004/02/skos/core#"
xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
xmlns:schema="http://schema.org/">
<head profile="http://www.w3.org/1999/xhtml/vocab">
<title>Reading ascii data representing a grid - Ferret/PyFerret FAQs</title>

<link rel="stylesheet" href="../modules/system/system.base.css">
<link rel="stylesheet" href="../modules/system/system.menus.css">
<link rel="stylesheet" href="../modules/system/system.messages.css">
<link rel="stylesheet" href="../modules/system/system.theme.css">

<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.core.min.css">
<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.theme.min.css">
<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.menu.min.css">
<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.autocomplete.min.css">

<link rel="stylesheet" href="../sites/all/modules/calendar/css/calendar_multiday.css">
<link rel="stylesheet" href="../modules/field/theme/field.css">
<link rel="stylesheet" href="../sites/all/modules/scald/modules/fields/mee/css/editor-global.css">
<link rel="stylesheet" href="../modules/node/node.css">
<link rel="stylesheet" href="../sites/all/modules/scald_file/scald_file.css">
<link rel="stylesheet" href="../modules/search/search.css">
<link rel="stylesheet" href="../modules/user/user.css">
<link rel="stylesheet" href="../sites/all/modules/views/css/views.css">
<link rel="stylesheet" href="../sites/all/modules/ckeditor/css/ckeditor.css">

<link rel="stylesheet" href="../sites/all/modules/ctools/css/ctools.css">
<link rel="stylesheet" href="../sites/all/modules/custom_search/custom_search.css">
<link rel="stylesheet" href="../sites/all/modules/search_autocomplete/css/themes/minimal.css">
<link rel="stylesheet" href="../sites/all/libraries/superfish/css/superfish.css">
<link rel="stylesheet" href="../sites/all/libraries/superfish/css/superfish-smallscreen.css">
<link rel="stylesheet" href="../sites/all/libraries/superfish/css/superfish-vertical.css">

<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/ckeditor_custom.css">

<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/alpha-reset.css">
<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/alpha-mobile.css">
<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/alpha-alpha.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/formalize.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-text.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-branding.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-menu.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-forms.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-visuals.css">
<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/global.css">



<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/pacific-marine-alpha-default.css">
<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/pacific-marine-alpha-default-wide.css">
<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/grid/alpha_default/wide/alpha-default-wide-12.css">


</head>
<body class="html not-front not-logged-in page-node page-node- page-node-555 node-type-documentation-page context-documentation">
  <div id="body-bg-top"></div>
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div class="page clearfix" id="page">
      <header id="section-header" class="section section-header">
  <div id="zone-header-wrapper" class="zone-wrapper zone-header-wrapper clearfix">  
  <div id="zone-header" class="zone zone-header clearfix container-12">
    <div class="grid-7 region region-branding" id="region-branding">
  <div class="region-inner region-branding-inner">
        <div class="branding-data clearfix">
            <div class="logo-img">
        <a href="../index.html" rel="home" title=""><img src="../sites/all/themes/pacific_marine/images/ferret-banner.png" alt="" id="logo" /></a>
		</div>
                </div>
          </div>
</div><div class="grid-5 region region-header-first" id="region-header-first">
  <div class="region-inner region-header-first-inner">
    <div class="block block-block block-4 block-block-4 odd block-without-title" id="block-block-4">
  <div class="block-inner clearfix">

  </div>
</div>
  </div>
</div>  </div>
</div>  </div>
</div><div id="zone-menu-wrapper" class="zone-wrapper zone-menu-wrapper clearfix">  
  <div id="zone-menu" class="zone zone-menu clearfix container-12">
    <div class="grid-12 region region-menu" id="region-menu">
  <div class="region-inner region-menu-inner">
        <div class="block block-system block-menu block-main-menu block-system-main-menu odd block-without-title" id="block-system-main-menu">
  <div class="block-inner clearfix">
                
    <div class="content clearfix">
      <ul class="menu">
	  <li class="first expanded"><a href="../index.html">Home</a>
	  <ul class="menu">
	  </li>
<li class="leaf"><a href="../index.html">Ferret/PyFerret Home</a></li>
</ul></li>
<li class="leaf"><a href="../documentation/ferret-documentation.html">Documentation</a></li>
<li class="leaf"><a href="ferret-faqs.html">FAQ</a></li>
<li class="collapsed"><a href="../documentation/pyferret/downloads.html">Downloads</a></li>
<li class="collapsed"><a href="../documentation/pyferret-support.html">Support</a></li>
</ul>    </div>
  </div>
</div>  </div>
</div>
  </div>
</div></header> 


<!-- ----- this from main index.html, after </div></header>-->

      <section id="section-content" class="section section-content">
  <div id="zone-preface-wrapper" class="zone-wrapper zone-preface-wrapper clearfix">  
  <div id="zone-preface" class="zone zone-preface clearfix equal-height-container container-12">
    <div class="grid-3 region region-preface-first equal-height-element" id="region-preface-first">
  <div class="region-inner region-preface-first-inner">
      </div>
</div><div class="grid-9 region region-preface-second equal-height-element" id="region-preface-second">
  <div class="region-inner region-preface-second-inner">
      </div>
</div>  </div>
</div><div id="zone-content-wrapper" class="zone-wrapper zone-content-wrapper clearfix no-sidebar">  
  <div id="zone-content" class="zone zone-content clearfix equal-height-container container-12">    
        
        <div class="grid-12 region region-content equal-height-element" id="region-content">
  <div class="region-inner region-content-inner">
    <a id="main-content"></a>
            <div class="element-invisible">   
    </div>                    <div class="block block-system block-main block-system-main odd block-without-title" id="block-system-main">
  <div class="block-inner clearfix">
                
    <div class="content clearfix">
      <article about="/Ferret/index.html" typeof="foaf:Document" class="node node-page node-published node-not-promoted node-not-sticky author-burger odd clearfix" id="node-page-771">


<!--   ... from main index.html, -->
<h2 class="block-title"><a href="ferret-faqs.html" class="active-trail">FAQ</a></h2>
<a id="main-content"></a>
<div class="element-invisible">    <h1 class="title" id="page-title">Reading ascii data representing a grid</h1>
</div>                    <div class="block block-system block-main block-system-main odd block-without-title" id="block-system-main">
<div class="block-inner clearfix">
 
<div class="content clearfix">
<article about="/Ferret/faq/reading-ascii-data-representing-a-grid" typeof="foaf:Document" class="node node-page node-published node-not-promoted node-not-sticky author-ansley odd clearfix" id="node-page-769">

<h1 id="page title"  class="node-title">Reading ascii data representing a grid</h1>  <div class="content clearfix">
 
<div class="field field-name-body field-type-text-with-summary field-label-hidden">
<div class="field-items">
<div class="field-item even" property="content:encoded"><h2>Question:</h2>
<pre>
How can I read my ASCII data file which lists the longitudes and latitudes of a grid, and the data values?
</pre><h2>Explanation:</h2>
<p>
If the data looks something like this:</p>
<pre>
219.0 11.00 -4916.
221.0 11.00 -4872.
223.0 11.00 -4923.
225.0 11.00 -4900.
227.0 11.00 -4818.
219.0 13.00 -4864.
221.0 13.00 -4855.
223.0 13.00 -4832.
225.0 13.00 -4846.
227.0 13.00 -4825.
219.0 15.00 -5010.
221.0 15.00 -4849.
223.0 15.00 -4785.
225.0 15.00 -4815.
227.0 15.00 -4959.
</pre><p>with the columns representing longitude, latitude, variable. If we try just these commands:</p>
<pre>
yes? FILE/VAR=xpoints,ypoints,bathy myfile.txt
yes? DEFINE AXIS/X/UNITS=degrees_east xpoints
**ERROR: improper grid or axis definition: data for DEFINE AXIS/FROM_VARIABLE is not monotonic
</pre><p>The data in the first two columns represent the 2D grid, so they repeat points. We need a bit more analysis to get the right definitions for the axes.</p>
<h2>Solution:</h2>
<p>1) If we're just doing one file, and if the grid is regularly-spaced grid, we can just look at the file and define the correct axes:</p>
<p> </p>
<pre>
yes? DEFINE AXIS/X=221:227:2/UNITS=degrees_east xaxis
yes? DEFINE AXIS/Y=11:15:2/UNITS=degrees_north yaxis
 
(using whatever the true ranges and delta-values are in the file)
 
yes? ! Define the grid and read, skipping the first two values in each input record.
yes? DEFINE GRID/X=xaxis/Y=yaxis xygrid
yes? FILE/VAR="dummy1,dummy2,bathy" myfile.txt
</pre><p>2) For a more general script, or if the spacing of the grid is not even, then you'll need to first use the data in the file to define the axes and then define a grid to read the data field. (Try LIST or PLOT commands with these different variables to see what we're doing here.)</p>
<p> </p>
<pre>
yes? ! First read just the points defining the grid.
 
yes? FILE/VAR="xpoints,ypoints" myfile.txt
 
yes? ! The first N points of the variable xpoints will define the x axis. 
yes? ! Let's find where xpoints starts to repeat itself.
yes? ! Where does the first derivative cross zero?
 
yes? LET xdif = xpoints[I=@DDF]
yes? LET xcross = xdif[I=@EVNT:0]
 
yes? ! use LIST commands to check what we've done
yes? LIST/I=1:15 xpoints, xdif, xcross
DATA SET: ./myfile.txt
X: 0.5 to 15.5
Column 1: XPOINTS
Column 2: XDIF is XPOINTS[I=@DDF]
Column 3: XCROSS is XDIF[I=@EVNT:0]
XPOINTS XDIF XCROSS
1 / 1: 219.0 2.000 0.000
2 / 2: 221.0 2.000 0.000
3 / 3: 223.0 2.000 0.000
4 / 4: 225.0 2.000 0.000
5 / 5: 227.0 -8.000 1.000
6 / 6: 219.0 2.000 2.000
7 / 7: 221.0 2.000 2.000
8 / 8: 223.0 2.000 2.000
9 / 9: 225.0 2.000 2.000
10 / 10: 227.0 -8.000 3.000
11 / 11: 219.0 2.000 4.000
12 / 12: 221.0 2.000 4.000
13 / 13: 223.0 2.000 4.000
14 / 14: 225.0 2.000 4.000
15 / 15: 227.0 .... 4.000
 
yes? ! The @LOC tranform tells where the xdif variable crosses 0
yes? ! This is the length of the x axis 
 
yes? LET npts = `xcross[I=@LOC:1]`
!-> DEFINE VARIABLE npts = 5
 
yes? ! Now use the first npts of the data from the file 
yse? ! to define the longitude axis
 
yes? DEFINE AXIS/X/UNITS=degrees_east xaxis = xpoints[I=1:`npts`]
!-> DEFINE AXIS/X/UNITS=degrees_east xaxis = xpoints[I=1:5]
 
yes? ! Now for the y axis we want the first value of ypoints,
yes? ! then one point every `npts` after that
 
yes? LET total = `ypoints,RETURN=isize` ! total points read from the file
!-> DEFINE VARIABLE total = 15
 
yes? DEFINE AXIS/Y/UNITS=degrees_north yaxis=ypoints[I=1:`total`:`npts`]
!-> DEFINE AXIS/Y/UNITS=degrees_north yaxis=ypoints[I=1:15:5]
 
 
yes? ! Now define the grid and re-open the file to read the variable. 
 
yes? CANCEL DATA myfile.txt 
 
yes? DEFINE GRID/X=xaxis/Y=yaxis xygrid
yes? FILE/VAR="dummy1,dummy2,bathy"/GRID=xygrid myfile.txt
 
</pre><p> </p>
<p> </p>
</div>
</div>
</div>

</div>

<div class="clearfix">
<nav class="links node-links clearfix"></nav>

</div>
</article>    </div>
</div>
</div>      </div>
</div>  </div>
</div></section>    
 
<footer id="section-footer" class="section section-footer">

  <div id="zone-footer-wrapper" class="zone-wrapper zone-footer-wrapper clearfix">  
  <div id="zone-footer" class="zone zone-footer clearfix container-12">
    <div class="grid-8 region region-footer-first" id="region-footer-first">
  <div class="region-inner region-footer-first-inner">
    <div class="block block-block block-1 block-block-1 odd block-without-title" id="block-block-1">
  <div class="block-inner clearfix">
                
  </div>
</div><div class="block block-block block-2 block-block-2 even block-without-title" id="block-block-2">
  <div class="block-inner clearfix">
                
  </div>
</div><div class="block block-menu block-menu-footer-first-menu block-menu-menu-footer-first-menu odd block-without-title" id="block-menu-menu-footer-first-menu">

  </div>
</div>  </div>
</div><div class="grid-4 region region-footer-second" id="region-footer-second">
  <div class="region-inner region-footer-second-inner">
    <div class="block block-menu block-menu-footer-second-menu block-menu-menu-footer-second-menu odd block-without-title" id="block-menu-menu-footer-second-menu">
  <div class="block-inner clearfix">
                
  </div>
</div>  </div>
</div>  </div>
</div></footer>  </div>  <div class="region region-page-bottom" id="region-page-bottom">
  <div class="region-inner region-page-bottom-inner">
      </div>
</div>  <div id="body-bg-bottom"></div>
</body>
</html>
