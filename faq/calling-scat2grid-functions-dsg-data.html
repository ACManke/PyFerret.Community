 
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML+RDFa 1.1//EN">
<html lang="en" dir="ltr" version="HTML+RDFa 1.1"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:dc="http://purl.org/dc/terms/"
xmlns:foaf="http://xmlns.com/foaf/0.1/"
xmlns:og="http://ogp.me/ns#"
xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
xmlns:sioc="http://rdfs.org/sioc/ns#"
xmlns:sioct="http://rdfs.org/sioc/types#"
xmlns:skos="http://www.w3.org/2004/02/skos/core#"
xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
xmlns:schema="http://schema.org/">
<head profile="http://www.w3.org/1999/xhtml/vocab">
<title>Calling SCAT2GRID functions for DSG data - Ferret/PyFerret FAQs</title>

<link rel="stylesheet" href="../modules/system/system.base.css">
<link rel="stylesheet" href="../modules/system/system.menus.css">
<link rel="stylesheet" href="../modules/system/system.messages.css">
<link rel="stylesheet" href="../modules/system/system.theme.css">

<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.core.min.css">
<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.theme.min.css">
<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.menu.min.css">
<link rel="stylesheet" href="../sites/all/modules/jquery_update/replace/ui/themes/base/minified/jquery.ui.autocomplete.min.css">

<link rel="stylesheet" href="../sites/all/modules/calendar/css/calendar_multiday.css">
<link rel="stylesheet" href="../modules/field/theme/field.css">
<link rel="stylesheet" href="../sites/all/modules/scald/modules/fields/mee/css/editor-global.css">
<link rel="stylesheet" href="../modules/node/node.css">
<link rel="stylesheet" href="../sites/all/modules/scald_file/scald_file.css">
<link rel="stylesheet" href="../modules/search/search.css">
<link rel="stylesheet" href="../modules/user/user.css">
<link rel="stylesheet" href="../sites/all/modules/views/css/views.css">
<link rel="stylesheet" href="../sites/all/modules/ckeditor/css/ckeditor.css">

<link rel="stylesheet" href="../sites/all/modules/ctools/css/ctools.css">
<link rel="stylesheet" href="../sites/all/modules/custom_search/custom_search.css">
<link rel="stylesheet" href="../sites/all/modules/search_autocomplete/css/themes/minimal.css">
<link rel="stylesheet" href="../sites/all/libraries/superfish/css/superfish.css">
<link rel="stylesheet" href="../sites/all/libraries/superfish/css/superfish-smallscreen.css">
<link rel="stylesheet" href="../sites/all/libraries/superfish/css/superfish-vertical.css">

<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/ckeditor_custom.css">

<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/alpha-reset.css">
<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/alpha-mobile.css">
<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/alpha-alpha.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/formalize.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-text.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-branding.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-menu.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-forms.css">
<link rel="stylesheet" href="../sites/all/themes/omega/omega/css/omega-visuals.css">
<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/global.css">



<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/pacific-marine-alpha-default.css">
<link rel="stylesheet" href="../sites/all/themes/pacific_marine/css/pacific-marine-alpha-default-wide.css">
<link rel="stylesheet" href="../sites/all/themes/omega/alpha/css/grid/alpha_default/wide/alpha-default-wide-12.css">


</head>
<body class="html not-front not-logged-in page-node page-node- page-node-555 node-type-documentation-page context-documentation">
  <div id="body-bg-top"></div>
  <div id="skip-link">
    <a href="#main-content" class="element-invisible element-focusable">Skip to main content</a>
  </div>
    <div class="page clearfix" id="page">
      <header id="section-header" class="section section-header">
  <div id="zone-header-wrapper" class="zone-wrapper zone-header-wrapper clearfix">  
  <div id="zone-header" class="zone zone-header clearfix container-12">
    <div class="grid-7 region region-branding" id="region-branding">
  <div class="region-inner region-branding-inner">
        <div class="branding-data clearfix">
            <div class="logo-img">
        <a href="../index.html" rel="home" title=""><img src="../sites/all/themes/pacific_marine/images/ferret-banner.png" alt="" id="logo" /></a>
		</div>
                </div>
          </div>
</div><div class="grid-5 region region-header-first" id="region-header-first">
  <div class="region-inner region-header-first-inner">
    <div class="block block-block block-4 block-block-4 odd block-without-title" id="block-block-4">
  <div class="block-inner clearfix">

  </div>
</div>
  </div>
</div>  </div>
</div>  </div>
</div><div id="zone-menu-wrapper" class="zone-wrapper zone-menu-wrapper clearfix">  
  <div id="zone-menu" class="zone zone-menu clearfix container-12">
    <div class="grid-12 region region-menu" id="region-menu">
  <div class="region-inner region-menu-inner">
        <div class="block block-system block-menu block-main-menu block-system-main-menu odd block-without-title" id="block-system-main-menu">
  <div class="block-inner clearfix">
                
    <div class="content clearfix">
      <ul class="menu">
	  <li class="first expanded"><a href="../index.html">Home</a>
	  <ul class="menu">
	  </li>
<li class="leaf"><a href="../index.html">Ferret/PyFerret Home</a></li>
</ul></li>
<li class="leaf"><a href="../documentation/ferret-documentation.html">Documentation</a></li>
<li class="leaf"><a href="ferret-faqs.html">FAQ</a></li>
<li class="collapsed"><a href="../documentation/pyferret/downloads.html">Downloads</a></li>
<li class="collapsed"><a href="../documentation/pyferret-support.html">Support</a></li>
</ul>    </div>
  </div>
</div>  </div>
</div>
  </div>
</div></header> 


<!-- ----- this from main index.html, after </div></header>-->

      <section id="section-content" class="section section-content">
  <div id="zone-preface-wrapper" class="zone-wrapper zone-preface-wrapper clearfix">  
  <div id="zone-preface" class="zone zone-preface clearfix equal-height-container container-12">
    <div class="grid-3 region region-preface-first equal-height-element" id="region-preface-first">
  <div class="region-inner region-preface-first-inner">
      </div>
</div><div class="grid-9 region region-preface-second equal-height-element" id="region-preface-second">
  <div class="region-inner region-preface-second-inner">
      </div>
</div>  </div>
</div><div id="zone-content-wrapper" class="zone-wrapper zone-content-wrapper clearfix no-sidebar">  
  <div id="zone-content" class="zone zone-content clearfix equal-height-container container-12">    
        
        <div class="grid-12 region region-content equal-height-element" id="region-content">
  <div class="region-inner region-content-inner">
    <a id="main-content"></a>
            <div class="element-invisible">   
    </div>                    <div class="block block-system block-main block-system-main odd block-without-title" id="block-system-main">
  <div class="block-inner clearfix">
                
    <div class="content clearfix">
      <article about="/Ferret/index.html" typeof="foaf:Document" class="node node-page node-published node-not-promoted node-not-sticky author-burger odd clearfix" id="node-page-771">


<!--   ... from main index.html, -->
<h2 class="block-title"><a href="ferret-faqs.html" class="active-trail">FAQ</a></h2>
<a id="main-content"></a>
<div class="element-invisible">    <h1 class="title" id="page-title">Calling SCAT2GRID functions for DSG data</h1>
</div>                    <div class="block block-system block-main block-system-main odd block-without-title" id="block-system-main">
<div class="block-inner clearfix">
 
<div class="content clearfix">
<article about="/Ferret/faq/calling-scat2grid-functions-dsg-data" typeof="foaf:Document" class="node node-page node-published node-not-promoted node-not-sticky author-ansley odd clearfix" id="node-page-890">

<h1 id="page title"  class="node-title">Calling SCAT2GRID functions for DSG data</h1>  <div class="content clearfix">
 
<div class="field field-name-body field-type-text-with-summary field-label-hidden">
<div class="field-items">
<div class="field-item even" property="content:encoded"><h2>Question:</h2>
<p>I want to use some of the SCAT2GRID functions with my Discrete Sampling Geometries data (DSG data).  But the variables don't have the same dimensions! </p>
<h2>Discussion:</h2>
<p>This FAQ uses a SCAT2GRID_BIN function but the method will work for any of the SCAT2GRID functions, see</p>
<pre>
yes? show function SCAT2GRID*</pre><p align="left"><a href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/data-set-basics/2-8-discrete-geometries-datasets-1">Discrete Sampling Geometries</a> (DSG) data:</p>
<p align="left">Observational data from DSG datasets contain collections of data and coordinate locatinos.  The lists of coordinate information that can feed into the functions for gridding into a multi-dimensional grid.  However, with the exception of trajectory data the coordinates do not all have the same dimensionality.  Timeseries data for instance has a station location for each station, and multiple observations in time.  Profile data has one location and time per stations, and multiple heights/depths in each profile. For the SCAT2GRID functions we need all of the first arguments, the scattered locations and observations, to be of the same size.  We need to expand the station data to repeat the station location for each time in that station's time series.</p>
<p align="left">The function EXPND_BY_LEN does just this.</p>
<pre>
yes? show function expnd_by_len
EXPND_BY_LEN(var,len,nx)
Returns a variable expanded by the lengths given in arg 2
var: 1D variable to expand
len: lengths to expand each element of argument 1
nx: length of result (sum of lengths in arg 2)</pre><p>So, for the example dataset dsg_timeseries_example.nc we'd do this:</p>
<ul><li>Use expnd_by_len to expand longitude and latitude to repeat at each time in the station's timeseries.<br />
	 </li>
<li align="left">Define a grid.  This data is sparse, so the define quite a coarse grid.  Check the time attributes ("show attributes time" for the time variable in the dataset) and use the same time units and time origin in defining a time axis with delta-time of 10 days, in seconds.<br />
	 </li>
<li align="left">Define the gridded variable using a call to SCAT2GRID_BIN_XYT. </li>
</ul><pre align="left">
yes? use dsg_timeseries_example
 
yes? let lat_expnd = expnd_by_len (latitude, rowsize, `rowsize[m=@sum]`)
yes? let lon_expnd = expnd_by_len (longitude, rowsize, `rowsize[m=@sum]`)
 
! Define a grid to put the data into
 
yes? show attributes time
 
yes? define axis/x=0:340:20/units=degrees_east xaxis
yes? define axis/y=-20:20:5/units=degrees_north yaxis
 
yes? define axis/t="15-JAN-2017 12:00":"21-APR-2017 12:00":`10*24*3600`\
/units=seconds/t0=1-jan-1970 taxis
 
 
! Define the regridding, inheriting the units and title from t_25.
 
yes? let/like=t_25 gridded_t25 = scat2grid_bin_xyt(lon_expnd, lat_expnd, time, t_25, x[gx=xaxis], y[gy=yaxis], t[gt=taxis])
 
yes? list/y=0 gridded_t25
VARIABLE : Sea Surface Temperature (degree_C)
FILENAME : dsg_timeseries_example.nc
FILEPATH : /home/users/tmap/ferret/linux/fer_dsets/data/
SUBSET   : 18 by 11 points (LONGITUDE-TIME)
LATITUDE : 0
... listing every   2th point
0E     40E    80E   120E   160E   160W   120W    80W    40W   
1      3      5      7      9     11     13     15     17
15-JAN-2017 12 /  1:  28.16   ....  28.27   ....  30.34  26.46  25.55   ....   ....
25-JAN-2017 12 /  2:  28.59   ....  28.59   ....  30.39  26.66  25.02   ....   ....
04-FEB-2017 12 /  3:  28.76   ....  28.85   ....  30.21  26.58  25.21   ....   ....
14-FEB-2017 12 /  4:  28.41   ....  29.05   ....  30.17  26.77  26.22   ....   ....
24-FEB-2017 12 /  5:  28.81   ....  29.07   ....  30.14  26.88  26.62   ....   ....
06-MAR-2017 12 /  6:  28.77   ....  29.37   ....  29.34  27.29  26.60   ....   ....
16-MAR-2017 12 /  7:  29.41   ....  29.88   ....  29.16  27.42  27.19   ....   ....
26-MAR-2017 12 /  8:  29.37   ....  29.83   ....  29.40  27.34  27.89   ....   ....
05-APR-2017 12 /  9:  29.40   ....  29.69   ....  29.34  27.44  27.96   ....   ....
15-APR-2017 12 / 10:  29.17   ....  29.60   ....  29.43  27.95  27.86   ....   ....
25-APR-2017 12 / 11:  28.81   ....  29.91   ....  29.48  28.01  28.39   ....   ....
 
</pre><p align="left">try these commands:</p>
<pre>
yes? list/x=-150 gridded_t25
 
yes? shade gridded_t25[t=@ave]</pre><p> </p>
</div>
</div>
</div>

</div>

<div class="clearfix">
<nav class="links node-links clearfix"></nav>

</div>
</article>    </div>
</div>
</div>      </div>
</div>  </div>
</div></section>    
 
<footer id="section-footer" class="section section-footer">

  <div id="zone-footer-wrapper" class="zone-wrapper zone-footer-wrapper clearfix">  
  <div id="zone-footer" class="zone zone-footer clearfix container-12">
    <div class="grid-8 region region-footer-first" id="region-footer-first">
  <div class="region-inner region-footer-first-inner">
    <div class="block block-block block-1 block-block-1 odd block-without-title" id="block-block-1">
  <div class="block-inner clearfix">
                
  </div>
</div><div class="block block-block block-2 block-block-2 even block-without-title" id="block-block-2">
  <div class="block-inner clearfix">
                
  </div>
</div><div class="block block-menu block-menu-footer-first-menu block-menu-menu-footer-first-menu odd block-without-title" id="block-menu-menu-footer-first-menu">

  </div>
</div>  </div>
</div><div class="grid-4 region region-footer-second" id="region-footer-second">
  <div class="region-inner region-footer-second-inner">
    <div class="block block-menu block-menu-footer-second-menu block-menu-menu-footer-second-menu odd block-without-title" id="block-menu-menu-footer-second-menu">
  <div class="block-inner clearfix">
                
  </div>
</div>  </div>
</div>  </div>
</div></footer>  </div>  <div class="region region-page-bottom" id="region-page-bottom">
  <div class="region-inner region-page-bottom-inner">
      </div>
</div>  <div id="body-bg-bottom"></div>
</body>
</html>
