<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] R&#45;square problem -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 20 Oct 2009 13:35:37 &#45;0700 -->
<!--X-Message-Id: 4ADE1F01.1090706@noaa.gov -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: C70343C8.15D8%a.rodriguez@uq.edu.au -->
<!--X-Derived: binnHZBOqyfms.bin -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] R-square problem</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00705.html">Thread Prev</a>][<a href="msg00709.html">Thread Next</a>][<A HREF="threads.html#00708">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] R-square problem</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ana Redondo &lt;<a href="mailto:a.rodriguez@DOMAIN.HIDDEN">a.rodriguez@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] R-square problem</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 20 Oct 2009 13:35:13 -0700</li>
<li>Cc: Ferret Usergroup &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="mailto:C70343C8.15D8%25a.rodriguez@DOMAIN.HIDDEN">C70343C8.15D8%a.rodriguez@xxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:C70343C8.15D8%25a.rodriguez@DOMAIN.HIDDEN">C70343C8.15D8%a.rodriguez@xxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Thunderbird 2.0.0.23 (Windows/20090812)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">



Hi everyone,<br>
Ana sent me her data, with P and Q.&nbsp; These are variables that look
quite well correlated but with one being of larger magnitude than the
other. This is causing a loss of numeric accuracy; Ferret only operates
in single-precision, and so the variations in the data of smaller
magnitude are overwhelmed by the larger numbers.<br>
<br>
The result is improved with:<br>
<blockquote><tt>yes? use pq</tt><br>
  <tt>yes? set var/name=q_in q&nbsp; ! I am going to re-define q</tt><br>
  <tt>yes? let q = q_in/100</tt><br>
  <br>
  <tt>yes? go regresst</tt><br>
  <tt>yes? stat rsquared</tt><br>
</blockquote>
<br>
I'm asking some of our data-analysis experts to chime in:&nbsp; What more
can we do to work with this data?&nbsp; I'm attaching the netCDF file.<br>
<blockquote><tt>yes? can data/all; use pq.nc</tt><br>
  <tt>yes? stat p</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VAR_1</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LONGITUDE: 118.8E to 61.2W</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LATITUDE: 36.2S to 16.2N</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Z:&nbsp; N/A</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME: 01-JUN-1958 00:00 to 01-JUN-2002 00:00</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DATA SET: ./pq.nc</tt><br>
  <tt>&nbsp;</tt><br>
  <tt>&nbsp;Total # of data points: 798336 (72*21*1*528)</tt><br>
  <tt>&nbsp;# flagged as bad&nbsp; data: 0</tt><br>
  <tt>&nbsp;Minimum value: 1000</tt><br>
  <tt>&nbsp;Maximum value: 1031.3</tt><br>
  <tt>&nbsp;Mean&nbsp;&nbsp;&nbsp; value: 1012.9 (unweighted average)</tt><br>
  <tt>&nbsp;Standard deviation: 3.723</tt><br>
  <br>
  <tt>yes? stat q</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VAR_2</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LONGITUDE: 118.8E to 58.8W</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LATITUDE: 36.2S to 16.2N</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Z:&nbsp; N/A</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME: 01-JUN-1958 00:00 to 01-JUN-2002 00:00</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DATA SET: ./pq.nc</tt><br>
  <tt>&nbsp;</tt><br>
  <tt>&nbsp;Total # of data points: 809424 (73*21*1*528)</tt><br>
  <tt>&nbsp;# flagged as bad&nbsp; data: 0</tt><br>
  <tt>&nbsp;Minimum value: 100000</tt><br>
  <tt>&nbsp;Maximum value: 103278</tt><br>
  <tt>&nbsp;Mean&nbsp;&nbsp;&nbsp; value: 101288 (unweighted average)</tt><br>
  <tt>&nbsp;Standard deviation: 394.51</tt><br>
  <br>
  <tt>yes? set var/name=q_in q</tt><br>
  <tt>yes? let q = q_in/100</tt><br>
  <tt>yes? go regresst</tt><br>
  <tt>...</tt><br>
  <tt>yes? stat rsquare</tt><br>
  <tt>&nbsp;</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (PQVAR*PQVAR) / (PVAR*QVAR)</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LONGITUDE: 118.8E to 61.2W</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LATITUDE: 36.2S to 16.2N</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Z:&nbsp; N/A</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME: 01-JUN-1958 00:00 to 01-JUN-2002 00:00</tt><br>
  <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DATA SET: ./pq.nc</tt><br>
  <tt>&nbsp;</tt><br>
  <tt>&nbsp;Total # of data points: 1512 (72*21*1*1)</tt><br>
  <tt>&nbsp;# flagged as bad&nbsp; data: 0</tt><br>
  <tt>&nbsp;Minimum value: 0.27778</tt><br>
  <tt>&nbsp;Maximum value: 1.0833</tt><br>
  <tt>&nbsp;Mean&nbsp;&nbsp;&nbsp; value: 0.8884 (unweighted average)</tt><br>
  <tt>&nbsp;Standard deviation: 0.1003</tt><br>
</blockquote>
<br>
<br>
<br>
Ana Redondo wrote:
<blockquote cite="" type="cite">
  <title>Re: [ferret_users] R-square problem</title>
  <font face="Calibri, Verdana, Helvetica, Arial"><span
 style="font-size: 11pt;">Hi Ansley,<br>
  <br>
I am attaching you the file with the data<br>
Thank you very much!!<br>
Ana<br>
  <br>
  <br>
On 20/10/09 10:30 AM, "Ansley Manke" &lt;<a rel="nofollow" moz-do-not-send="true"
 href="Ansley.B.Manke@xxxxxxxx">Ansley.B.Manke@xxxxxxxx</a>&gt; wrote:<br>
  <br>
  </span></font>
  <blockquote><font face="Calibri, Verdana, Helvetica, Arial"><span
 style="font-size: 11pt;">Hi Ana,<br>
Would it be possible for you to send me the data you are using? &nbsp;If you
do the following in Ferret, then you will produce a file that I should
be able to test this with:<br>
    <br>
    </span></font><span style="font-size: 11pt;"><font
 face="Times New Roman"> yes? Let P=var_1<br>
&nbsp;&nbsp;yes? Let Q=var_2<br>
&nbsp;&nbsp;yes? save/file=pq.nc p,q<br>
    <br>
and then just attach the netcdf file to an email. &nbsp;This is not a large
amount of data, and these files email just fine. &nbsp;We can figure out
what's happening and then report back to the Ferret group.<br>
    <br>
I'm at the end of my day, and I see you're in Australia. This is always
the hard part about working with others around the world, but maybe
within another day we can get this figured out!<br>
    <br>
Ansley<br>
    </font><font face="Calibri, Verdana, Helvetica, Arial"><br>
    <br>
    <br>
Ana Redondo wrote: <br>
    </font></span>
    <blockquote><span style="font-size: 11pt;"><font
 face="Calibri, Verdana, Helvetica, Arial"> Re: [ferret_users] R-square
problem Hi Ansley,<br>
&nbsp;<br>
Yes the values of Rsquare are larger than 1:<br>
&nbsp;<br>
&nbsp;<br>
yes? stat rsquare<br>
&nbsp;Total # of data points: 1512 (72*21*1*1)<br>
&nbsp;# flagged as bad &nbsp;data: 0<br>
&nbsp;Minimum value: 0.34722<br>
&nbsp;<b> Maximum value: 1.2<br>
&nbsp;</b> Mean &nbsp;&nbsp;&nbsp;value: 0.89056 (unweighted average)<br>
&nbsp;Standard deviation: 0.10312<br>
&nbsp;<br>
Any ideas??<br>
&nbsp;<br>
Thanks<br>
&nbsp;<br>
Ana<br>
&nbsp;<br>
&nbsp;<br>
On 20/10/09 2:16 AM, "Ansley Manke" &lt;<a rel="nofollow" moz-do-not-send="true"
 href="Ansley.B.Manke@xxxxxxxx">Ansley.B.Manke@xxxxxxxx</a>&gt; wrote:<br>
&nbsp;<br>
&nbsp;&nbsp;<br>
      </font></span>
      <blockquote><span style="font-size: 11pt;"><font
 face="Calibri, Verdana, Helvetica, Arial">Hi Ana,<br>
Yes, the values of rsquare should be between 0 and 1. &nbsp;&nbsp;If you look at
the result of<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;</font></span><font size="2"><font
 face="Consolas, Courier New, Courier"><span style="font-size: 10pt;">yes?
STAT rsquare<br>
&nbsp;<br>
        </span></font></font><font
 face="Calibri, Verdana, Helvetica, Arial"><span
 style="font-size: 11pt;">are the values really larger than 1? &nbsp;I
wonder if the automatically chosen color fill levels in the FILL
command are making the color bar extend higher than 1 even though the
values of the data field are not actually larger than 1.<br>
&nbsp;<br>
Another possibility is that the accuracy of numeric calculations is
putting values slightly larger than 1. &nbsp;Here too the STAT command might
tell us more.<br>
&nbsp;<br>
Ansley<br>
&nbsp;<br>
&nbsp;<br>
Ana Redondo wrote: <br>
&nbsp;&nbsp;<br>
        </span></font>
        <blockquote><font face="Calibri, Verdana, Helvetica, Arial"><span
 style="font-size: 11pt;"> R-square problem Hi,<br>
&nbsp;<br>
I am doing a linear regression between two independent variables in
order to find out the R-square. This is how I am doing it:<br>
&nbsp;&nbsp;yes? Let P=var_1<br>
&nbsp;&nbsp;yes? Let Q=var_2<br>
&nbsp;&nbsp;yes? Go regresst<br>
&nbsp;&nbsp;yes? show var<br>
&nbsp;&nbsp;yes? fill rsquare<br>
&nbsp;<br>
But when filling the R-square (and I also list some values to test) I
realized that some values are greater than 1!!!!!!!! &nbsp;Isn&#8217;t it R-square
the coefficient of determination? If so it should be 0&lt;R^2&lt;1,
what I am doing wrong???<br>
&nbsp;<br>
&nbsp;<br>
Thanks<br>
&nbsp;<br>
Ana <br>
&nbsp;<br>
          </span></font></blockquote>
        <font face="Calibri, Verdana, Helvetica, Arial"><span
 style="font-size: 11pt;"> <br>
&nbsp;<br>
        </span></font></blockquote>
    </blockquote>
    <font face="Calibri, Verdana, Helvetica, Arial"><span
 style="font-size: 11pt;"><br>
    </span></font></blockquote>
</blockquote>


</font></td></tr></table><p><strong>Attachment:
<a href="binnHZBOqyfms.bin" ><tt>pq.nc</tt></a></strong><br>
<em>Description:</em> Binary data</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00730" href="msg00730.html">[ferret_users] Subsample in time</a></strong>
<ul><li><em>From:</em> Ge Peng</li></ul></li>
<li><strong><a name="00709" href="msg00709.html">Re: [ferret_users] R-square problem</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00705.html">Re: [ferret_users] R-square problem</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00709.html">Re: [ferret_users] R-square problem</a></strong>
</li>

</UL>
<center>[<a href="msg00705.html">Thread Prev</a>][<a href="msg00709.html">Thread Next</a>][<A HREF="threads.html#00708">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
