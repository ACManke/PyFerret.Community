<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Regridding 20 year time axis -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 12 Jan 2009 09:32:38 &#45;0800 -->
<!--X-Message-Id: 496B7EB5.90503@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 7BECBBF5&#45;F271&#45;4F0A&#45;A869&#45;BEA9BD66FB49@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Regridding 20 year time axis</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00017.html">Thread Prev</a>][<a href="msg00019.html">Thread Next</a>][<A HREF="threads.html#00018">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Regridding 20 year time axis</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Paul Young &lt;<a href="mailto:Paul.J.Young@DOMAIN.HIDDEN">Paul.J.Young@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Regridding 20 year time axis</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 12 Jan 2009 09:32:37 -0800</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="mailto:7BECBBF5-F271-4F0A-A869-BEA9BD66FB49@DOMAIN.HIDDEN">7BECBBF5-F271-4F0A-A869-BEA9BD66FB49@xxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:7BECBBF5-F271-4F0A-A869-BEA9BD66FB49@DOMAIN.HIDDEN">7BECBBF5-F271-4F0A-A869-BEA9BD66FB49@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Thunderbird 2.0.0.19 (Windows/20081209)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">



Hi Paul,<br>
I think best answer for you is to define the axis in Ferret. You want
the true mid-month values for a NOLEAP calendar? You can define the
calendar using values at the start/ends of months but use the /EDGES
qualifier to indicate that the values you're specifying are the cell
edges rather than the coordinates.<br>
<br>
There's an example under "DEFINE AXIS; /EDGES" in the Users Guide. All
you'll&nbsp; need to do is add the calendar type that you want:<br>
<pre id="line1242"><span class="attribute-value"><a rel="nofollow" class="moz-txt-link-freetext" href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/DEFINE#_VPINDEXENTRY_1310">http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/DEFINE#_VPINDEXENTRY_1310</a></span></pre>
<br>
Ansley<br>
<br>
Paul Young wrote:
<blockquote cite=""
 type="cite">
  <div><font class="Apple-style-span" face="Courier">Dear ferret users,</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">I am having
problems regridding the time axis of a 20 year time series of monthly
mean model output. Here's what I am doing:</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier"><span
 class="Apple-tab-span" style="white-space: pre;"> </span>yes? use
my_Z_data_20yr.nc<br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">!Read in data containing
Julian day values for 20 years on a "noleap" calendar&nbsp;<span
 class="Apple-style-span" style="font-family: Helvetica;"><span
 class="Apple-tab-span" style="white-space: pre;"></span></span></font></div>
  <div><font class="Apple-style-span" face="Courier"><span
 class="Apple-style-span" style="font-family: Helvetica;"><span
 class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">yes?&nbsp;file/variable=jday/columns=12/type=numeric
"20year_axis.dat"&nbsp;</font></span></font></div>
  <div><font class="Apple-style-span" face="Courier"><span
 class="Apple-style-span" style="white-space: pre;"><span
 class="Apple-tab-span" style="white-space: pre;"> </span><br>
  </span></font></div>
  <div><font class="Apple-style-span" face="Courier"><span
 class="Apple-style-span" style="white-space: pre;"><span
 class="Apple-tab-span" style="white-space: pre;"> </span>!Define new
time axis<br>
  </span></font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">yes?&nbsp;define
axis/t0=31-Dec-2000/from_data/units=days/calendar=noleap tax_jday=tjday</font></div>
  <div><br>
  </div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">!Regrid original variable to
tax_jday<br>
  </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">yes?&nbsp;let new_var =
old_var[gt=tax_jday@asn]</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">!Save new variable
(using&nbsp;Jaison Kurian's memory tricks)</font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">yes?&nbsp;let l_start =
`new_var,r=lstart`&nbsp;</font></div>
  <div><font class="Apple-style-span" face="Courier">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;yes? let
l_end = `new_var,r=lend`&nbsp;</font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">yes?&nbsp;let slices = l_end -
l_start + 1&nbsp;</font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">yes?&nbsp;REPEAT/L=`l_start`:`l_end`:1
(;\&nbsp; </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">save/file="my_outfile.nc"/append/quiet
new_var ; \</font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">say " Time slice
`(L-l_start+1)`/`slices`" ;\&nbsp; </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">)</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">I then get the
following error message:</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">!-&gt; REPEAT: L=1&nbsp; </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">**TMAP ERR: error in line
definition&nbsp; </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">disordered output coordinate
value: 15.500 Axis: TAX&nbsp;</font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">LIST/FORMAT=CDF/file="my_outfile.nc"/append/quiet
new_var</font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">Command file, command group,
or REPEAT execution aborted</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">(I'm guessing TAX
is a truncation of tax_jday?).&nbsp;</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">Just to confirm
that the old and new time axes are of the same size:</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">yes? show axis time&nbsp; </font></div>
  <div><span class="Apple-tab-span" style="white-space: pre;"><font
 class="Apple-style-span" face="Courier"> </font></span><font
 class="Apple-style-span" face="Courier">name <span
 class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp;&nbsp;axis <span
 class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp;&nbsp;# pts &nbsp; &nbsp;
&nbsp;start <span class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp;&nbsp;end&nbsp;
  </font></div>
  <div><font class="Apple-style-span" face="Courier"><span
 class="Apple-tab-span" style="white-space: pre;"> </span>TIME <span
 class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp;&nbsp;TIME <span
 class="Apple-tab-span" style="white-space: pre;"> </span>&nbsp;&nbsp;240 i &nbsp; &nbsp;
&nbsp;01-FEB-2001 00:00 <span class="Apple-tab-span"
 style="white-space: pre;"> </span>&nbsp;&nbsp;01-JAN-2021 00:00&nbsp;</font></div>
  <div><font class="Apple-style-span" face="Courier"><span
 class="Apple-tab-span" style="white-space: pre;"> </span>T0 =
01-SEP-2000 00:00:00&nbsp;</font></div>
  <div><font class="Apple-style-span" face="Courier"><span
 class="Apple-tab-span" style="white-space: pre;"> </span>CALENDAR =
NOLEAP&nbsp; </font></div>
  <div><font class="Apple-style-span" face="Courier"><span
 class="Apple-tab-span" style="white-space: pre;"> </span>Axis span
(to cell edges) = 7300</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">
  <div><span class="Apple-tab-span" style="white-space: pre;"> </span>yes?
show axis tax_jday</div>
  <div>&nbsp;<span class="Apple-tab-span" style="white-space: pre;"> </span>name
&nbsp; &nbsp; &nbsp;axis &nbsp; &nbsp;# pts &nbsp; &nbsp; &nbsp;start &nbsp;<span class="Apple-tab-span"
 style="white-space: pre;"> </span>&nbsp;&nbsp;end</div>
  <div>&nbsp;&nbsp; <span class="Apple-tab-span" style="white-space: pre;"> </span>TAX_JDAY
&nbsp;TIME &nbsp; &nbsp;240 i &nbsp; &nbsp; &nbsp;15-JAN-2001 12:00 &nbsp; &nbsp;15-DEC-2020 12:00</div>
  <div><span class="Apple-tab-span" style="white-space: pre;"> </span>T0
= 31-DEC-2000</div>
  <div><span class="Apple-tab-span" style="white-space: pre;"> </span>CALENDAR
= NOLEAP</div>
  <div>&nbsp;&nbsp; <span class="Apple-tab-span" style="white-space: pre;"> </span>Axis
span (to cell edges) = 7299</div>
  <div><br>
  </div>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">A related
question: Is there a way to generate tax_jday in ferret, rather than
read it in? I thought about adding multiples of 365 to an array of mid
month, Julian day values (midmonth = {15.5, 45.0, 74.5, 105.0, 135.5,
166.0, 196.5, 227.5, 258.0, 288.5, 319.0, 349.5}) to get the 240
element array, but I couldn't think how to do it in ferret. Is it
possible to concatenate user defined arrays into one variable (e.g.
like let big_array={array1,array2,....,arrayN})? I don't have XCAT etc
on my version of ferret, though I guess that might be the solution....</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">Thanks for any
help,</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">Paul</font></div>
  <font class="Apple-style-span" face="Courier"><br>
  </font>
  <div apple-content-edited="true"> <span class="Apple-style-span"
 style="border-collapse: separate; color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">
  <div style=""><span class="Apple-style-span"
 style="border-collapse: separate; color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">
  <div style=""><span class="Apple-style-span"
 style="border-collapse: separate; color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">
  <div style=""><span class="Apple-style-span"
 style="border-collapse: separate; color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">
  <div style=""><span class="Apple-style-span"
 style="border-collapse: separate; color: rgb(0, 0, 0); font-size: 12px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; line-height: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px;">
  <div><font class="Apple-style-span" face="Courier"><br
 class="Apple-interchange-newline">
-----</font></div>
  <div><font class="Apple-style-span" face="Courier">Paul Young</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">Chemistry and
Climate Processes</font></div>
  <div><font class="Apple-style-span" face="Courier">Chemical Sciences
Division</font></div>
  <div><font class="Apple-style-span" face="Courier">NOAA&nbsp;Earth System
Research Laboratory</font></div>
  <div><font class="Apple-style-span" face="Courier">325 Broadway R/CSD8</font></div>
  <div><font class="Apple-style-span" face="Courier">Boulder&nbsp;CO
80305-3328</font></div>
  <div><font class="Apple-style-span" face="Courier">USA</font></div>
  <div><font class="Apple-style-span" face="Courier"><br>
  </font></div>
  <div><font class="Apple-style-span" face="Courier">Tel: &nbsp; +1
303-497-4943</font></div>
  <div><font class="Apple-style-span" face="Courier">Fax: &nbsp; +1
303-497-5686</font></div>
  <div><font class="Apple-style-span" face="Courier">Email: <a rel="nofollow"
 moz-do-not-send="true" href="mailto:paul.j.young@xxxxxxxx">paul.j.young@xxxxxxxx</a></font></div>
  <div><font class="Apple-style-span" face="Courier">Web: &nbsp; <a rel="nofollow"
 moz-do-not-send="true" href="http://www.esrl.noaa.gov/csd/">http://www.esrl.noaa.gov/csd/</a></font></div>
  </span></div>
  </span></div>
  </span></div>
  </span></div>
  </span><font class="Apple-style-span" face="Courier"> </font></div>
  <br>
</blockquote>


</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00015" href="msg00015.html">[ferret_users] Regridding 20 year time axis</a></strong>
<ul><li><em>From:</em> Paul Young</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00017.html">Re: [ferret_users] Regridding 20 year time axis</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00019.html">[ferret_users] shifted longitude problem with scat2gridgauss_xy</a></strong>
</li>

</UL>
<center>[<a href="msg00017.html">Thread Prev</a>][<a href="msg00019.html">Thread Next</a>][<A HREF="threads.html#00018">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
