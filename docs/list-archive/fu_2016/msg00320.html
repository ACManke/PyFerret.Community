<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Question about sampleij ,sample_cloest and rep -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Thu, 23 Jun 2016 12:01:51 &#45;0700 -->
<!--X-Message-Id: 34866ba3&#45;10c9&#45;ddd2&#45;fd7d&#45;48743a48a259@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: B8827FF7&#45;780D&#45;4581&#45;A865&#45;B33912C90013@geomar.de -->
<!--X-Derived: pngimHPq1p8Xi.png -->
<!--X-Derived: pngK0ngQLaByu.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Question about sampleij ,sample_cloest and rep</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00319.html">Thread Prev</a>][<a href="msg00321.html">Thread Next</a>][<A HREF="threads.html#00320">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Question about sampleij ,sample_cloest and rep</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Question about sampleij ,sample_cloest and rep</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 23 Jun 2016 12:01:47 -0700</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive         :list-unsubscribe;        bh=eD6906NWaAoG4SFzuFD3h5R0N5gJr6PJhEPXVKQgaXE=;        b=vnXsyPXXTPIbgSk7fGAfrDAE7huA2ORbvbKLfkQzSLYHqLhtLWbUqB5+gVU3IqE48u         txaUR212iZMe7RzXKnZYmgqSiED6sfTPcnG/VTZqe7YwIucOzCIH53B1jBWTp4oC9hOb         0Ru9ey7qkpaFDnr4MMxEBoaZGzHPi3RFkyyWK1kF+nxB4Mfg/qdgngsWQpEBpRG9XuIj         WdqDQ0whfputEF/G/TPDvwQ0Fb+v68PXzl1/EvBNOhMEeAf5tE6UuR8duSxDk4z1fsZ1         SmYNBM7eDdAmiq6p2EhDaX2NR0vvylKLUpuBmIEleDZ8oYTm45KWCXW+K/yKe+Tirqka         B5AA==</li>
<li>In-reply-to: &lt;<a href="msg00319.html">B8827FF7-780D-4581-A865-B33912C90013@geomar.de</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00319.html">B8827FF7-780D-4581-A865-B33912C90013@geomar.de</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:45.0) Gecko/20100101 Thunderbird/45.1.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <p>Hi Ben,</p>
    <p>Thank you for writing and including such a complete description.&#xA0;
      This will take some study. On a quick reading of this, I don't see
      anything wrong with what you have done.&#xA0; <br>
    </p>
    <p>-Ansley<br>
    </p>
    <br>
    <div class="moz-cite-prefix">On 6/23/2016 10:38 AM, Wanxuan Yao
      wrote:<br>
    </div>
    <blockquote
      cite=""
      type="cite">Dear Ferret users,<br class="">
      <br class="">
      I am a new ferret user and try to plot the model output among the
      cruise line (to create a vertical section plot). But there seems
      to be a few&#xA0;complications.<br class="">
      Could anyone help me to find out where did I do wrong? (Q1~Q)<br
        class="">
      <br class="">
      <br class="">
      my code:<br class="">
      let x_varC=samplexy(o_dfe[d=1,l=3],order_x,order_y)<br class="">
      define axis/y/name=yax_sect/from_data/units=degrees_north order_Y<br
        class="">
      let y_profile=reshape(x_varC,Y[gy=yax_sec]]+Z[gz=o_dfe[d=1]])<br
        class="">
      sha y_profile&#xA0;<br class="">
      and there is the plot i got(below left), I was happy,
      but&#x2026;.oh&#x2026;wait&#x2026;. after I plot the cruise data overlaying my plot, i
      found out that the samplexy function&#xA0;did not sample to the whole
      depth of the model output(below right).<br class="">
      <img apple-inline="yes" id="7FFCB59E-57DB-42A9-8B84-32E4DDCC012A"
        apple-width="yes" apple-height="yes"
        src="pngimHPq1p8Xi.png" class="" height="206"
        width="320"><img apple-inline="yes"
        id="3A7F5441-E9CA-41C7-89BF-65F74B1D6FD8" apple-width="yes"
        apple-height="yes" src="pngK0ngQLaByu.png"
        class="" height="233" width="320"><br class="">
      so i check the model depth setting and found out that when i use
      the following code, ferret does reach to the deepest point, but
      samplexy doesn&#x2019;t:<br class="">
      <span class="">yes? List
        o_dfe[d=1,l=3,x=`order_x[i=1]`,y=`order_y[i=1]`],x_varC[i=1]<br
          class="">
      </span><span class=""></span><span class="">&#xA0;!-&gt;
        List&#xA0;o_dfe[d=1,l=3,x=307.3118896484375,y=-49.54719924926758],x_varC[i=1]<br
          class="">
      </span><span class=""></span><span class="">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;DATA SET:
        ./tavg.01201.01.31.nc<br class="">
      </span><span class=""></span><span class="">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;DEPTH
        (m): 0 to 6080<br class="">
      </span><span class=""></span><span class="">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE:
        49.5S<br class="">
      </span><span class=""></span><span class="">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;TIME:
        17-MAR-1201 00:00 NOLEAP<br class="">
      </span><span class=""></span><span class="">&#xA0;Column&#xA0;&#xA0;1:
        O_DFE[X=52.2W(307.8)] is O_dfe (mol Fe m-3)<br class="">
      </span><span class=""></span><span class="">&#xA0;Column&#xA0;&#xA0;2:
        X_VARC[X=1]
        is&#xA0;SAMPLEXY(O_DFE[D=tavg.01201.01.31,L=3:7@AVE],ORDER_X,ORDER_Y)<br
          class="">
      </span><span class=""></span><span class="">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;
        &#xA0;&#xA0;O_DFE&#xA0; &#xA0;&#xA0;X_VARC<br class="">
      </span><span class=""></span><span class="">17.5&#xA0;
        &#xA0;&#xA0;/&#xA0;&#xA0;1:&#xA0;&#xA0;1.514E-07&#xA0;&#xA0;1.779E-07<br class="">
      </span><span class=""></span><span class="">82.5&#xA0;
        &#xA0;&#xA0;/&#xA0;&#xA0;2:&#xA0;&#xA0;3.811E-07&#xA0;&#xA0;3.939E-07<br class="">
      </span><span class=""></span><span class="">177.5&#xA0;&#xA0;&#xA0;/&#xA0;&#xA0;3:&#xA0;&#xA0;4.923E-07&#xA0;&#xA0;4.972E-07<br
          class="">
      </span><span class=""></span><span class="">302.5&#xA0;&#xA0;&#xA0;/&#xA0;&#xA0;4:&#xA0;&#xA0;5.087E-07&#xA0;&#xA0;5.103E-07<br
          class="">
      </span><span class=""></span><span class="">457.5&#xA0;&#xA0;&#xA0;/&#xA0;&#xA0;5:&#xA0;&#xA0;5.271E-07&#xA0;&#xA0;5.234E-07<br
          class="">
      </span><span class=""></span><span class="">642.5&#xA0;&#xA0;&#xA0;/&#xA0;&#xA0;6:&#xA0;&#xA0;5.393E-07&#xA0;&#xA0;5.349E-07<br
          class="">
      </span><span class=""></span><span class="">857.5&#xA0;&#xA0;&#xA0;/&#xA0;&#xA0;7:&#xA0;&#xA0;5.427E-07&#xA0;&#xA0;5.416E-07<br
          class="">
      </span><span class=""></span><span class="">1102.5&#xA0;&#xA0;/&#xA0;&#xA0;8:&#xA0;&#xA0;5.432E-07&#xA0;&#xA0;5.438E-07<br
          class="">
      </span><span class=""></span><span class="">1377.5&#xA0;&#xA0;/&#xA0;&#xA0;9:&#xA0;&#xA0;5.436E-07&#xA0;&#xA0;
        &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">1682.5&#xA0;&#xA0;/
        10:&#xA0;&#xA0;5.499E-07&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">2017.5&#xA0;&#xA0;/
        11:&#xA0;&#xA0;5.570E-07&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">2382.5&#xA0;&#xA0;/
        12:&#xA0;&#xA0;5.625E-07&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">2777.5&#xA0;&#xA0;/ 13:&#xA0;&#xA0; &#xA0;
        &#xA0;&#xA0;....&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">3202.5&#xA0;&#xA0;/ 14:&#xA0;&#xA0; &#xA0;
        &#xA0;&#xA0;....&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">3657.5&#xA0;&#xA0;/ 15:&#xA0;&#xA0; &#xA0;
        &#xA0;&#xA0;....&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">4142.5&#xA0;&#xA0;/ 16:&#xA0;&#xA0; &#xA0;
        &#xA0;&#xA0;....&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">4657.5&#xA0;&#xA0;/ 17:&#xA0;&#xA0; &#xA0;
        &#xA0;&#xA0;....&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">5202.5&#xA0;&#xA0;/ 18:&#xA0;&#xA0; &#xA0;
        &#xA0;&#xA0;....&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;....<br class="">
      </span><span class=""></span><span class="">5777.5&#xA0;&#xA0;/ 19:&#xA0;&#xA0; &#xA0;
        &#xA0;&#xA0;....&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;&#x2026;.</span>
      <div class=""><span class=""><br class="">
        </span></div>
      <div class=""><span class="">Q1:I suspect it is due to the spatial
          interpolation? who knows why?</span></div>
      <div class=""><span class=""><br class="">
        </span></div>
      <div class=""><span class="">to work around it, I
          use&#xA0;simplex_closest instead, but&#xA0;there is an error message
          that i&#xA0;don&#x2019;t understand:</span></div>
      <div class=""><span class=""><br class="">
        </span></div>
      <span class="">yes? let
        x_varC=samplexy_closest(o_dfe[d=1,l=3],order_x,order_y)<br
          class="">
      </span><span class="">yes? stat x_varC<br class="">
      </span><span class=""><br class="">
      </span><span class="">Bailing out of external function
        "samplexy_closest":<br class="">
      </span><span class=""><span class="Apple-tab-span" style="white-space:pre">	</span>cannot
        handle MODULO axis that is not regular<br class="">
      </span><span class="">&#xA0;**ERROR: error in external function&#xA0;</span>
      <div class="">yes? stat o_dfe[d=1,l=3]<br class="">
        &#xA0;<br class="">
        &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;O_dfe<br class="">
        &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LONGITUDE: 0E(0) to 0E(360)<br class="">
        &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE: 90S to 90N<br class="">
        &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;DEPTH (m): 0 to 6080<br class="">
        &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;TIME: 17-MAR-1201 00:00 NOLEAP<br class="">
        &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;E:&#xA0;&#xA0;N/A<br class="">
        &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;F:&#xA0;&#xA0;N/A<br class="">
        &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;DATA SET: ./tavg.01201.01.31.nc<br class="">
        &#xA0;<br class="">
        &#xA0;Total # of data points: 190000 (100*100*19*1*1*1)<br class="">
        &#xA0;# flagged as bad&#xA0;&#xA0;data: 102693<br class="">
        &#xA0;Minimum value: 4.482837E-09<br class="">
        &#xA0;Maximum value: 0.000015577<br class="">
        &#xA0;Mean&#xA0; &#xA0;&#xA0;value: 5.929552E-07 (unweighted average)<br class="">
        &#xA0;Standard deviation: 2.776047E-07<br class="">
      </div>
      <div class=""><br class="">
      </div>
      <div class=""><br class="">
        <div class=""><br class="">
        </div>
        <div class=""><span class="">I tried to redefine the x axis of
            the data, by applying the exact axis that my data has:</span></div>
        <div class=""><span class="">
            <div class="">define axis/x=1.8:360:3.6 xreg</div>
            <div class="">let o_dfe_gx=o_dfe[d=1,l=3,gx=xreg]</div>
            <div class="">let
              x_varC=samplexy_closest(o_dfe_gx,order_x,order_y)</div>
            <div class=""><br class="">
            </div>
            <div class="">Q2: it works better, however, some of the
              deepest box are still missing. When i redefine the Y axis,
              a whole section of the data won&#x2019;t show up in the
              x_varC.why?</div>
            <div class=""><br class="">
            </div>
            <div class="">It seems to me that only the &#x201C;list&#x201D; could find
              the real closest grid and accesses the deepest box,so I
              ask ferret to write all the point into one file and try to
              use it as a new variable.</div>
            <div class=""><br class="">
            </div>
            <div class="">list/nohead/norowlab/file=odef.dat/append
              o_dfe[d=1,l=3,x=`order_x[i=1]`,y=`order_y[i=1]`]</div>
            <div class="">&#x2026;</div>
            <div class="">list/nohead/norowlab/file=odef.dat/append
              o_dfe[d=1,l=3,x=`order_x[i=57]`,y=`order_y[i=57]`]</div>
            <div class=""><br class="">
            </div>
            <div class="">Q3: is there a better way to do this, instead
              of 57 lines of code? I tried to use &#x201C;rep&#x201D;:</div>
            <div class="">rep/x=1:57
              list/nohead/norowlab/file=odfe.dat/append
              o_dfe[d=1,l=3,x=`order_x[i=`x`@din]`,y=`order_y[i=`x`@din]`]&#xA0;</div>
            <div class="">but it doesn&#x2019;t work. what did i do wrong?</div>
            <div class=""><br class="">
            </div>
            <div class="">Q4: i am also open to criticism about how to
              do this in a better way :)</div>
            <div class=""><br class="">
            </div>
            <div class="">thanks in advance:)</div>
            <div class="">Ben</div>
            <div class=""><br class="">
            </div>
            <div class=""><br class="">
            </div>
            <div class="">P.S.:</div>
            <div class=""><br class="">
            </div>
          </span></div>
        <div class=""><span class="">My working environment: Ferret ver
            6.94, Macbook pro,<br class="">
            Model : UVic earth system climate model 2.9<br class="">
            <br class="">
            <br class="">
            My cruise line coordinations:<br class="">
            <br class="">
            yes? list order_x[i=1:57],order_y[i=1:57]<br class="">
            &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;X: 0.5 to 5.5<br class="">
            &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;ORDER_X&#xA0;&#xA0;ORDER_Y<br class="">
            1&#xA0;&#xA0;&#xA0;/ 1:&#xA0;&#xA0;&#xA0;307.3&#xA0;&#xA0;-49.55<br class="">
            2&#xA0;&#xA0;&#xA0;/ 2:&#xA0;&#xA0;&#xA0;311.3&#xA0;&#xA0;-48.89<br class="">
            3&#xA0;&#xA0;&#xA0;/ 3:&#xA0;&#xA0;&#xA0;312.8&#xA0;&#xA0;-46.92<br class="">
            4&#xA0;&#xA0;&#xA0;/ 4:&#xA0;&#xA0;&#xA0;314.5&#xA0;&#xA0;-44.71<br class="">
            5&#xA0;&#xA0;&#xA0;/ 5:&#xA0;&#xA0;&#xA0;316.0&#xA0; -42.37<br class="">
            ...<br class="">
            <br class="">
            <br class="">
            <div class=""><br class="">
              <br class="">
            </div>
            <br class="">
          </span></div>
      </div>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00319" href="msg00319.html">[ferret_users] Question about sampleij ,sample_cloest and rep</a></strong>
<ul><li><em>From:</em> Wanxuan Yao</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00319.html">[ferret_users] Question about sampleij ,sample_cloest and rep</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00321.html">Re: [ferret_users] Question about sampleij ,sample_cloest and rep</a></strong>
</li>

</UL>
<center>[<a href="msg00319.html">Thread Prev</a>][<a href="msg00321.html">Thread Next</a>][<A HREF="threads.html#00320">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
