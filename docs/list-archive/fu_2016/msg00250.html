<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] replace fillvalue with NaN ? -->
<!--X-From-R13: Dlb Thehr <shehrNunjnvv.rqh> -->
<!--X-Date: Wed, 20 Apr 2016 19:39:42 &#45;0700 -->
<!--X-Message-Id: CAEwQpa+W9&#45;+O9cE7L7&#45;pmP6pjsTQQtA_jXET+oypwLc&#45;XQwFzA@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAEwQpaK34Ns6zVX2B+6&#45;SVyiiAGBCxsLjL0ai&#45;yTAEyH0DhpWA@mail.gmail.com -->
<!--X-Reference: 57180292.4000800@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] replace fillvalue with NaN ?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00248.html">Thread Prev</a>][<a href="msg00245.html">Thread Next</a>][<A HREF="threads.html#00250">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] replace fillvalue with NaN ?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] replace fillvalue with NaN ?</strong></li>
<li><strong>From</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 21 Apr 2016 11:39:41 +0900</li>
<li>Cc: ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=mime-version:in-reply-to:references:date:message-id:subject:from:to         :cc:x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive         :list-unsubscribe;        bh=631w2r4rNsSoXKMcr3rSid4SLWj7A/KCrTsWIDjPS0s=;        b=IAH/EEhCXcYJZCyiTy7lQ8pEOoG4SigNxJc9yzFeNEHel3XndXoF7rHJ2haAbWyLxU         lqfTJrV+mI5Ju+E/BQXqVl9fSMVPQoGdXeuiJdLwzr1qct+9NHPcK9OzjCPUNC/AuEHw         +bkY16jG+pXTYLP5wP+sngl/RaMAWll2/MiOAcylE+PCR4Isfq2P7jw4oipTXoSPusqV         5z3pAVWYtGgFEHdknYdFMTbWDd64gCORqM5gkyC4bOEhDU+Bq+7L0JRmXYH117sOEBju         c5sKc2q1jEhgbH2I37Bs31x3E1ticM2oEL10kl7RprQ1pNE35CooQrlvtkxMmx1g/2bL         UQow==</li>
<li>In-reply-to: &lt;<a href="msg00248.html">57180292.4000800@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00243.html">CAEwQpaK34Ns6zVX2B+6-SVyiiAGBCxsLjL0ai-yTAEyH0DhpWA@mail.gmail.com</a>&gt;	&lt;<a href="msg00248.html">57180292.4000800@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Ansley,

&gt; Ferret does not generate Nan's. A 0/0 will be replaced with the default
&gt; missing-data flag of -1.e34.
&gt;
&gt; For a netCDF file which has NaN as the missing-data flag, Ferret notes that
&gt; and applies code to internally replace the NaN's with that flag.  In
&gt; addition a number of files use NaN as the fill but don't set a missing_value
&gt; or _FillValue flag, and Ferret handles those in the same way.

Thank you for the detailed explanation.  Now what I observed makes
perfect sense.

&gt; Ideally we would do the reverse and write NaN's to the file on output when
&gt; requested, [. . .]

That would be a nice future extension.  I guess the extension would
boil down to this single capability: the ability to &quot;truly&quot; set the
missing-data flag to NaN .

If we &quot;truly&quot; set it to NaN, a 0/0 will be replaced with the current
missing-data flag, which is NaN; NaN values in the input file will be
replaced with the current missing-data flag, which is NaN ! ; NaN
values will be written into output files as the missing-data flag;
etc.  --- All will be consistent.  (I'm not saying that you should
implement the feature internally like this.  If the user cannot see
the difference, it doesn't matter.)

In passing, I started this discussion of NaN because I've started to
use NaN's in my Fortran programs.  NaN's are helpful to detect your
programming error, and they are now much more usable than before.
Most Fortran compilers now support the standardized capability of
handling NaN's (and other standard IEEE-floating-point stuff), which
means you don't have to rely on the non-standard function isnan() to
detect NaN's or the hack &quot;0/0&quot; to generate a NaN.  Another piece of
good news is that Fortran compilers now support again the standardized
capability of procedure pointer, which would enable you to define your
own &quot;is_missing()&quot; function, which would normally point to a function
that compares its argument with the missing-data flag but would be
made to point to an is_nan() function when the missing-data flag is
NaN.

Regards,

Ryo
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00243" href="msg00243.html">[ferret_users] replace fillvalue with NaN ?</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00248" href="msg00248.html">Re: [ferret_users] replace fillvalue with NaN ?</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00248.html">Re: [ferret_users] replace fillvalue with NaN ?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00245.html">[ferret_users] Extrak variable from many coordinate</a></strong>
</li>

</UL>
<center>[<a href="msg00248.html">Thread Prev</a>][<a href="msg00245.html">Thread Next</a>][<A HREF="threads.html#00250">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
