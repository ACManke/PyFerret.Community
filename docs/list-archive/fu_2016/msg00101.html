<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] modulo longitude standards? -->
<!--X-From-R13: Pvyyl Yrffyre <jvyyvnz.f.xrffyreNabnn.tbi> -->
<!--X-Date: Wed, 10 Feb 2016 13:50:57 &#45;0800 -->
<!--X-Message-Id: 9BC388D1&#45;6544&#45;401B&#45;AE4D&#45;6BDD2638C71E@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAEwQpaKPdZnm9Q_WLqV9_uYi_RVyBN8ULF4NuLqDcswEhk+riA@mail.gmail.com -->
<!--X-Reference: 56BA8160.20803@noaa.gov -->
<!--X-Reference: CAEwQpaKR9cT0z0wJsdk7_3T3LsOv_EDp+Erc=Efgw7QJSOuZUA@mail.gmail.com -->
<!--X-Reference: 56BA8F53.7020005@noaa.gov -->
<!--X-Reference: 49C7E54C&#45;D485&#45;4E6D&#45;8E63&#45;2523B21B9222@noaa.gov -->
<!--X-Reference: 56BB19AB.5080106@io&#45;warnemuende.de -->
<!--X-Reference: CAKoe08Q832yC1Aksbmk3GaenvRE+Ar8Y=sXBYU9YggnoR93CyQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] modulo longitude standards?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00096.html">Thread Prev</a>][<a href="msg00102.html">Thread Next</a>][<A HREF="threads.html#00101">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] modulo longitude standards?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Andrew Wittenberg &lt;<a href="mailto:andrew.wittenberg@DOMAIN.HIDDEN">andrew.wittenberg@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] modulo longitude standards?</strong></li>
<li><strong>From</strong>: <strong>Billy Kessler &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 10 Feb 2016 13:50:55 -0800</li>
<li>Cc: &quot;William S. Kessler&quot; &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;,        Martin Schmidt &lt;<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;,        Ferret Users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;,        Ansley Manke &lt;<a href="mailto:Ansley.B.Manke@DOMAIN.HIDDEN">Ansley.B.Manke@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=content-type:mime-version:subject:from:in-reply-to:date:cc         :content-transfer-encoding:message-id:references:to         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive         :list-unsubscribe;        bh=AcF6z0Fz0Y02pNEPryeuICOari7bdIV7oVB44RCOn+Q=;        b=j5Scc0UqMj4eLeWqISd0UgLp+aJmYtStyH2RXBSHSFpGmVOcwZTLM+cHDPUZvZei68         ET3OnNGcQrLC52WEMd9zb8730CufJZ8873k2JN+9fkcUsSOVeFotd/czmvkQ2qGPovFl         q0yGmJwBbsO/Ke1g42zH0BCHR1RaofynwY5KKuYZxniVnvCceg160BBJsNxhnzdfgQUF         nj16VmHQ0vZdrggDl2l/X3kgUfsr4M3esvY9k2kXgFoITrJbEL3e8tC9bc57KXPbkESI         gqND+zNQmUE+atgMhl8lO0hFzv8K5gxbaCRAfn95DQz+rbEdSBSl0dBZNcUVZ+NB47s1         euTw==</li>
<li>In-reply-to: &lt;CAKoe08Q832yC1Aksbmk3GaenvRE+Ar8Y=sXBYU9YggnoR93CyQ@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00084.html">CAEwQpaKPdZnm9Q_WLqV9_uYi_RVyBN8ULF4NuLqDcswEhk+riA@mail.gmail.com</a>&gt; &lt;<a href="msg00085.html">56BA8160.20803@noaa.gov</a>&gt; &lt;CAEwQpaKR9cT0z0wJsdk7_3T3LsOv_EDp+Erc=Efgw7QJSOuZUA@mail.gmail.com&gt; &lt;<a href="msg00087.html">56BA8F53.7020005@noaa.gov</a>&gt; &lt;<a href="msg00088.html">49C7E54C-D485-4E6D-8E63-2523B21B9222@noaa.gov</a>&gt; &lt;<a href="msg00089.html">56BB19AB.5080106@io-warnemuende.de</a>&gt; &lt;CAKoe08Q832yC1Aksbmk3GaenvRE+Ar8Y=sXBYU9YggnoR93CyQ@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>HI Andrew -

The answer could be Steve's earlier comment that it is a bug in the implementation rather than an expected feature. 

I've attached 2 example plots. They happen to be zonal wind stress on a particular day.

The first is to simply SHADE the data (2-d map). The second applies X=@FLN. You can see that Ferret extended the plot to the west, but not to the east. That is the typical result, suggesting a bug rather than intended behavior. On other grids where a file might include a bit of Atlantic at the right edge, those latitudes will also be interpolated.

The version and grid/axis are shown below.

Billy

 	NOAA/PMEL TMAP
 	FERRET v6.94  
 	Darwin 14.1.0 - 02/26/15
 	10-Feb-16 13:35     

yes? sho grid taux1deghf215
    GRID GMH1
 name       axis              # pts   start                end
 XHF       LONGITUDE          166mr   124.5E               70.5W
 YHF       LATITUDE            39 r   28.5S                9.5N
 normal    Z
 TMON_CCMP_ASCAT TIME           1 r   14-JUN-2012 20:15    14-JUN-2012 20:15
 normal    E
 normal    F

yes? sho axis xhf
 name       axis              # pts   start                end
 XHF       LONGITUDE          166mr   124.5E               70.5W
   Axis span (to cell edges) = 166 (modulo length = 360)

&gt; On Feb 10, 2016, at 9:20 AM, Andrew Wittenberg - NOAA Federal &lt;andrew.wittenberg@xxxxxxxx&gt; wrote:
&gt; 
&gt; Billy, Martin, Steve,
&gt; 
&gt; As described in Sec. 4.3.7.1 of the User's Guide:
&gt; 
&gt; <a  rel="nofollow" href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/Grids-Regions/REGIONS#_VPINDEXENTRY_726">http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/Grids-Regions/REGIONS#_VPINDEXENTRY_726</a>
&gt; 
&gt; The modulo attribute is *only* automatically applied *if* the axis is a longitude or climatological axis.  If it's a longitude axis, the modulo length is set to 360 degrees.  If it's a climatological axis, the modulo length is set to one year.  Both make sense, and enable one to easily plot any modulo range of the axis (e.g. x=-180:180, or x=0:360, or x=0:720).
&gt; 
&gt; For subspan modulo axes (e.g. the Pacific only), Ferret inserts a &quot;void cell&quot; that fills the longitude gap between the end of the axis and the start of the next modulo cycle.  Ferret is supposed to prevent smoothers (@sbx, @spz), fillers (@fln, @fnr), and derivatives (@ddc, @ddf) from operating across this void point, so the output should be correct -- no need for CANCEL AXIS/MODULO.
&gt; 
&gt; Early versions of Ferret had bugs in these features, but as far as I know (with one exception, see below), everything has worked fine since v6.941 (16 April 2015).  Here's a sample session in the latest version.
&gt; 
&gt; First make a NetCDF file containing a sub-span modulo longitude axis:
&gt; 
&gt;  	NOAA/PMEL TMAP
&gt;  	FERRET v6.961 (beta)
&gt;  	Linux 2.6.32-573.8.1.el6.x86_64 64-bit - 12/09/15
&gt;  	10-Feb-16 12:13     
&gt; 
&gt; yes? def ax/x=0:180:10/unit=degrees_e xax  
&gt; yes? let a = x[gx=xax]; save/clob/file=a.nc a
&gt;  LISTing to file a.nc
&gt; yes? sp ncdump a.nc
&gt; netcdf a {
&gt; dimensions:
&gt; 	XAX = 19 ;
&gt; variables:
&gt; 	double XAX(XAX) ;
&gt; 		XAX:units = &quot;degrees_east&quot; ;
&gt; 		XAX:point_spacing = &quot;even&quot; ;
&gt; 		XAX:axis = &quot;X&quot; ;
&gt; 		XAX:modulo = 360. ;
&gt; 		XAX:standard_name = &quot;longitude&quot; ;
&gt; 	double A(XAX) ;
&gt; 		A:missing_value = -1.e+34 ;
&gt; 		A:_FillValue = -1.e+34 ;
&gt; 		A:long_name = &quot;X[GX=XAX]&quot; ;
&gt; 
&gt; // global attributes:
&gt; 		:history = &quot;FERRET V6.961 (beta) 10-Feb-16&quot; ;
&gt; 		:Conventions = &quot;CF-1.6&quot; ;
&gt; data:
&gt; 
&gt;  XAX = 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 
&gt;     160, 170, 180 ;
&gt; 
&gt;  A = 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 
&gt;     160, 170, 180 ;
&gt; }
&gt; 
&gt; 
&gt; Now use the file, and try some transformations across the modulo cut:
&gt; 
&gt; yes? can var a; can ax xax; use a.nc
&gt; yes? list/x=0:720 a, a[x=@sbx:3], a[x=@fln], a[x=@ddf]
&gt;              DATA SET: ./a.nc
&gt;              LONGITUDE: 0E to 0E(720)
&gt;  Column  1: A is X[GX=XAX]
&gt;  Column  2: A[X=@SBX:3] is X[GX=XAX] (box smoothed by 3 pts on X)
&gt;  Column  3: A[X=@FLN:1] is X[GX=XAX] (linear-filled by 1 pts on X)
&gt;  Column  4: A[X=@DDF] is X[GX=XAX] (forward derivative on X)
&gt;                   A     A      A        A
&gt; 0E      /  1:    0.0   ....    0.0  8.993E-06
&gt; 10E     /  2:   10.0   10.0   10.0  8.993E-06
&gt; 20E     /  3:   20.0   20.0   20.0  8.993E-06
&gt; 30E     /  4:   30.0   30.0   30.0  8.993E-06
&gt; 40E     /  5:   40.0   40.0   40.0  8.993E-06
&gt; 50E     /  6:   50.0   50.0   50.0  8.993E-06
&gt; 60E     /  7:   60.0   60.0   60.0  8.993E-06
&gt; 70E     /  8:   70.0   70.0   70.0  8.993E-06
&gt; 80E     /  9:   80.0   80.0   80.0  8.993E-06
&gt; 90E     / 10:   90.0   90.0   90.0  8.993E-06
&gt; 100E    / 11:  100.0  100.0  100.0  8.993E-06
&gt; 110E    / 12:  110.0  110.0  110.0  8.993E-06
&gt; 120E    / 13:  120.0  120.0  120.0  8.993E-06
&gt; 130E    / 14:  130.0  130.0  130.0  8.993E-06
&gt; 140E    / 15:  140.0  140.0  140.0  8.993E-06
&gt; 150E    / 16:  150.0  150.0  150.0  8.993E-06
&gt; 160E    / 17:  160.0  160.0  160.0  8.993E-06
&gt; 170E    / 18:  170.0  170.0  170.0  8.993E-06
&gt; 180E    / 19:  180.0   ....  180.0       ....
&gt; 90W     / 20:   ....   ....   ....       ....
&gt; 0E(360) / 21:    0.0   ....    0.0  8.993E-06
&gt; 10E     / 22:   10.0   10.0   10.0  8.993E-06
&gt; 20E     / 23:   20.0   20.0   20.0  8.993E-06
&gt; 30E     / 24:   30.0   30.0   30.0  8.993E-06
&gt; 40E     / 25:   40.0   40.0   40.0  8.993E-06
&gt; 50E     / 26:   50.0   50.0   50.0  8.993E-06
&gt; 60E     / 27:   60.0   60.0   60.0  8.993E-06
&gt; 70E     / 28:   70.0   70.0   70.0  8.993E-06
&gt; 80E     / 29:   80.0   80.0   80.0  8.993E-06
&gt; 90E     / 30:   90.0   90.0   90.0  8.993E-06
&gt; 100E    / 31:  100.0  100.0  100.0  8.993E-06
&gt; 110E    / 32:  110.0  110.0  110.0  8.993E-06
&gt; 120E    / 33:  120.0  120.0  120.0  8.993E-06
&gt; 130E    / 34:  130.0  130.0  130.0  8.993E-06
&gt; 140E    / 35:  140.0  140.0  140.0  8.993E-06
&gt; 150E    / 36:  150.0  150.0  150.0  8.993E-06
&gt; 160E    / 37:  160.0  160.0  160.0  8.993E-06
&gt; 170E    / 38:  170.0  170.0  170.0  8.993E-06
&gt; 180E    / 39:  180.0   ....  180.0       ....
&gt; 90W     / 40:   ....   ....   ....       ....
&gt; 0E(720) / 41:    0.0   ....    0.0  8.993E-06
&gt; 
&gt; 
&gt; Looks good.  Now remove the modulo and longitude attributes, and try again:
&gt; 
&gt; yes? sp ncatted -O -h -a modulo,XAX,d,, -a standard_name,XAX,d,, -a units,XAX,o,c,&quot;meters&quot; a.nc
&gt; yes? sp ncdump a.nc
&gt; netcdf a {
&gt; dimensions:
&gt; 	XAX = 19 ;
&gt; variables:
&gt; 	double XAX(XAX) ;
&gt; 		XAX:units = &quot;meters&quot; ;
&gt; 		XAX:point_spacing = &quot;even&quot; ;
&gt; 		XAX:axis = &quot;X&quot; ;
&gt; 	double A(XAX) ;
&gt; 		A:missing_value = -1.e+34 ;
&gt; 		A:_FillValue = -1.e+34 ;
&gt; 		A:long_name = &quot;X[GX=XAX]&quot; ;
&gt; 
&gt; // global attributes:
&gt; 		:history = &quot;FERRET V6.961 (beta) 10-Feb-16&quot; ;
&gt; 		:Conventions = &quot;CF-1.6&quot; ;
&gt; data:
&gt; 
&gt;  XAX = 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 
&gt;     160, 170, 180 ;
&gt; 
&gt;  A = 0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 150, 
&gt;     160, 170, 180 ;
&gt; }
&gt; yes? can dat/all; use a.nc
&gt; yes? list/x=0:720 a, a[x=@sbx:3], a[x=@fln], a[x=@ddf]
&gt;              DATA SET: ./a.nc
&gt;              X (meters): 0 to 185
&gt;  Column  1: A is X[GX=XAX]
&gt;  Column  2: A[X=@SBX:3] is X[GX=XAX] (box smoothed by 3 pts on X)
&gt;  Column  3: A[X=@FLN:1] is X[GX=XAX] (linear-filled by 1 pts on X)
&gt;  Column  4: A[X=@DDF] is X[GX=XAX] (forward derivative on X)
&gt;                 A     A      A      A
&gt; 0     /  1:    0.0   ....    0.0  1.000
&gt; 10    /  2:   10.0   10.0   10.0  1.000
&gt; 20    /  3:   20.0   20.0   20.0  1.000
&gt; 30    /  4:   30.0   30.0   30.0  1.000
&gt; 40    /  5:   40.0   40.0   40.0  1.000
&gt; 50    /  6:   50.0   50.0   50.0  1.000
&gt; 60    /  7:   60.0   60.0   60.0  1.000
&gt; 70    /  8:   70.0   70.0   70.0  1.000
&gt; 80    /  9:   80.0   80.0   80.0  1.000
&gt; 90    / 10:   90.0   90.0   90.0  1.000
&gt; 100   / 11:  100.0  100.0  100.0  1.000
&gt; 110   / 12:  110.0  110.0  110.0  1.000
&gt; 120   / 13:  120.0  120.0  120.0  1.000
&gt; 130   / 14:  130.0  130.0  130.0  1.000
&gt; 140   / 15:  140.0  140.0  140.0  1.000
&gt; 150   / 16:  150.0  150.0  150.0  1.000
&gt; 160   / 17:  160.0  160.0  160.0  1.000
&gt; 170   / 18:  170.0  170.0  170.0  1.000
&gt; 180   / 19:  180.0   ....  180.0   ....
&gt; 
&gt; As desired, no subspan modulo behavior.  So things look good.
&gt; 
&gt; Note that while trying this, I *did* find one additional bug in the handling of centered differences (@ddc) at the inserted void point.  I'll report this separately to the developers.
&gt; 
&gt; Andrew
&gt; 
&gt; On Wed, Feb 10, 2016 at 6:06 AM, Martin Schmidt &lt;martin.schmidt@xxxxxxxxxxxxxxxxx&gt; wrote:
&gt; Dear all,
&gt; I would also support the idea to change the default behaviour for subspan axis - for the following reason:
&gt; For unexperienced users it seems that ferret &quot;knows&quot; a lot of things, like a little miracle. We know, the secret behind this is, ferret uses all information in the input files as best as possible, but cannot add missing information. The CF-standard defines the meaning of the attributes. It is the strength of ferret, to keep data, axis and metadata together. There is no need to control the relation between them all the time, unlike in matlab for example. This avoids a lot of programming and prevents users from making errors.
&gt; 
&gt; But changing the axis- and meta-information silently is a little bit against this &quot;basic ferret philosophy&quot;. To see what I mean, assume,
&gt; you want to use the output of a regional model. There is a variable eta_t in the data set.
&gt; 
&gt; yes? use &quot;<a  rel="nofollow" href="http://phy-50:8080/thredds/dodsC/genus/genus_run_88_5day_ocean.nc&quot">http://phy-50:8080/thredds/dodsC/genus/genus_run_88_5day_ocean.nc&quot</a>;
&gt; yes? say `eta_t,return=xaxis`
&gt;  !-&gt; MESSAGE/CONTINUE XT_OCEAN
&gt; XT_OCEAN
&gt; yes? show axis XT_OCEAN
&gt;  name       axis              # pts   start                end
&gt;  XT_OCEAN  LONGITUDE          273mi   10.075W(-10.075) 18.048E(18.048)
&gt;    Axis span (to cell edges) = 28.24585 (modulo length = 360)
&gt; 
&gt; Ferret tells me the variable eta_t has a modula axis. But it has not. With ncdump I get:
&gt;         double xt_ocean(xt_ocean) ;
&gt;                 xt_ocean:long_name = &quot;tcell longitude&quot; ;
&gt;                 xt_ocean:units = &quot;degrees_E&quot; ;
&gt;                 xt_ocean:cartesian_axis = &quot;X&quot; ;
&gt;                 xt_ocean:_ChunkSize = 273 ;
&gt; The original axis definition may be read correctly, but it is changed later to modulo by ferret. Writing some data to a file they are branded with the modulo-axis.
&gt; In most cases this is not a big deal, but ferret changes the information delivered from the netcdf-file, so it changes something silently, which my have been defined by the creator of the dataset with some intension. It is not possible to check with ferret, if axis in a data set are modulo or not. They are allways modulo.
&gt; 
&gt; Another argument is that the pair of operations &quot;use&quot; and &quot; save&quot; is not pass-through like but changes information inbetween.
&gt; 
&gt; Anyway, I am using ferret a lot and could be happy with any default. But, in the case if I could have a free wish ... axis should be used exactly as defined either
&gt; from the command line or from file information. Specifying the modulo attribute means &quot;modulo&quot; otherwise &quot;not modulo&quot;.
&gt; 
&gt; Best,
&gt; Martin
&gt; 
&gt; 
&gt; 
&gt; 
&gt; Am 10.02.2016 um 06:17 schrieb William S. Kessler:
&gt; Count me as another user who thinks the subspan modulo behavior should not be the default.
&gt; 
&gt; I recall your explanation of this feature (28 Oct 2011):
&gt; 
&gt; The importance of the subspan modulo axes is to take the first of two steps that will make it possible for users largely to ignore differences in encodings of longitude and climatological time -- e.g. the blending of data in plots and analyses where the data come from data sets that are encoded variously as -180:180, 0:360, etc.  Thus, for example, in V5.5 you can refer to my_subspan_var[g=another_var] and get a meaningful answer as long as the grids occupy the same region on the globe, regardless of longitude encoding. (The second step, for V5.6, will address the longitude encoding of scattered data.)
&gt; I can see how that might be useful in particular situations, but the cost is the mistaken plots and analyses by other users - working with grids covering subregions of the globe - who forget to declare the axis non-modulo, and unwittingly smooth or fill in x (or take a derivative, etc). Then Ferret will wrap the operation across the edges of the region inappropriately. As someone who frequently works with Pacific fields, I can't tell you how many times I've slapped my forehead and gotten a different result after remembering to CAN AXIS/MODULO. But those who are less-acquainted with this might make the mistake and not realize that their plot is wrong.
&gt; 
&gt; My sense of the balance is that this feature should be available, but not the default, because I'll bet most Ferret users don't realize that this will happen. They haven't fully read the documentation and assume - very reasonably - that the default for a subregion is non-modulo.And even for those who do know this, like me, it's a very easy feature to forget in the heat of calculation.
&gt; 
&gt; I think the default should be non-modulo for axes where x is given in degrees east, unless the axis is fully global, since the user who wants this feature can always turn it on (SET AXIS/MODULO), right?
&gt; 
&gt; Billy K
&gt; 
&gt; On Feb 9, 2016, at 5:16 PM, Steve Hankin &lt;steven.c.hankin@xxxxxxxx&gt; wrote:
&gt; 
&gt; On 2/9/2016 4:47 PM, Ryo Furue wrote:
&gt; Hi Steve,
&gt; 
&gt; Thanks for your detailed explanation.
&gt; 
&gt; An axis may be less than global (e.g. axis &quot;x30&quot;) and still be understood to
&gt; have modulo 360 behavior.  This is inferred automatically from its units of
&gt; degrees_east.   To reliably regard a variable defined on an X axis of more
&gt; than 360 degrees, Ferret would have to check that the overlapping points at
&gt; each end all had identical values.
&gt; Or you COULD just issue a warning and disregard the values on one of
&gt; the overlapping &quot;layers&quot;.  I'm not saying you SHOULD.
&gt; 
&gt;   Ferret has no internal logic to do this.
&gt; Yes, I guessed that that is the reason why Ferret currently rejects
&gt; such an overlapping axis.
&gt; There are cases where people deliberately create variables on longitude ranges of (say) 720 degrees (double worlds).  All other things being equal it seems best not to second guess what people are doing.
&gt; P.S.  The attribute &quot;modulo&quot; is from older Ferret versions.
&gt; So, what's the latest alternative?  Is it a Ferret-specific attribute?
&gt;   Or is it part of a well-recognized convention like CF?
&gt; The &quot;modulo&quot; attribute was a Ferret creation -- not CF.  Somewhere along the way, Ferret was enhanced to support the notion of a &quot;subspan modulo axis&quot; -- modulo behavior, even though the axis isn't globe-encircling.  The axis X30 in the previous message was an example.  With the advent of subspan modulo axes, all longitude axes 360 degrees or less became implicitly &quot;modulo&quot;.  So the older modulo attribute is essentially irrelevant. (But no harm from having it in a file AFAIK.)
&gt; 
&gt;     - Steve
&gt; The dataset I was given actually includes the &quot;modulo&quot; attribute.  I'm
&gt; not sure if the creators of the dataset use Ferret.
&gt; 
&gt; Basically, I'd like to know if I should ask the creators to fix it.
&gt; They are a data center and so they do care about these things.
&gt; 
&gt; Ryo
&gt; 
&gt; 
&gt; 


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00102" href="msg00102.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Billy Kessler</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00084" href="msg00084.html">[ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00085" href="msg00085.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Steve Hankin</li></ul></li>
<li><strong><a name="00086" href="msg00086.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Steve Hankin</li></ul></li>
<li><strong><a name="00088" href="msg00088.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> William S. Kessler</li></ul></li>
<li><strong><a name="00089" href="msg00089.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00096" href="msg00096.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Andrew Wittenberg - NOAA Federal</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00096.html">Re: [ferret_users] modulo longitude standards?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00102.html">Re: [ferret_users] modulo longitude standards?</a></strong>
</li>

</UL>
<center>[<a href="msg00096.html">Thread Prev</a>][<a href="msg00102.html">Thread Next</a>][<A HREF="threads.html#00101">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
