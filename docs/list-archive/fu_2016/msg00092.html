<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] modulo longitude standards? -->
<!--X-From-R13: Egrir Vnaxva <fgrira.p.unaxvaNabnn.tbi> -->
<!--X-Date: Wed, 10 Feb 2016 08:34:28 &#45;0800 -->
<!--X-Message-Id: 56BB6692.9010908@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAEwQpaKPdZnm9Q_WLqV9_uYi_RVyBN8ULF4NuLqDcswEhk+riA@mail.gmail.com -->
<!--X-Reference: 56BA8160.20803@noaa.gov -->
<!--X-Reference: CAEwQpaKR9cT0z0wJsdk7_3T3LsOv_EDp+Erc=Efgw7QJSOuZUA@mail.gmail.com -->
<!--X-Reference: 56BA8F53.7020005@noaa.gov -->
<!--X-Reference: 49C7E54C&#45;D485&#45;4E6D&#45;8E63&#45;2523B21B9222@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] modulo longitude standards?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00102.html">Thread Prev</a>][<a href="msg00095.html">Thread Next</a>][<A HREF="threads.html#00092">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] modulo longitude standards?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;William S. Kessler&quot; &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] modulo longitude standards?</strong></li>
<li><strong>From</strong>: <strong>Steve Hankin &lt;<a href="mailto:steven.c.hankin@DOMAIN.HIDDEN">steven.c.hankin@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 10 Feb 2016 08:34:26 -0800</li>
<li>Cc: Ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=subject:to:references:cc:from:message-id:date:user-agent         :mime-version:in-reply-to:content-type:content-transfer-encoding         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive         :list-unsubscribe;        bh=tqb593m3cIopFLTufsWRKD5k8fPXRQ4o5f0bJ0dGKc8=;        b=sFmaeo/NPeaRx7zGVSxGJjSUK80R5bW2ucAM474b5f/NBj7F5RIduHnxeOVuflif2O         zfd0PFRSNUfmpDWivOJ8S1zT0JNOXBXScWmumh2aPESIZbPtYaHNwFMNgfPTh6O8eqCK         a7dnLGzINALYAJ/fkmR+owLEO7Cf0lj6r+JMPaZUjsnJF0Pp3hZNnKLTknt/mUNHpcK3         lMP7cVFqYr7MEhedz+pPYzxgufiusWgzG/sNhuw1OR7nN/mqHk7tL4lXh/5zVaR3ZHEp         eCEPgZn3MMvUpI7WLFdweImkPivVrbGdKkesCzu0Ybp+EIIVsI6BDdK6yd8yyBBZNYFt         IFHg==</li>
<li>In-reply-to: &lt;<a href="msg00088.html">49C7E54C-D485-4E6D-8E63-2523B21B9222@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00084.html">CAEwQpaKPdZnm9Q_WLqV9_uYi_RVyBN8ULF4NuLqDcswEhk+riA@mail.gmail.com</a>&gt; &lt;<a href="msg00085.html">56BA8160.20803@noaa.gov</a>&gt; &lt;CAEwQpaKR9cT0z0wJsdk7_3T3LsOv_EDp+Erc=Efgw7QJSOuZUA@mail.gmail.com&gt; &lt;<a href="msg00087.html">56BA8F53.7020005@noaa.gov</a>&gt; &lt;<a href="msg00088.html">49C7E54C-D485-4E6D-8E63-2523B21B9222@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101 Thunderbird/38.5.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Billy,

</pre><tt>These are valid concerns.  Lets continue the conversation offline with 
</tt><tt>Ansley and come up with a proposal ...
</tt><pre style="margin: 0em;">

    - Steve

On 2/9/2016 9:17 PM, William S. Kessler wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Count me as another user who thinks the subspan modulo behavior should not be the default.

I recall your explanation of this feature (28 Oct 2011):

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
The importance of the subspan modulo axes is to take the first of two steps that will make it possible for users largely to ignore differences in encodings of longitude and climatological time -- e.g. the blending of data in plots and analyses where the data come from data sets that are encoded variously as -180:180, 0:360, etc.  Thus, for example, in V5.5 you can refer to my_subspan_var[g=another_var] and get a meaningful answer as long as the grids occupy the same region on the globe, regardless of longitude encoding. (The second step, for V5.6, will address the longitude encoding of scattered data.)
</pre></blockquote><pre style="margin: 0em;">
I can see how that might be useful in particular situations, but the cost is the mistaken plots and analyses by other users - working with grids covering subregions of the globe - who forget to declare the axis non-modulo, and unwittingly smooth or fill in x (or take a derivative, etc). Then Ferret will wrap the operation across the edges of the region inappropriately. As someone who frequently works with Pacific fields, I can't tell you how many times I've slapped my forehead and gotten a different result after remembering to CAN AXIS/MODULO. But those who are less-acquainted with this might make the mistake and not realize that their plot is wrong.

My sense of the balance is that this feature should be available, but not the default, because I'll bet most Ferret users don't realize that this will happen. They haven't fully read the documentation and assume - very reasonably - that the default for a subregion is non-modulo.And even for those who do know this, like me, it's a very easy feature to forget in the heat of calculation.

I think the default should be non-modulo for axes where x is given in degrees east, unless the axis is fully global, since the user who wants this feature can always turn it on (SET AXIS/MODULO), right?

Billy K

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On Feb 9, 2016, at 5:16 PM, Steve Hankin &lt;steven.c.hankin@xxxxxxxx&gt; wrote:

On 2/9/2016 4:47 PM, Ryo Furue wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Steve,

Thanks for your detailed explanation.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
An axis may be less than global (e.g. axis &quot;x30&quot;) and still be understood to
have modulo 360 behavior.  This is inferred automatically from its units of
degrees_east.   To reliably regard a variable defined on an X axis of more
than 360 degrees, Ferret would have to check that the overlapping points at
each end all had identical values.
</pre></blockquote><pre style="margin: 0em;">
Or you COULD just issue a warning and disregard the values on one of
the overlapping &quot;layers&quot;.  I'm not saying you SHOULD.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
  Ferret has no internal logic to do this.
</pre></blockquote><pre style="margin: 0em;">
Yes, I guessed that that is the reason why Ferret currently rejects
such an overlapping axis.
</pre></blockquote><pre style="margin: 0em;">
There are cases where people deliberately create variables on longitude ranges of (say) 720 degrees (double worlds).  All other things being equal it seems best not to second guess what people are doing.
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
P.S.  The attribute &quot;modulo&quot; is from older Ferret versions.
</pre></blockquote><pre style="margin: 0em;">
So, what's the latest alternative?  Is it a Ferret-specific attribute?
  Or is it part of a well-recognized convention like CF?
</pre></blockquote><pre style="margin: 0em;">
The &quot;modulo&quot; attribute was a Ferret creation -- not CF.  Somewhere along the way, Ferret was enhanced to support the notion of a &quot;subspan modulo axis&quot; -- modulo behavior, even though the axis isn't globe-encircling.  The axis X30 in the previous message was an example.  With the advent of subspan modulo axes, all longitude axes 360 degrees or less became implicitly &quot;modulo&quot;.  So the older modulo attribute is essentially irrelevant. (But no harm from having it in a file AFAIK.)

    - Steve
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
The dataset I was given actually includes the &quot;modulo&quot; attribute.  I'm
not sure if the creators of the dataset use Ferret.

Basically, I'd like to know if I should ask the creators to fix it.
They are a data center and so they do care about these things.

Ryo
</pre></blockquote></blockquote></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00095" href="msg00095.html">[ferret_users] polygon is not filled correctly with pyferret</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00084" href="msg00084.html">[ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00085" href="msg00085.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Steve Hankin</li></ul></li>
<li><strong><a name="00086" href="msg00086.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> Steve Hankin</li></ul></li>
<li><strong><a name="00088" href="msg00088.html">Re: [ferret_users] modulo longitude standards?</a></strong>
<ul><li><em>From:</em> William S. Kessler</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00102.html">Re: [ferret_users] modulo longitude standards?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00095.html">[ferret_users] polygon is not filled correctly with pyferret</a></strong>
</li>

</UL>
<center>[<a href="msg00102.html">Thread Prev</a>][<a href="msg00095.html">Thread Next</a>][<A HREF="threads.html#00092">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
