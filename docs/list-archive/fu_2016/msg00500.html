<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] subsampling as qualifier -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 3 Oct 2016 17:20:47 &#45;0700 -->
<!--X-Message-Id: b7693cb2&#45;306a&#45;e531&#45;a0c5&#45;54ff2f408d3f@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 84d05168&#45;147f&#45;63d2&#45;83a8&#45;6d04a2a52659@lsce.ipsl.fr -->
<!--X-Reference: 2e5168c4&#45;5f61&#45;0bdd&#45;cc38&#45;2c5efd87bd40@noaa.gov -->
<!--X-Reference: CAEwQpaJz+4n=jvuAz6FS7SQdcg_m+F3SR2yrdUjbFvP=mehEYQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] subsampling as qualifier</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00497.html">Thread Prev</a>][<a href="msg00498.html">Thread Next</a>][<A HREF="threads.html#00500">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] subsampling as qualifier</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;,        Patrick Brockmann &lt;<a href="mailto:Patrick.Brockmann@DOMAIN.HIDDEN">Patrick.Brockmann@xxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] subsampling as qualifier</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 3 Oct 2016 17:20:44 -0700</li>
<li>Cc: ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=subject:to:references:cc:from:message-id:date:user-agent         :mime-version:in-reply-to:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive:list-unsubscribe;        bh=6C8jR6zAmlWut7DqIYYdRiMKrvjAjcqZFTob2jQuuC4=;        b=JsTUXB+aAq1jLwtpbjc5N/niPdJthfvIO8L/YpbkNmeuXj8wMSdwhw0d5OvjUgZuNY         dLVkcFnT2fZsqBpa5XeGrbu2/KDqxi3DfkoVCFriLdeN57kA3QIWae7sduULNEj1jIcM         eFxjgmnvZSi3L4PapcrcksxYo+kCo0SBrkulEZeJql/lnQFpmb53EVWHpvgCqBMm3BdE         kgn+NAF2sCsZrv7p1EsRDzeyfoT8jRvAr7Jizr5TMTCssaxjSgzgrdyQb3v66v0DbYKf         e8Z307FxHfUA+F/iigplaNQu2FjhNKEWD8MBgfkOofN3l2zZs5xFojxjUAQGaJkpHcac         KF2w==</li>
<li>In-reply-to: &lt;CAEwQpaJz+4n=jvuAz6FS7SQdcg_m+F3SR2yrdUjbFvP=mehEYQ@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00494.html">84d05168-147f-63d2-83a8-6d04a2a52659@lsce.ipsl.fr</a>&gt; &lt;<a href="msg00496.html">2e5168c4-5f61-0bdd-cc38-2c5efd87bd40@noaa.gov</a>&gt; &lt;CAEwQpaJz+4n=jvuAz6FS7SQdcg_m+F3SR2yrdUjbFvP=mehEYQ@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:45.0) Gecko/20100101 Thunderbird/45.3.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <p>Hi,</p>
    <p>We've thought about this as well.&#xA0; For performance and file size
      control in making images, one would always want to load the least
      data into memory, and send the least amount of data to the
      graphics calls, relative to the resolution of the graphics image.
      <br>
    </p>
    <p>As noted in the last message, the issue for use of strides in
      reading data, is that the _expression_ could come from multiple
      grids, so strides have to be applied to the grids as the data is
      being requested.&#xA0; <br>
    </p>
    <p>Once data has been read and the _expression_ computed, the amount
      of data sent to the graphics call could be reduced by something
      like a /XRES= /YRES= qualifier.&#xA0; For a SHADE command the range of
      values shown would change if we happened to skip the extreme
      values in the decimation.&#xA0; For a FILL or CONTOUR, there's
      interpolation done to compute the contour lines.&#xA0; If the data is
      sub-sampled before sending the data to the graphics code, that
      subsampling could result in different graphics results.<br>
    </p>
    <p>Ansley<br>
    </p>
    <br>
    <div class="moz-cite-prefix">On 9/29/2016 12:29 AM, Ryo Furue wrote:<br>
    </div>
    <blockquote
cite=""
      type="cite">
      <div dir="ltr">Hi Ansley and Patrick,
        <div><br>
        </div>
        <div>I've been long wondering about the same problem as Patrick.
          But, my motivation may be a bit different. To me the main
          problem is the size of the vector graphics.&#xA0; PostScript images
          from high-resolution data can be unbearably large.<br>
          <div class="gmail_extra">
            <div class="gmail_quote">
              <blockquote class="gmail_quote" style="margin:0 0 0
                .8ex;border-left:1px #ccc solid;padding-left:1ex">
                <div bgcolor="#FFFFFF" text="#000000">
                  <p>Your idea does sound like a convenient method for
                    reading data using strides, when the variables being
                    plotted are file variables.&#xA0; However if the SHADE
                    plot is showing a more complex _expression_ perhaps
                    involving combinations of variables regridded to a
                    new grid, then the qualifier would be ambiguous. </p>
                </div>
              </blockquote>
              <div>So, I was wondering if strides or resolution or both
                can be an option to the SHADE and FILL commands.&#xA0; After
                all potential computations, these commands find out the
                grid of the field they are going to plot.&#xA0; So, it's best
                to ask them to regrid.</div>
              <div><br>
              </div>
              <div>Of course you can always achieve the same result by
                writing a script such as Ansley showed us, but it's a
                bit more tedious than</div>
              <div><br>
              </div>
              <div>&#xA0; &#xA0; FILL/xres=600/yres=400 &#xA0;some_expression</div>
              <div><br>
              </div>
              <div>Regards,</div>
              <div><br>
              </div>
              <div>Ryo</div>
              <div><br>
              </div>
              <blockquote class="gmail_quote" style="margin:0 0 0
                .8ex;border-left:1px #ccc solid;padding-left:1ex">
                <div bgcolor="#FFFFFF" text="#000000">
                  <p>It may be more cumbersome, but it is really
                    necessary to to attach the striding information to
                    the file variables or their grids.<br>
                  </p>
                  <p>Certainly a script can set up the striding
                    according to the size of the grid and the output
                    resolution of the image. Here's an example. Similar
                    logic could be used to define a stride and use the <a rel="nofollow"
                      moz-do-not-send="true"
href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/data-set-basics/NETCDF-DATA#_VPINDEXENTRY_168"
                      target="_blank">SET AXIS/STRIDE command</a>, or to
                    define strides on a sub-region of the grid.<br>
                  </p>
                  <blockquote><tt>yes? let xres = 600</tt><br>
                    <tt>yes? let yres = 400</tt><br>
                    <br>
                    <tt>yes? let nx = `var,return=isize`</tt><br>
                    <tt>yes? let ny = `var,return=jsize` </tt><br>
                    <br>
                    <tt>yes? let istride = MAX(1,INT(nx/xres + 0.5)</tt><tt>)</tt><br>
                    <tt>yes? let jstride = </tt><tt><tt>MAX(1,</tt>INT(ny/yres
                      + 0.5))</tt><br>
                    <br>
                    <tt>yes? define symbol region_spec =
                      [i=1:`nx`:`istride`,j=1:`ny`:`<wbr>jstride`]</tt><br>
                    <tt> yes? shade var($region_spec),
                      lon2D($region_spec), lat2D($region_spec)</tt><span
                      class="HOEnZb"><font color="#888888"><br>
                      </font></span></blockquote>
                  <span class="HOEnZb"><font color="#888888"> </font></span>
                  <div><span class="HOEnZb"><font color="#888888">-Ansley</font></span>
                    <div>
                      <div class="h5"><br>
                      </div>
                    </div>
                  </div>
                </div>
              </blockquote>
            </div>
          </div>
        </div>
      </div>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00494" href="msg00494.html">[ferret_users] subsampling as qualifier</a></strong>
<ul><li><em>From:</em> Patrick Brockmann</li></ul></li>
<li><strong><a name="00496" href="msg00496.html">Re: [ferret_users] subsampling as qualifier</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
<li><strong><a name="00497" href="msg00497.html">Re: [ferret_users] subsampling as qualifier</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00497.html">Re: [ferret_users] subsampling as qualifier</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00498.html">[ferret_users] How to set yaxis to be depth and not numberof layers</a></strong>
</li>

</UL>
<center>[<a href="msg00497.html">Thread Prev</a>][<a href="msg00498.html">Thread Next</a>][<A HREF="threads.html#00500">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
