<!-- MHonArc v2.6.18 -->
<!--X-Subject: [ferret_users] Question about sampleij ,sample_cloest and rep -->
<!--X-From-R13: Inakhna Knb <jlnbNtrbzne.qr> -->
<!--X-Date: Thu, 23 Jun 2016 10:38:32 &#45;0700 -->
<!--X-Message-Id: B8827FF7&#45;780D&#45;4581&#45;A865&#45;B33912C90013@geomar.de -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Derived: pngWdNiairgNc.png -->
<!--X-Derived: pngi92qs4X0Q5.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[ferret_users] Question about sampleij ,sample_cloest and rep</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00314.html">Thread Prev</a>][<a href="msg00320.html">Thread Next</a>][<A HREF="threads.html#00319">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] Question about sampleij ,sample_cloest and rep</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] Question about sampleij ,sample_cloest and rep</strong></li>
<li><strong>From</strong>: <strong>Wanxuan Yao &lt;<a href="mailto:wyao@DOMAIN.HIDDEN">wyao@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 23 Jun 2016 19:38:27 +0200</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=from:subject:message-id:date:to:mime-version:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive:list-unsubscribe;        bh=BpR9gtwD4Fbmeiwt2+gHVOBA3O7fRBbbGHqkaISqGdM=;        b=Wck6Xy1Mo7JanepRUWpekGdiu9+jBlnl+md86ppw6r3vZ0vhqgCuRNb9xJqDfyn5Qi         YCmCcCW4cZyrihZ7j74XNCWgKYMHcWrzwPz/Wbs2RBSckX18kZJBMM9QmeJVKX+u4OEI         FM0W5cxSDGbbMWGcj//uEn3Fn1H/VQSCsPVEzSDvn8fhpWGBR2D/P+ptDeKKmAXdnUX7         EfDGFVvzATx+AIV2drXoG1FHpR4H88JOkaYojRMV6se7JkwiRoFJ7v8XEYuunhIsRFi2         cCewSZoRzrgJ3LRTY2iHXTJ1EwWMu0n0YNE8iNaT/E0gqmsysIYWJOGCrHlmvpiah/Nx         wPBw==</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td style="">Dear Ferret users,<br class=""><br class="">I am a new ferret user and try to plot the model output among the cruise line (to create a vertical section plot). But there seems to be a few&nbsp;complications.<br class="">Could anyone help me to find out where did I do wrong? (Q1~Q)<br class=""><br class=""><br class="">my code:<br class="">let x_varC=samplexy(o_dfe[d=1,l=3],order_x,order_y)<br class="">define axis/y/name=yax_sect/from_data/units=degrees_north order_Y<br class="">let y_profile=reshape(x_varC,Y[gy=yax_sec]]+Z[gz=o_dfe[d=1]])<br class="">sha y_profile&nbsp;<br class="">and there is the plot i got(below left), I was happy, but&#x2026;.oh&#x2026;wait&#x2026;. after I plot the cruise data overlaying my plot, i found out that the samplexy function&nbsp;did not sample to the whole depth of the model output(below right).<br class=""><img apple-inline="yes" id="7FFCB59E-57DB-42A9-8B84-32E4DDCC012A" height="206" width="320" apple-width="yes" apple-height="yes" src="pngWdNiairgNc.png" class=""><img apple-inline="yes" id="3A7F5441-E9CA-41C7-89BF-65F74B1D6FD8" height="233" width="320" apple-width="yes" apple-height="yes" src="pngi92qs4X0Q5.png" class=""><br class="">so i check the model depth setting and found out that when i use the following code, ferret does reach to the deepest point, but samplexy doesn&#x2019;t:<br class=""><span class="">yes? List o_dfe[d=1,l=3,x=`order_x[i=1]`,y=`order_y[i=1]`],x_varC[i=1]<br class=""></span><span class=""></span><span class="">&nbsp;!-&gt; List&nbsp;o_dfe[d=1,l=3,x=307.3118896484375,y=-49.54719924926758],x_varC[i=1]<br class=""></span><span class=""></span><span class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DATA SET: ./tavg.01201.01.31.nc<br class=""></span><span class=""></span><span class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DEPTH (m): 0 to 6080<br class=""></span><span class=""></span><span class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LATITUDE: 49.5S<br class=""></span><span class=""></span><span class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TIME: 17-MAR-1201 00:00 NOLEAP<br class=""></span><span class=""></span><span class="">&nbsp;Column&nbsp;&nbsp;1: O_DFE[X=52.2W(307.8)] is O_dfe (mol Fe m-3)<br class=""></span><span class=""></span><span class="">&nbsp;Column&nbsp;&nbsp;2: X_VARC[X=1] is&nbsp;SAMPLEXY(O_DFE[D=tavg.01201.01.31,L=3:7@AVE],ORDER_X,ORDER_Y)<br class=""></span><span class=""></span><span class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;O_DFE&nbsp; &nbsp;&nbsp;X_VARC<br class=""></span><span class=""></span><span class="">17.5&nbsp; &nbsp;&nbsp;/&nbsp;&nbsp;1:&nbsp;&nbsp;1.514E-07&nbsp;&nbsp;1.779E-07<br class=""></span><span class=""></span><span class="">82.5&nbsp; &nbsp;&nbsp;/&nbsp;&nbsp;2:&nbsp;&nbsp;3.811E-07&nbsp;&nbsp;3.939E-07<br class=""></span><span class=""></span><span class="">177.5&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;3:&nbsp;&nbsp;4.923E-07&nbsp;&nbsp;4.972E-07<br class=""></span><span class=""></span><span class="">302.5&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;4:&nbsp;&nbsp;5.087E-07&nbsp;&nbsp;5.103E-07<br class=""></span><span class=""></span><span class="">457.5&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;5:&nbsp;&nbsp;5.271E-07&nbsp;&nbsp;5.234E-07<br class=""></span><span class=""></span><span class="">642.5&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;6:&nbsp;&nbsp;5.393E-07&nbsp;&nbsp;5.349E-07<br class=""></span><span class=""></span><span class="">857.5&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;7:&nbsp;&nbsp;5.427E-07&nbsp;&nbsp;5.416E-07<br class=""></span><span class=""></span><span class="">1102.5&nbsp;&nbsp;/&nbsp;&nbsp;8:&nbsp;&nbsp;5.432E-07&nbsp;&nbsp;5.438E-07<br class=""></span><span class=""></span><span class="">1377.5&nbsp;&nbsp;/&nbsp;&nbsp;9:&nbsp;&nbsp;5.436E-07&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">1682.5&nbsp;&nbsp;/ 10:&nbsp;&nbsp;5.499E-07&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">2017.5&nbsp;&nbsp;/ 11:&nbsp;&nbsp;5.570E-07&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">2382.5&nbsp;&nbsp;/ 12:&nbsp;&nbsp;5.625E-07&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">2777.5&nbsp;&nbsp;/ 13:&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">3202.5&nbsp;&nbsp;/ 14:&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">3657.5&nbsp;&nbsp;/ 15:&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">4142.5&nbsp;&nbsp;/ 16:&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">4657.5&nbsp;&nbsp;/ 17:&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">5202.5&nbsp;&nbsp;/ 18:&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....<br class=""></span><span class=""></span><span class="">5777.5&nbsp;&nbsp;/ 19:&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;....&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&#x2026;.</span><div class=""><span class=""><br class=""></span></div><div class=""><span class="">Q1:I suspect it is due to the spatial interpolation? who knows why?</span></div><div class=""><span class=""><br class=""></span></div><div class=""><span class="">to work around it, I use&nbsp;simplex_closest instead, but&nbsp;there is an error message that i&nbsp;don&#x2019;t understand:</span></div><div class=""><span class=""><br class=""></span></div><span class="">yes? let x_varC=samplexy_closest(o_dfe[d=1,l=3],order_x,order_y)<br class=""></span><span class="">yes? stat x_varC<br class=""></span><span class=""><br class=""></span><span class="">Bailing out of external function "samplexy_closest":<br class=""></span><span class=""><span class="Apple-tab-span" style="white-space:pre">	</span>cannot handle MODULO axis that is not regular<br class=""></span><span class="">&nbsp;**ERROR: error in external function&nbsp;</span><div class="">yes? stat o_dfe[d=1,l=3]<br class="">&nbsp;<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;O_dfe<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LONGITUDE: 0E(0) to 0E(360)<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;LATITUDE: 90S to 90N<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DEPTH (m): 0 to 6080<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TIME: 17-MAR-1201 00:00 NOLEAP<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;E:&nbsp;&nbsp;N/A<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;F:&nbsp;&nbsp;N/A<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DATA SET: ./tavg.01201.01.31.nc<br class="">&nbsp;<br class="">&nbsp;Total # of data points: 190000 (100*100*19*1*1*1)<br class="">&nbsp;# flagged as bad&nbsp;&nbsp;data: 102693<br class="">&nbsp;Minimum value: 4.482837E-09<br class="">&nbsp;Maximum value: 0.000015577<br class="">&nbsp;Mean&nbsp; &nbsp;&nbsp;value: 5.929552E-07 (unweighted average)<br class="">&nbsp;Standard deviation: 2.776047E-07<br class=""></div><div class=""><br class=""></div><div class=""><br class=""><div class=""><br class=""></div><div class=""><span class="">I tried to redefine the x axis of the data, by applying the exact axis that my data has:</span></div><div class=""><span class=""><div class="">define axis/x=1.8:360:3.6 xreg</div><div class="">let o_dfe_gx=o_dfe[d=1,l=3,gx=xreg]</div><div class="">let x_varC=samplexy_closest(o_dfe_gx,order_x,order_y)</div><div class=""><br class=""></div><div class="">Q2: it works better, however, some of the deepest box are still missing. When i redefine the Y axis, a whole section of the data won&#x2019;t show up in the x_varC.why?</div><div class=""><br class=""></div><div class="">It seems to me that only the &#x201C;list&#x201D; could find the real closest grid and accesses the deepest box,so I ask ferret to write all the point into one file and try to use it as a new variable.</div><div class=""><br class=""></div><div class="">list/nohead/norowlab/file=odef.dat/append o_dfe[d=1,l=3,x=`order_x[i=1]`,y=`order_y[i=1]`]</div><div class="">&#x2026;</div><div class="">list/nohead/norowlab/file=odef.dat/append o_dfe[d=1,l=3,x=`order_x[i=57]`,y=`order_y[i=57]`]</div><div class=""><br class=""></div><div class="">Q3: is there a better way to do this, instead of 57 lines of code? I tried to use &#x201C;rep&#x201D;:</div><div class="">rep/x=1:57 list/nohead/norowlab/file=odfe.dat/append o_dfe[d=1,l=3,x=`order_x[i=`x`@din]`,y=`order_y[i=`x`@din]`]&nbsp;</div><div class="">but it doesn&#x2019;t work. what did i do wrong?</div><div class=""><br class=""></div><div class="">Q4: i am also open to criticism about how to do this in a better way :)</div><div class=""><br class=""></div><div class="">thanks in advance:)</div><div class="">Ben</div><div class=""><br class=""></div><div class=""><br class=""></div><div class="">P.S.:</div><div class=""><br class=""></div></span></div><div class=""><span class="">My working environment: Ferret ver 6.94, Macbook pro,<br class="">Model : UVic earth system climate model 2.9<br class=""><br class=""><br class="">My cruise line coordinations:<br class=""><br class="">yes? list order_x[i=1:57],order_y[i=1:57]<br class="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;X: 0.5 to 5.5<br class="">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;ORDER_X&nbsp;&nbsp;ORDER_Y<br class="">1&nbsp;&nbsp;&nbsp;/ 1:&nbsp;&nbsp;&nbsp;307.3&nbsp;&nbsp;-49.55<br class="">2&nbsp;&nbsp;&nbsp;/ 2:&nbsp;&nbsp;&nbsp;311.3&nbsp;&nbsp;-48.89<br class="">3&nbsp;&nbsp;&nbsp;/ 3:&nbsp;&nbsp;&nbsp;312.8&nbsp;&nbsp;-46.92<br class="">4&nbsp;&nbsp;&nbsp;/ 4:&nbsp;&nbsp;&nbsp;314.5&nbsp;&nbsp;-44.71<br class="">5&nbsp;&nbsp;&nbsp;/ 5:&nbsp;&nbsp;&nbsp;316.0&nbsp; -42.37<br class="">...<br class=""><br class=""><br class=""><div class=""><br class=""><br class=""></div><br class=""></span></div></div></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00321" href="msg00321.html">Re: [ferret_users] Question about sampleij ,sample_cloest and rep</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
<li><strong><a name="00320" href="msg00320.html">Re: [ferret_users] Question about sampleij ,sample_cloest and rep</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00314.html">[ferret_users] Re: Fwd: BOUNCE ferret_users@xxxxxxxx: Non-member submission from [&quot;'prescilla kurien' via _OAR PMEL Ferret Users&quot; &lt;ferret_users@xxxxxxxx&gt;]</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00320.html">Re: [ferret_users] Question about sampleij ,sample_cloest and rep</a></strong>
</li>

</UL>
<center>[<a href="msg00314.html">Thread Prev</a>][<a href="msg00320.html">Thread Next</a>][<A HREF="threads.html#00319">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
