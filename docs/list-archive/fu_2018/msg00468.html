<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] integration of flux vector along the coastline to compute the transport -->
<!--X-From-R13: Ivyyvnz Yrffyre <jvyyvnz.f.xrffyreNabnn.tbi> -->
<!--X-Date: Mon, 17 Dec 2018 20:00:08 &#45;0800 -->
<!--X-Message-Id: CE303F7A&#45;3642&#45;4F1B&#45;84BA&#45;8FAD8804894C@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAFXLzPhYeiEFvKvFKnHyh1Kk4H6Q67+cH0rvW&#45;0gLrXzwCT3eg@mail.gmail.com -->
<!--X-Reference: 14D024AF&#45;FF97&#45;463F&#45;B487&#45;A388107A42BE@noaa.gov -->
<!--X-Reference: CAFXLzPiSn5CuO9Y4LWbO1WZA6+dJAnzB1GBBO1Ok7kb9MVgxVg@mail.gmail.com -->
<!--X-Reference: CAFXLzPj4DTrngFndX8wrntZPGzw=20GGL3ptL9BVANqRTO2pqg@mail.gmail.com -->
<!--X-Reference: CAEwQpaKJnwrkWdjOHysXv2BHHjebQ8GGp4sHaZ71fs6kuwfJwQ@mail.gmail.com -->
<!--X-Reference: ED957164&#45;FDDC&#45;42E8&#45;A5B1&#45;5156B6817841@noaa.gov -->
<!--X-Reference: dd88c1e1&#45;1f8d&#45;a507&#45;49df&#45;0f3dffb20e36@io&#45;warnemuende.de -->
<!--X-Reference: CAFXLzPhi=YrDO2XQsASO7MP_ZzXHyD72untckyMFpaMkNhTq3A@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] integration of flux vector along the coastline to compute the transport</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00467.html">Thread Prev</a>][<a href="msg00469.html">Thread Next</a>][<A HREF="threads.html#00468">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] integration of flux vector along the coastline to compute the transport</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>saurabh rathore &lt;<a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] integration of flux vector along the coastline to compute the transport</strong></li>
<li><strong>From</strong>: <strong>William Kessler &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 17 Dec 2018 20:00:04 -0800</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=ISThC+F+;       spf=pass (google.com: domain of <a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=ISThC+F+;       spf=pass (google.com: domain of <a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:to         :references:message-id:content-transfer-encoding:cc:date:in-reply-to         :from:subject:mime-version:dkim-signature;        bh=6bNo7VdQuAsT+gVmrk97BVLHu0PPQG/suCK5w9Sb7F0=;        b=SBiRTDkrWKkrRA55z0r9QV2+fRT8rSK8Ff+eQYsRoqVynnz+UFO6vSw1ga8+ovN+be         1Cy79WamK/bqX5TcI02C3+GknSqqtBCDeXRova2HXgxe3aAmol3ZVVDW4cReuMtOHi9/         HpEhFemNGjFfbTbAtfHa2YzTJJxD36hZUL0R7eQ7kEd2v/n4DmyUY2It4CQTZFy+qWHs         w9cbPM+EFPLd4SiFw2/mKlL7IVLaPUHefHaKfhWTVIi1XE55GoTiGz6ho1E3ITwrpMgR         0B7Ip2ux+sSbLEfF+jLd4div6v1wRe6sulkjTFro+dVc+MAVctuB8gby37TgivJGBkrN         YsIw==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=to:references:message-id:content-transfer-encoding:cc:date         :in-reply-to:from:subject:mime-version:dkim-signature;        bh=6bNo7VdQuAsT+gVmrk97BVLHu0PPQG/suCK5w9Sb7F0=;        b=CltI4ZGw75Td76uYZPz6EV+UEdwc2TCoUklSUuY8T9HC/gd87MvMeMxAb+QUFXq8QN         RnFAYNhUoEWGK4jzqV+ZPXL89vsCyP/a1e57XLwzGdjin1zi6w+rb9cAtXnATzjtiiqO         62IPWqe5zH3wZHnj1iYW1txytn+h7Tin+kX1na56nd0r91uk0AhrslnIRV62G5HeMJP+         KoVLnSLn4r/TEXsm8jK0h/a5/p8HUH+TwC5DoaSI2zdw5PbfuRRSGD7RM1llRAy6WSY0         SpcxBNLwNtA5KewKybh3GiLJCTxURdQtPIjQjk9y5q8zd1LVhpTQSKe6V7n/SYKsz/c6         kwHA==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1545105608; cv=pass;        d=google.com; s=arc-20160816;        b=ddRDewBJUSr+PAqZYd3YmgYOd1FnR9fHUeRFUhOB3Pv7q9T0ePIgOor8KWVx5Wo/lN         rOmV0bCE+dnxrDROtmWJiZNTDqFydhxHNH/XN30lkRRmkPMLeIj+xSim9KpknGtp25Ds         O2fPVe70Uaod+qU7k8GPJdExYLb5htqYQB8/YrObDssicG6muu0MYcDacYg8DlfZdw6A         9c1cNQlaI6Ksq/3/enDhNt5GLGVAvcOszKRAzkNrjmoZEv943fzz6Oat61RYNLFq7ctE         VYp37LjWfyovpNjIZjzA2qdybPPknP5WWZAk8ku91Vumt/7dBA7MR2VvNgQb45A9vyaw         f5pg==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1545105607; cv=none;        d=google.com; s=arc-20160816;        b=TQdherxtKrq1ssV8wJ4tb7T2oBPv0tariEcr1Q/wZVlP1bMO+s7lnWO1DmPRtiIeHr         QoepqJnSSQkqzTq9pC3v56vBMvzg3Pq3w/rbog9gbdj630uHqU46opkauDBp9oMMMGcI         HdQlV+2efGmLO8yumEBNpTjRX356Eg7ASpPZ+pIXNChub1AAXZUzAfyPoK1N+r6qI1r7         lcN/PNzFUvm9ngI/LseJ/pSIv0zBqel18qq1mtB54VO9ofx0fi6K7HBWEU2pPzLhijT6         ZrsYcj1vyRJ/O8zEPQ2hXHFpT/k3Fj97jtJBEzi1YKyEtWL3QeE/zm1kpEvXzQDdKeX/         c3rQ==</li>
<li>Cc: &quot;William S. Kessler&quot; &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;,        Martin Schmidt &lt;<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;,        Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;, Ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=mime-version:subject:from:in-reply-to:date:cc         :content-transfer-encoding:message-id:references:to         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=6bNo7VdQuAsT+gVmrk97BVLHu0PPQG/suCK5w9Sb7F0=;        b=FHy4JNNxcj31mVN61MeCRyXJBd2lNp1/TzU9RKgxrv+JgbqOyiqo8/rmFzofR7IO35         u1hy6GH5VW31id8ZJEjC19ydI2u2+9P8Y3y2Iqnan8OfMS/uUtOcnsHywhOPneaqNLpp         Xam2wMTFIoN3CiKJm8zyNio3B2maDylYVR2SHp1CbOXXWVPXHcFU3uCQoYgesPS/zYcb         lpe2xC/zbQMM7IKretB/fSZpaUsXKJMo0kPy170pxwZu1+/16BV4Ozz0m/0oU0AUu2fQ         6sUwaH9NOxXvB0SF6s7pVIyAUnNHWHekY9pbKs7hekEAozpmYQfU/ZsGJw4v8foZlrZw         xIaQ==</li>
<li>In-reply-to: &lt;CAFXLzPhi=YrDO2XQsASO7MP_ZzXHyD72untckyMFpaMkNhTq3A@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00454.html">CAFXLzPhYeiEFvKvFKnHyh1Kk4H6Q67+cH0rvW-0gLrXzwCT3eg@mail.gmail.com</a>&gt; &lt;<a href="msg00456.html">14D024AF-FF97-463F-B487-A388107A42BE@noaa.gov</a>&gt; &lt;<a href="msg00457.html">CAFXLzPiSn5CuO9Y4LWbO1WZA6+dJAnzB1GBBO1Ok7kb9MVgxVg@mail.gmail.com</a>&gt; &lt;CAFXLzPj4DTrngFndX8wrntZPGzw=20GGL3ptL9BVANqRTO2pqg@mail.gmail.com&gt; &lt;<a href="msg00459.html">CAEwQpaKJnwrkWdjOHysXv2BHHjebQ8GGp4sHaZ71fs6kuwfJwQ@mail.gmail.com</a>&gt; &lt;<a href="msg00461.html">ED957164-FDDC-42E8-A5B1-5156B6817841@noaa.gov</a>&gt; &lt;<a href="msg00462.html">dd88c1e1-1f8d-a507-49df-0f3dffb20e36@io-warnemuende.de</a>&gt; &lt;CAFXLzPhi=YrDO2XQsASO7MP_ZzXHyD72untckyMFpaMkNhTq3A@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>The problem with your method is that you need the perpendicular component at each gridpoint. Ryo's method will work for that:

&gt; The basic principle is &quot;easy&quot;: Let our &quot;coast line&quot; exactly follow the outline of the gridboxes that form Australia.  In this case, the &quot;cross-shore direction&quot; is either zonal or meridional exactly.  Therefore, the cumulative sum you want is the running sum of u &#x394;x or v &#x394;y, depending on the orientation of the local &quot;coastline&quot;.

But you would have to do that before unwrapping. Or, carry along a marker for the &quot;outward&quot; direction of each gridface. And surely this is a tedious calculation, very easy to make a mistake.

=&gt; And you must be sure to be consistent with the grid of the fields in question: B-grid or C-grid &lt;=

The divergence theorem method will be a useful check ... and this will need such a check!

Billy

&gt; On Dec 17, 2018, at 3:28 PM, saurabh rathore &lt;rohitsrb2020@xxxxxxxxx&gt; wrote:
&gt; 
&gt; Dear Ryo, Billy and Martin,
&gt; G'day
&gt; 
&gt; First of all thanks to Ryo and Billy for suggesting the solution using divergence theorem. However, I am in agreement with Martin because the purpose of this exercise is to see how the flux/transport vary at different locations at the land-ocean boundary. So I hope I should follow these steps to fulfill my objective but I am not sure, I have to look both solution (Martin's solution and Billy's Solution).
&gt; 
&gt; Billy's solution is the straight forward I guess and easy to compute.
&gt; 
&gt; In terms of Martin's solution which I was also thinking to proceed by the following steps
&gt; (1) get the coastline mask data this will give us the land-ocean boundary
&gt; (2) mask our variable of interest with this coastline data, before this make the coastline data of same resolution of variable of interest.
&gt; (3) arrange this 2-d data into 1-d format 
&gt; (4) do the running sum over this 1-d format data
&gt; 
&gt; Please let me know if I am right or wrong ?
&gt; 
&gt; challenges for the solution
&gt; (1) how to get the land-ocean boundary i.e. the coastline data
&gt; (2) unwrap it into 1-d data for running sum
&gt; 
&gt; So, in my thinking the solution looks like this but I don't have any idea that does it make any sense or not. if it does so how to proceed.
&gt; 
&gt; cheers, saurabh
&gt; 
&gt; On Tue, Dec 18, 2018 at 4:37 AM Martin Schmidt &lt;martin.schmidt@xxxxxxxxxxxxxxxxx&gt; wrote:
&gt; Hi all,
&gt; 
&gt; some ideas, only a concept:
&gt; 
&gt; - as a first step I would produde a land mask (0,1) on the grid of the 
&gt; fluxes just by mapping appropriate topography file onto the flux data 
&gt; grid. May be from etopo5.
&gt; 
&gt; - as the next step we should produce another mask that is &quot;missing&quot; 
&gt; everywhere except the coastal points defined as the boundaries of the 
&gt; previous mask. There may be zonal and meridional interfaces for a cell. 
&gt; Use the sign to mark, if east = in or east=out. No need to consider 
&gt; single points explicitly.
&gt; 
&gt; - multiplying u and v with the coastal mask and multiplying with the 
&gt; cell length (needs some thought dx = 1/2 (x_i - xi_1) + 1/2 (x_i+1 - 
&gt; x_i) = 1/2 (x_i+1 - x_i_1) or so) gives all transports. The sum over the 
&gt; area the full budget.
&gt; 
&gt; - Now use compressi to put the data onto two lines. Regridding to a new 
&gt; grid to put the data onto one long line is the next step. Almost there.
&gt; 
&gt; - Finally the carry out the sum and plot.
&gt; 
&gt; Best,
&gt; 
&gt; Martin
&gt; 
&gt; 
&gt; Am 17.12.2018 um 14:50 schrieb William Kessler:
&gt; &gt;&gt; On Dec 16, 2018, at 11:25 PM, Ryo Furue &lt;furue@xxxxxxxxxx&gt; wrote:
&gt; &gt;&gt;
&gt; &gt;&gt; Hi Saurabh and Ferret users,
&gt; &gt;&gt;
&gt; &gt;&gt; On Mon, Dec 17, 2018 at 3:31 PM saurabh rathore &lt;rohitsrb2020@xxxxxxxxx&gt; wrote:
&gt; &gt;&gt; Here is the thing that I am looking for. I want to plot the cumulative sum of the flux let's say starting from location of Melbourne covering all around Australia and ending at Melbourne.
&gt; &gt;&gt;
&gt; &gt;&gt; So it will give me line plot which show where (lat,lon) the flux is increasing or decreasing.
&gt; &gt;&gt;
&gt; &gt;&gt; If I understand correctly, that's exactly what I did in my paper:
&gt; &gt;&gt;
&gt; &gt;&gt;       <a  rel="nofollow" href="https://doi.org/10.1175/JPO-D-16-0170.1">https://doi.org/10.1175/JPO-D-16-0170.1</a>
&gt; &gt;&gt;
&gt; &gt;&gt; The basic principle is &quot;easy&quot;: Let our &quot;coast line&quot; exactly follow the outline of the gridboxes that form Australia.  In this case, the &quot;cross-shore direction&quot; is either zonal or meridional exactly.  Therefore, the cumulative sum you want is the running sum of u &#x394;x or v &#x394;y, depending on the orientation of the local &quot;coastline&quot;.
&gt; &gt;&gt;
&gt; &gt;&gt; Unfortunately, implementing this is complicated in my experience.
&gt; &gt; Yes, complicated, especially where the coast has indentations. And you must pay careful attention to the grid structure of u,v and T (or whatever quantity is being advected). Is it a B or C grid? The method will be different, and the answer could be very systematically different in a long integral.
&gt; &gt;
&gt; &gt; Why do you need a line plot and specific locations of the flux? If you only want the total integrated cross-shore transport then the divergence theorem is a better solution and not subject to these complications. (Though it will also require decisions about how to take the divergence derivatives at the edges ... then the difficulty will be at peninsulas, not indentations). The two methods would be a useful check on each other; the result will not be identical, and the difference would be a measure of uncertainty.
&gt; &gt;
&gt; &gt; Billy
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; 
&gt; 
&gt; REGARDS
&gt; 
&gt; Saurabh Rathore
&gt; Research Scholar (PhD.)
&gt; Centre For Oceans, Rivers, Atmosphere &amp; Land Science Technology
&gt; Indian Institute Of Technology, Kharagpur
&gt; contact :- 91- 8345984434



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00469" href="msg00469.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00454" href="msg00454.html">[ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
<li><strong><a name="00456" href="msg00456.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> William Kessler</li></ul></li>
<li><strong><a name="00457" href="msg00457.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
<li><strong><a name="00458" href="msg00458.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
<li><strong><a name="00459" href="msg00459.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00461" href="msg00461.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> William Kessler</li></ul></li>
<li><strong><a name="00462" href="msg00462.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00464" href="msg00464.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00467.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00469.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
</li>

</UL>
<center>[<a href="msg00467.html">Thread Prev</a>][<a href="msg00469.html">Thread Next</a>][<A HREF="threads.html#00468">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
