<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] 21 yr running correlation -->
<!--X-From-R13: "Ivyyvnz E. Yrffyre" <jvyyvnz.f.xrffyreNabnn.tbi> -->
<!--X-Date: Tue, 28 Aug 2018 12:01:21 &#45;0700 -->
<!--X-Message-Id: 97A70046&#45;1C6D&#45;48E1&#45;8C7D&#45;6CBD58B3D299@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAOhUinKa=DqR6q8Vi12PjJcxeWrr21PL6POVLv6SHXjWo1HsYQ@mail.gmail.com -->
<!--X-Reference: CAEwQpaLc1bXQ3cs5b9856QO_rN4Ac1Xa6VxQ2BAD5hNcbdTPCg@mail.gmail.com -->
<!--X-Reference: CAFXLzPg2ZzetV4ZaZJbMKWmXfFO=Fyj0UhoPr+hmUkx0Uw&#45;PtA@mail.gmail.com -->
<!--X-Reference: CAEwQpaLZmifxe9KNkK=UUAbyOsfuQCgERVbaUkEDFm7rpX8KPQ@mail.gmail.com -->
<!--X-Reference: CAFXLzPjBx83KX5n40Ex+vSn2qeLzbEX5+srnb7bNEFm1FoR_ow@mail.gmail.com -->
<!--X-Reference: CAEwQpaJrtt9RH9RXwJM_cD=Mme2_y5pFQ1afg7CbkRYq32xjgA@mail.gmail.com -->
<!--X-Reference: CALC=m4r0OjBk=&#45;Yp38EkdJPD0KtQmYRUKBUYo3HxJEoZS3oRXg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] 21 yr running correlation</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00304.html">Thread Prev</a>][<a href="msg00306.html">Thread Next</a>][<A HREF="threads.html#00305">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] 21 yr running correlation</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Satyesh Ghetiya &lt;<a href="mailto:satyeshghetiya@DOMAIN.HIDDEN">satyeshghetiya@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] 21 yr running correlation</strong></li>
<li><strong>From</strong>: <strong>&quot;William S. Kessler&quot; &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 28 Aug 2018 12:01:04 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=HusCDTYa;       spf=pass (google.com: domain of <a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>;       dmarc=pass (p=QUARANTINE sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=HusCDTYa;       spf=pass (google.com: domain of <a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>;       dmarc=pass (p=QUARANTINE sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:to         :references:message-id:content-transfer-encoding:cc:date:in-reply-to         :from:subject:mime-version:arc-authentication-results         :arc-message-signature:dkim-signature:arc-authentication-results;        bh=g07MlPL2Hql7KZ0YNyoRr9/+r+MSzZKCGpla9vfA+0Y=;        b=D/RFxxbBne6TME7cPLHQNofbyIlyWQi4YsJf7boVsZV9tdRji2zlq6/AY8tDLjidDb         KzokWKAqkxeDYkTEQG6J79FiA1Sej1VNbeKCje6tvy0GnVMjGhHE61/iln3ODQMKEZBt         aijl0dPwbmoXFI70fcqdRiKLPcFzAhiJHCfIPg1FdBTLvFiA70V4A2JscjwZoTMegf0q         ihH8INedfs2KgUtnA6LcZ3p2+so6DnE9T85GEPviRK4NiJs9Zgz7HxqMS+tlHovOoi5D         BvOYPEJAm3nfwnUi+I0G3luk+ADq9jD5M6RtIfG8+1vmkVAUPJ76t2Gs3/gSfTPWGm1O         qiLQ==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=to:references:message-id:content-transfer-encoding:cc:date         :in-reply-to:from:subject:mime-version:dkim-signature         :arc-authentication-results;        bh=g07MlPL2Hql7KZ0YNyoRr9/+r+MSzZKCGpla9vfA+0Y=;        b=YW+4Ne/kGL6jHHWYkKrRt33t1O/BbLaqWpBrOB8qsVCgWxnIdbFcIG6I368TeVJMHz         L9sgOrtT6zLSRaI1H87JI/q91JNmKic5UprGwpTivtsaomNLRVkrBas4ggkg5Rq2+sRD         9Hiuwabo/TGd7rFINvOTOCXyh8endDGqi0lYGJp8Zt7juAuyij8OmcgTIUXk0gLLPj2U         O+oo936FUakZJ1CjIO7L/0GjFqLBC2RodGNtEpCPoEmQCneSLtyvhZHvHhlXUKnD+Tx5         Qc5kWRWpxIs/XsZ+hVNMEr5BlfkHz+hDHVNwM1YhPUBsDvHt+rPZSbw+v1kNJx/Id7fk         Lz0A==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1535482881; cv=pass;        d=google.com; s=arc-20160816;        b=bcLcPZW673XiI0sD0pwYkNLobJSN8c0CJimt30vPWsp1L765YKTzDpfS/D/+ufiWGe         hGfO+AsJ3EzIVbnUmzf9+jGCoKG+W55FLEJsWyeWpIyOJiQ2Xho/aPExxNuO7H5tooHE         K0QFm15KMTUAJVL/Jw0JztxpWsxu5CXt0rxL0JfN681ObJRGetDh+CA6hLtveBSZFPKJ         pFtI8hUO5ZcjMSFv9BCS5MvKC03RQHCVIImjfWQWUXyLSQuaqXFQjOxSUaOEgxj60HY3         EuHAZ0UuakHdmj2OEdz33anPZ3Vq8MzALb4EX1kpMk+rHc5gPUsd9Q8A0/vuCPgmdlM0         DmmQ==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1535482880; cv=none;        d=google.com; s=arc-20160816;        b=Wr/mGAg0Gzu18OCLrKUM4hNVv3HPcMeUHxMsJ2r9c1jy9Rh3V2DEbQW6qsnpRRb3Gz         5MzqcpJIyEYlSF8aMFzmoQ2vDF8xY5hmkc6ItECLzBTYZ7do312lXM+POfT32A90xoYN         JjdN0OPK4FSp5GxOLRWujunZJ/E4O/tkmTOpY7ije+RkrLQ5/nTy6gzX6h9l2j8RPOHe         JwALlzav6EzFa/CgXXA6mQxzBMu9OsKdvCu7eLy81jaG4w+rOEp3sFJIwfM50pJntMa8         3tx6FkEoXNB5LKjLAZuFBJNxkrJfIH26CKUvMpwxxdcxRZbkV0nxI8BScsecQVaIj7m8         HQ4Q==</li>
<li>Cc: &quot;William S. Kessler&quot; &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;,        Sandeep Mohapatra &lt;<a href="mailto:sandeepmohapatra21@DOMAIN.HIDDEN">sandeepmohapatra21@xxxxxxxxx</a>&gt;,        ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=mime-version:subject:from:in-reply-to:date:cc         :content-transfer-encoding:message-id:references:to         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=g07MlPL2Hql7KZ0YNyoRr9/+r+MSzZKCGpla9vfA+0Y=;        b=n8/QQofx64/l1yXFBi6I4D0ECVUIDExNKpv2t+fL4BV9uYRdRBvQ9ub/lTuFOHsrfg         lFC6rQLm4b4uME8dFT+Sw1t2sumIWL7ABFZl2sk0nCkSDif2F/gOgPTu48ts15VsonOp         9FSX2da/BfZYa7q8dAkbsQ5v7CAY0gCT9Jej/VkMKEf+9ivKCGjJidXR+gw0PkulKeUQ         2TtEvjliPtqRwLWBUFZd6XeB7YFLddDtrYz1cyU9Povy1Khr5F8I3nUUYRCRmm1wn8aH         KB8vOmKzzyeOKnEwiGiKWNDnUEwcUZI6fkLrjyzmu1rC+PpPkm4bkg6Fgub3T5T0B1RK         ADtA==</li>
<li>In-reply-to: &lt;CALC=m4r0OjBk=-Yp38EkdJPD0KtQmYRUKBUYo3HxJEoZS3oRXg@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAOhUinKa=DqR6q8Vi12PjJcxeWrr21PL6POVLv6SHXjWo1HsYQ@mail.gmail.com&gt; &lt;<a href="msg00295.html">CAEwQpaLc1bXQ3cs5b9856QO_rN4Ac1Xa6VxQ2BAD5hNcbdTPCg@mail.gmail.com</a>&gt; &lt;CAFXLzPg2ZzetV4ZaZJbMKWmXfFO=Fyj0UhoPr+hmUkx0Uw-PtA@mail.gmail.com&gt; &lt;CAEwQpaLZmifxe9KNkK=UUAbyOsfuQCgERVbaUkEDFm7rpX8KPQ@mail.gmail.com&gt; &lt;<a href="msg00299.html">CAFXLzPjBx83KX5n40Ex+vSn2qeLzbEX5+srnb7bNEFm1FoR_ow@mail.gmail.com</a>&gt; &lt;CAEwQpaJrtt9RH9RXwJM_cD=Mme2_y5pFQ1afg7CbkRYq32xjgA@mail.gmail.com&gt; &lt;CALC=m4r0OjBk=-Yp38EkdJPD0KtQmYRUKBUYo3HxJEoZS3oRXg@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>This could be done in a single Ferret session, most conveniently if the running length isn't too long. All the quantities needed for the calculation can be found from A_bar, B_bar, Asq_bar, Bsq_bar, AB_bar, where A and B are your variables and _bar is taken over the running interval.

These can be defined manually by terms such as (schematically)

let a_bar = ( a[l=@shf:(-n)] + a[l=@shf:(-n+1)] + ... + a[l=@shf:-1] + a + a[l=@shf:1] + ... + a[l=@shf:(n-1)] + a[l=@shf:n] )/(2n+1)

Thus, a_bar is a function of t (and possibly x,y,z).

Similarly for b, a^2, b^2, ab. They're just sums. If the line length is too long, the sum above can be broken into separate variables, then summed.

Then find your variances and correlations algebraically from standard expressions using these 5 sum terms.

It might be a pain to type out (a good text editor would help), but would let you do this in one script without intermediate writes.

Billy K

&gt; On Aug 28, 2018, at 6:47 AM, Satyesh Ghetiya &lt;satyeshghetiya@xxxxxxxxx&gt; wrote:
&gt; 
&gt; Hi Sandeep, 
&gt;  
&gt; Do you have, for each year, correlation r in XY dimension ? I mean r for each grid point of XY for each year ? Also can you elaborate the dimensions of two data sets ? 
&gt; 
&gt; On Tue, Aug 28, 2018 at 11:48 AM, Sandeep Mohapatra &lt;sandeepmohapatra21@xxxxxxxxx&gt; wrote:
&gt; Hi,
&gt; can anyone tell me how to do 21 yr running correlation in ferret between two data sets.
&gt; 
&gt; 
&gt; 
&gt; 
&gt; 
&gt; Regards, 
&gt; G Satyesh,
&gt; India.
&gt; 
&gt; 
&gt; 
&gt; On Tue, Aug 28, 2018 at 6:16 PM, Ryo Furue &lt;furue@xxxxxxxxxx&gt; wrote:
&gt; On Tue, Aug 28, 2018 at 4:31 PM saurabh rathore &lt;rohitsrb2020@xxxxxxxxx&gt; wrote:
&gt; Dear Ryo,
&gt; 
&gt; Are you saying that the plot of such running correlation and trends will be like a time series ?
&gt; 
&gt; I'm sorry, Saurabh, Sandeep, and other Ferret users.  I've begun to think that my idea was wrong.  I thought @SBX was the solution, but it doesn't keep the same mean value over the window, in formulae like
&gt; 
&gt;       u' = u - mean(u).
&gt; 
&gt; So, indeed the correct solution would be complicated.  I'd like to know if there is an elegant solution.
&gt; 
&gt; Ryo
&gt; 
&gt; 
&gt; 
&gt; 
&gt; -- 
&gt; G Satyesh
&gt; 



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00306" href="msg00306.html">Re: [ferret_users] 21 yr running correlation</a></strong>
<ul><li><em>From:</em> Andrew Wittenberg - NOAA Federal</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00294" href="msg00294.html">[ferret_users] 21 yr running correlation</a></strong>
<ul><li><em>From:</em> Sandeep Mohapatra</li></ul></li>
<li><strong><a name="00295" href="msg00295.html">Re: [ferret_users] 21 yr running correlation</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00296" href="msg00296.html">Re: [ferret_users] 21 yr running correlation</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
<li><strong><a name="00298" href="msg00298.html">Re: [ferret_users] 21 yr running correlation</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00299" href="msg00299.html">Re: [ferret_users] 21 yr running correlation</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
<li><strong><a name="00300" href="msg00300.html">Re: [ferret_users] 21 yr running correlation</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00301" href="msg00301.html">Re: [ferret_users] 21 yr running correlation</a></strong>
<ul><li><em>From:</em> Satyesh Ghetiya</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00304.html">Re: [ferret_users] 21 yr running correlation</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00306.html">Re: [ferret_users] 21 yr running correlation</a></strong>
</li>

</UL>
<center>[<a href="msg00304.html">Thread Prev</a>][<a href="msg00306.html">Thread Next</a>][<A HREF="threads.html#00305">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
