<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Parsing errors particularly with semicolons on edison.nersc.gov -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Fri, 22 Jun 2018 09:29:22 &#45;0700 -->
<!--X-Message-Id: 385247bc&#45;2b24&#45;0a2f&#45;7e5d&#45;3d5af532d05d@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 18169BB1&#45;55ED&#45;4288&#45;9CA9&#45;4A42C07F5641@pnnl.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Parsing errors particularly with semicolons on edison.nersc.gov</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00202.html">Thread Prev</a>][<a href="msg00204.html">Thread Next</a>][<A HREF="threads.html#00209">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Parsing errors particularly with semicolons on edison.nersc.gov</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Parsing errors particularly with semicolons on edison.nersc.gov</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 22 Jun 2018 09:29:19 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=ekWUfkfz;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=QUARANTINE sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=ekWUfkfz;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=QUARANTINE sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:arc-authentication-results         :arc-message-signature:dkim-signature:arc-authentication-results;        bh=uxZmu+vT/NacCr01tVyv5exTzB8A9g4mzy6YFazT0zo=;        b=iDGFLVCbuhS5vy2h7vJ+pps55Ex0DNYCSuALVBNli9nuojKWrcook+GENLcRVm6bDR         OxsNakHy/I23hT78mbi0nIST/Klp0AMSMjHWS3Yjd/mF57dRiZQ53Q08ZEhH385193Qv         rnpeH0Aaa4q/Sg6n2x3SCTjw48V+0rAWfdURtUFc2Or4BRzqa37QrD7uDVsf6tC17lx+         NMIvQFqa6Tymw9q3jbcEjIPL2Hpxrxy5bsEBZAN8lGIafdjGO8YKDruCQHPIYyRfgzd8         VxJxkvV3lxL/DN3D6KulZnHKMgZscCQR6H0GYqwpRiHYnyP3hB6XdzLdqRjxcm6cUI8+         6uOA==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:dkim-signature         :arc-authentication-results;        bh=uxZmu+vT/NacCr01tVyv5exTzB8A9g4mzy6YFazT0zo=;        b=SgoAVYhT4rKyg8e7c/NkDwlG2zAIQ2DOLv5J4Dsu5MHk70uimJKFh708TDhoVlE5bs         iR6tZe0mko7wqV+TJTCLyTXDKyktSuQsgn4EPpeuR79FsLOuApawGf+aWf8KrJo4pADf         8N4zh1tuPwl2GiIIZEMneSxQUkGciZb2mdUeSIEAx/4o+0p1R2Z0RVvZl37g3FUy50lU         sE3TUgNNIihrvyLZu7GoXpg2Cga6/MMCcyDlD2YcX6Z+tyXaFv1uButUA7ted6zPTknb         xV40eH7ueCL6zbIE8wwuXJKQqN+b9MaMH69RXwsXgh7BO+eKqFK2xbuCKypgGB4e2LSq         ZV/A==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1529684962; cv=pass;        d=google.com; s=arc-20160816;        b=AiOkE/l6KLvV3UNdkjFx+5llR0M4vjPjkk9p2z3eHFbH3qT05gih7u1qEqww0m3DGZ         xek7ZygFcLeoXsPXF7QQk0MWeTgEc2cVKi5xA9IeOwpxBKKAxWdafMUCDO9a1kNPms8i         hpGArDbrwcFhUYOgrzKDHO4ByiM+KgzBqA1j8ckF1NJhyYYkiFyp4RDoje82LrGvmSdI         3aUKm6E2lXlpTnfa1y+54CQF2o49dxlbSs0TeicEYQqsInVaMzODXBzj0T0r3swZFMRU         vfPwTMpOX8iITBTjSF08kgS4B79rQHF3TQx0LVCgcr8tzOvMYISYDI+AH8N2q65UPaSN         zFsg==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1529684961; cv=none;        d=google.com; s=arc-20160816;        b=UORZjd93V1sc+gN77jeY+RAMgFc5zSHiFLidIFbllUkiJOSNtYyNdxIgkBS/lQcpGK         mLqYzrS+HqbgrYG0Lxb/7dMYzuvHF/mI3mlehu1AOjQJXEHJesuDJ3n1z2ZyLi53O7N6         lzjuO1iFjAXskaO3DoLwXO0XczrkJLcQ8+uOp3CCiHgRK9dDg5j+QAuZdSM3q1g4riiU         VGTLqAmdNPLJ6DBQWuXZVIeCApjX4+gtnt7TVR59kthwo5Zh1wrgtbNGVrOySKQ9uTOw         Y6jBZHy0ui1SyIHfM7GP4S7hHnQmKLLgw/1E17/fhfFCQcibJ4RqieFe3QVrGjCGH2Hz         ZWFg==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-language:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=uxZmu+vT/NacCr01tVyv5exTzB8A9g4mzy6YFazT0zo=;        b=ebJ+14/XoU2ty9LKC/RyrAAWPl8NdEl2TpOFjbF+Oguf5DMtt9SGqSoPd7HnB613Kt         CgC9jek/1+rPb9+oDslLi9BYk7OcAJtR6fshRTRRPnitvzwEO2e/yCTXWZ68VZVQTHXV         WPVmScp+xxWGtzySXRtWXG0t39G9FawUTyA6TodjYwKIEoe7f+N+4rtMVyYj2dLwgj6u         6SUL0gIKAmi92JC/rW98MkSPeqvFJJsvjVOeraRA1AprTCCwEgayISIpQxV6x/jIOHJs         UIe9wsy60lvk5KPCYUgHgZx5UzGlsVizaI9FW2ZcaTrrcI9W3OhVbswh2YxpyXrIC2Re         l3MA==</li>
<li>In-reply-to: &lt;<a href="msg00202.html">18169BB1-55ED-4288-9CA9-4A42C07F5641@pnnl.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00202.html">18169BB1-55ED-4288-9CA9-4A42C07F5641@pnnl.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:52.0) Gecko/20100101 Thunderbird/52.8.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <p>Hi,</p>
    <p>We're looking into this - it may be related to a&#xA0; system library
      used by the executable, built on the Cray computer.</p>
    <p>Meanwhile here's a workaround for the issue of repeat loops and
      semicolons. This is a good thing to know in any case when the
      contents of repeat loops start to get long or the constructs are
      getting complex.&#xA0; It allows for better readability of the
      commands.&#xA0; Put the commands within the loop into a separate jnl
      file and change the loop to just a call to run that script.&#xA0; For
      the simple example Bill shows:</p>
    <p>myscript.jnl contains:</p>
    <blockquote><tt>! myscript.jnl<br>
        ! Run this inside a loop that defines nn<br>
      </tt><tt>say `nn`</tt><br>
      <tt>set reg/L=`nn`</tt><br>
    </blockquote>
    Then the loop would just be:<br>
    <blockquote><tt>repeat/name=nn/range=1:3 (go myscript)</tt><br>
    </blockquote>
    <br>
    -Ansley<br>
    <br>
    <br>
    <div class="moz-cite-prefix">On 6/18/2018 4:44 PM, Gustafson,
      William I wrote:<br>
    </div>
    <blockquote type="cite"
      cite="">
      
      
      
      <div class="WordSection1">
        <p class="MsoNormal"><span style="font-size:11.0pt">Hello,<o:p></o:p></span></p>
        <p class="MsoNormal"><span style="font-size:11.0pt"><o:p>&#xA0;</o:p></span></p>
        <p class="MsoNormal"><span style="font-size:11.0pt">I am running
            into issues with Ferret not properly parsing text on the
            machine edison.nersc.gov, which is a Cray computer run by
            NERSC. They have asked that I contact the Ferret user group
            for help because they do not readily support Ferret
            (although they did the install so I do not know if they
            compiled from scratch or used a pre-built version).<o:p></o:p></span></p>
        <p class="MsoNormal"><span style="font-size:11.0pt"><o:p>&#xA0;</o:p></span></p>
        <p class="MsoNormal"><span style="font-size:11.0pt">Specifically,
            I am running into issues with Ferret&#x2019;s command line
            interpreter not parsing text properly. I will give it a line
            of text, but some of the characters get ignored and
            sometimes others get repeated. This garbles how scripting is
            handled and makes it very difficult to use Ferret for any
            serious work. I find this problem comes up particularly when
            using a ";" (both within repeat loops and on stand-alone
            lines). Other characters also trigger the issue. I have
            never seen this behavior on any machine besides edison, so
            there is something specific to this installation that is
            broken. Anybody else seen this sort of behavior and have
            suggestions on how to fix it?<o:p></o:p></span></p>
        <p class="MsoNormal"><span style="font-size:11.0pt"><br>
            Here is a command that succinctly reproduces the problem. On
            edison, start ferret and then type
            <br>
            repeat/name=nn/range=1:3 (say `nn`; set reg/l=`nn`) <br>
            <br>
            The output on any other machine is: <br>
            <br>
            yes? repeat/name=nn/range=1:3 (say `nn`; set reg/l=`nn`) <br>
            !-&gt; REPEAT: NN:1 <br>
            !-&gt; MESSAGE/CONTINUE 1 <br>
            1 <br>
            !-&gt; set reg/l=1 <br>
            !-&gt; REPEAT: NN:2 <br>
            !-&gt; MESSAGE/CONTINUE 2 <br>
            2 <br>
            !-&gt; set reg/l=2 <br>
            !-&gt; REPEAT: NN:3 <br>
            !-&gt; MESSAGE/CONTINUE 3 <br>
            3 <br>
            !-&gt; set reg/l=3 <br>
            <br>
            <br>
            However, on edison, I get: <br>
            <br>
            yes? repeat/name=nn/range=1:3 (say `nn`; set reg/l=`nn`) <br>
            !-&gt; REPEAT: NN:1 <br>
            !-&gt; MESSAGE/CONTINUE 1 <br>
            1 <br>
            !-&gt; yes? repeat/name=nn/range=1:3 (say `nn`; set
            reg/l=`nn`) <br>
            !-&gt; REPEAT: NN:1 <br>
            !-&gt; MESSAGE/CONTINUE 1 <br>
            1 <br>
            !-&gt; set reeg/l=1 <br>
            **ERROR: invalid subcommand: reeg/l=1 <br>
            set reeg/l=1 <br>
            Command file, command group, or REPEAT execution aborted <br>
            **ERROR: invalid subcommand: reeg/l=1 <br>
            set reeg/l=1 <br>
            Command file, command group, or REPEAT execution aborted <br>
            <br>
            Notice that when Ferret shows what it is executing (the
            lines starting with "!-&gt;" the line that should be "set
            reg/l=1" gets garbled to "set reeg/l=1".
            <br>
            <br>
            Thanks, <br>
            Bill<o:p></o:p></span></p>
        <p class="MsoNormal"><span style="font-size:11.0pt"><o:p>&#xA0;</o:p></span></p>
        <p class="MsoNormal"><span style="font-size:11.0pt"><o:p>&#xA0;</o:p></span></p>
        <p class="MsoNormal"><b><span
              style="font-size:10.0pt;font-family:Helvetica;color:#D27416">___________________________________________________________________</span></b><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black">&#xA0;</span><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><b><span
              style="font-size:10.0pt;font-family:Helvetica;color:black">William
              I. Gustafson Jr., Ph.D.</span></b><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black">Scientist&#x2028;</span><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black">ATMOSPHERIC
            SCIENCES AND GLOBAL CHANGE DIVISION</span><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black">&#x2028;Pacific
            Northwest National Laboratory</span><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black">P.O.
            Box 999, MSIN K9-30</span><span style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black">Richland,
            WA &#xA0;99352</span><span style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black">Tel:
            509-372-6110</span><span style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black">&#xA0;</span><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black"><a rel="nofollow"
              href="mailto:William.Gustafson@xxxxxxxx"
              moz-do-not-send="true"><span style="color:#D57507">William.Gustafson@xxxxxxxx</span></a></span><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:black"><a rel="nofollow"
href="http://www.pnnl.gov/atmospheric/staff/staff_info.asp?staff_num=5716"
              moz-do-not-send="true"><span style="color:#D27416">http://www.pnnl.gov/atmospheric/staff/staff_info.asp?staff_num=5716</span></a></span><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><span
            style="font-size:10.0pt;font-family:Helvetica;color:#D27416"><a rel="nofollow"
              href="http://www.researcherid.com/rid/A-7732-2008"
              moz-do-not-send="true"><span style="color:#D27416">http://www.researcherid.com/rid/A-7732-2008</span></a></span><span
            style="color:black"><o:p></o:p></span></p>
        <p class="MsoNormal"><o:p>&#xA0;</o:p></p>
      </div>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00202" href="msg00202.html">[ferret_users] Parsing errors particularly with semicolons on edison.nersc.gov</a></strong>
<ul><li><em>From:</em> Gustafson, William I</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00202.html">[ferret_users] Parsing errors particularly with semicolons on edison.nersc.gov</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00204.html">[ferret_users] Orthographic projection - variable from 1-degree model</a></strong>
</li>

</UL>
<center>[<a href="msg00202.html">Thread Prev</a>][<a href="msg00204.html">Thread Next</a>][<A HREF="threads.html#00209">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
