<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] @FNR in 2D fills up x dimension first -->
<!--X-From-R13: Vryyn Dvrqr <Vryyn.DvrqrNqjq.qr> -->
<!--X-Date: Fri, 29 Jun 2018 02:30:18 &#45;0700 -->
<!--X-Message-Id: 9af60bb2&#45;2994&#45;6d97&#45;107c&#45;d9b037f2038e@exch.dwd.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: b707eb3a&#45;0146&#45;60d9&#45;b4c5&#45;9c768979a732@exch.dwd.de -->
<!--X-Reference: 7407c5e3&#45;a7a9&#45;0a98&#45;cf00&#45;543a6892af6c@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] @FNR in 2D fills up x dimension first</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00220.html">Thread Prev</a>][<a href="msg00223.html">Thread Next</a>][<A HREF="threads.html#00222">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] @FNR in 2D fills up x dimension first</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] @FNR in 2D fills up x dimension first</strong></li>
<li><strong>From</strong>: <strong>Hella Riede &lt;<a href="mailto:Hella.Riede@DOMAIN.HIDDEN">Hella.Riede@xxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 29 Jun 2018 11:30:07 +0200</li>
<li>Arc-authentication-results: i=3; mx.google.com;       arc=pass (i=2);       spf=softfail (google.com: domain of transitioning <a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxx</a> does not designate 52.222.5.176 as permitted sender) smtp.mailfrom=<a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       arc=pass (i=1 spf=pass spfdomain=dwd.de);       spf=softfail (google.com: domain of transitioning <a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxx</a> does not designate 65.127.216.230 as permitted sender) smtp.mailfrom=<a href="mailto:Hella.Riede@DOMAIN.HIDDEN">Hella.Riede@xxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       spf=pass (google.com: domain of <a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxx</a> designates 141.38.3.245 as permitted sender) smtp.mailfrom=<a href="mailto:Hella.Riede@DOMAIN.HIDDEN">Hella.Riede@xxxxxx</a></li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:content-transfer-encoding:content-language:in-reply-to         :mime-version:user-agent:date:organization:from:references:to         :subject:arc-authentication-results:arc-message-signature         :arc-authentication-results:arc-message-signature         :arc-authentication-results;        bh=5jGEYgfHAfSSs2t3ig4LSN7Pt1hN+EolcUcGltJM3QQ=;        b=0d3oMPYETK9Ec3+9YmveScWVVqaWMS1dAWDyIdPzeTg7NH0Ze/ByUoDBT4AlYSjkfQ         A1+Q4jxC37a2irgVQ4pv9Dsv222kYXum4avb2jO93u70OpiHD8/SaSHg8okiEMi5jbX/         CR6wvJ44fHPWssaCqcSjzOAQMnSEKEuH5/z8UlGjweIYk2SBWah0S9W1aQJ6jmRaqot4         aRM2MNKeQUPo81LAZ6rdydVGCjH5bMwTFB8tLr3nlffuReVJYpYbUwnYUT9GszseiXh4         vl3PR3Zs+3bsxMujgMOvgC+8yFHpsOz/HU+tlMO5W/Jq/dNSozxUpUmiPGayhDKzIIrk         i6XQ==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-transfer-encoding:content-language:in-reply-to:mime-version         :user-agent:date:message-id:organization:from:references:to:subject         :arc-authentication-results:arc-message-signature         :arc-authentication-results;        bh=5jGEYgfHAfSSs2t3ig4LSN7Pt1hN+EolcUcGltJM3QQ=;        b=oRV0dS6Bft1Sol5tDSflxo0sBqNhUKgFiUVyV5qSNKb6r9r0rLttQ5hO/43Fj11/+P         FIxd9/jqJR5/1vAKo1UREPeWsT8K1lRM287xNorc19YbEj+pRnPtRDEsm5DmeX/S8wYp         n1GJQfcpKKo6/XLcimvWE0Ho5SJcSnDTE4moCeBQhrcNlin66nvSylFCFpkXKGGrZAqd         ryL+MPy0yIhDllz7HrA/8TfC6w5C+Gl7PrbmXhIv1J5rq3FfSRtCduHlPpc/vfgTgdks         0l+w7Kx0afoTtcccZ8O8b6nSlyCKcr+FpZBvMqahcvABbBuiMzhZeXF0064Khiaf/OVS         qHig==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-transfer-encoding:content-language:in-reply-to:mime-version         :user-agent:date:message-id:organization:from:references:to:subject         :arc-authentication-results;        bh=5jGEYgfHAfSSs2t3ig4LSN7Pt1hN+EolcUcGltJM3QQ=;        b=sesRqgDZDLfKkUZORYHosvvDvbA0MH1xU122gbei4Iw55aQwTgSa84bOzaBDsVjkIk         wMNtGUuCwW0gZtFk55psIdkWgID6hOoFed1qvBXFFvy9FAI+eEiUzup2wYVXUhChr1EF         OJxNo1T+E6Fobvc/pzHGElVyWaR1Cno9y+x2jjsBAumPw1eJKQxaxH8z+p1wIyAR3SBa         t1ZhFXL96bfqCjb4Qi4PBNrvm2zyXYBndk5KwVWOfVcFcjBH8uEm+ZWTe0dJEr365KeC         ej0GTbgfBAaYMPY1orflrvHVH1Aqwf81I0RVP+LQZwwvVw6QAOnmwg57HWJUqjUV/wYw         5XtA==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1530264617; cv=pass;        d=google.com; s=arc-20160816;        b=KyiaihpE5vmojztbPU6Tmc4dNFrtcOvU3PSSLfNOVtZqdKYsWbGVifzk/yPhyNYbVi         S9KCBRcGGnYJnJiJpHFHXaF5bgoNgGTtExMU/ZwtR/oCMEHU+zpyS8ve/3DyIIjZBCTo         Vp7ZIZWfNMb2+tgtwt9aK4xQw8R5yjlptmBUd4IjEKmNF29a7NZo5f6NeOpFfVFJ7pSh         y9cRaHIgACDDwWF0G8W4oUT7dQ9iKK8SyaJWnudJzJnmOMedr/Bw8UmvEtATcKdnC2LL         /q6eNK/EI80xLFAfbsJOZQBKaD80DhpjQMGg2qVrFhSNGpZFlTT+7CJwFw6QQXikixuS         2VuQ==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1530264613; cv=pass;        d=google.com; s=arc-20160816;        b=oJ5KqYl+CtTDolqZsAgFXTUnwaPVO29LdUSpwWi/QG0Jvgn/CXfMgB1XaJqOmH6OK6         H+13k/8DXY3umzQPdcxpysME/0/wE+U/LncktmRRKbj+VzcaCzkTDKg7eplMhoixRJSO         t03Ecwo1l41cBR+TMR4viSi9rMFm3rvsPSAVVcJrOp2/2BIKZRayujpwOpOGgo4KJV2c         Ye5OmwUrRH/08B7T1/FdRiYTYf6pQU6IHlBbaKwOy9coFwspVxdOWtZrP6KBRH+sVwqc         Hhc5u793Uxke/v9OaJcS1omfJmgE4WMlKoYFyUCetYt8DcOJDlcy1jXFXB94XlrTg9bJ         vBRw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1530264608; cv=none;        d=google.com; s=arc-20160816;        b=ZDE6+AT1eb4PSiKY4ELk+NYK8QxQwHVi/0kTGOztOdrekhX8BjhZhQlqGrh+QlmN8z         mOWfYx2mTPsSrJmPqMr2UK45QqqZIu/fidGPq38qydXUHMclfUlenPUZS1Bml4S2jec8         LdSMHSPxuIa9u7xdnEAonwOMOKx7c5TltcginwV4u1om08A1YEfOv+RJ/a+xQq6NWhOa         AezLGAjaxKzenunUA+cIxPFVro6fGMLgHoCKm77fnprMq/5rYr8XFaMFn97u6dYX/RFV         SdB0JJNMsdyoNWQk38diNwXIwOeO6UEcrNOx8czRudjmnxT5+CqIX+yp5WHzoDN/Q80D         jung==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:subject:to:references:from:organization:date:user-agent         :mime-version:in-reply-to:content-language:content-transfer-encoding         :message-id:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive;        bh=5jGEYgfHAfSSs2t3ig4LSN7Pt1hN+EolcUcGltJM3QQ=;        b=iDmWszEald782a/xVyW1BubEr7KottvJ/izfgPENn2ljG1I6jrWSmxk0xQGcf7abxz         QiGAk3p9zabwvMij81AvhZ1p078w/HMD1Sx2w8q1NZ8wa7Vna2bjBkzQpyQvN7g8BQK3         DZEplnD3mH5RuKUslLiI8N/tmmv+JInm3N2SPsa2Cp/A7tsBJMc08rApymwyLfFEu4Rp         K8+ZMSX28MXfN+iMgrP3kCajjdvBaRcVQx/K/N1tlU1wqnG4ZpFV5VH+nA9Q2ZYkimSL         6DC+tqGRmHTbqdWO4qlKwElBArI5P/f2AzoZvxkfzKJxH+XqrI9etjsWKdSXP9k6mxZP         hWog==</li>
<li>In-reply-to: &lt;<a href="msg00220.html">7407c5e3-a7a9-0a98-cf00-543a6892af6c@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>Organization: Deutscher Wetterdienst</li>
<li>References: &lt;<a href="msg00218.html">b707eb3a-0146-60d9-b4c5-9c768979a732@exch.dwd.de</a>&gt; &lt;<a href="msg00220.html">7407c5e3-a7a9-0a98-cf00-543a6892af6c@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Thunderbird/52.8.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Oops, pity.
Thank you for the reminder, Ansley!



Am 28.06.2018 um 18:31 schrieb Ansley C. Manke:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Hella,

</pre><tt>Only a few of the transformations are calculated in multiple 
</tt><tt>dimensions.&#xA0; Most apply the operation one direction at a time as you're 
</tt><tt>seeing here. For transformations in general 
</tt><tt>&lt;<a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS#GeneralInfo">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS#GeneralInfo</a>&gt;, 
</tt><tt>
</tt><pre style="margin: 0em;">

 &#xA0;&#xA0; /Transformations are normally computed axis by axis; if multiple
 &#xA0;&#xA0; axes have transformations specified simultaneously (e.g.,
 &#xA0;&#xA0; //U[Z=@AVE,L=@SBX:10]//) the transformations will be applied
 &#xA0;&#xA0; sequentially in the order X then Y then Z then T.//...
 &#xA0;&#xA0; /

</pre><tt>only averages and definite integrals are computed using multiple 
</tt><tt>dimensions, as they involve area calculations, and NGD and NBD also 
</tt><tt>count over all dimensions given.&#xA0; So yes, the filling transformations 
</tt><tt>fill in X then in Y, etc.
</tt><pre style="margin: 0em;">

Ansley


On 6/28/2018 7:37 AM, Hella Riede wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hello ferret community,

</pre><tt>I am using @FNR in two dimensions and got an unexpected result (see 
</tt><tt>ferret script at end of this mail):
</tt><pre style="margin: 0em;">

</pre><tt>In the attached ferret_before_FNR.png, the original 2D grid cells are 
</tt><tt>shown (values inherited from dots by scat2grid, see below).
</tt><pre style="margin: 0em;">

</pre><tt>ferret_after_FNR.png shows the result after applying @FNR (fill with 
</tt><tt>nearest neighbor) in 2 dimensions.
</tt><pre style="margin: 0em;">

</pre><tt>As an example for the unexpected result, lets take the grid cell at 
</tt><tt>(x=8,y=5). Its value before @FNR was undefined. The nearest neighbor 
</tt><tt>is (x=8,y=8). Yet, the value is inherited from (x=2,y=4).
</tt><pre style="margin: 0em;">

</pre><tt>Is @FNR not supposed to be applied in 2D or is the logic behind 
</tt><tt>different from what I expected? It seems the missing points are always 
</tt><tt>filled up in x dimension first, and only remaining missing values are 
</tt><tt>then filled up in y direction ...
</tt><pre style="margin: 0em;">

</pre><tt>I attached a manual version of what I would have expected as 
</tt><tt>ferret_FNR_expected.png.
</tt><pre style="margin: 0em;">


Thank you very much in advance for helping to clarify this.


Best regards,
Hella Riede




can var/all
can sym/all

let a&#xA0;&#xA0; = {1,1,8,8,2}
let b&#xA0;&#xA0; = {1,8,8,1,4}
let val = {2,4,6,8,10}

def ax/x=1:8:1 xax
def ax/y=1:8:1 yax

def sym lev = (1.5,10.5,1)

!! assign values from dots to grid cells
set win 1
</pre><tt>let gridded = 
</tt><tt>SCAT2GRIDGAUSS_XY(a,b,val,x[gx=xax],y[gy=yax],0.8,0.8,0.8,0)
</tt><pre style="margin: 0em;">
shade/lev=($lev) gridded
!! plot original scattered values for comparison
go polymark poly/lev=($lev)/key/ov/line/fill a b val circle 2


!! fill up undefined values with nearest neighbor
set win 2
let nn = gridded[x=@FNR,y=@FNR]
shade/lev=($lev) nn
go polymark poly/lev=($lev)/key/ov/line/fill a b val circle 2

</pre></blockquote></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00218" href="msg00218.html">[ferret_users] @FNR in 2D fills up x dimension first</a></strong>
<ul><li><em>From:</em> Hella Riede</li></ul></li>
<li><strong><a name="00220" href="msg00220.html">Re: [ferret_users] @FNR in 2D fills up x dimension first</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00220.html">Re: [ferret_users] @FNR in 2D fills up x dimension first</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00223.html">Re: [ferret_users] @FNR in 2D fills up x dimension first</a></strong>
</li>

</UL>
<center>[<a href="msg00220.html">Thread Prev</a>][<a href="msg00223.html">Thread Next</a>][<A HREF="threads.html#00222">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
