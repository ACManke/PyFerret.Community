<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] define new variable with different grid -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 30 Jan 2018 12:45:12 &#45;0800 -->
<!--X-Message-Id: 7648657a&#45;8aad&#45;a286&#45;1003&#45;0eca16fe3813@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: C4869110&#45;6B44&#45;4FDF&#45;A75E&#45;3C37D1CF6325@gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] define new variable with different grid</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00020.html">Thread Prev</a>][<a href="msg00022.html">Thread Next</a>][<A HREF="threads.html#00021">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] define new variable with different grid</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] define new variable with different grid</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 30 Jan 2018 12:45:10 -0800</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.s=20150623 header.b=s1EnFPc4;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.s=20150623 header.b=s1EnFPc4;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a></li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:arc-authentication-results         :arc-message-signature:dkim-signature:arc-authentication-results;        bh=R3LXWwcmeENr4+zMmlB12Ac9d5hD1A1ALr4AB9OfNbY=;        b=K8iMOi5UD1QPgbSW35yqCoWIhb3IFA14gk4ncLNRsJD3XXOZ9vin5U1LIEwEj4z5/i         5R/WkO2QRdJ4nCQx7NsBTub+xNrses4EXqLCXUkIGhllDMM2kKCuCjtN5eIKwhPMRIe9         lDUNBuQgKk5uh+Gt9NjEqK9Q+qbi60DMYmRd+1DPnKH7Valgj/CNOKB4X4yDrDPi+pqJ         KC1YaecuGWRinLcr1LhCKKXwQ71T2nmOYerI/OXcDF+JuDixkEQ1Tz10rJyTtE4XFo+u         qA73/QCpytPq9jsWuCR3cVLwMPYmowv6L2Hik8TqISfMUTpB6mR8CxBvFntB233iZLXL         eFFA==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:dkim-signature         :arc-authentication-results;        bh=R3LXWwcmeENr4+zMmlB12Ac9d5hD1A1ALr4AB9OfNbY=;        b=oI8N1/1Lye790OoPjd1LRpaLMRFhjZqZ3dAQ8xb+71pBVknpAs7yMwMhkmVVmuolG4         y+nF2u2OvygnktTQANxw51AvEM/JE8XLnkHWCyTSo46fQuZMaw8AnA9hIAbjlrHWoUh5         qKmdzis6cB+ESFCHNoQSgH/krufxYf0EfAZqbM9haB55TUiGeEdfi1EpLJZ5nXPmx7s/         uvounuFkpyXD34dBjGJ2f9Fw6nMvkQBVeiTu5CCUtjJ760iXDWWYoP2HXDGO+Tckpau5         j40rd3kmV5nU7jLNI4LDazK+Y5+zUJNjbo6yDBN4z3yqDDJWfTNFk6WsBOIdIlO0H92H         BipA==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1517345112; cv=pass;        d=google.com; s=arc-20160816;        b=RqFqT+6W9yYZTcvkKrZ9P60K02A5rYYGgrLkS6dWxGLzlx4FpXOpacMgQmOECefjnn         DYTBAcmhBklJQ3bKrQ+/EkARueobPUqYZMf9Jxa2rl7wY2MtGjAUfQ0w6KKmYFDgHuaP         xt0enzpZy4vx4aK5gaADTxBhMROtY7094ZJnG6OrxVZkE4OKRs3OEjfI1xuC3BAv4oUO         Fh0n9oTEDaDUOX32fbkZ353UeJALvQX+zSv+OWEeurgvd27ibZhWBLKEeN7MdiNegh1+         H+kC87nvz3pZxymKwjvLdd/fLh8gDWbCSmuJthwvzgxibPcGKx7Wk6lpTgIhyKanKQiI         keFA==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1517345111; cv=none;        d=google.com; s=arc-20160816;        b=aAnE3ifSG9yFQZXqqTWyFZqMgtyyT7DZJ0dlM381SafO0igrbpNDDFyOApo1p8Nf5k         3L2QcchtIU23i0XRYBotiO5o3gTcMjKcO+aEgCtvOKom56ueyz6sla//VD7EHGdWDytr         mDf5GrSmWXMaUaTMCoXwhohRA+p0uXT669+/7Rb6nimAcCwNhxp6L5sXU+KXMKew2bvz         fwSlJyvZq64RocwdhWusFyN9pkVzHqJrj03oMQ0pTkmbvSgNjVTZBPLiL0fN9Z4PJwSP         wgS5HllL66/h4xnfM1Rlq8bR5BN2/RCrSYZvKDj6bb5A+10B06N753UCP80clm6306bv         oEeA==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-language:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=R3LXWwcmeENr4+zMmlB12Ac9d5hD1A1ALr4AB9OfNbY=;        b=mtzHqd7O3DagUInYSEqEoY94mfnzxW5sN6DRcXA9nP6O2VzGl2C8LotXZnpisW3T1T         jrlH2vt7ooIALGHOWYvdS4oFScSPJvmFHgzqpg6jYR5Q5goSi8i5FM+4r9dhkQp4mSnm         UDKst5uwo1+0AIEuKAXrvpxmKOXKhzSXxWdPYv9u2Q4T4+MOQEoVBDC7dUKd+4fWUNFS         N6FNOxalO1IbH0bZ1U0WJFm5C7L4wFduG+acq7n1IGfTi6rRpSTe/Cx9Uo59a0//QoN6         vQn6rKgdqQDOwenBJVrdTMHDF7ZGC9FaNRGG/RlXiBP5IF9Owwz4/BYEONb/0I86RJH2         PA1w==</li>
<li>In-reply-to: &lt;<a href="msg00020.html">C4869110-6B44-4FDF-A75E-3C37D1CF6325@gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00020.html">C4869110-6B44-4FDF-A75E-3C37D1CF6325@gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:52.0) Gecko/20100101 Thunderbird/52.5.2</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <p>Hi Lina,</p>
    <p>I'm not sure I understand how the data depends on L.&#xA0; It sounds
      as if each variable has non-zero values at the L=1:10 at the same
      x,y,z locations, is that correct?<br>
    </p>
    <p>It's a problem that uses several of Ferret's grid-handling
      capabilities, so kind of an interesting example.<br>
    </p>
    <p>-Use transformations to squash each variable down to the non-zero
      entry in the I,J,K directions. The data will remain where it is in
      L.&#xA0; Any of the "compressing transformations such as @SUM or @MAX
      will get rid of the dependence on the original grid.</p>
    <p>-Put the data onto a new x axis,&#xA0; X=1:55, using Ferret's&#xA0; concept
      of "conformability".<br>
    </p>
    <p>-Write a netCDF file using the ideas of "appending a slab to a
      netCDF file" (See APPEND in the Users' Guide index), so you can
      list the data from each new variable into the next slot.</p>
    <p>Here's a short example, using some simplified variables.&#xA0; <br>
    </p>
    <p><br>
    </p>
    <tt>yes? let a_1 = {0,0,0,3,0,0,0}</tt><tt><br>
    </tt><tt>yes? </tt><tt>let a_2 = {0,0,0,0,0,0,6,0}</tt><tt><br>
    </tt><tt>yes? let a_3 = {4,0,0,0}</tt><tt><br>
      ...<br>
    </tt><tt><br>
    </tt><tt>! The</tt><tt><tt> @sum</tt> gets rid of the dependence on
      the original grid</tt><tt> in i,j,k.</tt><tt><br>
      <br>
    </tt><tt>yes? let var1 = a_1[i=@sum]&#xA0;&#xA0; ! you'll use
      a_1[i=@sum,j=@sum,k=@sum]<br>
    </tt><tt>yes? list var1<br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : A_1[I=@SUM]<br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; X&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; : 0.5 to 7.5<br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 3.000<br>
      <br>
    </tt><tt>! Define the output axis - length is the of the number of
      variables we're going to append.</tt><tt><br>
      <br>
    </tt><tt>yes? define axis/x=1:5:1 xax5</tt><tt><br>
      <br>
    </tt><tt>! We'll list i=1 of this variable to t</tt><tt>he output
      file.</tt><tt> var1 does not depend on x, so adding<br>
      ! a zero-valued _expression_ on xax5 puts it at every location of
      xax5 (conformability).<br>
    </tt><tt></tt><tt><br>
    </tt><tt>yes? let outvar = var1 + 0*x[gx=xax5]</tt><tt><br>
    </tt><tt>yes? list outvar</tt><tt><br>
    </tt><tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : VAR1[I=@MAX] + 0*X[GX=XAX5]</tt><tt><br>
    </tt><tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SUBSET&#xA0;&#xA0; : 5 points (X)</tt><tt><br>
    </tt><tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Y&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; : 1</tt><tt><br>
    </tt><tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Z&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; : 1</tt><tt><br>
    </tt><tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1&#xA0;&#xA0;&#xA0; </tt><tt><br>
    </tt><tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1</tt><tt><br>
    </tt><tt>&#xA0;1&#xA0;&#xA0; / 1:&#xA0; 3.000</tt><tt><br>
    </tt><tt>&#xA0;2&#xA0;&#xA0; / 2:&#xA0; 3.000</tt><tt><br>
    </tt><tt>&#xA0;3&#xA0;&#xA0; / 3:&#xA0; 3.000</tt><tt><br>
    </tt><tt>&#xA0;4&#xA0;&#xA0; / 4:&#xA0; 3.000</tt><tt><br>
    </tt><tt>&#xA0;5&#xA0;&#xA0; / 5:&#xA0; 3.000</tt><tt><br>
    </tt><tt><br>
    </tt><tt>! Write out /i=1 of this variable and </tt><tt>also use
      /ILIMITS to set up the </tt><tt>file</tt><tt><br>
    </tt><tt>! with the full length of the axis </tt><tt>in the x
      direction.</tt><tt><br>
    </tt><tt><br>
    </tt><tt>yes? save/clobber/file=output_file.nc</tt><tt><font
        size="+1"><b>/ilimits=1:5/i=1</b></font></tt><tt> outvar</tt><tt><br>
    </tt><tt> </tt><tt>
    </tt><tt><br>
      ! Put the second variable onto the same x axis, and write its<br>
      ! value into the</tt><tt> /i=2 slot of the output file. </tt><tt><br>
    </tt><tt><br>
    </tt><tt>yes? let var2 = a_2[i=@sum] </tt><tt><br>
    </tt><tt>yes? let outvar = var2</tt><tt> + 0*x[gx=xax5]</tt><tt><br>
      yes? list outvar<br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : VAR2 + 0*X[GX=XAX5]<br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SUBSET&#xA0;&#xA0; : 5 points (X)<br>
      &#xA0;1&#xA0;&#xA0; / 1:&#xA0; 6.000<br>
      &#xA0;2&#xA0;&#xA0; / 2:&#xA0; 6.000<br>
      &#xA0;3&#xA0;&#xA0; / 3:&#xA0; 6.000<br>
      &#xA0;4&#xA0;&#xA0; / 4:&#xA0; 6.000<br>
      &#xA0;5&#xA0;&#xA0; / 5:&#xA0; 6.000<br>
      <br>
    </tt><tt>yes? save/append/file=output_file.nc</tt><tt><font
        size="+1"><b>/i=2</b></font></tt><tt> out</tt><tt>var</tt>
    <p><br>
    </p>
    <p>So far now the file contains outvar = 3, 6, and the rest are
      missing-values. Continue defining variables and appending with
      /i=3, /i=4,...<tt><tt><br>
        </tt></tt></p>
    <p><tt><tt><br>
        </tt></tt></p>
    Try a second simple example with X-T variables,<tt><tt><br>
      </tt></tt>
    <blockquote>
      <p><tt><tt>define axis/t=1:10:1 taxis</tt></tt><br>
        <tt><tt><tt><tt><br>
                let a_1 = {0,0,0,3,0,0} * t[gt=taxis]</tt></tt></tt></tt><tt><tt><tt><tt><tt><tt><br>
                    let a_2 = {0,0,0,0,0,0,6,0} * t[gt=taxis]<br>
                  </tt></tt></tt></tt></tt></tt></p>
    </blockquote>
    <p>I think you'll see that all of the same commands work, and you
      have an x-t file.<br>
    </p>
    <p><tt><tt><tt><tt><tt><tt><br>
                </tt></tt></tt></tt>
        </tt> </tt><tt> </tt></p>
    <div class="moz-cite-prefix">On 1/30/2018 8:28 AM, Lina Krisztian
      wrote:<br>
    </div>
    <blockquote type="cite"
      cite="">
      <pre wrap="">Hello,

I have a variable &#x201A;a_&#x2018; which is everywhere zero except for one position with x,y,z. The grid is: x=1:100, y=1:100, z=1:5,l=1:10
I have several variables like this (so everywhere zero except one position) which are named a_1, a_2,..,a_55
Now I wanna have a new variable &#x201A;n&#x2018; which include all these values which aren&#x2019;t zero. The grid should be like: x=1:55,l=1:10
So for example the non zero values are: a_1 = 10, a_2  = 15, a_3 = 50.
I wanna have a variable n which first value is 10, second 15 and third 50. And the grid should be like: x=1:3,l=1:10

When I&#x2019;m trying this, I got a problem with the different dimensions. Can someone please help me with this problem.

Thanks a lot.
 

</pre>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00020" href="msg00020.html">[ferret_users] define new variable with different grid</a></strong>
<ul><li><em>From:</em> Lina Krisztian</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00020.html">[ferret_users] define new variable with different grid</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00022.html">[ferret_users] How to flip a variable? U is read at reverse</a></strong>
</li>

</UL>
<center>[<a href="msg00020.html">Thread Prev</a>][<a href="msg00022.html">Thread Next</a>][<A HREF="threads.html#00021">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
