<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] integration of flux vector along the coastline to compute the transport -->
<!--X-From-R13: [negva Epuzvqg <znegva.fpuzvqgNvb&#45;jnearzhraqr.qr> -->
<!--X-Date: Mon, 17 Dec 2018 09:35:36 &#45;0800 -->
<!--X-Message-Id: dd88c1e1&#45;1f8d&#45;a507&#45;49df&#45;0f3dffb20e36@io&#45;warnemuende.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAFXLzPhYeiEFvKvFKnHyh1Kk4H6Q67+cH0rvW&#45;0gLrXzwCT3eg@mail.gmail.com -->
<!--X-Reference: 14D024AF&#45;FF97&#45;463F&#45;B487&#45;A388107A42BE@noaa.gov -->
<!--X-Reference: CAFXLzPiSn5CuO9Y4LWbO1WZA6+dJAnzB1GBBO1Ok7kb9MVgxVg@mail.gmail.com -->
<!--X-Reference: CAFXLzPj4DTrngFndX8wrntZPGzw=20GGL3ptL9BVANqRTO2pqg@mail.gmail.com -->
<!--X-Reference: CAEwQpaKJnwrkWdjOHysXv2BHHjebQ8GGp4sHaZ71fs6kuwfJwQ@mail.gmail.com -->
<!--X-Reference: ED957164&#45;FDDC&#45;42E8&#45;A5B1&#45;5156B6817841@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] integration of flux vector along the coastline to compute the transport</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00461.html">Thread Prev</a>][<a href="msg00464.html">Thread Next</a>][<A HREF="threads.html#00462">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] integration of flux vector along the coastline to compute the transport</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] integration of flux vector along the coastline to compute the transport</strong></li>
<li><strong>From</strong>: <strong>Martin Schmidt &lt;<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 17 Dec 2018 18:34:52 +0100</li>
<li>Arc-authentication-results: i=3; mx.google.com;       arc=pass (i=2);       spf=neutral (google.com: 52.222.5.176 is neither permitted nor denied by domain of <a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>) smtp.mailfrom=<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       arc=pass (i=1 spf=pass spfdomain=io-warnemuende.de);       spf=neutral (google.com: 65.127.216.228 is neither permitted nor denied by domain of <a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>) smtp.mailfrom=<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       spf=pass (google.com: domain of <a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a> designates 192.124.245.147 as permitted sender) smtp.mailfrom=<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a></li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:from:references:to:subject;        bh=UTIS1Q/4PMRhqrwkIRKx1W36dT7y/VfCsiJOIrFQGAY=;        b=ijlyQx2e2gHZYdOi4tO796BLmXmx4iro4ruTpLmuWjpGRdWWCMg/6C358ciNp8xqNF         ao6udO/GDGNAZJKoCB8VIsvk317iYoRJhraLEeo7aErDdsf82xBV8OpRhMLTP9+dUNUz         eapPmQfkwGwKLpb5GkM2WZMqz1C8/GqRqVYUKPPTMG2FwiVM9+WBeMvtrkJ7tZZdOMn9         ueWVKJPQK4cM76TmI2ikJxjy0dhe4W4qXCAYJZKJouoCVl4t4koEHWWwpWY4XxLJEGN9         9F/q8wBKFgtO+zKhtFR45ZitdQifkGz2WD2Iu89R5wzo9uZ98IeV3IJIlIzcQI8Avpu7         P+xg==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-transfer-encoding:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject;        bh=UTIS1Q/4PMRhqrwkIRKx1W36dT7y/VfCsiJOIrFQGAY=;        b=IHyFiCBecZ50D6omWVFSVh7zLuHXvLvvNtXhSS7BfhWN5lX1M6FeFO8jE6u/qm/EZB         GWdF6UIDXuHmISmzdWiU5WcVlFEg9MUwx7FczHyXg9yM5FK5q1zlMhNCHyuiIwPpeuV/         uyZ+lqon4OI4XDHmzX8de771zPrb8RHR4rUza9G9ch9trBKIEDb5xUo8Huqv9i0pBwR2         z0g17W2YiopE69bnBzXbNUosl0hmomlX1eRoeofYtYmkJsrY9yz2dWiyLJ3C/jqpIlJr         G/ws9hzKQx8NoxM/XmaWjpAtYfb1ADP1uTKFV2CsIvgHfl8xnwYKblmsVhLpGzxXBC+r         7WRw==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-transfer-encoding:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject;        bh=UTIS1Q/4PMRhqrwkIRKx1W36dT7y/VfCsiJOIrFQGAY=;        b=MVJ50i4HD9FDZ1KlN0izxMJDEmyMo/jFb+YqJroHXTeq3P/hbau09VVAmj/XC6NRzD         yLNXL9U8LZtNm2SeXs+Azi+L1PezyB9ifFoMxuO7Pklvc2t7FKB2S9vWbW7uLh0qMiYA         3rXZXJBeoNRcW4zRmem8saO/RLBGVDiqB6wVk/nkLLGG497Rj3y1XMtzV4CFZaIwPKsk         tGvQhmrdfbm6lt5Ix5mUYfuMCtE+saB4BTyYkCsRUCAE0HMc83/u5BsDOouzQ2EMo71u         SBmnvT/EP/JyHU8LMWLp7SDwG+MEcMVgtVMDWt0m8SJNthFHtdLcNy3RSoK2QXqoplFz         28nw==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1545068134; cv=pass;        d=google.com; s=arc-20160816;        b=awHHNaTXdjZiIk60+FOsrR+HfYWKOL2Tm6Ek9P/CHXcDbRiva8Xu86sN2KY+2cURin         htCaiOdRR0WM4gFeHtHB8fXhtqIpp+NKoMvqDHWEuDLmex5WjYIYswi9b9B/h7D0VTAR         8Cm2gc3vAwsf/fJNq1jhyviB+AWKatwYRVUsDy/kpj8AxpLYdWW4aboojj4kljdG1YTm         tbtOJXUvk8cOGBUI4tz2blpb9S48mnXcfxT8UDf6/eXW2c5D29nDmn9QYVgmsnU52KdZ         Hp9Zr9oizAV4Oat66ZbMA9mLDy55ZHP/naFHfynWcgagt29Ovjidj3ML69zooV9zEjHQ         wXwQ==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1545068112; cv=pass;        d=google.com; s=arc-20160816;        b=c4sn/oOXdoV06Fmhqs2G+dVDqZGh3cpqbpxnQVprPm3ZLD20BTiD/hrsLtacaGmA9g         W5ZqGYiSeQ54Aw7QCbD6Jw4V4nByq8Iog4y6V1X8Uxvb3f8ZAQe04tchHc7MI/336BHR         /mNE3L6wsVn7O+EBUxvHBB89Tzgtz8yKrdy5WFrrX2fTOvbSi61ZgSDhmSZSdUrSjGve         f3qgg3vSxqbpDqqlW1OYwsrLJ82eub+Jk2BQ4j/LcUgU7Er5NdQh5rOWf5KmBBg5yyPA         Ll8v5focQAVgRjWd4jKrkxcv6cGAjGfYCMqcw4QlhdUSC5wq3xIbYb5RRFd5laHERbqk         b+xQ==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1545068110; cv=none;        d=google.com; s=arc-20160816;        b=z73ck8KBUZQu/elTTCB7OjbXyQthY8vSQBFsTHz4zAwamMG2zKkBcunjAc3b0JtoUl         ZmBoFjPP3fGcbgjlZJ2x/A25v4qTJIg2LTwbfpxNvuWhxnyzHJVQVHgwyoy3ZbkHsx/6         92KJtfGNl7/PUHV1h+te1QBuxfP+W7RK0Mhfd3zare4dh6CPM7dVhesONiMapNEQCLMa         jFg3qHVAK0+Rd+79aZHc4hIgHwDtDKHjYZFijlANQQ8Djxdd2IPIW4Y52TAEejz4S8x2         SxN3xEONcX+NyCKekuGAaVHl77oqgB2z7lLt7McFVW1m3RmuBgqgJIf6XYYlvKMUtjN1         oHYg==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:subject:to:references:from:date:user-agent:mime-version         :in-reply-to:content-transfer-encoding:message-id:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=UTIS1Q/4PMRhqrwkIRKx1W36dT7y/VfCsiJOIrFQGAY=;        b=jdgDLkCEE05v4NCfON0lfu/n37cuvuWDaSCK6b3DjIebsk2944doe88qdKy82RnC4v         ZfeO675cKdbmux5hsBWeeWnTp6tRGEd6GBEfgxB0FFbbLD3Xu8F1974H0Cq0Nltyw13Q         x14dITtWRPJJZxRTBmRWIIphHoHyEydMrFnE0UQJRiOe8LXX6ZeQfUgBMLa2JaqBSnQI         en9njRhmN/OYHJu8tJ0DodjyMF+OAkJ77XhMEm8emgrYpC6agxyIAigVsNDOd4GSGrLx         i7xJeuDF+AlWaJS9RpoXQ3/tQUNjMxuKgcH5ksFLKdD54MPJpmPl+sJPBRrWOwU2dy2u         Itfg==</li>
<li>In-reply-to: &lt;<a href="msg00461.html">ED957164-FDDC-42E8-A5B1-5156B6817841@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00454.html">CAFXLzPhYeiEFvKvFKnHyh1Kk4H6Q67+cH0rvW-0gLrXzwCT3eg@mail.gmail.com</a>&gt; &lt;<a href="msg00456.html">14D024AF-FF97-463F-B487-A388107A42BE@noaa.gov</a>&gt; &lt;<a href="msg00457.html">CAFXLzPiSn5CuO9Y4LWbO1WZA6+dJAnzB1GBBO1Ok7kb9MVgxVg@mail.gmail.com</a>&gt; &lt;CAFXLzPj4DTrngFndX8wrntZPGzw=20GGL3ptL9BVANqRTO2pqg@mail.gmail.com&gt; &lt;<a href="msg00459.html">CAEwQpaKJnwrkWdjOHysXv2BHHjebQ8GGp4sHaZ71fs6kuwfJwQ@mail.gmail.com</a>&gt; &lt;<a href="msg00461.html">ED957164-FDDC-42E8-A5B1-5156B6817841@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:52.0) Gecko/20100101 Thunderbird/52.9.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi all,

some ideas, only a concept:

</pre><tt>- as a first step I would produde a land mask (0,1) on the grid of the 
</tt><tt>fluxes just by mapping appropriate topography file onto the flux data 
</tt><tt>grid. May be from etopo5.
</tt><pre style="margin: 0em;">

</pre><tt>- as the next step we should produce another mask that is &quot;missing&quot; 
</tt><tt>everywhere except the coastal points defined as the boundaries of the 
</tt><tt>previous mask. There may be zonal and meridional interfaces for a cell. 
</tt><tt>Use the sign to mark, if east = in or east=out. No need to consider 
</tt><tt>single points explicitly.
</tt><pre style="margin: 0em;">

</pre><tt>- multiplying u and v with the coastal mask and multiplying with the 
</tt><tt>cell length (needs some thought dx = 1/2 (x_i - xi_1) + 1/2 (x_i+1 - 
</tt><tt>x_i) = 1/2 (x_i+1 - x_i_1) or so) gives all transports. The sum over the 
</tt><tt>area the full budget.
</tt><pre style="margin: 0em;">

</pre><tt>- Now use compressi to put the data onto two lines. Regridding to a new 
</tt><tt>grid to put the data onto one long line is the next step. Almost there.
</tt><pre style="margin: 0em;">

- Finally the carry out the sum and plot.

Best,

Martin


Am 17.12.2018 um 14:50 schrieb William Kessler:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On Dec 16, 2018, at 11:25 PM, Ryo Furue &lt;furue@xxxxxxxxxx&gt; wrote:

Hi Saurabh and Ferret users,

On Mon, Dec 17, 2018 at 3:31 PM saurabh rathore &lt;rohitsrb2020@xxxxxxxxx&gt; wrote:
Here is the thing that I am looking for. I want to plot the cumulative sum of the flux let's say starting from location of Melbourne covering all around Australia and ending at Melbourne.

So it will give me line plot which show where (lat,lon) the flux is increasing or decreasing.

If I understand correctly, that's exactly what I did in my paper:

      <a  rel="nofollow" href="https://doi.org/10.1175/JPO-D-16-0170.1">https://doi.org/10.1175/JPO-D-16-0170.1</a>

The basic principle is &quot;easy&quot;: Let our &quot;coast line&quot; exactly follow the outline of the gridboxes that form Australia.  In this case, the &quot;cross-shore direction&quot; is either zonal or meridional exactly.  Therefore, the cumulative sum you want is the running sum of u &#x394;x or v &#x394;y, depending on the orientation of the local &quot;coastline&quot;.

Unfortunately, implementing this is complicated in my experience.
</pre></blockquote><pre style="margin: 0em;">
Yes, complicated, especially where the coast has indentations. And you must pay careful attention to the grid structure of u,v and T (or whatever quantity is being advected). Is it a B or C grid? The method will be different, and the answer could be very systematically different in a long integral.

Why do you need a line plot and specific locations of the flux? If you only want the total integrated cross-shore transport then the divergence theorem is a better solution and not subject to these complications. (Though it will also require decisions about how to take the divergence derivatives at the edges ... then the difficulty will be at peninsulas, not indentations). The two methods would be a useful check on each other; the result will not be identical, and the difference would be a measure of uncertainty.

Billy
</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00466" href="msg00466.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00464" href="msg00464.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00454" href="msg00454.html">[ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
<li><strong><a name="00456" href="msg00456.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> William Kessler</li></ul></li>
<li><strong><a name="00457" href="msg00457.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
<li><strong><a name="00458" href="msg00458.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
<li><strong><a name="00459" href="msg00459.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00461" href="msg00461.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
<ul><li><em>From:</em> William Kessler</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00461.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00464.html">Re: [ferret_users] integration of flux vector along the coastline to compute the transport</a></strong>
</li>

</UL>
<center>[<a href="msg00461.html">Thread Prev</a>][<a href="msg00464.html">Thread Next</a>][<A HREF="threads.html#00462">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
