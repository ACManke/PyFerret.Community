<!-- MHonArc v2.6.18 -->
<!--X-Subject: [ferret_users] Compilation of pyferret with gcc > 4.8 -->
<!--X-From-R13: [negva Epuzvqg <znegva.fpuzvqgNvb&#45;jnearzhraqr.qr> -->
<!--X-Date: Wed, 7 Mar 2018 09:11:30 &#45;0800 -->
<!--X-Message-Id: 603f3dad&#45;fe78&#45;2776&#45;4b56&#45;0f2d071cdd82@io&#45;warnemuende.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAC67f&#45;Zd6BU826jT7cyJitpdFQiwii_wtZBu8S8ZED1XVu_OVQ@mail.gmail.com -->
<!--X-Reference: e7c1d934&#45;19bf&#45;e788&#45;e3e4&#45;193ed22256a6@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[ferret_users] Compilation of pyferret with gcc &gt; 4.8</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00033.html">Thread Prev</a>][<a href="msg00034.html">Thread Next</a>][<A HREF="threads.html#00051">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] Compilation of pyferret with gcc &gt; 4.8</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] Compilation of pyferret with gcc &gt; 4.8</strong></li>
<li><strong>From</strong>: <strong>Martin Schmidt &lt;<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 7 Mar 2018 18:11:12 +0100</li>
<li>Arc-authentication-results: i=3; mx.google.com;       arc=pass (i=2);       spf=neutral (google.com: 52.222.5.176 is neither permitted nor denied by domain of <a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>) smtp.mailfrom=<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       arc=pass (i=1 spf=pass spfdomain=io-warnemuende.de);       spf=neutral (google.com: 65.127.216.228 is neither permitted nor denied by domain of <a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>) smtp.mailfrom=<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       spf=pass (google.com: domain of <a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a> designates 192.124.245.147 as permitted sender) smtp.mailfrom=<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a></li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:from:references:to:subject         :arc-authentication-results:arc-message-signature         :arc-authentication-results:arc-message-signature:message-id         :arc-authentication-results;        bh=pa7Q70PYut1H4Y1GuSwGEVvcW0qipVc7tKceeqRpwyk=;        b=pnVzrzWVnOf+CWNugRuO6Dg2AXNkrPBHo59jrS0BLFXLtuD9uZ1q9Esely2GhcIFYJ         hyF45i9+wViXkh2MQu37vfk7NP2FaQOJilEMWeyp73gG9fwn4EyT+EMQFkOIG38RIcZN         VETr5xoK8gNzpbli6WfYadJH8jgIL2htYB6hYrPJgxMI+4PAGV39nvU+vfQ19n3AyFcH         pjo7FkB6bBltQi4ImPosnmqZhAuM2ET7o6GJnDM0RrIjfnqRv27AI/i29jpEfTSlSWpn         u+g846dEyZwtr/Sksry/8BdvCyqR+tjw2mJiJayXCYup/OL+Xonp6PzFIe3EvUR3ZOeo         xAqA==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :arc-authentication-results:arc-message-signature         :arc-authentication-results;        bh=pa7Q70PYut1H4Y1GuSwGEVvcW0qipVc7tKceeqRpwyk=;        b=b1F5fN9YbcF6ZM7hngBv1L7+4pftCfDKUc4Ox4Djp++95+OUgMPspH4CSOYJSUt2eE         0cX9C8y3Ec53+xTBClXciMIbGjvrP0BoDuezJjFRZKAU+cAraQIhadLrI+haJkJVIDNX         l+J5KUcsVIn3w/LDCmpoAiDo4ZK9fYM4+xEBA+c/q3OBi29bhox+4CLI4Eq0XwdU6y8o         pIg5aoecAPteHOauvCBK8p95bOczTuVqZIFvbPXs/SsHrIbyFx9BW2VAeN1/83KaeOIO         h7Pgyyrx+GGP2QCrmiHY8ScDG87CHihQ+IU7bC9FmHHD2CDhJeX7Qva3PCSgmSRa5ic8         R0pA==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :arc-authentication-results;        bh=pa7Q70PYut1H4Y1GuSwGEVvcW0qipVc7tKceeqRpwyk=;        b=zF4laGlWHJnDi/n/qIPIbqamBgbqihclBB+ZszwZdQDoX0rbreUzJnM8mA2H/kN6ow         y0oQAP41GwW4OaDtC4aPm1tMZ0+iTOxxziGXXJR1fymq/ZcUJufb/0YpD8CMbQlzAuz+         52yPCw/J5ks1sc6JLGMCoIrcNx8M5XrZ8uUwYiyyvl/No4C4Lc8c6Hz8bslnzr+VkK/s         atS7cvlPvcmVQunIM54+IhWgOQhvNAvv66SCj1JITZXHcgTHf0qg2vpqWJXppGS0ImWc         uBoNg0a3rtY0ZAOrQQueBgD9hrdWI9+M9+tezdD8DXZ3hKQg62CwgenekYJGBflA+HI0         07LQ==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1520442688; cv=pass;        d=google.com; s=arc-20160816;        b=waBEIMUE9tcJrF/dnjDMEoMJxrwy14jLOcpeLlHitoQH8f1p4vgkTJ9tZdENy9Qejr         K8eyxDllLrO49UJEae12B/tOuxH5cC4wO1xvvZHNyYAy5zKBMJYAL0E3G1WB1cWCsB9M         lIbDPoN2WX1Z0OhJLJbjgYVD0SwKfiBxDD+QSKmbkcwAUgI5+oLEcUdmQIdfrnZwgRh6         NH0Dh+bwtTOhi4Riqqqnq4OAhS+z70b4lu8iMzWRT6wvMaaE+U8uuyWs32bz5AQbX+tZ         hPYef14saAZHdJdqaZK/w5ba6bTZw15j+wVcFqi27URL3vAo/ZrWo8EWXRI5jPHL+stf         rkMA==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1520442686; cv=pass;        d=google.com; s=arc-20160816;        b=XS3RSGmRWEswFNlUd8H+y/MCmZXXe555gHMuzsac9QtmRiYSTxH5gp5ZuRXyfg+w2C         2v2SO26UafigH25rlFxyYcVydOmvT80kYn2k20FLk8RGirgCAE0bVeuVgLCeu3gj6PF2         beqrtaz2amENDBAP1Yk4Z/cc8Ty33xIAJG+Ag7GJkFBjeDiWb0xodla89d5r1RMwT2YM         T7gFVbS5F6NySJXkHeLPwW6dPv7uE3IdpK1IcrigDide76wBw1e6njHi1yhkY3+6UpTj         1Khgurv/p3hQdpM18KO8bz1psfJ+S6Ar2oABb+gyiwo2oeSgJCfARTvcxenUiy63hKfh         W6fQ==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1520442680; cv=none;        d=google.com; s=arc-20160816;        b=YyRiiq8En6wGn1/sN4nUIIaHDAnYqPw9ByZuRXd+BVfL+EmQRmHJ8CQhF7vkJBRbhV         NjegqUyQG4/Pjcx7gb49/8C1A+X/WeRl8nsU7PXvi9TdImL9egrLDFMdKXZlpqFVNou5         LCxRONfzDLAEN0ZUVfdf42wS/xEoUBlpsYQMEQWmwUk5xRyCqP90EYYwVNivQr/mDJ/z         xq6H1Cd3tlO4/EULlF881A1TObjfd7gpIdSUzm1fi1vEOraniy1jY9BOaLS3ImgWa6QB         6v5rTXz8dcIZXafcKrQD3KsWUEzXeX+E3qYASzan30AVLMf0HPkjHuGXH4rwNzgOIGp/         czUA==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=message-id:subject:to:references:from:date:user-agent:mime-version         :in-reply-to:content-transfer-encoding:content-language         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=pa7Q70PYut1H4Y1GuSwGEVvcW0qipVc7tKceeqRpwyk=;        b=nsLE5qrJQAeXpdIypbhX+z5TM5a9I4eVqXAaI2x+sAHB2biMclRT9uI3pM5LE1185D         dtPXDwFGZQAP2D6FeMy/qgmDj2BOuCfoKiAVbthbdYwr6K3uyRpPC/7akwoqfyqku5bt         /R6gLxAqcgJpFNefDnSyOx2Ag5Jb9LYfgs8yzGKWy5qHZPKVw0v/4zL8HlwahOZCTIic         arkuhacucwYKFP0ruKfrV/wEAQ+LDFwRw6Nll9jt3Aut/nUUU4Z46wmv2g5+v+eIaoOZ         dPYbC3x0l4gCo+h7uyIqCzQ++GpTl2vzwA4V1xSpQlZtGz01L9F3pw9oCWwHVq5T0Zze         XBWg==</li>
<li>In-reply-to: &lt;<a href="msg00033.html">e7c1d934-19bf-e788-e3e4-193ed22256a6@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00032.html">CAC67f-Zd6BU826jT7cyJitpdFQiwii_wtZBu8S8ZED1XVu_OVQ@mail.gmail.com</a>&gt; &lt;<a href="msg00033.html">e7c1d934-19bf-e788-e3e4-193ed22256a6@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Thunderbird/52.6.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Dear ferret developers!

</pre><tt>ferret (version 731) incorporates many other libraries under rapid 
</tt><tt>development and this motivates to compile pyferret with a gnu compiler 
</tt><tt>version &gt; 4.8.
</tt><pre style="margin: 0em;">

</pre><tt>All test&#xA0; are carried out on Suse Linux os 42.3 but on machines with 
</tt><tt>different processors. .
</tt><pre style="margin: 0em;">

</pre><tt>With gcc 4.8.5, i.e. the systems default compiler I get running code. It 
</tt><tt>is compiled on one machine and works on others with the same system but 
</tt><tt>different processor too. But compiling hdf5 (1.10.1) and netcdf (4.6.0) 
</tt><tt>warnings show up that the compiler does not fully support some c99 
</tt><tt>standard, which motivates to use a more recent gcc version. I have 
</tt><tt>checked gcc-5 and gcc-7 and the related gfortran available with opensude 
</tt><tt>42.3.
</tt><pre style="margin: 0em;">

Compiling .&#xA0; with&#xA0; gcc 5.3.1, ferret fails for example with

yes? go multi_view 1, 2, 0.38, 0.07, 0.1, 0.8, 0.15, 0.02, &quot;V&quot;, 0.05,0.05
&#xA0;**ERROR: invalid subcommand: mv_r&#xA0;&#xA0;&#xA0; = 1
defiymbol mv_r&#xA0;&#xA0;&#xA0; = 1
Command file, command group, or REPEAT execution aborted

</pre><tt>One may write simpler scripts with similar errors - just the script 
</tt><tt>parsing does not work properly. Images can be produced and many ferret 
</tt><tt>elements work as they should.
</tt><pre style="margin: 0em;">

</pre><tt>Remarkably, on another machine this binary works well. The installed 
</tt><tt>system packages &quot;should&quot; be the same on all machines and I could not 
</tt><tt>identify a significant difference in the results of ldd applied on the 
</tt><tt>pyferret-library.. It does not matter, on which machine the code is 
</tt><tt>compiled, it runs on the some distinct machines and on others it does not.
</tt><pre style="margin: 0em;">

</pre><tt>Compiling with gcc-7 the binary fails on all machines when started. The 
</tt><tt>error comes from
</tt><pre style="margin: 0em;">

PyFerret-master/fmt/src/tm_fmt

around line 300. The code in question is

&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; sig_needed = sig_needed + need_adjust
&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; nright = MIN( sig_needed-pow10, slen-(nleft+1) )
&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; str_len = nleft + nright + 1
&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; WRITE ( fmt, 3200 ) str_len, nright
&#xA0;3200&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; FORMAT ( '(F',I2,'.',I2,')' )
&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; WRITE ( outstring, fmt ) val

</pre><tt>&#xA0;&quot;fmt&quot; contains only &quot;(F&quot; and nothing else, so the last write fails. 
</tt><tt>With the &quot;print-debugger&quot; I have checked that&#xA0; str_len and nright are 
</tt><tt>filled with correct values, even writing to stdout instead of fmt 
</tt><tt>reveals a resonable format string. Introducing more prints and trying to 
</tt><tt>introduce intermediate variables gives strange results like for a 
</tt><tt>corrupted memory.
</tt><pre style="margin: 0em;">

</pre><tt>hdf5/netcdf are build with the same compiler like ferret is. Many other 
</tt><tt>libraries (cairo, pangoo, python) come from the system.
</tt><pre style="margin: 0em;">

My questions:

- did anybody compile pyferret with gcc &gt; 4.8?

- any idea what could be wrong?

Best,

Martin


--
Dr. Martin Schmidt/PyFerret-master/fmt/src/tm_fmt
Leibniz-Institute for Baltic Sea Research
Seestrasse 15
D18119 Rostock
Germany



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00032" href="msg00032.html">[ferret_users] Taylor_Polymark</a></strong>
<ul><li><em>From:</em> USHNANSHU DUTTA</li></ul></li>
<li><strong><a name="00033" href="msg00033.html">Re: [ferret_users] Taylor_Polymark</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00033.html">Re: [ferret_users] Taylor_Polymark</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00034.html">[ferret_users] Taylor_Label enquiry</a></strong>
</li>

</UL>
<center>[<a href="msg00033.html">Thread Prev</a>][<a href="msg00034.html">Thread Next</a>][<A HREF="threads.html#00051">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
