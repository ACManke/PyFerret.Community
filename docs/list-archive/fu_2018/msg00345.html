<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] which climatology should I use -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Thu, 27 Sep 2018 17:51:16 &#45;0700 -->
<!--X-Message-Id: 531ba79b&#45;eca5&#45;8432&#45;5512&#45;b1b34318c0d2@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAKE4FWqrGSGEj8Sn1&#45;KTm5E=_rOt=WWgANfo86r2=xc9Vxesng@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] which climatology should I use</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00344.html">Thread Prev</a>][<a href="msg00346.html">Thread Next</a>][<A HREF="threads.html#00345">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] which climatology should I use</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] which climatology should I use</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 27 Sep 2018 17:51:13 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=I5tMTCO6;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=QUARANTINE sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=I5tMTCO6;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=QUARANTINE sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:dkim-signature;        bh=mu8z3xwwSqnS9yo7gzXwEvYlx16TD1Je6/Yw3ZQkgkw=;        b=TKkaVvx+GOLTKU4rz4+3AUqTVGnc937D+QwfeoW6vosKxJGvUpx2u1A1Kms2JRcFT5         Z1Ze4+F9yAZ1Vs1dYQgGwv5RA5AY4KWW/LDCUB/ZwuG91gcoe4s36wbcCCw6Oq4FZco7         bmaxN+X7b6Q3KN1gngDNJVI2TBcFe4qDYShhIsh/UYdOdS0D1jAxcdG9kl0a1LmEtCTC         co4Uv/3iUqk9Ues76M2udkYTMBReqTxoG1RvsXO1ucsZbU0lpetVrYvHfIsjjb9hvhFw         G+VtwjMXTjZWA+Q0cscYxe4QOCOvVArbqtE224CRp0OtF+h+jimvOIdPsxtsHfwHoQgX         NrvQ==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:dkim-signature;        bh=mu8z3xwwSqnS9yo7gzXwEvYlx16TD1Je6/Yw3ZQkgkw=;        b=jYjFo8O4iC/eGYHnS9PLJYXnuq7rjMGlLUsTaOsxpilrBcUduIbxM0b49XRhhxlmWg         uldds8Ew3ZeSmlHqTz6yDeW2+YJxFWC73bP+2gI6kwrg4YYxQsOr7Ba78yeulBhqbHnM         W1bvhSdHonTf+xES5Jm0fCyOideFG6P8f5DONCp4tixNRMP0nimcIb4JsSjG148iJNp7         iDNPgJkq98biSYvjaHsMGeBndD8Evu/p+rNyUC0eQsB5WKLmBZOaPAhwb0IBqIHNYSyn         H/rG5nbJwSJs9qUwIoIgBh4/VTKz6T7M7rf13CyYs+ESZCLZVQLtjyXvskKVL7E7TwUI         DdVw==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1538095876; cv=pass;        d=google.com; s=arc-20160816;        b=aCTvkBx1nnyN01VKKoLkGFyqXC1kHI6v5UQBnHssy8pYrpDCy3zKyUxojs4hvbAKae         gSL5ONhpy2seXQv6GGL/kSOL3ZtRIY+9vXaxavCkcRT8HrEFsvY4YTApEsqD6xtBB2+8         cYJO6wI8UDwC5y4QllSak90cjq+5teuSLpTjeyLaDELMrKy7XV9PSOttfAWH1BV75f5m         XQYIjDazX8pOJ7QXVF2U44TxtZv2KmqnHUkKkGWB0mlon9k8ZZUxAkNnRu45upuSpC1Y         +XzX8ZMAeBXHAb+OFtV8EdfPIU9neBgM83QLP7T7Wva0oJPFZrwwwn0oFieFiwbd8qD1         0yYg==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1538095875; cv=none;        d=google.com; s=arc-20160816;        b=ehp9JclKyjsC8tXoHY9vPQR2+n/zYs+OKc8Ih0LGz/LimD4lqU58mlx6TfHH8aGfra         rtr4Rb7Poww7c4h34Lrd1naHnze2vh2iBQ6TLYP1i5GwrAPk5QCpCXofBhm1hMoTYgr0         KtbZZc5f9GtK7vA6rPVAvtIR5LyZVEPX5pQcWFaRD7O4jE5BKK9MXus9Ny9capjRLpWt         GEHVCBmMlBsIyEKwiEdbUnFb+ESu/sK9/G9ekL1WUuARFzIl79FrnxeQ4izQSIFUw2HF         tBVTX4U+nSclui+MyAU/htgv3DaDQuYwfP34VyYA5NJegWmpC1g6WUtC+CV495A3df/x         yepQ==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-language:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=mu8z3xwwSqnS9yo7gzXwEvYlx16TD1Je6/Yw3ZQkgkw=;        b=nlA1eGd4W8QOP004jxYTecMMIVqbCcho2jyuDTUfATe2jDXrYb9Khnhanptk9by+SA         NAMkBVL2WdhMm68ogJJ4mgF/c+qfLL75AX+mKe9r0sVxfb9Nhb0qflPjipKs7KVnJ0Ap         x6R2RtGHNjsUwGcJzcX/DrdSyQEcBtlpt3grNqZotlVAOw9k6Nj2OsKQi4RIlJc3AeBD         UMdp3bSfnpWK0Y8llT54L7XkPq+ECtX9DJ8E6x6OGW6Ax5QiVwhi969gA5fFMJrRscHZ         XqlwBo6UW6LViO45VR7KOeOlrst9DbZgTgT3+p2+E6yxtuWcVis4Jen8yWhcxfUAKp+1         nOEA==</li>
<li>In-reply-to: &lt;CAKE4FWqrGSGEj8Sn1-KTm5E=_rOt=WWgANfo86r2=xc9Vxesng@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAKE4FWqrGSGEj8Sn1-KTm5E=_rOt=WWgANfo86r2=xc9Vxesng@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101 Thunderbird/60.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <p>Hello,</p>
    <p>The stride syntax that you're using should be given with the
      index L not the time-coordinate T, so all of the January data is<br>
    </p>
    <p>&#xA0;pr[L=1:480:12]</p>
    <p>A stride using T=&#xA0; is acting on the underlying time units of the
      time axis, which is a monthly axis but with units of days. So that
      means that [T=1:480:12] is asking for data at every 12th day for
      the first 480 days.&#xA0; The clue that I noticed was the time label at
      the top of your second plot, where it's reporting that the plot
      used data from the range 7-jan-1969 to 2-May 1970 .<br>
    </p>
    <p>With that change, I think the plots agree pretty well, and of
      course @MOD is simplest to use.<br>
    </p>
    <p>The @MOD regridding will work with any time axis whether it
      starts out as a monthly series or not, so if you started with
      daily data, it gathers all of the January data for each year,
      taking into account the calendar's definition of months, and
      returns the climatological average; and so on for each month. It'd
      also handle partial grid cells, so if the source data somehow
      timesteps which don't fall exactly within the climatological
      grid-cell definitions, it takes the correct portions of grid cells
      to contribute to each monthly result.<br>
    </p>
    <p>Ansley<br>
    </p>
    <p><br>
    </p>
    <div class="moz-cite-prefix">On 9/27/2018 10:37 AM, Xiaoyu Bai
      wrote:<br>
    </div>
    <blockquote type="cite"
cite="">
      
      <div dir="ltr">
        <div dir="ltr">
          <div dir="ltr">
            <div dir="ltr">
              <div dir="ltr">
                <div dir="ltr">
                  <div dir="ltr">Dear ferreters,
                    <div><br>
                    </div>
                    <div>I have a monthly rainfall .nc file which has
                      Gregorian calendar. I wanted to compute
                      climatology for each month. I tried with&#xA0;
                      "MONTH_GREGORIAN@MOD", tried with pick every month
                      out then take the average, "repeat/i=1:12:1 let
                      pr_`i`=pr[T=`i`:480:12];&#xA0;repeat/i=1:12:1 let
                      pr_`i`_clim=pr_`i`[T=@AVE]", tried with sum them
                      up then divide them by the total years&#xA0;
                      "repeat/i=1:12:1 let
                      pr_`i`_clim_sumave=pr_`i`[T=@SUM]/40". I compared
                      these results and found that none of them were the
                      same. Any suggestions on which climatology should
                      I use? By the&#xA0;way, for the Gregorian calendar, if
                      I want to make the rain rates by month, is there a
                      better way than *60*60*24*(days of the month)?&#xA0;</div>
                    <div><br>
                    </div>
                    <div>Attach are the December climatology comparison
                      figures I made.&#xA0;</div>
                    <div><br>
                    </div>
                    <div>My script was as&#xA0;follows:</div>
                    <div>use <a rel="nofollow"
href="https://weather.rsmas.miami.edu:443/repository/opendap/synth:c74267a4-dcdd-4c30-ad10-784a279aa022:L0NOUk0tQU02LURJQS12Mi9MYW5kQ29udHJvbC9BbW9uL3ByX0Ftb25fQ05STS1BTTYtRElBLXYyX0xhbmRDb250cm9sX3IxaTFwMV8xOTY5MDEtMjAwODEyLm5j/entry.das"
                        moz-do-not-send="true">https://weather.rsmas.miami.edu:443/repository/opendap/synth:c74267a4-dcdd-4c30-ad10-784a279aa022:L0NOUk0tQU02LURJQS12Mi9MYW5kQ29udHJvbC9BbW9uL3ByX0Ftb25fQ05STS1BTTYtRElBLXYyX0xhbmRDb250cm9sX3IxaTFwMV8xOTY5MDEtMjAwODEyLm5j/entry.das</a></div>
                    <div>set region/X=-30:70/Y=-40:40</div>
                    <div>let pr_mod=pr[gt=MONTH_GREGORIAN@MOD]</div>
                    <div>repeat/i=1:12:1 let pr_`i`=pr[T=`i`:480:12]</div>
                    <div>repeat/i=1:12:1 let pr_`i`_clim=pr_`i`[T=@AVE]</div>
                    <div>repeat/i=1:12:1 let
                      pr_`i`_clim_sumave=pr_`i`[T=@SUM]/40&#xA0;&#xA0;<br
                        clear="all">
                      <div>
                        <div>repeat/i=1:9:1
                          (contour/fill/palette=blue_darkred
                          (pr_`i`_clim_sumave-pr_`i`_clim)*60*60*24*30;
                          frame/file=0`i`_CNRM.png)</div>
                        <div>repeat/i=10:12:1
                          (contour/fill/palette=blue_darkred
                          (pr_`i`_clim_sumave-pr_`i`_clim)*60*60*24*30;
                          frame/file=`i`_CNRM.png)</div>
                      </div>
                      <div><br>
                      </div>
                      <div>Thank you very much.&#xA0;&#x1F638;</div>
                      -- <br>
                      <div dir="ltr" class="gmail_signature">
                        <div dir="ltr">Xiaoyu</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00346" href="msg00346.html">Re: [ferret_users] which climatology should I use</a></strong>
<ul><li><em>From:</em> Xiaoyu Bai</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00344" href="msg00344.html">[ferret_users] which climatology should I use</a></strong>
<ul><li><em>From:</em> Xiaoyu Bai</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00344.html">[ferret_users] which climatology should I use</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00346.html">Re: [ferret_users] which climatology should I use</a></strong>
</li>

</UL>
<center>[<a href="msg00344.html">Thread Prev</a>][<a href="msg00346.html">Thread Next</a>][<A HREF="threads.html#00345">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
