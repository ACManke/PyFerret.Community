<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] lambert GRIB to netcdf? -->
<!--X-From-R13: Brgre Emnob <fmnocrg83Ntznvy.pbz> -->
<!--X-Date: Tue, 8 Apr 2008 04:44:01 &#45;0700 -->
<!--X-Message-Id: 8cc42c030804080443r4fc09486tf83204fffc94d7d6@mail.gmail.com -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 8cc42c030804070338o6136c964y6ebd101f5a7de85d@mail.gmail.com -->
<!--X-Reference: 47FA5CE0.6070604@noaa.gov -->
<!--X-Derived: gifdrROtubycV.gif -->
<!--X-Derived: gif40SzvkdqjY.gif -->
<!--X-Derived: gifFIKfMqBAgq.gif -->
<!--X-Derived: gifOTv05OcnNX.gif -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] lambert GRIB to netcdf?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00166.html">Thread Prev</a>][<a href="msg00170.html">Thread Next</a>][<A HREF="threads.html#00168">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] lambert GRIB to netcdf?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:Ansley.B.Manke@DOMAIN.HIDDEN">Ansley.B.Manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] lambert GRIB to netcdf?</strong></li>
<li><strong>From</strong>: <strong>Peter Szabo &lt;<a href="mailto:szabpet83@DOMAIN.HIDDEN">szabpet83@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 08 Apr 2008 13:43:53 +0200</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma; h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references; bh=Sh0D2x5tuv+K1bOcbNrTkaqybAk2Iwl43iZ0CVJ2EvA=; b=HYWhBSFwdwQzMcwooWvi5jHAwh48NFILP3affRuwiFVOaXQacCDCxdpn6yB5uepJv67v/IIqhWcESi/nkOaRVinMLVbM01WbsuZ70FYmMA65owxn1jEWouLHEfqeFk0lb1ZUgVyDz9DS7lpRBNDKoepetfvDSqpkcfHWKeLQiX0=</li>
<li>Domainkey-signature: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma; h=message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references; b=U5ejr2AGo2Q6S3v7BNoFTzbnjuGHduwQMayxdu9DBST0V6rHbL7oy1jmkB6ykBiXKMTIJddnoZ+IKqflBGhbk3Jmdsyp9siFeHo50xPyEyQZU1kIoP/2SWXR9e9HBHgbgJ3wWS71JccLQaqnmb0wTUBKHDefJ4rJSfgGQWw1eXU=</li>
<li>In-reply-to: &lt;<a href="mailto:47FA5CE0.6070604@DOMAIN.HIDDEN">47FA5CE0.6070604@xxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:8cc42c030804070338o6136c964y6ebd101f5a7de85d@DOMAIN.HIDDEN">8cc42c030804070338o6136c964y6ebd101f5a7de85d@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:47FA5CE0.6070604@DOMAIN.HIDDEN">47FA5CE0.6070604@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Hi Ansley,<br><br>i need the data to be in netcdf and regular lat-lon
format (to eb able to compare it with other data sets), and then after
it i do some graphics.<br>I attach now <br>1. the origininal territory (lambert.gif) made by:<br>
<br>
fill tmp[d=2]-273,lon[d=1],lat[d=1]<br><br>2. my original scattered data, which does not take into account &quot;<font color="#000000"><tt>myfile_lon_lat.txt&quot;.</tt></font><br>just
plots the values on the region which was defined (no scat2gridlaplace
and no SET DATA/EZ/VARIABLES=&quot;lon,lat&quot; &quot;myfile_lon_lat.txt&quot;):<br>
<br>scattered.gif<br><br>3. the gridded data set after applied
scat2gridlaplace function. first with setting the lon-lat variables
defining on GRID (which means your suggestion), but it gave a false
result (laplace_grid.gif), then without defining the GRID for the
lon-lat &quot;variables&quot;(laplace_nogrid.gif) like this:<br>
<br><font color="#000000"><tt>
SET DATA/EZ/VARIABLES=&quot;lon,lat&quot; &quot;myfile_lon_lat.txt&quot;</tt></font><br> <br>I
realized that the defined axes mean the lambert coordinates. So it is not good if i project it my ASCII-defined
(myfile_lon_lat.txt) lambert coordinates onto this region by
scat2gridlaplace:<div class="Ih2E3d"><br><font color="#000000"><tt>DEFINE AXIS/x=12.44:25.22/np=97 long <br>
DEFINE AXIS/y=44.64:50.01/np=61 lati<br><br></tt></font></div>The plots are a bit different comparing to the original lambert.gif.<br><font color="#888888"><br>Peter</font><br><br><div class="gmail_quote">On Mon, Apr 7, 2008 at 7:41 PM, Ansley Manke &lt;<a rel="nofollow" href="mailto:Ansley.B.Manke@xxxxxxxx">Ansley.B.Manke@xxxxxxxx</a>&gt; wrote:<br>
<blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">


  

<div bgcolor="#ffffff" text="#000000">
Hi Peter,<br>
You&#39;re right that you could do this kind of thing with a scat2grid
function. The projection
doesn&#39;t change in time, so write the longitudes and latitudes, say as
lists of&nbsp; xpts, ypts.&nbsp; Then list the data variable as a 2D variable,
location vs time. These might be in 2 files, one for the
longitude,latitude data and a second for the data field.&nbsp; Read these in
using Ferret ascii commands and then do the scat2grid function to
combine them into a gridded variable<div class="Ih2E3d"><br>
<br>
<font color="#000000"><tt>DEFINE AXIS/x=12.44:25.22/np=97 long<br>
DEFINE AXIS/y=44.64:50.01/np=61 lati<br>
DEFINE AXIS/t=1:124:1 time</tt></font></div><font color="#000000"><tt><br>
DEFINE GRIDx=long/y=lati gridxy</tt></font><font color="#000000"><tt><br>
DEFINE GRID/t=time/x=long/y=lati gridxyt</tt></font><font color="#000000"><tt><br>
SET DATA/EZ/VARIABLES=&quot;lon,lat&quot;/GRID=gridxy &quot;myfile_lon_lat.txt&quot;</tt></font><br>
<font color="#000000"><tt><br>
SET DATA/EZ/VARIABLES=&quot;tmp&quot;/GRID=gridxyt &quot;myfiletmp.txt&quot;</tt></font><br>
<br>
LET gridded_var = scat2gridlaplac_xy(lon[d=1],lat[d=1],tmp[d=2],...<br>
<br>
<br>
But maybe you can leave things in the lambert projection. <br>
<br>
Is your main goal to do graphics in Ferret?&nbsp; If so, then what you want
to have in your file is 2-D fields for the LONGITUDE and LATITUDE
variables, and then the data field a function of i,j, and time.&nbsp; This
is then Curvilinear data in netCDF and Ferret terminology, and Ferret
can do graphics directly with it.<br>
<br>
The netCDF file you&#39;d be aiming for would look something like this<br>
<br>
<tt>&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; I&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; K&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; L<br>
&nbsp;VAR &nbsp;&nbsp;&nbsp;&nbsp; DATA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:97 &nbsp;&nbsp;&nbsp; 1:61 &nbsp;&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:124<br>
&nbsp;LON&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LONGITUDE</tt><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:97 &nbsp;&nbsp;&nbsp; 1:61 &nbsp;&nbsp;&nbsp;&nbsp; ...</tt><tt>
&nbsp;&nbsp;&nbsp; &nbsp; ... </tt><br>
<tt>&nbsp;</tt><tt>LAT &nbsp;&nbsp;&nbsp;&nbsp; LATITUDE</tt><tt>&nbsp;</tt><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:97 &nbsp;&nbsp;&nbsp;
1:61 &nbsp;&nbsp;&nbsp;&nbsp; </tt><tt>...</tt><tt> &nbsp;&nbsp;&nbsp; &nbsp; ... </tt><br>
<br>
Where I&#39;ve just made up the numbers i=1:200 and J=1:00.&nbsp; The underlying
xy grid is just indices, and the longitude and latitude variables
describe locations on the Lambert projection. If you can think of a way
to output the data in this arrangement, then you&#39;re set.&nbsp; It might be
that you&#39;d put the data out in 3 files, one for longitudes, one for
latitudes, and a third for the data field, including its time steps,
and then read them in as ascii or whatever kind of files they need to
be, then read them in using Ferret and write a single netCDF file.<br><font color="#888888">
<br>
<br>
<br>
Ansley</font><div><div></div><div class="Wj3C7c"><br>
<br></div></div></div></blockquote></div>
<p><strong>Attachment:
<a href="gifdrROtubycV.gif" ><tt>lambert.gif</tt></a></strong><br>
<em>Description:</em> GIF image</p>
<p><strong>Attachment:
<a href="gif40SzvkdqjY.gif" ><tt>scattered.gif</tt></a></strong><br>
<em>Description:</em> GIF image</p>
<p><strong>Attachment:
<a href="gifFIKfMqBAgq.gif" ><tt>laplace_grid.gif</tt></a></strong><br>
<em>Description:</em> GIF image</p>
<p><strong>Attachment:
<a href="gifOTv05OcnNX.gif" ><tt>laplace_nogrid.gif</tt></a></strong><br>
<em>Description:</em> GIF image</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00165" href="msg00165.html">[ferret_users] lambert GRIB to netcdf?</a></strong>
<ul><li><em>From:</em> Peter Szabo</li></ul></li>
<li><strong><a name="00166" href="msg00166.html">Re: [ferret_users] lambert GRIB to netcdf?</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00166.html">Re: [ferret_users] lambert GRIB to netcdf?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00170.html">[ferret_users] Polygon command and -gif Ferret option</a></strong>
</li>

</UL>
<center>[<a href="msg00166.html">Thread Prev</a>][<a href="msg00170.html">Thread Next</a>][<A HREF="threads.html#00168">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
