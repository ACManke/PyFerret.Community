<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users]wind frequency from zonal, meridional wind -->
<!--X-From-R13: =?WEA&#45;8859&#45;1?C?Vnyyq=T3e_Pw=T6eaffba?= <unyyqbeNfby.irqhe.vf> -->
<!--X-Date: Tue, 12 Aug 2008 04:36:54 &#45;0700 -->
<!--X-Message-Id: 25457821.3701218541004560.JavaMail.root@sol.vedur.is -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 11057396.3681218540965943.JavaMail.root@sol.vedur.is -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users]wind frequency from zonal, meridional wind</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00419.html">Thread Prev</a>][<a href="msg00421.html">Thread Next</a>][<A HREF="threads.html#00420">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users]wind frequency from zonal, meridional wind</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Peter Szabo &lt;<a href="mailto:szabpet83@DOMAIN.HIDDEN">szabpet83@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users]wind frequency from zonal, meridional wind</strong></li>
<li><strong>From</strong>: <strong>Halld&#xF3;r Bj&#xF6;rnsson &lt;<a href="mailto:halldor@DOMAIN.HIDDEN">halldor@xxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 12 Aug 2008 11:36:44 +0000 (GMT)</li>
<li>Cc: ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="mailto:11057396.3681218540965943.JavaMail.root@DOMAIN.HIDDEN">11057396.3681218540965943.JavaMail.root@xxxxxxxxxxxx</a>&gt;</li>
<li>Reply-to: Halld&#xF3;r Bj&#xF6;rnsson &lt;<a href="mailto:halldor@DOMAIN.HIDDEN">halldor@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
It seems to me that you are trying to  draw a windrose

If you google &quot;ferret wind rose&quot; you get the following thread 
from the help archives.
<a  rel="nofollow" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2004/msg00770.html">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2004/msg00770.html</a>


Sincerely

Halld&#x155;o
----- Original Message -----
From: &quot;Peter Szabo&quot; &lt;szabpet83@xxxxxxxxx&gt;
To: &quot;ferret users&quot; &lt;ferret_users@xxxxxxxx&gt;
Sent: Tuesday, 12 August, 2008 7:48:29 AM GMT +00:00 Casablanca / Monrovia
Subject: [ferret_users]wind frequency from zonal, meridional wind



Dear Ferreters, 

I have daily data set. I want to visualize the most frequent wind direction for a region. I have u and v variables. 

1. First i count the number of days belonging to (16) directions with &quot;tan&quot; function (N, NNE, NE, ENE...) 

let ENE=if (u lt 0 and v lt 0) and (tan(u/v) le 0.6682) and (tan(u/v) gt 0.1989) then 1 
let enedir=ene[l=@sum] 

and so on... 

2. Then i try to write out for every (lon-lat) point the frequency of the direction (actually the number of the most frequent direction): 

repeat/j=1:61:1 (repeat/i=1:97:1 (let freq={`ndir`,`nnedir`,`nedir`,`enedir`,`edir`,`esedir`,`sedir`,`ssedir`,`sdir`,`sswdir`,`swdir`,`wswdir`,`wdir`,`wnwdir`,`nwdir`,`nnwdir`} ;\ 
let winddirmax=freq[x=@max]; let wind=freq[x=@loc:`winddirmax`];\ 
save/file=&quot;./ winddir.6190.nc &quot;/ilimits=1:97/jlimits=1:61/i=`i`/j=`j`/clobber wind)) 

It works, it says: 

!-&gt; REPEAT: I=63 
!-&gt; DEFINE VARIABLE freq={28,12,16,28,165,78,75,47,29,10,21,38,221,82,83,67} 
!-&gt; DEFINE VARIABLE wind=freq[x=@loc:221] 
!-&gt; LIST/FORMAT=CDF/file=&quot;...&quot;/ilimits=1:97/jlimits=1:61/i=63/j=1/append/clobber wind 
listing to file ... 

But as for the output file, it seems, it didnt work: 
yes? use ... 
name title I J K L 
WIND FREQ[X=@LOC:221] ... ... ... ... 
yes? list wind 
VARIABLE : FREQ[X=@LOC:221] 
FILENAME : winddir.6190.nc 
FILEPATH : /home/szabop/aladin_arpege/ 
13.00 

Any suggestion will be appreciated (either in solving the technical problem). Thanks a lot, 

Peter szabo 


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00421" href="msg00421.html">Re: [ferret_users]wind frequency from zonal, meridional wind</a></strong>
<ul><li><em>From:</em> Peter Szabo</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00419.html">[ferret_users]wind frequency from zonal, meridional wind</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00421.html">Re: [ferret_users]wind frequency from zonal, meridional wind</a></strong>
</li>

</UL>
<center>[<a href="msg00419.html">Thread Prev</a>][<a href="msg00421.html">Thread Next</a>][<A HREF="threads.html#00420">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
