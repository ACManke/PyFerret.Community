<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] meridional overturning streamfunction -->
<!--X-From-R13: Rnivq Inat <pyvzngreNtznvy.pbz> -->
<!--X-Date: Thu, 31 Jul 2008 08:57:42 &#45;0700 -->
<!--X-Message-Id: 8be1369e0807310857x64dfa9f8s150df6776d3d31c0@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 8be1369e0807231006l5f9d10bfre4cdf5c85c0f63ed@mail.gmail.com -->
<!--X-Reference: CC3E5CF7&#45;55AC&#45;47D6&#45;9F81&#45;F3C038ECDE5A@lsce.ipsl.fr -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] meridional overturning streamfunction</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00388.html">Thread Prev</a>][<a href="msg00398.html">Thread Next</a>][<A HREF="threads.html#00397">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] meridional overturning streamfunction</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Olivier Marti &lt;<a href="mailto:olivier.marti@DOMAIN.HIDDEN">olivier.marti@xxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] meridional overturning streamfunction</strong></li>
<li><strong>From</strong>: <strong>David Wang &lt;<a href="mailto:climater@DOMAIN.HIDDEN">climater@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 31 Jul 2008 11:57:35 -0400</li>
<li>Cc: ferret_users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma; h=domainkey-signature:received:received:message-id:date:from:to :subject:cc:in-reply-to:mime-version:content-type:references; bh=YainqMRpX/G4fAduP/G3noIuIKaf5WQ20/V3RXTRxHk=; b=exDSiFQ+6j6WoUWwwGhHsTazZo7BHJgqJc48FrwlQKKQwXXyQv1saCsl4uNdq3o7JI Xp2W5aber94UOfyQgzXEDOWm4Gnq/oDgfn6jpgBLAj8UlLob/0PKo/XGmdCcrBhm+0F6 rc28eUOyvda9532D/KBvavoru9J+0EVYC26r8=</li>
<li>Domainkey-signature: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma; h=message-id:date:from:to:subject:cc:in-reply-to:mime-version :content-type:references; b=SuzxPZZ1DRyKz+j12lKu9UrycOhgq7mPka5nT+e1UcAfIwPr0lS5gpImY9nWkeXmD3 LgLpZY92Z2H8yYrTrKsnHC3j6sEitko1TgAZr6AMUvcFpPTse6G0dx+oI1kQixPfSTit gF3A2fKQp7+1Xjj2AU730meSPDBoirAggpJpQ=</li>
<li>In-reply-to: &lt;<a href="mailto:CC3E5CF7-55AC-47D6-9F81-F3C038ECDE5A@DOMAIN.HIDDEN">CC3E5CF7-55AC-47D6-9F81-F3C038ECDE5A@xxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:8be1369e0807231006l5f9d10bfre4cdf5c85c0f63ed@DOMAIN.HIDDEN">8be1369e0807231006l5f9d10bfre4cdf5c85c0f63ed@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:CC3E5CF7-55AC-47D6-9F81-F3C038ECDE5A@DOMAIN.HIDDEN">CC3E5CF7-55AC-47D6-9F81-F3C038ECDE5A@xxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr">Hi Ryo and Olivier,<br><br>Thanks very much for the explanations. Having checked the dimensional axes of the example model output (ncar_ccsm_3_0) from the ipcc4 database, I found the variables are staggered on the B-grid, and the pre-cooked meridional overturning streamfunction (stfmmc) is located at the same latitudes as (u, v) and staggered in the vertical direction. Integrating from the bottom definitely gives a better matching (reproduce with the following script), but doesn&#39;t eliminate noisiness and discrepancy esp. in the upper ocean of my interest (which is intuitive since we integrate v from bottom up). Since it&#39;s an integration, the error can easily accumulate up.<br>
<br>It&#39;s good to use the pre-cooked meridional overturning streamfunctions (stfmmc) in the ipcc4 database, but only a limited number of runs have reported this particular variable. For example, ncar_ccsm3_0 doesn&#39;t have it for the scenario A1B, ukmo_hadcm3 doesn&#39;t report this variable at all. That&#39;s the reason why I was to calculate it from the meridional velocity. anyway...<br>
<br>D.<br><br><span style="font-family: courier new,monospace;">! the meridional velocity<br>use &quot;<a rel="nofollow" href="http://esgcet.llnl.gov/cgi-bin/dap-cgi.py/ipcc4/20c3m/ncar_ccsm3_0/pcmdi.ipcc4.ncar_ccsm3_0.20c3m.run1.ocn.mo.xml?vo,time,depth,lat_395_a,lon_320">http://esgcet.llnl.gov/cgi-bin/dap-cgi.py/ipcc4/20c3m/ncar_ccsm3_0/pcmdi.ipcc4.ncar_ccsm3_0.20c3m.run1.ocn.mo.xml?vo,time,depth,lat_395_a,lon_320</a>&quot;</span><br style="font-family: courier new,monospace;">
<span style="font-family: courier new,monospace;">! the pre-cooked meridional overturning streamfunction</span><br style="font-family: courier new,monospace;"><span style="font-family: courier new,monospace;">use/order=zxyt &quot;<a rel="nofollow" href="http://esgcet.llnl.gov/cgi-bin/dap-cgi.py/ipcc4/20c3m/ncar_ccsm3_0/pcmdi.ipcc4.ncar_ccsm3_0.20c3m.run1.ocn.mo.xml?stfmmc,time,region,depth_41,lat_395">http://esgcet.llnl.gov/cgi-bin/dap-cgi.py/ipcc4/20c3m/ncar_ccsm3_0/pcmdi.ipcc4.ncar_ccsm3_0.20c3m.run1.ocn.mo.xml?stfmmc,time,region,depth_41,lat_395</a>&quot;</span><br style="font-family: courier new,monospace;">
<br><span style="font-family: courier new,monospace;">let psi_precooked = stfmmc[d=2,i=4]/1e6</span><br style="font-family: courier new,monospace;"><span style="font-family: courier new,monospace;">let psi_calculated = vo[d=1,x=@din,z=@iin]/1e6 - vo[d=1,x=@din,z=@din]/1e6</span><br style="font-family: courier new,monospace;">
<br style="font-family: courier new,monospace;"><span style="font-family: courier new,monospace;">ppl cross 1</span><br style="font-family: courier new,monospace;"><span style="font-family: courier new,monospace;">con/lev=10d/l=1 psi_precooked</span><br style="font-family: courier new,monospace;">
<span style="font-family: courier new,monospace;">con/lev=10d/l=1/over psi_calculated[gz=psi_precooked@asn,k=@shf:-1]</span><br><br><br><div class="gmail_quote">On Fri, Jul 25, 2008 at 2:07 AM, Olivier Marti <span dir="ltr">&lt;<a rel="nofollow" href="mailto:olivier.marti@xxxxxxxxxxxx">olivier.marti@xxxxxxxxxxxx</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"><br>
Le 23 juil. 08 &#xE0; 19:06, David Wang a &#xE9;crit :<div class="Ih2E3d"><br>
<br>
<blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
Hey Ferreters,<br>
<br>
I calculated the meridional overturning streamfunction from the meridional<br>
velocity field of an ipcc4 model using the simple syntax as:<br>
<br>
vo[x=@din,z=@iin] ! vo is the variable for the meridional velocity<br>
<br>
I compared the result with the pre-cooked meridional overturning<br>
streamfunction from the same model output, and found the two have more or<br>
less the similar patterns but the FERRET calculation is far more noisy. Now<br>
it&#39;s unclear to me if the syntax I used is not accurate enough or something<br>
else is responsible for the difference. I attach both the script and the<br>
plot (the black contours are the pre-cooked, the red ones are computed by<br>
FERRET).<br>
</blockquote>
<br>
<br></div>
David,<br>
<br>
If I remember well, the CCSM ocean grid is not lat/lon. The 3D velocity fields in the IPCC database has been interpolated on a regular lat/lon grid. This interpolation is not likely to conserve all properties of the fields, like the non-divergence. Then you cannot get a correct overturning stream function from this field. On the contrary, CCSM probably has a method to compute correctly this function from the original grid. You should then use what they provide in the IPCC database.<br>

<br>
Olivier<br>
<br>
-- <br>
Olivier Marti &nbsp;mailto:<a rel="nofollow" href="mailto:olivier.marti" target="_blank">olivier.marti</a>[ad]<a rel="nofollow" href="http://lsce.ipsl.fr" target="_blank">lsce.ipsl.fr</a><br>
Laboratoire des Sciences du Climat et de l&#39;Environnement<br>
Institut Pierre Simon Laplace<br>
Laboratoire CEA-CNRS-UVSQ<br>
Tel : +33 1 69 08 77 27 - Fax : +33 1 69 08 30 73<br>
&lt;<a rel="nofollow" href="http://www.ipsl.jussieu.fr/%7Eomamce" target="_blank">http://www.ipsl.jussieu.fr/~omamce</a>&gt;<br>
-----------------------------------------------<br>
GEOSCIENTIFIC MODEL DEVELOPMENT<br>
A NEW EGU JOURNAL FOR<br>
DESCRIPTIONS OF MODELS OF THE EARTH SYSTEM<br>
<a rel="nofollow" href="http://www.geoscientific-model-development.net" target="_blank">http://www.geoscientific-model-development.net</a><br>
-----------------------------------------------<br>
<br>
<br>
<br>
<br>
</blockquote></div><br></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00398" href="msg00398.html">Re: [ferret_users] meridional overturning streamfunction</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00384" href="msg00384.html">[ferret_users] meridional overturning streamfunction</a></strong>
<ul><li><em>From:</em> David Wang</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00388.html">Re: [ferret_users] meridional overturning streamfunction</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00398.html">Re: [ferret_users] meridional overturning streamfunction</a></strong>
</li>

</UL>
<center>[<a href="msg00388.html">Thread Prev</a>][<a href="msg00398.html">Thread Next</a>][<A HREF="threads.html#00397">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
