<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Re: finding monthly maximum in daily data [regriding problem] -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 25 Nov 2008 10:33:29 &#45;0800 -->
<!--X-Message-Id: 492C44FC.9050900@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 8cc42c030811250552k6365f00er5efc28d67e0325f6@mail.gmail.com -->
<!--X-Reference: 8cc42c030811250822l53c9daa0sfef039085a18b957@mail.gmail.com -->
<!--X-Derived: gifVJkz0xACtT.gif -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Re: finding monthly maximum in daily data [regriding problem]</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00612.html">Thread Prev</a>][<a href="msg00616.html">Thread Next</a>][<A HREF="threads.html#00615">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Re: finding monthly maximum in daily data [regriding problem]</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Peter Szabo &lt;<a href="mailto:szabpet83@DOMAIN.HIDDEN">szabpet83@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Re: finding monthly maximum in daily data [regriding problem]</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 25 Nov 2008 10:33:32 -0800</li>
<li>Cc: ferret &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="mailto:8cc42c030811250822l53c9daa0sfef039085a18b957@DOMAIN.HIDDEN">8cc42c030811250822l53c9daa0sfef039085a18b957@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:8cc42c030811250552k6365f00er5efc28d67e0325f6@DOMAIN.HIDDEN">8cc42c030811250552k6365f00er5efc28d67e0325f6@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:8cc42c030811250822l53c9daa0sfef039085a18b957@DOMAIN.HIDDEN">8cc42c030811250822l53c9daa0sfef039085a18b957@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Thunderbird 2.0.0.18 (Windows/20081105)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">



Hi Peter, <br>
The monthly axis you defined is a regularly-spaced axis, with grid
cells approximately one month in size, but the months will be centered
approximately on the first of each month. Do you want an axis with the
first cell representing all of January 1961 then all of February, and
so on?&nbsp; If so, then you would come closer to that if you did not use
the /edges qualifier.&nbsp; But to really do it right, try this: Look up
"monthly axis, creating" in the Users Guide index.&nbsp; It'll take you to
the section on DEFINE AXIS/EDGES, which has an example showing how to
define a set of values representing the start of each month, and then
using /EDGES to create a monthly axis where the edges are the
boundaries between months and the coordinate value is in the middle.<br>
<br>
As to the results you're getting, when you specify both a
transformation, like X=@AVE,and a regridding operation, which in your
case is GT=tmonthly2@MAX, together in the same _expression_, Ferret does
the regridding first. As you found there's a difference between the
maximum in each month of all the data in the x and y range, vs the
maximum in each month of the data after averaging in x and y.&nbsp; A person
might want either result, so it's important to nail down in what order
you want operations you want to be done, as you did in making two
separate definitions.<br>
<br>
Ansley<br>
<br>
<br>
<br>
Peter Szabo wrote:
<blockquote
 cite=""
 type="cite">Hi ferreters,<br>
  <br>
one comment:<br>
It looks proper, when i used any of the axes (now i used: <br>
  <i>def axis/t="15-JAN-1961":"15-DEC-2000"/np=480/edges tmonthly2</i>)
and<br>
  <br>
  <i>let prex=pre[x=@ave,y=@ave]<br>
let premmax=prex[gt=tmonthly2@max]</i><br>
  <br>
instead of<br>
  <br>
  <i>let premmax=pre[x=@ave,y=@ave,gt=tmonthly2@max]</i><br>
  <br>
Sorry, i should have mentioned the "x=@ave,y=@ave" operations.<br>
  <br>
The given values seem to be correct (the maximum value on the attached
GIF are closer to the original GIF which was posted in my latter
letter), but <i>i still dont know if the used time-axis is appropriate</i>
or not.<br>
And i dont know <i>why i cant use the x=@ave, y=@ave and the
gt=tmonthly2@max</i> regriding operations together.<br>
  <br>
Peter<br>
  <br>
  <div class="gmail_quote">On Tue, Nov 25, 2008 at 2:52 PM, Peter Szabo
  <span dir="ltr">&lt;<a rel="nofollow" moz-do-not-send="true"
 href="mailto:szabpet83@xxxxxxxxx">szabpet83@xxxxxxxxx</a>&gt;</span>
wrote:<br>
  <blockquote class="gmail_quote"
 style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">Dear
Ferret Users,<br>
    <br>
Im totally confused about creating appropriate time-axes: i would like
to get monthly maximum precipitation from daily data set.<br>
Here are some details of my original data set:<br>
    <br>
yes? sh axis/t=1-jan-1961:3-jan-1961 tax<br>
&nbsp;name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; axis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # pts&nbsp;&nbsp; start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end<br>
&nbsp;TAX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 14610 r&nbsp;&nbsp; 01-JAN-1961 00:00&nbsp;&nbsp;&nbsp; 31-DEC-2000
00:00<br>
T0 = 15-JAN-1901 00:00:00<br>
&nbsp;&nbsp; Axis span (to cell edges) = 350640<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; L&nbsp;&nbsp;&nbsp;&nbsp; T&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TBOX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TBOXLO&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TSTEP
(HOURS)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&gt;&nbsp; 01-JAN-1961 00:00:00&nbsp; 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 31-DEC-1960 12:00:00&nbsp;&nbsp;
525624<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&gt;&nbsp; 02-JAN-1961 00:00:00&nbsp; 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 01-JAN-1961 12:00:00&nbsp;&nbsp;
525648<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&gt;&nbsp; 03-JAN-1961 00:00:00&nbsp; 24&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 02-JAN-1961 12:00:00&nbsp;&nbsp;
525672<br>
    <br>
When i try to find the monthly maximum value through regriding to
monthly data with the below command, i just cant have the correct
values.<br>
    <br>
def axis/t="15-JAN-1961":"15-DEC-2000"/np=480 tmonthly<br>
let premmax=pre[gt=tmonthly@max]<br>
    <br>
I also tried creating the time axis with "/edges" and some others also.
    <br>
    <br>
def axis/t="15-JAN-1961":"15-DEC-2000"/np=480/edges tmonthly<br>
def
axis/t="1-JAN-1961:00:00":"31-DEC-2000:00:00"/t0="1-JAN-1961:00:00"/np=480/edges/units=days
tmonthly<br>
etc.<br>
    <br>
None of them gave what i expected.<br>
I enclose the original daily data set (HU_predaily.gif) and one of the
plots after regriding (HU_premax_tmonthly.gif). The maximum on the
original plot is 33.75 and on the others they are always bigger (around
37).<br>
    <br>
Can anyone help me?<br>
    <br>
Thanks in advance, <br>
    <font color="#888888">Peter Szabo<br>
    </font></blockquote>
  </div>
  <br>
  <br>
  <hr size="4" width="90%"><br>
  <center><img src="gifVJkz0xACtT.gif"></center>
</blockquote>


</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00616" href="msg00616.html">Re: [ferret_users] Re: finding monthly maximum in daily data [regriding problem]</a></strong>
<ul><li><em>From:</em> Peter Szabo</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00611" href="msg00611.html">[ferret_users] finding monthly maximum in daily data [regriding problem]</a></strong>
<ul><li><em>From:</em> Peter Szabo</li></ul></li>
<li><strong><a name="00612" href="msg00612.html">[ferret_users] Re: finding monthly maximum in daily data [regriding problem]</a></strong>
<ul><li><em>From:</em> Peter Szabo</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00612.html">[ferret_users] Re: finding monthly maximum in daily data [regriding problem]</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00616.html">Re: [ferret_users] Re: finding monthly maximum in daily data [regriding problem]</a></strong>
</li>

</UL>
<center>[<a href="msg00612.html">Thread Prev</a>][<a href="msg00616.html">Thread Next</a>][<A HREF="threads.html#00615">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
