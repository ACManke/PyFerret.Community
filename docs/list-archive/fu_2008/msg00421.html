<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users]wind frequency from zonal, meridional wind -->
<!--X-From-R13: Brgre Emnob <fmnocrg83Ntznvy.pbz> -->
<!--X-Date: Tue, 12 Aug 2008 07:37:32 &#45;0700 -->
<!--X-Message-Id: 8cc42c030808120722p10899de0k5a7089c065f76cff@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 11057396.3681218540965943.JavaMail.root@sol.vedur.is -->
<!--X-Reference: 25457821.3701218541004560.JavaMail.root@sol.vedur.is -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users]wind frequency from zonal, meridional wind</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00420.html">Thread Prev</a>][<a href="msg00422.html">Thread Next</a>][<A HREF="threads.html#00421">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users]wind frequency from zonal, meridional wind</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Halld&#xF3;r Bj&#xF6;rnsson &lt;<a href="mailto:halldor@DOMAIN.HIDDEN">halldor@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users]wind frequency from zonal, meridional wind</strong></li>
<li><strong>From</strong>: <strong>Peter Szabo &lt;<a href="mailto:szabpet83@DOMAIN.HIDDEN">szabpet83@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 12 Aug 2008 16:22:55 +0200</li>
<li>Cc: ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma; h=domainkey-signature:received:received:message-id:date:from:to :subject:cc:in-reply-to:mime-version:content-type:references; bh=tjwWa4D3qYRrxziju+B54bOXFNSeY0KNJqIXH0Ju1Kc=; b=LncUhnj3690/9DqPxtJAOJD9489au4cUy+yyZppwdwMRcWCdm5s6VBt+uHwY3gEN0b xuwxMV2Cpzr/jCIDhfX4jtuunayLf6EkT/Q+GB+dGqsXtK5jq3LuPfvrjzp8sYvpqj4b 13HQ+Ftyum2F4OHioW77WTnrG2lqzf2M0eAvQ=</li>
<li>Domainkey-signature: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma; h=message-id:date:from:to:subject:cc:in-reply-to:mime-version :content-type:references; b=DFpKbfBzKEbg4G4kw0aXfCCjEpOOw97HjzwrL9IaQ0gky5/i6NeM8Ztgo4wbaURN58 6Y72TWy2OdB/Rfu58WFic8nW4Y7PfObGwU2IcDmFRXL8zYMeX1Bxk+kwhFXsN458Ti3w 1XBvXUbmNCMYnkeC/46Ve2e2PUK3WIFiP4wK0=</li>
<li>In-reply-to: &lt;<a href="mailto:25457821.3701218541004560.JavaMail.root@DOMAIN.HIDDEN">25457821.3701218541004560.JavaMail.root@xxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:11057396.3681218540965943.JavaMail.root@DOMAIN.HIDDEN">11057396.3681218540965943.JavaMail.root@xxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:25457821.3701218541004560.JavaMail.root@DOMAIN.HIDDEN">25457821.3701218541004560.JavaMail.root@xxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr">Hey,<br>thanks. windrose was easy after the thread (thanks for Mick). I did it earlier. But that one is for one single point and i want for many years and for a region. I want to count the number of days belong to N,NNE,NE etc. directions in every point of the region. Then have the most frequent wind direction (only the direction of the wind counts).<br>
<br>After some search in archive, somehow i succeed in solving this:<br>I needed to have my 1D data (freq) to put on a 3D (inculing lon-lat) in every point.<br>i did it like this:<br>-------------------- <br>repeat/j=1:61:1 (repeat/i=1:97:1 (let freq=tsequence({`ndir`,`nnedir`,`nedir`,`enedir`,`edir`,`esedir`,`sedir`,`ssedir`,`sdir`,`sswdir`,`swdir`,`wswdir`,`wdir`,`wnwdir`,`nwdir`,`nnwdir`}) ;\<br>
def axis/t=1:16:1 tax; let freqt = freq[gt=tax];\<br>let zero=0*u; let freq3d=zero+freqt[g=GJU1@asn];\<br>let winddirmax=freq3d[t=@max]; let wind=freq3d[t=@loc:`winddirmax`];\<br>save/file=&quot;./<a rel="nofollow" href="http://out.nc">out.nc</a>&quot;/append/clobber/ilimits=1:97/jlimits=1:61/i=`i`/j=`j` wind))<br>
<br>It takes a lot and complexity, so is there any better solution for it?<br>Thanks, Peter<br><br><div class="gmail_quote">On Tue, Aug 12, 2008 at 1:36 PM, Halld&#xF3;r Bj&#xF6;rnsson <span dir="ltr">&lt;<a rel="nofollow" href="mailto:halldor@xxxxxxxxxxxx">halldor@xxxxxxxxxxxx</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;"><br>
It seems to me that you are trying to &nbsp;draw a windrose<br>
<br>
If you google &quot;ferret wind rose&quot; you get the following thread<br>
from the help archives.<br>
<a rel="nofollow" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2004/msg00770.html" target="_blank">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2004/msg00770.html</a><br>
<br>
<br>
Sincerely<br>
<br>
Halld&#x155;o<br>
<div class="Ih2E3d">----- Original Message -----<br>
From: &quot;Peter Szabo&quot; &lt;<a rel="nofollow" href="mailto:szabpet83@xxxxxxxxx">szabpet83@xxxxxxxxx</a>&gt;<br>
To: &quot;ferret users&quot; &lt;<a rel="nofollow" href="mailto:ferret_users@xxxxxxxx">ferret_users@xxxxxxxx</a>&gt;<br>
Sent: Tuesday, 12 August, 2008 7:48:29 AM GMT +00:00 Casablanca / Monrovia<br>
Subject: [ferret_users]wind frequency from zonal, meridional wind<br>
<br>
<br>
<br>
Dear Ferreters,<br>
<br>
I have daily data set. I want to visualize the most frequent wind direction for a region. I have u and v variables.<br>
<br>
1. First i count the number of days belonging to (16) directions with &quot;tan&quot; function (N, NNE, NE, ENE...)<br>
<br>
let ENE=if (u lt 0 and v lt 0) and (tan(u/v) le 0.6682) and (tan(u/v) gt 0.1989) then 1<br>
let enedir=ene[l=@sum]<br>
<br>
and so on...<br>
<br>
2. Then i try to write out for every (lon-lat) point the frequency of the direction (actually the number of the most frequent direction):<br>
<br>
repeat/j=1:61:1 (repeat/i=1:97:1 (let freq={`ndir`,`nnedir`,`nedir`,`enedir`,`edir`,`esedir`,`sedir`,`ssedir`,`sdir`,`sswdir`,`swdir`,`wswdir`,`wdir`,`wnwdir`,`nwdir`,`nnwdir`} ;\<br>
let winddirmax=freq[x=@max]; let wind=freq[x=@loc:`winddirmax`];\<br>
</div>save/file=&quot;./ <a rel="nofollow" href="http://winddir.6190.nc" target="_blank">winddir.6190.nc</a> &quot;/ilimits=1:97/jlimits=1:61/i=`i`/j=`j`/clobber wind))<br>
<div class="Ih2E3d"><br>
It works, it says:<br>
<br>
!-&gt; REPEAT: I=63<br>
!-&gt; DEFINE VARIABLE freq={28,12,16,28,165,78,75,47,29,10,21,38,221,82,83,67}<br>
!-&gt; DEFINE VARIABLE wind=freq[x=@loc:221]<br>
</div>!-&gt; LIST/FORMAT=CDF/file=&quot;...&quot;/ilimits=1:97/jlimits=1:61/i=63/j=1/append/clobber wind<br>
listing to file ...<br>
<div><div></div><div class="Wj3C7c"><br>
But as for the output file, it seems, it didnt work:<br>
yes? use ...<br>
name title I J K L<br>
WIND FREQ[X=@LOC:221] ... ... ... ...<br>
yes? list wind<br>
VARIABLE : FREQ[X=@LOC:221]<br>
FILENAME : <a rel="nofollow" href="http://winddir.6190.nc" target="_blank">winddir.6190.nc</a><br>
FILEPATH : /home/szabop/aladin_arpege/<br>
13.00<br>
<br>
Any suggestion will be appreciated (either in solving the technical problem). Thanks a lot,<br>
<br>
Peter szabo<br>
</div></div></blockquote></div><br></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00422" href="msg00422.html">Re: [ferret_users]wind frequency from zonal, meridional wind</a></strong>
<ul><li><em>From:</em> Peter Szabo</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00420" href="msg00420.html">Re: [ferret_users]wind frequency from zonal, meridional wind</a></strong>
<ul><li><em>From:</em> Halld&#xF3;r Bj&#xF6;rnsson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00420.html">Re: [ferret_users]wind frequency from zonal, meridional wind</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00422.html">Re: [ferret_users]wind frequency from zonal, meridional wind</a></strong>
</li>

</UL>
<center>[<a href="msg00420.html">Thread Prev</a>][<a href="msg00422.html">Thread Next</a>][<A HREF="threads.html#00421">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
