<!-- MHonArc v2.5.4 -->
<!--X-Subject: bin averages -->
<!--X-From-R13: "Re. Quevf Irnire" <jrnireNndhnevhf.raifpv.ehgtref.rqh> -->
<!--X-Date: Wed, 3 Feb 1999 10:35:19 &#45;0800 -->
<!--X-Message-Id: 199902031834.NAA24570@aquarius.envsci.rutgers.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>bin averages</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00033.html">Thread Prev</a>][<a href="msg00035.html">Thread Next</a>][<A HREF="threads.html#00034">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>bin averages</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><A HREF="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxx</A></strong></li>
<li><strong>Subject</strong>: <strong>bin averages</strong></li>
<li><strong>From</strong>: <strong>&quot;Dr. Chris Weaver&quot; &lt;<A HREF="mailto:weaver@DOMAIN.HIDDEN">weaver@xxxxxxxxxxxxxxxxxxxxxxxxxxx</A>&gt;</strong></li>
<li>Date: Wed, 3 Feb 1999 13:34:23 -0500 (EST)</li>
<li>Reply-to: &quot;Dr. Chris Weaver&quot; &lt;<A HREF="mailto:weaver@DOMAIN.HIDDEN">weaver@xxxxxxxxxxxxxxxxxxxxxxxxxxx</A>&gt;</li>
<li>Sender: owner-ferret_users</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

Hi,
Hi,

I'm trying to find a good way to bin one data set by values of another data set. 
For example, let's say I have sst and surface pressure on a lat/lon/time grid.  
I want to produce averages of sst, over a given region, in each of several 
pressure bins, e.g., produce mean North Pacific sst separately for pressure 
between 995 and 1000 mb, between 1000 and 1005 mb, etc.

A problem of cumbersome coding arises when there are a lot of bins.  In fortran, 
I would simply have a do loop where the starting and ending pressure values of 
each pressure bin where calculated as some function of the loop index.  However, 
in Ferret, it seems you have to loop over indices of the grid your data set is 
defined on--you can't just say &quot;repeat/i=1:50:1 go calc_bin_avg i&quot;, where i is 
some arbitrary loop index which is passed to the script to be used in defining 
the bins, because it will automatically be translated to the i that describes 
the x axis of the data you are trying to manipulate.

To get around this, I've tried the following:
define axis/z=990:1038:2 zstart_bin
define axis/z=992:1040:2 zend_bin
let start_bin = z[gz=zstart_bin]
let end_bin = z[gz=zend_bin]

This way, the bins are defined by my use of a new z axis definition.  This seems 
to solve my problem, since the two data sets I'm manipulating, sst and slp, 
don't have a z axis, therefore I can loop over it, but I can't generalize this 
method to variables that do have a z axis, otherwise I get conflicts over 
ambiguous axis usage in my expressions.

Is there a better way to use Ferret for more fortran-like looping over arbitrary 
indices without these kind of axis conflicts?

Thanks very much,

Chris Weaver


Department of Environmental Sciences
Rutgers University/Cook College
14 College Farm Road
New Brunswick, NJ 08901-8551
USA
(ph) 1 732 932 7902  (int) weaver@gaia.rutgers.edu


</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00033.html">thicker lines on plots.</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00035.html">Strange time axis inconsitencies...</a></strong>
</li>

</UL>
<center>[<a href="msg00033.html">Thread Prev</a>][<a href="msg00035.html">Thread Next</a>][<A HREF="threads.html#00034">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
