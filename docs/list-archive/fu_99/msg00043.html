<!-- MHonArc v2.5.4 -->
<!--X-Subject: Preserving variables between function calls -->
<!--X-From-R13: Uyraa Qneire <Uyraa.QneireNngz.pu.pnz.np.hx> -->
<!--X-Date: Wed, 10 Feb 1999 15:36:24 &#45;0800 -->
<!--X-Message-Id: l03102804b2e7c48c4b06@[131.111.112.149] -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Preserving variables between function calls</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00042.html">Thread Prev</a>][<a href="msg00046.html">Thread Next</a>][<A HREF="threads.html#00043">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Preserving variables between function calls</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><A HREF="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxx</A></strong></li>
<li><strong>Subject</strong>: <strong>Preserving variables between function calls</strong></li>
<li><strong>From</strong>: <strong>Glenn Carver &lt;<A HREF="mailto:Glenn.Carver@DOMAIN.HIDDEN">Glenn.Carver@xxxxxxxxxxxxxxxx</A>&gt;</strong></li>
<li>Date: Wed, 10 Feb 1999 23:29:05 +0000</li>
<li>Sender: owner-ferret_users</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

I have a slight problem when using Ferret to define new variables from a
function call since Ferret calls the function everything I need to use the
variable.

I've been writing some Ferret external functions, which work ok, but
suppose I do the following:

  let newpv = bb2reg( x[gx=xax], y[gy=yay], pv[k=1,l=1] )

where pv is a 4D variable read from a netCDF file. Now, because of the way
ferret works, newpv (and therefore the call to bb2reg) won't be made until
newpv is actually required. So, let's say I do:

  shade newpv[k=1,l=1]

All ok so far. The problem comes when I want to do something else with
newpv, let's say:

  contour newpv[k=1,l=1]

Now, what happens is that the function 'bb2reg' is called a second time to
compute newpv. Unfortunately, because bb2reg is interpolating from the
model grid to a regular grid, this is a bit time consuming. In the normal
programming sense, newpv would be computed once only, but because Ferret
has defined the variable in terms of its expression, the function will be
called everytime I need to use newpv - at least that's how I understand it.
I admit to being a novice Ferret user so I'm hoping this is easy to get
around.

I could obvious save newpv to a file the first time newpv is invoked and
then read from the file, but this is a bit self-defeating since it's not
much easier than using an external program to interpolate the whole file
anyway; I wanted to avoid making more files by using external functions.

I can't see how to tell Ferret to use the 'cached' value of newpv rather
than have to recompute it from the expression? Is this possible?

    Glenn


----
Dr. Glenn Carver, Senior Research Associate,
Centre for Atmospheric Science, Chemistry Dept., Cambridge University, UK
   Glenn.Carver@atm.ch.cam.ac.uk     <A  HREF="http://www.atm.ch.cam.ac.uk/~glenn/">http://www.atm.ch.cam.ac.uk/~glenn/</A>

         &quot;Genius is one percent inspiration and ninety nine
          percent perspiration&quot;   Thomas Edison.



</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00046" href="msg00046.html">Re: Preserving variables between function calls</a></strong>
<ul><li><em>From:</em> Steve Hankin</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00042.html">follow-up to bin averages and looping</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00046.html">Re: Preserving variables between function calls</a></strong>
</li>

</UL>
<center>[<a href="msg00042.html">Thread Prev</a>][<a href="msg00046.html">Thread Next</a>][<A HREF="threads.html#00043">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
