<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] strange behavior of vector and viewports -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 17 Oct 2011 12:08:26 &#45;0700 -->
<!--X-Message-Id: 4E9C7D29.2070201@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAKiwd6s3VbvjPWHLyAiZG6oXn&#45;Px=R_jVJweXOmGm2+hu7tdvg@mail.gmail.com -->
<!--X-Reference: 4E98A2FE.7010404@noaa.gov -->
<!--X-Reference: CAKiwd6s2bagDye&#45;0xB4uDPwj7eY6fh7pC2_VFRHYpWafFb1U1A@mail.gmail.com -->
<!--X-Derived: pngSzlj5dMP2f.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] strange behavior of vector and viewports</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00769.html">Thread Prev</a>][<a href="msg00771.html">Thread Next</a>][<A HREF="threads.html#00772">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] strange behavior of vector and viewports</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Otacilio Leandro &lt;<a href="mailto:otaciliomneto@DOMAIN.HIDDEN">otaciliomneto@xxxxxxxxx</a>&gt;,        Ferret users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] strange behavior of vector and viewports</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 17 Oct 2011 12:08:25 -0700</li>
<li>In-reply-to:  &lt;<a href="mailto:CAKiwd6s2bagDye-0xB4uDPwj7eY6fh7pC2_VFRHYpWafFb1U1A@DOMAIN.HIDDEN">CAKiwd6s2bagDye-0xB4uDPwj7eY6fh7pC2_VFRHYpWafFb1U1A@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References:  &lt;<a href="mailto:CAKiwd6s3VbvjPWHLyAiZG6oXn-Px%3DR_jVJweXOmGm2%2Bhu7tdvg@DOMAIN.HIDDEN">CAKiwd6s3VbvjPWHLyAiZG6oXn-Px=R_jVJweXOmGm2+hu7tdvg@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4E98A2FE.7010404@DOMAIN.HIDDEN">4E98A2FE.7010404@xxxxxxxx</a>&gt; &lt;<a href="mailto:CAKiwd6s2bagDye-0xB4uDPwj7eY6fh7pC2_VFRHYpWafFb1U1A@DOMAIN.HIDDEN">CAKiwd6s2bagDye-0xB4uDPwj7eY6fh7pC2_VFRHYpWafFb1U1A@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:7.0.1) Gecko/20110929 Thunderbird/7.0.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi all,<br>
    Otacilio and I exchanged some more emails and have determined that
    this is due to a long-standing bug, that occurs rarely when drawing
    lines.&nbsp; In Ferret, all lines are drawn by calls to the graphics
    package to move to a location, or draw to a location. When the
    coordinates cross a plot boundary, the location of the intercept is
    found, so the line goes just up to that border.<br>
    <br>
    When there are two segments in a row that are outside but near one
    of the corners, like this:<br>
    <br>
    <img src="pngSzlj5dMP2f.png" alt=""><br>
    then we can get the kinds of stray lines Otacilio saw.&nbsp; In his case
    it was triggered by a particular combination of the plot commands
    and "go land".&nbsp; I have found a fix for this, which will be in the
    next release of Ferret.<br>
    <br>
    Ansley<br>
    <br>
    <br>
    On 10/15/2011 7:59 AM, Otacilio Leandro wrote:
    <blockquote
cite=""
      type="cite">
      <pre wrap="">Hi Ansley,

My Ferret version is:

ferret -nojnl
 	NOAA/PMEL TMAP
 	FERRET v6.72
 	Linux 2.6.32-131.12.1.el6.x86_64 32-bit - 09/13/11
 	15-Oct-11 10:54

Trying to answer all your questions:

As you suspected is the "go land" the cause of problem. That strange
line apear after the plot is made. See test-1.gif without "go land"
and test.gif with "go land".

I saved just the fist timestep [l=1] of each file and seding attached.
I'm already seding vento-test.jnl, an edited version of the 1st
script, to read these new files.

Thanks for the help.

2011/10/14 Ansley Manke <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:Ansley.B.Manke@xxxxxxxx">&lt;Ansley.B.Manke@xxxxxxxx&gt;</a>:
</pre>
      <blockquote type="cite">
        <pre wrap="">Hi,
Let's talk about this outside the list and then report back when we find an
answer. &nbsp;Ferret's underlying graphics draw lines by issuing commands to
"move to a location" or "draw to a location". &nbsp;Sometimes we see a bug where
these are out of sync, so that the location information is corrupted.

What version of Ferret are you running?

I have seen these stray lines sometimes on plots that were related to "go
land". &nbsp;As an experiment, does the plot change if you comment out the "go
land"?

If you put in a pause statement after each plot is drawn, before the next
"set viewport", do you see the line being drawn upon finishing the plot? Or
is it happening when the next plot is started? &nbsp;If you put in more pause
statements, you might be able to see when it's occurring.

Are your datasets large? &nbsp;If not, then perhaps you could send them to me, or
a subset of them, and I could check into this further.

Ansley

On 10/14/2011 11:19 AM, Otacilio Leandro wrote:
</pre>
        <blockquote type="cite">
          <pre wrap="">
Hi Ferrets,

I'm analising the climatology of wind at 200mb over South America.

I'm having problems (se the attached figure) when using vectors and
viewports. The figure was done corretly when i used the /flow rather
than /vector.

Any sugestions??

Tks

</pre>
        </blockquote>
        <pre wrap="">
</pre>
      </blockquote>
      <pre wrap="">


</pre>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00769" href="msg00769.html">[ferret_users] strange behavior of vector and viewports</a></strong>
<ul><li><em>From:</em> Otacilio Leandro</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00769.html">[ferret_users] strange behavior of vector and viewports</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00771.html">[ferret_users] error in y coordinate of an ascii file</a></strong>
</li>

</UL>
<center>[<a href="msg00769.html">Thread Prev</a>][<a href="msg00771.html">Thread Next</a>][<A HREF="threads.html#00772">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
