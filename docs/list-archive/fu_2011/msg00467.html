<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Color filling contours in Plate Caree projection &#45; problem -->
<!--X-From-R13: Eretrv [nhevgf <znhevgfNnefp.rqh> -->
<!--X-Date: Wed, 15 Jun 2011 18:41:25 &#45;0700 -->
<!--X-Message-Id: 3BEF3450&#45;8CD1&#45;405D&#45;A2CC&#45;D5088E92C132@arsc.edu -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 92B11FDC&#45;39CE&#45;492D&#45;AF18&#45;1311E42A66D2@arsc.edu -->
<!--X-Reference: 4DF952E0.3040900@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Color filling contours in Plate Caree projection - problem</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00466.html">Thread Prev</a>][<a href="msg00468.html">Thread Next</a>][<A HREF="threads.html#00467">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Color filling contours in Plate Caree projection - problem</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:Ansley.B.Manke@DOMAIN.HIDDEN">Ansley.B.Manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Color filling contours in Plate Caree projection - problem</strong></li>
<li><strong>From</strong>: <strong>Sergei Maurits &lt;<a href="mailto:maurits@DOMAIN.HIDDEN">maurits@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 15 Jun 2011 17:39:38 -0800</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="mailto:4DF952E0.3040900@DOMAIN.HIDDEN">4DF952E0.3040900@xxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:92B11FDC-39CE-492D-AF18-1311E42A66D2@DOMAIN.HIDDEN">92B11FDC-39CE-492D-AF18-1311E42A66D2@xxxxxxxx</a>&gt; &lt;<a href="mailto:4DF952E0.3040900@DOMAIN.HIDDEN">4DF952E0.3040900@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td style=""><div><br></div>Ansley,&nbsp;<div><br></div><div>Thank you for your response.&nbsp;<div><br></div><div>Actually, I made a typo in my e-mail, not in my Ferret script.&nbsp;</div><div><br></div><div>Here is the script, just in case of doubts. Selecting particular&nbsp;</div><div>projection&nbsp;ether shows color filling together with the map&nbsp;</div><div>(case of calling mp stereographic_north)&nbsp;or shows just&nbsp;a map&nbsp;</div><div>w/o any color contours (case of calling mp_Plate_Caree)</div><div><br></div><div>I have no idea how to fix it and why it is so.&nbsp;</div><div><br></div><div>****************************************************</div><div><br></div><div><div>SET MODE METAFILE &nbsp; &nbsp;! output to metafile, PS-compatible</div><div>SET MODE VERIFY &nbsp; &nbsp; &nbsp; &nbsp; ! show command file lines at the screen</div><div><br></div><div>!Preparation, cleaning from last settings</div><div>CANCEL REGION</div><div>CANCEL VARIABLES/ALL</div><div>CANCEL DATA/ALL</div><div>CANCEL VIEWPORTS</div><div><br></div><div>!Setting region 40-90N, 0-360 , 12 months</div><div>set region/l=1:12</div><div>set region/x=0.0:360.0/y=40.0N:90.0N</div><div>!SHOW REGION !optional</div><div><br></div><div>!Set window size and aspect ratio (will be overwritten if go mp_aspect is called)</div><div>SET WINDOW/SIZE=1.1/ASPECT=0.4 &nbsp; !(aspect up increases vert size, for Plate Caree)</div><div>!SET WINDOW/SIZE=1.1/ASPECT=1 &nbsp; &nbsp;!(aspect up increases vert size, 1 for stereographic)</div><div><br></div><div>!Show WINDOW size in pixsels</div><div>show symbol ppl$xpixel</div><div>show symbol ppl$ypixel</div><div><br></div><div>!! Stereographic projection</div><div>!===========================</div><div>! Usage: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arg1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arg2</div><div>! &nbsp;go mp_stereographic_north [central meridian] [standard parallel]</div><div>!</div><div>! arg 1 - longitude used for the center of the projection</div><div>! arg 2 - latitude used for the center of the projection</div></div><div><div><br></div><div>go mp_stereographic_north -42.5 !stereographic projection</div><div><br></div><div>! NOTE: &nbsp;Do not forget to uncomment</div><div>! &nbsp; &nbsp; &nbsp; &nbsp;go mp_aspect</div><div>! &nbsp; &nbsp; &nbsp; &nbsp;below, if Stereographic projection is used</div><div><br></div><div>!!Simple Cylindrical or Plate Ceree projection for G.Earth</div><div>!=========================================================</div><div>! Usage: &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arg1 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; arg2</div><div>! &nbsp;go mp_plate_caree [central meridian] [standard parallel]</div><div>!</div><div>! arg 1 - longitude used for the center of the projection</div><div>! arg 2 - latitude used for the center of the projection</div><div><br></div><div>!go mp_plate_caree -42.5 !Simple Cylindrical or Plate Caree projection for G.Earth</div><div><br></div><div>!show variables !optional&nbsp;</div><div><br></div><div>!Comment the next line out for Simple Cylindrical or Plate Caree projection</div><div>go mp_aspect &nbsp; &nbsp; &nbsp; ! computes appropriate aspect, ovewritting SET WINDOW,&nbsp;</div><div>&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ! useful&nbsp;for&nbsp;stereographic projection, but SET WINDOW is better for P.C.</div><div><br></div><div>!definition of axis (x,y,t) and 3D grid from these axis</div><div><br></div><div>define axis/x=0.0e:359.0e:1/unit=degree ocnx</div><div>define axis/y=40.5n:89.5n:1/unit=degree ocny</div><div>define axis/t=1:12:1 ocnt</div><div>define grid/x=ocnx/y=ocny/t=ocnt ocngrid</div></div><div><br></div><div><div>!show grid ocngrid !optional</div><div><br></div><div>!DATA reading from formatted ASCII file into variable sic</div><div>file/format=(E12.5)/order=xyt/var=sic/grid=ocngrid sic_composite_clim_2028-2030_mod.fm !formatted file</div><div><br></div><div>!show variable sic !optional</div><div><br></div><div>!introduction of variable sic_n = 100*sic if sic is &gt; 0 or NoN otherwise</div><div><br></div><div>let sic_n = if sic gt 0.0 then sic*100 else (-1)^0.5</div><div>!show variable sic_n ! optional</div><div><br></div><div>!Setting grid for variable sic_n, important</div><div>set grid sic_n</div><div>!show grid &nbsp;sic_n !optional</div><div><br></div><div>fill/nolab/noaxis/set_up/nokey/palette=Blueish_White_WW.spk/levels=(-inf)(15,100,5)(inf)/L=1 sic_n*mp_mask,x_page,y_page</div><div>ppl fill</div><div>!Optional contouring with different colors/line width</div><div>!contour/over/noaxis/set_up/nolabels/color=4/levels=(15,90,15)/L=1 sic_n*mp_mask,x_page,y_page</div><div>!ppl contour/over !ppl plot layout</div><div>!contour/over/noaxis/set_up/nolabels/color=17/levels=(15,15,15)/L=1 sic_n*mp_mask,x_page,y_page</div><div>!ppl contour/over !ppl plot layout</div><div>!Adding map and geographic mesh</div><div>go mp_graticule 0 360 30 50 90 20 1</div><div>go mp_land 1 overlay</div></div><div>! Output to GIF-file</div><div><div>frame/file="./GIF/output_str40N_2028_101.gif"</div><div><br></div><div>CANCEL MODE METAFILE</div></div><div><br></div><div><div>*****************************************************</div><div><br></div></div><div><br></div><div><br><div>
<div><div>Dr. Sergei Maurits, HPC Specialist</div><div>Arctic Region Supercomputing Center<br>University of Alaska Fairbanks<br>Fairbanks, AK 99775-6020</div><div>907 450 8697 voice &nbsp;&nbsp;907 450 8604 fax.<br><a rel="nofollow" href="mailto:maurits@xxxxxxxx">maurits@xxxxxxxx</a></div></div><div><br></div><br class="Apple-interchange-newline">
</div>
<br><div><div>On Jun 15, 2011, at 4:48 PM, Ansley Manke wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">
<div text="#000000" bgcolor="#ffffff">
    Hi -<br>
    The script is called mp_plate_caree, with just one r.&nbsp;&nbsp; Perhaps
    that's the only trouble.&nbsp; If that's not it, then note that these
    scripts do nothing but define a set of variables.&nbsp; You might be able
    to see what's happening if you execute<br>
    <br>
    yes? go mp_plate_caree -42.5 <br>
    yes? show variables<br>
    <br>
    <br>
    <br>
    On 6/15/2011 4:15 PM, Sergei Maurits wrote:
    <blockquote cite="" type="cite">
      <div>Hi Felow Ferret Users,&nbsp;</div>
      <div><br>
      </div>
      <div><br>
      </div>
      <div>I would appreciate a pointer to resolve my problem. I need to
        make frames for Google Earth animation, which requires Simple
        Cylindrical projection a.k.a. Plate Caree.&nbsp;</div>
      <div><br>
      </div>
      <div>I developed Ferret script, that can do waterer I want for
        Polar Stereographic projection (I draw polar areas with ice
        coverage). It includes&nbsp;</div>
      <div><br>
      </div>
      <div>- data reading</div>
      <div>- plotting land contours and map mesh &nbsp;</div>
      <div>- plotting color-filled contours with custom palette</div>
      <div>- overplotting isocontours on the top of this map</div>
      <div><br>
      </div>
      <div>The very same script with a single line change (projection
        change)&nbsp;refuses to plot the color-filled contours, while all
        other&nbsp;operations are performed OK, including map, mesh,
        and&nbsp;overpotting of&nbsp;isocontours in the end. The line I am
        changing is&nbsp;</div>
      <div><br>
      </div>
      <div>go mp_stereographic_north -42.5</div>
      <div><br>
      </div>
      <div>instead I use&nbsp;</div>
      <div><br>
      </div>
      <div>go mp_plate_carree -42.5&nbsp;</div>
      <div><br>
      </div>
      <div>and subsequently comment out&nbsp;</div>
      <div><br>
      </div>
      <div>go mp_aspect&nbsp;</div>
      <div><br>
      </div>
      <div>which (commenting out or leaving in the scripts of this
        second comand) results in predicable response and does not
        affect the main problem)</div>
      <div><br>
      </div>
      <div><br>
      </div>
      <div>Any similar experiences and/or ways to resolve the problem?</div>
      <div><br>
      </div>
      <div>Also, working scripts with Plate Caree utilization for color
        contouring in polar regions could be of great help.&nbsp;I am not
        stick to my script, I easily can use another one that would make
        Simple Cylindrical operational.</div>
      <div><br>
      </div>
      <div>Great thanks to everyone responding,</div>
      <div>Sergei Maurits</div>
      <div><br>
      </div>
      <div><br>
        <div>
          
            <div>
              <div>Dr. Sergei Maurits, HPC Specialist</div>
              <div>Arctic Region Supercomputing Center<br>
                University of Alaska Fairbanks<br>
                Fairbanks, AK 99775-6020</div>
              <div>907 450 8697 voice &nbsp;&nbsp;907 450 8604 fax.<br>
                <a rel="nofollow" moz-do-not-send="true" href="mailto:maurits@xxxxxxxx">maurits@xxxxxxxx</a></div>
            </div>
            <div><br>
            </div>
          <br class="Apple-interchange-newline">
        </div>
        <br>
      </div>
    </blockquote>
  </div>

</blockquote></div><br></div></div></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00463" href="msg00463.html">[ferret_users] Color filling contours in Plate Caree projection - problem</a></strong>
<ul><li><em>From:</em> Sergei Maurits</li></ul></li>
<li><strong><a name="00466" href="msg00466.html">Re: [ferret_users] Color filling contours in Plate Caree projection - problem</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00466.html">Re: [ferret_users] Color filling contours in Plate Caree projection - problem</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00468.html">Re: [ferret_users] Color filling contours in Plate Caree projection - problem</a></strong>
</li>

</UL>
<center>[<a href="msg00466.html">Thread Prev</a>][<a href="msg00468.html">Thread Next</a>][<A HREF="threads.html#00467">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
