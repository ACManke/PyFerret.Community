<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] current path length -->
<!--X-From-R13: Zrryn Tenaxpbzor <yrryn.senaxpbzorNtznvy.pbz> -->
<!--X-Date: Mon, 6 Jun 2011 02:42:25 &#45;0700 -->
<!--X-Message-Id: 5D6139BA&#45;12ED&#45;40C4&#45;A9E1&#45;B151EE0C008B@gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: BFAB582F&#45;8F26&#45;4C35&#45;9E1B&#45;B07FCA7CC798@gmail.com -->
<!--X-Reference: 4DD57742.9090006@noaa.gov -->
<!--X-Reference: BANLkTi=wY&#45;7m8DpDi2rpe=4x5A_3NzhCrQ@mail.gmail.com -->
<!--X-Derived: pdfe6HImJxfEE.pdf -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] current path length</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00383.html">Thread Prev</a>][<a href="msg00384.html">Thread Next</a>][<A HREF="threads.html#00437">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] current path length</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] current path length</strong></li>
<li><strong>From</strong>: <strong>Leela Frankcombe &lt;<a href="mailto:leela.frankcombe@DOMAIN.HIDDEN">leela.frankcombe@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 06 Jun 2011 11:42:18 +0200</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma; h=domainkey-signature:from:mime-version:content-type:subject:date :in-reply-to:to:references:message-id:x-mailer; bh=CVOCEyEdPZi6bmIXJxxe/ea3oL83N8xhWCIKAyWN5GI=; b=qeC7JY3+3P6BRHQCmYn196dSfYRU/+TBehge2UeMJV7f43S8wvy0is8/d/Rmi4zswe HUXcO2aJ9xl3m+kB/mPhN9zTGPTl3Nep+N2C3d3HvftasTkxN1CibTeXjSgi6QfGspz8 OksmcprIbhzMLkYuwT8bBwSu0EFRaTHBhUzXY=</li>
<li>Domainkey-signature: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma; h=from:mime-version:content-type:subject:date:in-reply-to:to :references:message-id:x-mailer; b=q9FpSsegWg/2sVWDQK4y5b6EIgUViXmTMerQp3C4SUgyKX0L/8+vc7bewst+3RitSr xJfviT/rxFGZ8waIy7+7XYG/1raGux9SNJ5dza4I7KxUlcZuNdP/xknz0DTca0a/FnRB zakAtxlf4l75BA7736FFgHZYNymnCA3J/kIMU=</li>
<li>In-reply-to: &lt;<a href="mailto:BANLkTi%3DwY-7m8DpDi2rpe%3D4x5A_3NzhCrQ@DOMAIN.HIDDEN">BANLkTi=wY-7m8DpDi2rpe=4x5A_3NzhCrQ@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:BFAB582F-8F26-4C35-9E1B-B07FCA7CC798@DOMAIN.HIDDEN">BFAB582F-8F26-4C35-9E1B-B07FCA7CC798@xxxxxxxxx</a>&gt; &lt;<a href="mailto:4DD57742.9090006@DOMAIN.HIDDEN">4DD57742.9090006@xxxxxxxx</a>&gt; &lt;<a href="mailto:BANLkTi%3DwY-7m8DpDi2rpe%3D4x5A_3NzhCrQ@DOMAIN.HIDDEN">BANLkTi=wY-7m8DpDi2rpe=4x5A_3NzhCrQ@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td style=""><div>Dear ferreters,</div><div><br></div><div>As a follow on from my previous email of a few weeks ago, I am trying to find the length of a current defined by a particular SSH contour. Using Jaison's script (link below) I can extract the lat-lon positions of the contour and end up with a picture as shown. However I am still stuck with the eddies, which appear as closed contours. I could follow Mick's method to pick out the contour I want with the mouse but I have a lot of data to get through so I am hoping for an automated method. I haven't been able to get rid of the closed contours without also removing meanders, which I am interested in.</div><div><br></div><div>The second problem also relates to the meanders. In time slices without eddies I run into trouble calculating the length of the contour because when I compress the 2D data to 1D the meanders cause jumps and the resultant length calculations are wrong. This would be fixed by following along the contour, but unfortunately I'm not good enough with ferret to be able to do this.&nbsp;Has anyone got a method of following a particular contour or something similar?</div><div><br></div><div>Thanks,</div><div>Leela.</div><div><br></div><div></div></td></tr></table><p><strong>Attachment:
<a href="pdfe6HImJxfEE.pdf" ><tt>current_path.pdf</tt></a></strong><br>
<em>Description:</em> Adobe PDF document</p>
<table width="100%"><tr><td style=""><div></div><br><div><div>On May 20, 2011, at 12:39 AM, Jaison Kurian wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">Hello Leela and Mick,<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Mick's scripts are very useful for variety of "non-conventional" <br>applications in Ferret. I use them to create custom data masks. <br><br>
However, i think you have one more option to try.<br>Long back I wrote a example script to extract the lat-lon positions of a contour. You can<br>easily add few lines to compute distance between&nbsp; those points (using greatcircle distance<br>
method) and finally calculate the length of a contour. Give it a try...you can find this<br>script from<br><br><a rel="nofollow" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2006/msg00163.html">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2006/msg00163.html</a><br>
<br>Hope this helps,<br><br>Thanks and Regards,<br><br>Jaison<br><br><div class="gmail_quote">On Thu, May 19, 2011 at 1:02 PM, mick spillane <span dir="ltr">&lt;<a rel="nofollow" href="mailto:mick.spillane@xxxxxxxx">mick.spillane@xxxxxxxx</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt 0.8ex; border-left: 1px solid rgb(204, 204, 204); padding-left: 1ex;">Hi Leela,<br>
<br>
 &nbsp; &nbsp; This is not necessarily a better solution to your problem than use<br>
of transformations like @loc or @weq, but it illustrates how using<br>
Ferret as a digitizer, coupled with a Great Circle Distance calculator<br>
can be useful in a variety of situations. Apologies if this is already<br>
known to you but it may serve a wider audience.<br>
<br>
First: Check that Ferret's "where" command is working for you:<br>
 &nbsp; &nbsp; go ptest<br>
 &nbsp; &nbsp; where<br>
When you move the cursor over the plot and click. Ferret should report<br>
the "mouse" coordinates in user units. This is the key to digitizing and<br>
a variety of other tasks one could imagine.<br>
<br>
Next: Add the attached scripts to your directories (I would typically<br>
put the .jnl ones in my "ferret" directory and the shell script<br>
get_vertices [with chmod +x get_vertices] in "bin")<br>
<br>
Demo: Here is an illustration. What is the length of the 25C isotherm of<br>
Levitus SST between Australia and South America?<br>
 &nbsp; &nbsp; use levitus_climatology ; let sst=temp[k=1]<br>
 &nbsp; &nbsp; fill/x=140:310/y=-30:10 sst ; cont/o/lev=(25)/x=140:310/y=-30:10 sst<br>
 &nbsp; &nbsp; go polydef &nbsp;! prompts user to click on desired points, terminating by<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ! clicking offchart to the left. When this is<br>
done the coords of<br>
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ! the point are loaded as a file with variables<br>
VX,VY<br>
 &nbsp; &nbsp; sho data<br>
 &nbsp; &nbsp;2&gt; ./vertices.xy &nbsp;(default)<br>
 &nbsp;name &nbsp; &nbsp; title &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I &nbsp; &nbsp; &nbsp; &nbsp; J &nbsp; &nbsp; &nbsp; &nbsp; K &nbsp; &nbsp; &nbsp; &nbsp; L<br>
 &nbsp;VX &nbsp; &nbsp; &nbsp; VX &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ... &nbsp; &nbsp; &nbsp; ... &nbsp; &nbsp; &nbsp; 1:76<br>
 &nbsp; &nbsp; &nbsp;...<br>
 &nbsp;VY &nbsp; &nbsp; &nbsp; VY &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ... &nbsp; &nbsp; &nbsp; ... &nbsp; &nbsp; &nbsp; 1:76<br>
 &nbsp; &nbsp; &nbsp;...<br>
! As seen in the attached graphic I took 76 points to delineate the<br>
isotherm.<br>
<br>
! In this case, where VX,VY are lon,lat values, what is needed is to sum<br>
the great<br>
! circle distances along the curve. One way to do this is as follows:<br>
 &nbsp; &nbsp; go greatcircle &nbsp;! definitions for great circle calculations<br>
 &nbsp; &nbsp; let lon1=vx ; let lat1=vy ; let lon2=vx[k=@shf] ; let lat2=vy[k=@shf]<br>
 &nbsp; &nbsp; list gckm[k=1:75@sum] &nbsp;! sum up the GC contributions, giving the<br>
answer (in kilometers)<br>
 &nbsp; &nbsp; 18033.<br>
Note that you sum over one less than the number of vertices so as not to<br>
run off the end. I did the above twice, because I forgot to save the<br>
plot, and the first time got 18042. This suggests the method is good<br>
enough for a certain class of problem. Perhaps a better demo would have<br>
been to use the hints in "greatcircle.jnl" to plot a portion of a great<br>
circle, then digitize it and compare the result with the known answer,<br>
but this one at least illustrates how it can deal with complex paths.<br>
<br>
Hope it is of use,<br>
 &nbsp; &nbsp; Mick<br>
----------------<br>
<div><div></div><div class="h5">On 5/19/11 11:06 AM, Leela Frankcombe wrote:<br>
&gt; Dear Ferreters,<br>
&gt;<br>
&gt; I've come across a question which is simple in theory but in practice I'm having a little trouble. So I'm wondering if anyone else has found a solution.<br>
&gt;<br>
&gt; What I would like to do is calculate the path length of an ocean current. To define the path of the current I pick a particular sea surface height contour, now I would like to be able to calculate the length of that contour. I've been trying to use @loc or @weq to select the points at which SSH reaches the value that I've chosen but they only find the first instance along a given latitude or longitude so they miss parts where the current meanders (and also sometimes pick up eddies). Is there a way to use @loc or @weq to find every instance of a particular value? Or has someone got a better solution?<br>

&gt;<br>
&gt; Thanks!<br>
&gt; Leela.<br>
&gt;<br>
&gt; -----------------------------------------------------------------------------------<br>
&gt; Leela Frankcombe<br>
&gt; Post-doctoral researcher<br>
&gt; Institute for Marine and Atmospheric research Utrecht<br>
&gt; Utrecht University<br>
&gt; The Netherlands<br>
&gt; <a rel="nofollow" href="http://www.phys.uu.nl/%7Efrankcmb" target="_blank">www.phys.uu.nl/~frankcmb</a><br>
&gt; <a rel="nofollow" href="mailto:l.m.frankcombe@xxxxx">l.m.frankcombe@xxxxx</a><br>
&gt; -----------------------------------------------------------------------------------<br>
<br>
</div></div></blockquote></div><br>
</blockquote></div><br>
</td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00381" href="msg00381.html">[ferret_users] current path length</a></strong>
<ul><li><em>From:</em> Leela Frankcombe</li></ul></li>
<li><strong><a name="00382" href="msg00382.html">Re: [ferret_users] current path length</a></strong>
<ul><li><em>From:</em> mick spillane</li></ul></li>
<li><strong><a name="00383" href="msg00383.html">Re: [ferret_users] current path length</a></strong>
<ul><li><em>From:</em> Jaison Kurian</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00383.html">Re: [ferret_users] current path length</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00384.html">Re: [ferret_users] current path length</a></strong>
</li>

</UL>
<center>[<a href="msg00383.html">Thread Prev</a>][<a href="msg00384.html">Thread Next</a>][<A HREF="threads.html#00437">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
