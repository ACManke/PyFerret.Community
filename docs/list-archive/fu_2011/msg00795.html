<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] ASCII read issues -->
<!--X-From-R13: Enz Dnova <fenovaNBevaprgba.SRG> -->
<!--X-Date: Sat, 22 Oct 2011 20:31:20 &#45;0700 -->
<!--X-Message-Id: 02A4DD5D&#45;AC2A&#45;4934&#45;AB35&#45;3FC3BD26467A@Princeton.EDU -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 5F03E87D&#45;49F7&#45;47E3&#45;9C47&#45;A97FCFEAACDE@Princeton.EDU -->
<!--X-Reference: 4EA1F3D5.1020206@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] ASCII read issues</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00794.html">Thread Prev</a>][<a href="msg00796.html">Thread Next</a>][<A HREF="threads.html#00795">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] ASCII read issues</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:Ansley.B.Manke@DOMAIN.HIDDEN">Ansley.B.Manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] ASCII read issues</strong></li>
<li><strong>From</strong>: <strong>Sam Rabin &lt;<a href="mailto:srabin@DOMAIN.HIDDEN">srabin@xxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Sat, 22 Oct 2011 23:31:15 -0400</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="mailto:4EA1F3D5.1020206@DOMAIN.HIDDEN">4EA1F3D5.1020206@xxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:5F03E87D-49F7-47E3-9C47-A97FCFEAACDE@DOMAIN.HIDDEN">5F03E87D-49F7-47E3-9C47-A97FCFEAACDE@xxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4EA1F3D5.1020206@DOMAIN.HIDDEN">4EA1F3D5.1020206@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td style="">Wow&#x2026; Thanks Ansley and Ned as usual for your fantastic advice! I'll test it out when I get back in the office. GDAL seems like a pretty powerful tool, too; thanks for the tip.<div><br></div><div><span class="Apple-tab-span" style="white-space:pre">	</span>Sam</div><div><br></div><div><br></div><div><br><div><div>On Oct 21, 2011, at 6:36 PM, Ansley Manke wrote:</div><br class="Apple-interchange-newline"><blockquote type="cite">
  
    
  
  <div bgcolor="#FFFFFF" text="#000000">
    Hi-<br>
    There are tools for translating files, which might be an even better
    solution. Looking around the Unidata NetCDF site, here is a list of
    tools that work with netCDF data.<br>
    <br>
    <a rel="nofollow" class="moz-txt-link-freetext" href="http://www.unidata.ucar.edu/software/netcdf/software.html">http://www.unidata.ucar.edu/software/netcdf/software.html</a><br>
    <br>
    This software,<br>
    <a rel="nofollow" class="moz-txt-link-freetext" href="http://www.unidata.ucar.edu/software/netcdf/software.html#GDAL">http://www.unidata.ucar.edu/software/netcdf/software.html#GDAL</a><br>
    <br>
    has a tool to translate arcAscii files to netCDF.&nbsp; I do not have
    this on my system and have not tried it, but it might be worth
    looking at.&nbsp; The link from the Unidata software page is out of date.
    It should be <a rel="nofollow" class="moz-txt-link-freetext" href="http://www.gdal.org/gdal_translate.html">http://www.gdal.org/gdal_translate.html</a><br>
    <br>
    In any case, once you have the data in a netCDF file you can use <br>
    <br>
    yes? USE/order=x-y&nbsp; treecover.nc<br>
    <br>
    to reverse the Y coordinates<br>
    <br>
    Ansley<br>
    <br>
    <br>
    On 10/21/2011 12:14 PM, Sam Rabin wrote:
    <blockquote cite="" type="cite">I need to use the AVHRR tree cover classification data
      available at&nbsp;<a rel="nofollow" moz-do-not-send="true" href="http://glcf.umd.edu/data/treecover/data.shtml">http://glcf.umd.edu/data/treecover/data.shtml</a>,
      and so I downloaded the ASCII file for each continent. I have
      tried all day to import them, but the best I've been able to do is
      a severely distorted map. The good news is that all continents
      seem to be distorted the same way. I'll use Africa as an example (<a rel="nofollow" moz-do-not-send="true" href="ftp://ftp.glcf.umd.edu/glcf/Continuous_Fields_Tree_Cover/Africa/af-latlong-treecover/af-latlong-treecover.grd.gz">ftp://ftp.glcf.umd.edu/glcf/Continuous_Fields_Tree_Cover/Africa/af-latlong-treecover/af-latlong-treecover.grd.gz</a>).
      <div><br>
      </div>
      <div>Here is the header to the Africa ASCII file:</div>
      <div><!---8" standalone="no"?-->
        <div style="font-family: Arial; ">ncols&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9955&nbsp;</div>
        <div style="font-family: Arial; ">nrows&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9561&nbsp;</div>
        <div style="font-family: Arial; ">xllcorner&nbsp;&nbsp;&nbsp;&nbsp;
          -26.375000000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
        <div style="font-family: Arial; ">yllcorner&nbsp;&nbsp;&nbsp;&nbsp;
          -41.500000000000&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
        <div style="font-family: Arial; ">cellsize&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          0.008333333333&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>
        <div style="font-family: Arial; ">NODATA_value&nbsp; &#x2212;9999</div>
        <div style="font-family: Arial; "><br>
        </div>
        <div style="font-family: Arial; ">(It looks like they actually
          use 0 instead of &#x2212;9999 as a missing value.)</div>
        <div style="font-family: Arial; "><br>
        </div>
        <div style="font-family: Arial; ">Here is the script I used for
          the Africa file&#x2026; I calculated the endpoints of the axes as
          endpoint = beginning + (#cells)*0.008333. (You may need to
          increase available memory.)</div>
        <div style="font-family: Arial; "><br>
        </div>
        <div>
          <div><span class="Apple-style-span" style="font-family: Arial;
              "></span></div>
          <div><span class="Apple-style-span" style="font-family: Arial;
              ">define axis/X=26.375W:56.584E:0.0083333333/unit=degree
              xlong</span></div>
          <div><font class="Apple-style-span" face="Arial">define
              axis/Y=41.5S:38.175N:0.0083333333/unit=degree ylat</font></div>
          <div><font class="Apple-style-span" face="Arial">define grid/X=xlong/Y=ylat
              defries_africa_grid</font></div>
          <div><font class="Apple-style-span" face="Arial">file/grid=defries_africa_grid/var="TREECOVER"/columns=9955/skip=6
              af-latlong-treecover.grd</font></div>
          <div><font class="Apple-style-span" face="Arial">define axis/X=26.375W:56.584E:0.5/unit=degree
              xlong2</font></div>
          <div><font class="Apple-style-span" face="Arial">define axis/Y=41.5S:38.175N:0.5/unit=degree
              ylat2</font></div>
          <div><font class="Apple-style-span" face="Arial">define grid/X=xlong2/Y=ylat2
              defries_af_05grid</font></div>
          <div><font class="Apple-style-span" face="Arial">define variable/title="Defries Africa
              treecover regridded to 0.5 degree" africa =
              treecover[d=1,g=defries_af_05grid@ave]</font></div>
          <div><font class="Apple-style-span" face="Arial">save/clobber/file="treecover.nc" africa</font></div>
        </div>
        <div><br>
        </div>
        <div>The result is attached (africa_1.jpg). Playing around with
          the image reveals that (a) the left border should actually be
          around where it says 30&#xBA;E (i.e., if you cut out everything
          right of that and paste it onto the left side of what remains,
          you get something that looks better), (b) it should be flipped
          vertically (i.e., over the horizontal axis), and [c] that even
          doing those transformations, it's still pretty distorted (see
          africa_2.jpg, attached).</div>
        <div><br>
        </div>
        <div>I've tried several different permutations &#x2014; including
          adding order=yx into the fourth command &#x2014; but they all ended
          up looking worse. This may be an issue with the dataset, but
          I'm more willing to believe the error lies with this end-user.</div>
        <div><br>
          <div>Thanks in advance.</div>
          <div><br>
          </div>
          <div><span style="font: 12.0px Georgia; color: #000000"><b><i>Sam
                  Rabin</i></b></span><br>
            <span style="font: 11.0px Georgia; color: #000000">&nbsp;&nbsp; &nbsp;
              Graduate student</span><br>
            <span style="font: 11.0px Georgia; color: #000000">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;
              Princeton University</span><br>
            <span style="font: 11.0px Georgia; color: #000000">&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;
              Ecology &amp; Evolutionary Biology</span></div>
          <div><span style="font: 11.0px Georgia; color: #000000"><br>
            </span></div>
          <div><span style="font: 11.0px Georgia; color: #000000"><br>
            </span></div>
          <div><span style="font: 11.0px Georgia; color: #000000"><br>
            </span></div>
          <div><font class="Apple-style-span" face="Georgia"><span class="Apple-style-span" style="font-size: 11px;"><span>&lt;Mail Attachment.jpeg&gt;</span><span>&lt;Mail Attachment.jpeg&gt;</span></span></font></div>
          <div><br>
          </div>
        </div>
      </div>
    </blockquote>
  </div>

</blockquote></div><br></div></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00791" href="msg00791.html">[ferret_users] ASCII read issues</a></strong>
<ul><li><em>From:</em> Sam Rabin</li></ul></li>
<li><strong><a name="00794" href="msg00794.html">Re: [ferret_users] ASCII read issues</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00794.html">Re: [ferret_users] ASCII read issues</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00796.html">[ferret_users] big file reading issue</a></strong>
</li>

</UL>
<center>[<a href="msg00794.html">Thread Prev</a>][<a href="msg00796.html">Thread Next</a>][<A HREF="threads.html#00795">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
