<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Polar Stereographic data to Lon/Lat?  GRIB files? -->
<!--X-From-R13: Egrir Qbhfvaf <pbhfvafNhzvg.znvar.rqh> -->
<!--X-Date: Fri, 19 Aug 2011 08:41:35 &#45;0700 -->
<!--X-Message-Id: alpine.LFD.2.00.1108191134060.28859@razzo.umeoce.maine.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: alpine.LFD.2.00.1107251156320.25525@razzo.umeoce.maine.edu -->
<!--X-Reference: fc.004c4d1949d6ccd93b9aca003f6379f1.49d6ccda@umit.maine.edu -->
<!--X-Reference: alpine.LFD.2.00.1107251321190.25525@razzo.umeoce.maine.edu -->
<!--X-Reference: fc.004c4d1949d6eca03b9aca003f6379f1.49d6eca1@umit.maine.edu -->
<!--X-Reference: alpine.LFD.2.00.1107251458520.25525@razzo.umeoce.maine.edu -->
<!--X-Reference: fc.004c4d1949d7e0a93b9aca003f6379f1.49d7e0aa@umit.maine.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Polar Stereographic data to Lon/Lat?  GRIB files?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00593.html">Thread Prev</a>][<a href="msg00595.html">Thread Next</a>][<A HREF="threads.html#00639">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Polar Stereographic data to Lon/Lat?  GRIB files?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Polar Stereographic data to Lon/Lat?  GRIB files?</strong></li>
<li><strong>From</strong>: <strong>Steve Cousins &lt;<a href="mailto:cousins@DOMAIN.HIDDEN">cousins@xxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 19 Aug 2011 11:41:32 -0400 (EDT)</li>
<li>Cc: Ferret users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="mailto:fc.004c4d1949d7e0a93b9aca003f6379f1.49d7e0aa@DOMAIN.HIDDEN">fc.004c4d1949d7e0a93b9aca003f6379f1.49d7e0aa@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:alpine.LFD.2.00.1107251156320.25525@DOMAIN.HIDDEN">alpine.LFD.2.00.1107251156320.25525@xxxxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:fc.004c4d1949d6ccd93b9aca003f6379f1.49d6ccda@DOMAIN.HIDDEN">fc.004c4d1949d6ccd93b9aca003f6379f1.49d6ccda@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:alpine.LFD.2.00.1107251321190.25525@DOMAIN.HIDDEN">alpine.LFD.2.00.1107251321190.25525@xxxxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:fc.004c4d1949d6eca03b9aca003f6379f1.49d6eca1@DOMAIN.HIDDEN">fc.004c4d1949d6eca03b9aca003f6379f1.49d6eca1@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:alpine.LFD.2.00.1107251458520.25525@DOMAIN.HIDDEN">alpine.LFD.2.00.1107251458520.25525@xxxxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:fc.004c4d1949d7e0a93b9aca003f6379f1.49d7e0aa@DOMAIN.HIDDEN">fc.004c4d1949d7e0a93b9aca003f6379f1.49d7e0aa@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Reply-to: <a href="mailto:cousins@DOMAIN.HIDDEN">cousins@xxxxxxxxxxxxxx</a></li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Alpine 2.00 (LFD 1167 2008-08-23)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">

Hi Ansley,

</pre><tt>Just getting back to you with an update. I got an email back from NCEP 
</tt><tt>showing me where they have the Lon/Lat grids in text files downloadable 
</tt><tt>at:
</tt><pre style="margin: 0em;">

	<a  rel="nofollow" href="ftp://ftp.emc.ncep.noaa.gov/mmb/mmbpll/gridlola.eta/">ftp://ftp.emc.ncep.noaa.gov/mmb/mmbpll/gridlola.eta/</a>

</pre><tt>The one I was after was latlon.g242. I created a .ncl file from this and 
</tt><tt>then used ncgen to create a NetCDF file.
</tt><pre style="margin: 0em;">

</pre><tt>I hope this will be useful to someone sometime even if it is not a Ferret 
</tt><tt>issue.
</tt><pre style="margin: 0em;">

Thanks for your help,

Steve




On Mon, 25 Jul 2011, Ansley Manke wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi all,
Steve and I have been going back and forth a bit - he was able to dump
the attributes of the Polar_Stereographic description in his GRIB file,
which is listed below.  The CF standard for NetCDF and OPeNDAP url's,
<a  rel="nofollow" href="http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.5/cf-conventions.html#grid-mappings-and-projections">http://cf-pcmdi.llnl.gov/documents/cf-conventions/1.5/cf-conventions.html#grid-mappings-and-projections</a>


which Ferret follows, requires Longitude and Latitude coordinates.

Does anyone have experience using a GRIB file with a projection in
Ferret, or converting such a dataset to longitude/latitude coordinates?

Ansley

On 7/25/2011 12:06 PM, Steve Cousins wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Ansley,

I've been able to save it to NetCDF using ToolsUI. I can see the X and
Y data (in kilometers) like:

 x = -4225.87071154953, -4214.62071154953, -4203.37071154953,
    -4192.12071154953, -4180.87071154953, -4169.62071154953,
...

 y = -5408.86785597764, -5397.61785597764, -5386.36785597764,
    -5375.11785597764, -5363.86785597764, -5352.61785597764,
...


and the metadata shows:

    char Polar_Stereographic(Polar_Stereographic_strlen) ;
        Polar_Stereographic:grid_mapping_name = &quot;polar_stereographic&quot; ;
        Polar_Stereographic:longitude_of_projection_origin = -135. ;
        Polar_Stereographic:straight_vertical_longitude_from_pole =
-135. ;
        Polar_Stereographic:scale_factor_at_projection_origin = 0.933 ;
        Polar_Stereographic:latitude_of_projection_origin = 90. ;
        Polar_Stereographic:earth_shape = &quot;spherical&quot; ;
        Polar_Stereographic:earth_radius = 6367.47021484375 ;
        Polar_Stereographic:GRIB_param_Dx = 11250. ;
        Polar_Stereographic:GRIB_param_Dy = 11250. ;
        Polar_Stereographic:GRIB_param_GDSkey = 205090191 ;
        Polar_Stereographic:GRIB_param_La1 = 30. ;
        Polar_Stereographic:GRIB_param_Lo1 = -173. ;
        Polar_Stereographic:GRIB_param_LoV = -135. ;
        Polar_Stereographic:GRIB_param_NpProj = &quot;true&quot; ;
        Polar_Stereographic:GRIB_param_Nx = 553 ;
        Polar_Stereographic:GRIB_param_Ny = 425 ;
        Polar_Stereographic:GRIB_param_ProjFlag = 0 ;
        Polar_Stereographic:GRIB_param_ResCompFlag = 8 ;
        Polar_Stereographic:GRIB_param_VectorComponentFlag =
&quot;gridRelative&quot; ;
        Polar_Stereographic:GRIB_param_Winds = &quot;Relative&quot; ;
        Polar_Stereographic:GRIB_param_grid_name =
&quot;Polar_Stereographic&quot; ;
        Polar_Stereographic:GRIB_param_grid_radius_spherical_earth =
6367.47 ;
        Polar_Stereographic:GRIB_param_grid_shape = &quot;spherical&quot; ;
        Polar_Stereographic:GRIB_param_grid_shape_code = 0 ;
        Polar_Stereographic:GRIB_param_grid_type = 5 ;
        Polar_Stereographic:GRIB_param_grid_units = &quot;m&quot; ;
        Polar_Stereographic:GRIB_param_scanning_mode = 64 ;


Given this information can Ferret deal with it better than with the
OPeNDAP connection?

Thanks,

Steve



On Mon, 25 Jul 2011, Ansley Manke wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
hi -
Right, I can open up that too, read the data and make plots, so the
conversion is being made that lets us see the data and use it as if it's
netCDF. But the projection is not automatically getting applied.  I
don't know what that takes.

Ansley

On 7/25/2011 10:24 AM, Steve Cousins wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">

Hi Ansley,

Since I have the data on THREDDS, can't I access that in Ferret? That
is what I use to download data (into NetCDF format) from NCEP for the
regular NAM data.

I can open up the data in Ferret with:

yes? use
&quot;<a  rel="nofollow" href="http://triton.umeoce.maine.edu:8080/thredds/dodsC/nam_ak_2010/nam.20100101/nam.t00z.awak3d00.tm00&quot">http://triton.umeoce.maine.edu:8080/thredds/dodsC/nam_ak_2010/nam.20100101/nam.t00z.awak3d00.tm00&quot</a>;

yes? show data
     currently SET data sets:
    1&gt;
<a  rel="nofollow" href="http://triton.umeoce.maine.edu:8080/thredds/dodsC/nam_ak_2010/nam.20100101/nam.t00z.awak3d00.tm00">http://triton.umeoce.maine.edu:8080/thredds/dodsC/nam_ak_2010/nam.20100101/nam.t00z.awak3d00.tm00</a>

(default)
 name     title                             I         J         K L
 DOWNWARD_LONG_WAVE_FLUX
          Downward_long_wave_flux @ surfa  1:553     1:425     ... 1:1
 DOWNWARD_SHORT_WAVE_FLUX
          Downward_short_wave_flux @ surf  1:553     1:425     ... 1:1
 FRICTION_VELOCITY
          Friction_velocity @ surface      1:553     1:425     ... 1:1
 LAND_COVER_LAND1SEA0
          Land_cover_land1sea0 @ surface   1:553     1:425     ... 1:1
 LATENT_HEAT_FLUX
          Latent_heat_flux @ surface       1:553     1:425     ... 1:1
 PRESSURE Pressure @ surface               1:553     1:425     ... 1:1
 RELATIVE_HUMIDITY
          Relative_humidity @ height_abov  1:553     1:425     1:1 1:1
 SENSIBLE_HEAT_FLUX
          Sensible_heat_flux @ surface     1:553     1:425     ... 1:1
 TEMPERATURE
          Temperature @ height_above_grou  1:553     1:425     1:1 1:1
 TEMPERATURE_SURFACE
          Temperature @ surface            1:553     1:425     ... 1:1
 TOTAL_PRECIPITATION
          Total_precipitation @ surface    1:553     1:425     ... 1:1
 U_WIND   u_wind @ height_above_ground     1:553     1:425     1:1 1:1
 UPWARD_LONG_WAVE_FLUX
          Upward_long_wave_flux @ surface  1:553     1:425     ... 1:1
 UPWARD_SHORT_WAVE_FLUX
          Upward_short_wave_flux @ surfac  1:553     1:425     ... 1:1
 V_WIND   v_wind @ height_above_ground     1:553     1:425     1:1 1:1
 POLAR_STEREOGRAPHIC
                                           ...       ...       ... ...

Does that change things?

Steve

On Mon, 25 Jul 2011, Ansley Manke wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Steve,
The NetCDF library (and Ferret) doesn't have a direct way to
handle GRIB
files - but a browser search for GRIB and NetCDF  returns results
from
Unidata. It looks like there are some tools to do that in NCL.  I
added
&quot;projection&quot; to the search and got some results too, but it's not
clear
to me whether the grib-to-netcdf tool handles projections

<a  rel="nofollow" href="http://www.ncl.ucar.edu/Applications/grib2netCDF.shtml">http://www.ncl.ucar.edu/Applications/grib2netCDF.shtml</a>

You might have a look at that. We'll see if anyone else on the Ferret
List writes with ideas; and go from there.

Ansley

On 7/25/2011 9:10 AM, Steve Cousins wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">

I have some Alaska NAM data (Grib) from NCEP that is in Polar
Stereographic coordinates. I'd like to get the Lon/Lat of each grid
point. Is there an easy way to do this in Ferret? I have put
this data
on our THREDDS server at:

<a  rel="nofollow" href="http://triton.umeoce.maine.edu:8080/thredds/dodsC/nam_ak_2010/nam.20100101/nam.t00z.awak3d00.tm00">http://triton.umeoce.maine.edu:8080/thredds/dodsC/nam_ak_2010/nam.20100101/nam.t00z.awak3d00.tm00</a>




Thanks very much.

Steve
--
______________________________________________________________________

 Steve Cousins - Supercomputer Engineer/Administrator - Univ of
Maine
 Marine Sciences, 452 Aubert Hall       Target Tech, 20 Godfrey
Drive
 Orono, ME 04469    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~     Orono, ME
04473
 (207) 581-4302     ~ cousins at umit.maine.edu ~      (207)
866-6552
</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">

--
______________________________________________________________________
 Steve Cousins - Supercomputer Engineer/Administrator - Univ of Maine
 Marine Sciences, 452 Aubert Hall       Target Tech, 20 Godfrey Drive
 Orono, ME 04469    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~     Orono, ME 04473
 (207) 581-4302     ~ cousins at umit.maine.edu ~      (207) 866-6552
</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">

--
______________________________________________________________________
 Steve Cousins - Supercomputer Engineer/Administrator - Univ of Maine
 Marine Sciences, 452 Aubert Hall       Target Tech, 20 Godfrey Drive
 Orono, ME 04469    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~     Orono, ME 04473
 (207) 581-4302     ~ cousins at umit.maine.edu ~      (207) 866-6552
</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">

</pre></blockquote><pre style="margin: 0em;">

--
______________________________________________________________________
 Steve Cousins - Supercomputer Engineer/Administrator - Univ of Maine
 Marine Sciences, 452 Aubert Hall       Target Tech, 20 Godfrey Drive
 Orono, ME 04469    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~     Orono, ME 04473
 (207) 581-4302     ~ cousins at umit.maine.edu ~      (207) 866-6552

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00590" href="msg00590.html">[ferret_users] Polar Stereographic data to Lon/Lat?</a></strong>
<ul><li><em>From:</em> Steve Cousins</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00593.html">Re: [ferret_users] Polar Stereographic data to Lon/Lat?  GRIB files?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00595.html">[ferret_users] how to appear decimal label</a></strong>
</li>

</UL>
<center>[<a href="msg00593.html">Thread Prev</a>][<a href="msg00595.html">Thread Next</a>][<A HREF="threads.html#00639">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
