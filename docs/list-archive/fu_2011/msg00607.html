<!-- MHonArc v2.6.16 -->
<!--X-Subject: RE: [ferret_users] Different results between ferret and other softwares -->
<!--X-From-R13: "Ynqhx, Xbret  (Re.)" <wx61Nyrvprfgre.np.hx> -->
<!--X-Date: Thu, 28 Jul 2011 09:09:27 &#45;0700 -->
<!--X-Message-Id: 047AF98B6D162541AACCFA33D05381ED0232E82034AF@EXC&#45;MBX2.cfs.le.ac.uk -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 10869587.283841311846073221.JavaMail.defaultUser@defaultHost -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RE: [ferret_users] Different results between ferret and other softwares</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00606.html">Thread Prev</a>][<a href="msg00605.html">Thread Next</a>][<A HREF="threads.html#00607">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [ferret_users] Different results between ferret and other softwares</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;'<a href="mailto:markus.mingel@DOMAIN.HIDDEN">markus.mingel@xxxxxxxxx</a>'&quot; &lt;<a href="mailto:markus.mingel@DOMAIN.HIDDEN">markus.mingel@xxxxxxxxx</a>&gt;,        &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>RE: [ferret_users] Different results between ferret and other softwares</strong></li>
<li><strong>From</strong>: <strong>&quot;Kaduk, Joerg  (Dr.)&quot; &lt;<a href="mailto:jk61@DOMAIN.HIDDEN">jk61@xxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 28 Jul 2011 17:04:31 +0100</li>
<li>Accept-language: en-US, en-GB</li>
<li>Acceptlanguage: en-US, en-GB</li>
<li>In-reply-to: &lt;<a href="mailto:10869587.283841311846073221.JavaMail.defaultUser@DOMAIN.HIDDEN"><a href="msg00604.html">10869587.283841311846073221.JavaMail.defaultUser@defaultHost</a></a>&gt;</li>
<li>References: &lt;<a href="mailto:10869587.283841311846073221.JavaMail.defaultUser@DOMAIN.HIDDEN"><a href="msg00604.html">10869587.283841311846073221.JavaMail.defaultUser@defaultHost</a></a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>Thread-index: AcxNDkNxOkyGUfe5QBaD0xIIJIFXHgAMTnLQ</li>
<li>Thread-topic: [ferret_users] Different results between ferret and other softwares</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hello Markus,

I think, since ferret knows that you are on a lat/lon grid,
it will weight the grid cells with their area.

I don't know what mean2 does exactly, but you could try to
weight the data with cos(lat) in matlab and see what you get
(calculate lat sums and weight and then sum again).

The fact that ferret gives you a higher temperature is at least
consistent with this suggestion.

'hope it makes sense,
cheers,
Joerg

--
J&#xF6;rg Kaduk
Lecturer&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
Department of Geography &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; J.Kaduk@xxxxxxxxxxxxxxx &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
University of Leicester &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; joerg@xxxxxxxxxxxxxxxxxxx
UK - Leicester LE1 7RH&#xA0; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Tel: + 44 (0)116 2523848
<a  rel="nofollow" href="http://www.le.ac.uk/geography/staff/academic_kaduk.html">http://www.le.ac.uk/geography/staff/academic_kaduk.html</a> 


-----Original Message-----
From: owner-ferret_users@xxxxxxxx [<a  rel="nofollow" href="mailto:owner-ferret_users@xxxxxxxx">mailto:owner-ferret_users@xxxxxxxx</a>] On Behalf Of markus.mingel@xxxxxxxxx
Sent: 28 July 2011 10:41
To: ferret_users@xxxxxxxx
Subject: [ferret_users] Different results between ferret and other softwares

Dear Users,

I got different results between ferret and matlab/idl/ncl when I compute the 
global mean temperature from the CMIP5 models.

Namely, taking the Canadian atmospheric model this is the result of the dump 
for the temperature:

	float tas(time, lat, lon) ;
		tas:standard_name = &quot;air_temperature&quot; ;
		tas:long_name = &quot;Near-Surface Air Temperature&quot; ;
		tas:units = &quot;K&quot; ;
		tas:original_name = &quot;ST&quot; ;
		tas:cell_methods = &quot;time: mean (interval: 15 minutes)&quot; ;
		tas:cell_measures = &quot;area: areacella&quot; ;
		tas:history = &quot;2011-03-16T18:49:59Z altered by CMOR: Treated scalar 
dimension: \'height\'. 2011-03-16T18:49:59Z altered by CMOR: replaced missing 
value flag (1e+38) with standard missing value (1e+20).&quot; ;
		tas:coordinates = &quot;height&quot; ;
		tas:missing_value = 1.e+20f ;
		tas:_FillValue = 1.e+20f ;
		tas:associated_files = &quot;baseURL: <a  rel="nofollow" href="http://cmip-pcmdi.llnl">http://cmip-pcmdi.llnl</a>.
gov/CMIP5/dataLocation gridspecFile: 
gridspec_atmos_fx_CanESM2_historical_r0i0p0.nc areacella: 
areacella_fx_CanESM2_historical_r0i0p0.nc&quot; ;


To compute the mean global temperature of the first month of data with ferret 
I use the following command:

list tas[i=@ave,j=@ave,l=1]
             VARIABLE : Near-Surface Air Temperature (K)
             DATA SET : CanESM2 model output prepared for CMIP5 historical
             FILENAME : tas_Amon_CanESM2_historical_r1i1p1_185001-200512.nc
             LONGITUDE: 1.4W(-1.4) to 1.4W(358.6) (XY ave)
             LATITUDE : 90S to 90N (XY ave)
             TIME     : 16-JAN-1850 12:00 NOLEAP
             284.8


Now I expect having the same value (284.8) in matlab/IDL/NCL; indeed with all 
these other 3 softwares I get the same value (275.13). Why???

Am I wrong reading the data with matlab/IDL/NCL? Since there aren't any 
scale_factor or add_offset values to read, in matlab/IDL/NCL I just read the 
value tas. As example, these are the matlab lines I used to compute the global 
mean:

input_nc = netcdf('tas_Amon_CanESM2_historical_r1i1p1_185001-200512.nc');
tas          = input_nc{'tas'}(:) ;
tas          = squeeze(tas(1,:,:));
mean2(tas)

ans =

  275.1371
 

Do anyone could explain me why I get this difference in the mean values?

Thanks into advance for help
Markus   



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00604" href="msg00604.html">[ferret_users] Different results between ferret and other softwares</a></strong>
<ul><li><em>From:</em> markus.mingel@xxxxxxxxx</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00606.html">Re: [ferret_users] Different results between ferret and other softwares</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00605.html">[ferret_users] Nearest coordinate regridding NRST</a></strong>
</li>

</UL>
<center>[<a href="msg00606.html">Thread Prev</a>][<a href="msg00605.html">Thread Next</a>][<A HREF="threads.html#00607">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
