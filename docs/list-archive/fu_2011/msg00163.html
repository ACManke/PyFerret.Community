<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Interpolation 2D issue -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Thu, 10 Mar 2011 09:59:10 &#45;0800 -->
<!--X-Message-Id: 4D79116D.4000600@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: AANLkTikhKS6nWJjTF9_JP4ssAbGnTwMpnfJUfmxF+igF@mail.gmail.com -->
<!--X-Reference: 4D772AA8.2060906@io&#45;warnemuende.de -->
<!--X-Reference: AANLkTikNM_U1XrgAj2V+6KUa_VDrztAg2cHX0YZ8aHrr@mail.gmail.com -->
<!--X-Reference: 4D7799B2.1080607@io&#45;warnemuende.de -->
<!--X-Reference: 4D77B903.2090301@noaa.gov -->
<!--X-Reference: AANLkTi=m+DNW=mGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Interpolation 2D issue</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00161.html">Thread Prev</a>][<a href="msg00165.html">Thread Next</a>][<A HREF="threads.html#00163">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Interpolation 2D issue</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Szymon Roziewski &lt;<a href="mailto:szymon.roziewski@DOMAIN.HIDDEN">szymon.roziewski@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Interpolation 2D issue</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 10 Mar 2011 09:59:09 -0800</li>
<li>Cc: <a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>, <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="mailto:AANLkTi%3Dm%2BDNW%3DmGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@DOMAIN.HIDDEN">AANLkTi=m+DNW=mGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:AANLkTikhKS6nWJjTF9_JP4ssAbGnTwMpnfJUfmxF%2BigF@DOMAIN.HIDDEN">AANLkTikhKS6nWJjTF9_JP4ssAbGnTwMpnfJUfmxF+igF@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4D772AA8.2060906@DOMAIN.HIDDEN">4D772AA8.2060906@xxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTikNM_U1XrgAj2V%2B6KUa_VDrztAg2cHX0YZ8aHrr@DOMAIN.HIDDEN">AANLkTikNM_U1XrgAj2V+6KUa_VDrztAg2cHX0YZ8aHrr@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4D7799B2.1080607@DOMAIN.HIDDEN">4D7799B2.1080607@xxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4D77B903.2090301@DOMAIN.HIDDEN">4D77B903.2090301@xxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTi%3Dm%2BDNW%3DmGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@DOMAIN.HIDDEN">AANLkTi=m+DNW=mGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">

  
  
    Hi -<br>
    You found out what you needed, but just so you know, he simplest way
    to find out about a function in Ferret, is to ask Ferret itself:<br>
    <br>
    <blockquote>
      yes? show function missing<br>
      &nbsp;&nbsp;&nbsp; MISSING(A,B)<br>
      &nbsp;&nbsp;&nbsp; substitute B where A is missing<br>
    </blockquote>
    <br>
    (also, the MISSING function is documented in the Users Guide - see
    "MISSING function" in the index. )<br>
    <br>
    Ansley<br>
    <br>
    On 3/10/2011 7:35 AM, Szymon Roziewski wrote:
    <blockquote
      cite=""
      type="cite">
      <pre wrap="">Hi Martin,
It looks very nice.
I have to try out this but I don't really know what the function missing
does. I had a look at manual and searched ferret site but there's no
anything about this function.

Kind regards,
Szymon Roziewski

2011/3/9 Ansley Manke <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:Ansley.B.Manke@xxxxxxxx">&lt;Ansley.B.Manke@xxxxxxxx&gt;</a>

</pre>
      <blockquote type="cite">
        <pre wrap="">Hi -
We had noticed recently that documentation for fill_xy was missing from the
manual. Your email here gives a nice example that we can use there.

Ansley


On 3/9/2011 7:16 AM, Martin Schmidt wrote:

</pre>
        <blockquote type="cite">
          <pre wrap="">Hi,
you are right, the documentation did not find its way into the manual. It
is easy anyway. The mask needs to be
1 where filling is allowed and zero otherwise. Please try the following

yes? use coads_climatology
yes? let mask=missing(sst/sst,1)
yes? shade/l=1 mask
yes? shade/l=1 fill_xy(sst,mask,5)
Filling is allowed

!Now missings at land
yes? let mask=sst/sst
yes? shade/l=1 mask
yes? shade/l=1 fill_xy(sst,mask,5)
Nothing is filled.

And now:
yes? let mask= if y[gy=sst] gt 0 then missing(sst/sst,1) else sst/sst
yes? shade/l=1 fill_xy(sst,mask,5)

Now filling happens in the northern hemisphere.

Hope this helps,
Martin

Szymon Roziewski wrote:

</pre>
          <blockquote type="cite">
            <pre wrap="">Dear Martin / Ferreters,
I have problem with using fill_xy function. I saw some examples and read
sth in the ferret archives but I still stuck.
I try to explain my issue.
This is reading an ice field and putting into a lndseaf. I also quote the
grid definition.

DEFINE AXIS/X=-5.666666667:5.25:0.083333333/unit=degree xlon
DEFINE AXIS/Y=-2.0:10.0:0.083333333/unit=degree ylat
DEFINE GRID/x=xlon/y=ylat grid_xlon_xlat
file/skip=1/format=(80f1.0/52f1.0)/columns=132/grid=grid_xlon_xlat/var=lndseaf
ICE.DAT

Then I interpolate the lndseaf onto a fine grid.

DEFINE AXIS/X=-5.666666667:5.25:0.010416667/unit=degree xfine
DEFINE AXIS/Y=-2.0:10.0:0.010416667/unit=degree yfine !1/8
DEFINE GRID/x=xfine/y=yfine grid_xfine_yfine
let ice_regridded lndseaf[gxy=grid_xfine_yfine]

What I did next was make the mask.

let mask = ice_regridded/ice_regridded

And I used the mask with fill_xy as the following

let ice_ext = fill_xy(ice_regridded,mask,5)

But It didn't change anything. I tried out using different values of
third argument of fill_xy. However, I didn't improve at all.
So, I think either I was using fill_xy badly or I misunderstood
something.

I also tried out FLN function as follows

let ext = ice_regridded[x=@FLN:50,y=@FLN:50]

But this resulted with no changes to the ice_regridded as well.
I attach ICE.DAT to make it more real.

Kind regards,
Szymon Roziewski



2011/3/9 Martin Schmidt &lt;<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:martin.schmidt@xxxxxxxxxxxxxxxxx">martin.schmidt@xxxxxxxxxxxxxxxxx</a> <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:martin.schmidt@xxxxxxxxxxxxxxxxx">&lt;mailto:
martin.schmidt@xxxxxxxxxxxxxxxxx&gt;</a>&gt;

   Dear Szymon,

   you may use fill_xy(data, mask, 2) before you filter data. This
   extrapolates the data smoothly into land by two points and the
   filter @SBX and @SHN
   can do something reasonable near land too. Applying your land mask
   later removes remaining extrapolated points.

   Greetings,
   Martin

   Szymon Roziewski wrote:

       Dear Ferreters,

       I have an ice field that is a matrix filled by 0 or 1. Because
       of weak resolution I need it to be interpolated on a finer grid.
       I tried out two approaches.
       The first, I interpolated with using @SBX and @SHN functions.
       Basically, I got neat result except to the boundary where I
       got a lack of data. Because this functions don't have data to
       interpolate and ending up with 0 value.
       As the second I used scat2gridgauss_xy function which gave me
       smoother result but near the boundary I got the ice that
       should not to be. I think that this function is do smooth the
       data sometimes to much.

       Have any of you had something similar with it?
       Maybe there are some good ferret functions to interpolate ice
       field which is 0 or 1.

       I attach two graphics for better explanation.

       Kind regards,
       Szymon Roziewski





--
Z wyrazami szacunku,
Szymon Roziewski

</pre>
          </blockquote>
          <pre wrap="">

</pre>
        </blockquote>
      </blockquote>
      <pre wrap="">

</pre>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00165" href="msg00165.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00149" href="msg00149.html">[ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
<li><strong><a name="00152" href="msg00152.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00155" href="msg00155.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
<li><strong><a name="00156" href="msg00156.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00160" href="msg00160.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00161.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00165.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
</li>

</UL>
<center>[<a href="msg00161.html">Thread Prev</a>][<a href="msg00165.html">Thread Next</a>][<A HREF="threads.html#00163">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
