<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Ensemble realization analysis -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 26 Apr 2011 17:01:17 &#45;0700 -->
<!--X-Message-Id: 4DB75CE5.1020906@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 4DB6E9C2.1010806@cea.fr -->
<!--X-Reference: 4DB6F5A6.3020506@io&#45;warnemuende.de -->
<!--X-Reference: 4DB70808.3030304@noaa.gov -->
<!--X-Reference: 4DB71F0B.4090708@cea.fr -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Ensemble realization analysis</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00310.html">Thread Prev</a>][<a href="msg00308.html">Thread Next</a>][<A HREF="threads.html#00311">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Ensemble realization analysis</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Brockmann Patrick &lt;<a href="mailto:Patrick.Brockmann@DOMAIN.HIDDEN">Patrick.Brockmann@xxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Ensemble realization analysis</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 26 Apr 2011 17:01:41 -0700</li>
<li>Cc: <a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>,        Ferret users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="mailto:4DB71F0B.4090708@DOMAIN.HIDDEN">4DB71F0B.4090708@xxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:4DB6E9C2.1010806@DOMAIN.HIDDEN">4DB6E9C2.1010806@xxxxxx</a>&gt; &lt;<a href="mailto:4DB6F5A6.3020506@DOMAIN.HIDDEN">4DB6F5A6.3020506@xxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4DB70808.3030304@DOMAIN.HIDDEN">4DB70808.3030304@xxxxxxxx</a>&gt; &lt;<a href="mailto:4DB71F0B.4090708@DOMAIN.HIDDEN">4DB71F0B.4090708@xxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">

  
  
    Hi -<br>
    I'm thinking that this has to do with the context of variables in
    Ferret, but I don't yet see what the answer is.&nbsp; <br>
    <br>
    Here's a script that does the same operations, but&nbsp; runs faster, on
    local data:<br>
    <blockquote>use coads_climatology<br>
      save/clobber/file=airt.nc airt<br>
      save/clobber/file=sst.nc sst<br>
      <br>
      cancel data/all<br>
      use airt.nc<br>
      use sst.nc<br>
      <br>
      let k2 = zcat (airt[d=1], sst[d=2])<br>
      <br>
      ! This is all zero's<br>
      plot k2[k=1,x=@ave,y=@ave] - k2[k=2,x=@ave,y=@ave]<br>
      <br>
      save/clobber/file=k2file.nc k2<br>
      can data/all; can var/all<br>
      <br>
      use k2file.nc<br>
      <br>
      ! This has non-zero difference<br>
      plot k2[k=1,x=@ave,y=@ave] - k2[k=2,x=@ave,y=@ave]<br>
    </blockquote>
    <br>
    <br>
    On 4/26/2011 12:37 PM, Brockmann Patrick wrote:
    <blockquote cite="" type="cite">Ansley
      Manke a &eacute;crit :
      <br>
      <blockquote type="cite">Hi -
        <br>
        I would agree; though the variables in the datsets are of type
        FLOAT, so Ferret's use of single precision for variables isn't
        causing a loss of accuracy in this case.
        <br>
      </blockquote>
      Hi,
      <br>
      <br>
      If you plot
      <br>
      <br>
      <br>
      yes? use
<a rel="nofollow" class="moz-txt-link-rfc2396E" href="http://dods.extra.cea.fr/cgi-bin/nph-dods/data/p86denv/IPSLCM5A/PROD/rcp45/v3.rcp45.1/ATM/Analyse/TS_MO_YE/v3.rcp45.1_20060101_21651231_1Y_t2m.nc">"http://dods.extra.cea.fr/cgi-bin/nph-dods/data/p86denv/IPSLCM5A/PROD/rcp45/v3.rcp45.1/ATM/Analyse/TS_MO_YE/v3.rcp45.1_20060101_21651231_1Y_t2m.nc"</a><br>
      yes? use
<a rel="nofollow" class="moz-txt-link-rfc2396E" href="http://dods.extra.cea.fr/cgi-bin/nph-dods/data/p86denv/IPSLCM5A/PROD/rcp45/v3.rcp45.2/ATM/Analyse/TS_MO_YE/v3.rcp45.2_20060101_21001231_1Y_t2m.nc">"http://dods.extra.cea.fr/cgi-bin/nph-dods/data/p86denv/IPSLCM5A/PROD/rcp45/v3.rcp45.2/ATM/Analyse/TS_MO_YE/v3.rcp45.2_20060101_21001231_1Y_t2m.nc"</a><br>
      yes? plot/l=1:40 T2M[i=@ave,j=@ave,d=1]
      <br>
      yes? plot/l=1:40/over T2M[i=@ave,j=@ave,d=2]
      <br>
      <br>
      to be compared to
      <br>
      let a=zcat(T2M[d=1],T2M[d=2])
      <br>
      plot/l=1:40 a[i=@ave,j=@ave,k=2], a[i=@ave,j=@ave,k=1]
      <br>
      <br>
      You will see that this not an accuracy problem.
      <br>
      I would rather suspect the ZCAT function to be problematic.
      <br>
      <br>
      Patrick
      <br>
      <blockquote type="cite">
        <br>
        Ansley
        <br>
        <br>
        On 4/26/2011 9:41 AM, Martin Schmidt wrote:
        <br>
        <blockquote type="cite">Hi Patrick,
          <br>
          <br>
          I can reproduce your finding. I GUESS, the i/j-average of the
          difference between both
          <br>
          the experiments is pretty small, even if there are significant
          differences in some areas. The average runs over 10^4
          <br>
          points. The quantities are of the order 200, the difference is
          less than +/-10.
          <br>
          <br>
          Hence it may be that you see simply the limited accuracy of
          ferret.
          <br>
          <br>
          I do not know nothing about the experiments, but may it be
          that some procedure has been applied to
          <br>
          keep the average values fixed?
          <br>
          <br>
          Greetings,
          <br>
          Martin
          <br>
          <br>
          <br>
          <br>
          <br>
          Brockmann Patrick wrote:
          <br>
          <blockquote type="cite">Hi all,
            <br>
            <br>
            Sorry for the uncompleted previous message.
            <br>
            <br>
            When you analyze ensemble realizations
            <br>
            (read
            <a rel="nofollow" class="moz-txt-link-freetext" href="http://cmip-pcmdi.llnl.gov/cmip5/docs/cmip5_data_reference_syntax.pdf">http://cmip-pcmdi.llnl.gov/cmip5/docs/cmip5_data_reference_syntax.pdf</a>
            <br>
            Ensemble menber paragraph), you would like to work with
            <br>
            a variable over its realizations seen as a nth dimension and
            then apply on it power of ferret transformations.
            <br>
            <br>
            Unfortunatelly, there are only 4 dimensions in ferret.
            <br>
            But sometimes, you also may have the chance that the
            variable you analyze
            <br>
            has 3 dimensions and has a XZT shape.
            <br>
            <br>
            I have imagined to use the ZCAT function to concat the XYT
            variable over the Z dimension
            <br>
            and then get a XYZT variable with the Z dimension
            representing a realization dimension.
            <br>
            <br>
            It seems to work since for one time step I can shade a
            difference but when I plot
            <br>
            a time evolution I get the same plot from the 2
            realizations. That is not correct.
            <br>
            <br>
            Try the attached script if interested.
            <br>
            <br>
            Any share of experience on this topic is welcome. The
            challenge of course is not
            <br>
            to physically save files.
            <br>
            <br>
            Patrick
            <br>
            <br>
          </blockquote>
          <br>
        </blockquote>
        <br>
      </blockquote>
      <br>
      <br>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00305" href="msg00305.html">[ferret_users] Ensemble realization analysis</a></strong>
<ul><li><em>From:</em> Brockmann Patrick</li></ul></li>
<li><strong><a name="00306" href="msg00306.html">Re: [ferret_users] Ensemble realization analysis</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00309" href="msg00309.html">Re: [ferret_users] Ensemble realization analysis</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00310" href="msg00310.html">Re: [ferret_users] Ensemble realization analysis</a></strong>
<ul><li><em>From:</em> Brockmann Patrick</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00310.html">Re: [ferret_users] Ensemble realization analysis</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00308.html">[ferret_users] beginner's questions</a></strong>
</li>

</UL>
<center>[<a href="msg00310.html">Thread Prev</a>][<a href="msg00308.html">Thread Next</a>][<A HREF="threads.html#00311">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
