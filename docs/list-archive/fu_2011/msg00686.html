<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] RESHAPE and SAVE error &#45; variable unknown -->
<!--X-From-R13: Enzeng Dnb <fnzeng.enbNtznvy.pbz> -->
<!--X-Date: Sat, 10 Sep 2011 22:50:28 &#45;0700 -->
<!--X-Message-Id: CACO1Z=yAUexL428dU3YZ_aHgkdFziRG617iuiLBMwrH4KPSVsQ@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CACO1Z=yF0FBbuTK1U4Ama=cHtsCF1&#45;pxUcZvQOYR32hAeihpnw@mail.gmail.com -->
<!--X-Reference: CD28D6D10554774AB2633DEC968D915315571C734E@exvic&#45;mbx03.nexus.csiro.au -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] RESHAPE and SAVE error - variable unknown</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00685.html">Thread Prev</a>][<a href="msg00689.html">Thread Next</a>][<A HREF="threads.html#00686">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] RESHAPE and SAVE error - variable unknown</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:Russell.Fiedler@DOMAIN.HIDDEN">Russell.Fiedler@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] RESHAPE and SAVE error - variable unknown</strong></li>
<li><strong>From</strong>: <strong>Samrat Rao &lt;<a href="mailto:samrat.rao@DOMAIN.HIDDEN">samrat.rao@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Sun, 11 Sep 2011 11:20:24 +0530</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma; h=mime-version:in-reply-to:references:date:message-id:subject:from:to :cc:content-type;        bh=rMD4MoQglxgHrcl1v0WfAjda3RdGeCFjpa5mIP+sJBQ=; b=Ika4vgQPy3x4V7GWHRUaFHpe+TT7ukyd6ueuvladkqp5siQT4Td3r4LtF2QoLkM5yV OaGzba6CV9VCKvPvqozeSuPwcDV25nfkXUP2gYoiR/LXNrQT4HK3LLSfuOEWhksg33gR 5PQChDTyhe6aKwQxNW8WXUstRZF2dAQdP67+c=</li>
<li>In-reply-to:  &lt;<a href="mailto:CD28D6D10554774AB2633DEC968D915315571C734E@DOMAIN.HIDDEN">CD28D6D10554774AB2633DEC968D915315571C734E@xxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li>References:  &lt;<a href="mailto:CACO1Z%3DyF0FBbuTK1U4Ama%3DcHtsCF1-pxUcZvQOYR32hAeihpnw@DOMAIN.HIDDEN">CACO1Z=yF0FBbuTK1U4Ama=cHtsCF1-pxUcZvQOYR32hAeihpnw@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:CD28D6D10554774AB2633DEC968D915315571C734E@DOMAIN.HIDDEN">CD28D6D10554774AB2633DEC968D915315571C734E@xxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Hi Russell,<br><br>Thank you very much. It works now.<br><br>As for the reversed y axis ordering, i now read the original file variable with &#39;-&#39; added to the order in which the variable is read. For some reason i was unable to make it work earlier.<br>
<br>Regards,<br><br><br><div class="gmail_quote">On Sun, Sep 11, 2011 at 7:53 AM,  <span dir="ltr">&lt;Russell.Fiedler@xxxxxxxx&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt 0.8ex; border-left: 1px solid rgb(204, 204, 204); padding-left: 1ex;">
Hi,<br>
<br>
You need to cancel the global variable &quot;npp_new&quot;. Alternatively when you define npp_new<br>
define it as a variable local to the data set npp_grd<br>
<br>
e.g.<br>
let/d=npp_grd npp_new=...<br>
<br>
Russ<br>
<br>
<br>
<br>
________________________________________<br>
From: <a rel="nofollow" href="mailto:owner-ferret_users@xxxxxxxx">owner-ferret_users@xxxxxxxx</a> [<a rel="nofollow" href="mailto:owner-ferret_users@xxxxxxxx">owner-ferret_users@xxxxxxxx</a>] On Behalf Of Samrat Rao [<a rel="nofollow" href="mailto:samrat.rao@xxxxxxxxx">samrat.rao@xxxxxxxxx</a>]<br>

Sent: Sunday, 11 September 2011 3:49 AM<br>
To: <a rel="nofollow" href="mailto:ferret_users@xxxxxxxx">ferret_users@xxxxxxxx</a><br>
Subject: [ferret_users] RESHAPE and SAVE error - variable unknown<br>
<div><div></div><div class="h5"><br>
Hi,<br>
<br>
I&#39;m using Ferret 6.7.1.<br>
<br>
I need to change the axes ( i to t, j to i, k to j &amp; then reverse the new j values ) of a variable in a netcdf file and i&#39;m using RESHAPE to do that. But on opening the new file i get an error about unknown variables. The commands and outputs are:<br>

<br>
yes? use/order=yzx NPP_1982_nc3.nc<br>
yes? sh da<br>
 &#xA0; &#xA0; currently SET data sets:<br>
 &#xA0; &#xA0;1&gt; ./NPP_1982_nc3.nc &#xA0;(default)<br>
&#xA0;name &#xA0; &#xA0; title &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; I &#xA0; &#xA0; &#xA0; &#xA0; J &#xA0; &#xA0; &#xA0; &#xA0; K &#xA0; &#xA0; &#xA0; &#xA0; L<br>
&#xA0;NPP &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;1:1440 &#xA0;1:720 &#xA0; &#xA0;1:12 &#xA0; &#xA0; &#xA0;...<br>
<br>
yes? set variable/title=&quot;Net prim prod&quot;/bad=-999 npp<br>
<br>
yes? define axis/x=0:359.75:0.25/units=degrees xax<br>
yes? define axis/y=90s:89.75n:0.25/units=degrees yax<br>
yes? define axis/t=1:12:1/calendar=noleap/units=months tax<br>
&#xA0;*** NOTE: /UNIT=MONTHS &#xA0;... using 1/12 of 365.00 days<br>
<br>
yes? define grid/x=xax/y=yax/t=tax npp_grd<br>
<br>
yes? let dummy = x[gx=npp_grd] + y[gy=npp_grd] + t[gt=npp_grd]<br>
<br>
yes? let/title=&quot;New NPP&quot; npp_new = reshape(npp,dummy)<br>
yes? sh gr npp_new<br>
 &#xA0; &#xA0;GRID NPP_GRD<br>
&#xA0;name &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;axis &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; # pts &#xA0; &#xA0; start &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;end<br>
&#xA0;XAX &#xA0; &#xA0; &#xA0; LONGITUDE &#xA0; &#xA0; &#xA0; &#xA0; 1440mr &#xA0; &#xA0; 0E &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 0.25W<br>
&#xA0;YAX &#xA0; &#xA0; &#xA0; LATITUDE &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 720 r &#xA0; &#xA0; 90S &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 89.75N<br>
&#xA0;normal &#xA0; &#xA0;Z<br>
&#xA0;TAX &#xA0; &#xA0; &#xA0; T (MONTHS(NOLE &#xA0; &#xA0; &#xA0;12 r &#xA0; 1 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;12<br>
<br>
yes? fill npp_new[l=1] !! works correctly, but lat values are reversed in the same way as the original netcdf file ie continents are reversed<br>
<br>
</div></div>yes? save/clobber/file=<a rel="nofollow" href="http://myvar.nc" target="_blank">myvar.nc</a>&lt;<a rel="nofollow" href="http://myvar.nc" target="_blank">http://myvar.nc</a>&gt; npp_new<br>
<div class="im">&#xA0;LISTing to file myvar.n<br>
<br>
yes? can da/all<br>
<br>
</div>yes? use <a rel="nofollow" href="http://myvar.nc" target="_blank">myvar.nc</a>&lt;<a rel="nofollow" href="http://myvar.nc" target="_blank">http://myvar.nc</a>&gt;<br>
yes? sh da <a rel="nofollow" href="http://myvar.nc" target="_blank">myvar.nc</a>&lt;<a rel="nofollow" href="http://myvar.nc" target="_blank">http://myvar.nc</a>&gt;<br>
 &#xA0; &#xA0; currently SET data sets:<br>
 &#xA0; &#xA0;1&gt; ./<a rel="nofollow" href="http://myvar.nc" target="_blank">myvar.nc</a>&lt;<a rel="nofollow" href="http://myvar.nc" target="_blank">http://myvar.nc</a>&gt; &#xA0;(default)<br>
<div><div></div><div class="h5">&#xA0;name &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;title &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;I &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; J &#xA0; &#xA0; &#xA0; &#xA0; K &#xA0; &#xA0; &#xA0; &#xA0; L<br>
&#xA0;NPP_NEW &#xA0;New NPP &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 1:1440 &#xA0; &#xA0;1:720 &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; 1:12<br>
<br>
yes? fill npp_new[l=1]<br>
&#xA0;**ERROR: variable unknown or not in data set: NPP<br>
CONTOUR/FILL npp_new[l=1]<br>
Command file, command group, or REPEAT execution aborted<br>
<br>
---------<br>
<br>
How do i make the reshape &amp; save commands work correctly? Any other method to change the axes is fine.<br>
<br>
Also how to reverse the values along the latitudes? Is using ncdump and ncgen the only way?<br>
<br>
--<br>
Thanks,<br>
Samrat Rao.<br>
</div></div></blockquote></div><br><br clear="all"><br>-- <br><br>Samrat Rao<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00685" href="msg00685.html">[ferret_users] RESHAPE and SAVE error - variable unknown</a></strong>
<ul><li><em>From:</em> Samrat Rao</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00685.html">[ferret_users] RESHAPE and SAVE error - variable unknown</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00689.html">[ferret_users] how calculate real Median 3D</a></strong>
</li>

</UL>
<center>[<a href="msg00685.html">Thread Prev</a>][<a href="msg00689.html">Thread Next</a>][<A HREF="threads.html#00686">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
