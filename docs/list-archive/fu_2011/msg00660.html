<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] How compute mean yearly temperature from monthly dataset? -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 29 Aug 2011 15:46:04 &#45;0700 -->
<!--X-Message-Id: 4E5C16AB.7080706@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 21203599.330651314353865123.JavaMail.defaultUser@defaultHost -->
<!--X-Reference: 4E5BFB60.4020101@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] How compute mean yearly temperature from monthly dataset?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00659.html">Thread Prev</a>][<a href="msg00661.html">Thread Next</a>][<A HREF="threads.html#00660">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] How compute mean yearly temperature from monthly dataset?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ferret users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;,        &quot;<a href="mailto:markus.mingel@DOMAIN.HIDDEN">markus.mingel@xxxxxxxxx</a>&quot; &lt;<a href="mailto:markus.mingel@DOMAIN.HIDDEN">markus.mingel@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] How compute mean yearly temperature from monthly dataset?</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 29 Aug 2011 15:46:03 -0700</li>
<li>In-reply-to: &lt;<a href="mailto:4E5BFB60.4020101@DOMAIN.HIDDEN">4E5BFB60.4020101@xxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:21203599.330651314353865123.JavaMail.defaultUser@DOMAIN.HIDDEN"><a href="msg00659.html">21203599.330651314353865123.JavaMail.defaultUser@defaultHost</a></a>&gt; &lt;<a href="mailto:4E5BFB60.4020101@DOMAIN.HIDDEN">4E5BFB60.4020101@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:6.0) Gecko/20110812 Thunderbird/6.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Markus,<br>
    I see that I had one error in what I wrote.&#xA0; I should have said,<br>
    <br>
    ... <br>
    I imagine that what you want is that each year starts with the
    beginning of January and ends with the end of <b>December.&#xA0; <br>
    </b>...<b><br>
    </b><br>
    <br>
    <br>
    On 8/29/2011 1:49 PM, Ansley Manke wrote:
    <blockquote cite="" type="cite">Hi -
      <br>
      Your script looks fine except for one thing.&#xA0; I think that you
      haven't defined the yearly time axis that you really want to use.
      Here's what you have:
      <br>
      <br>
      yes? define
      axis/t=16-jan-1850:16-dec-2005:12/unit=months/calendar=noleap
      year_noleap
      <br>
      &#xA0;*** NOTE: /UNIT=MONTHS&#xA0; ... using 1/12 of 365.00 days
      <br>
      yes? list t[gt=year_noleap]
      <br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : T
      <br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; axis YEAR_NOLEAP
      <br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SUBSET&#xA0;&#xA0; : 157 points (TIME)
      <br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; CALENDAR : NOLEAP
      <br>
      &#xA0;JAN-1850 /&#xA0;&#xA0; 1:&#xA0;&#xA0; 600.
      <br>
      &#xA0;JAN-1851 /&#xA0;&#xA0; 2:&#xA0;&#xA0; 612.
      <br>
      &#xA0;JAN-1852 /&#xA0;&#xA0; 3:&#xA0;&#xA0; 624.
      <br>
      &#xA0;JAN-1853 /&#xA0;&#xA0; 4:&#xA0;&#xA0; 636.
      <br>
      &#xA0;JAN-1854 /&#xA0;&#xA0; 5:&#xA0;&#xA0; 648.
      <br>
      ...
      <br>
      <br>
      This means that for this axis, the years are centered at January
      16 of each year, with each year starting and ending in mid-July.
      <br>
      <br>
      I imagine that what you want is that each year starts with the
      beginning of January and ends with the end of January.&#xA0; To do
      that, start and end at the edges of the year, use units of YEAR
      and use the /EDGES qualifier to tell Ferret that the dates you
      give are to be used as the edges of grid cells.
      <br>
      <br>
      yes? define
      axis/t=1-jan-1850:31-dec-2005:1/unit=year/EDGES/calendar=noleap
      year_noleap
      <br>
      <br>
      You do NOT need to use the same units (months) for time
      calculations. Ferret translates between time units when working
      with calendar time.
      <br>
      <br>
      Ansley
      <br>
      <br>
      On 8/26/2011 3:17 AM, <a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:markus.mingel@xxxxxxxxx">markus.mingel@xxxxxxxxx</a> wrote:
      <br>
      <blockquote type="cite">Dear users,
        <br>
        I have a problems and I'm not sure I'm solving it in the right
        way.
        <br>
        <br>
        I have a monthly surface temperature (you can see the features
        of the axis
        <br>
        below)
        <br>
        <br>
        <br>
        yes? SHOW grid/T/l=1:12 tas
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0; GRID GHF2
        <br>
        name&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; axis&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; # pts&#xA0;&#xA0; start&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; end
        <br>
        LON&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LONGITUDE&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 96mr&#xA0;&#xA0; 0E&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 3.75W
        <br>
        LAT&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LATITUDE&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 96 i&#xA0;&#xA0; 90S&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 90N
        <br>
        normal&#xA0;&#xA0;&#xA0; Z
        <br>
        TIME&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TIME&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1872 i&#xA0;&#xA0; 16-JAN-1850 12:00&#xA0;&#xA0;&#xA0;
        16-DEC-2005 12:00
        <br>
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; L&#xA0;&#xA0;&#xA0;&#xA0; T&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TBOX&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
        TBOXLO&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TSTEP (days)
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1&gt;&#xA0;&#xA0; 16-JAN-1850 12:00:00&#xA0; 31&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-JAN-1850
        00:00:00&#xA0;&#xA0;&#xA0; 15.5
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 2&gt;&#xA0;&#xA0; 15-FEB-1850 00:00:00&#xA0; 28&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-FEB-1850
        00:00:00&#xA0;&#xA0;&#xA0; 45
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 3&gt;&#xA0;&#xA0; 16-MAR-1850 12:00:00&#xA0; 31&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-MAR-1850
        00:00:00&#xA0;&#xA0;&#xA0; 74.5
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 4&gt;&#xA0;&#xA0; 16-APR-1850 00:00:00&#xA0; 30&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-APR-1850
        00:00:00&#xA0;&#xA0;&#xA0; 105
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 5&gt;&#xA0;&#xA0; 16-MAY-1850 12:00:00&#xA0; 31&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-MAY-1850
        00:00:00&#xA0;&#xA0;&#xA0; 135.5
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 6&gt;&#xA0;&#xA0; 16-JUN-1850 00:00:00&#xA0; 30&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-JUN-1850
        00:00:00&#xA0;&#xA0;&#xA0; 166
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 7&gt;&#xA0;&#xA0; 16-JUL-1850 12:00:00&#xA0; 31&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-JUL-1850
        00:00:00&#xA0;&#xA0;&#xA0; 196.5
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 8&gt;&#xA0;&#xA0; 16-AUG-1850 12:00:00&#xA0; 31&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-AUG-1850
        00:00:00&#xA0;&#xA0;&#xA0; 227.5
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 9&gt;&#xA0;&#xA0; 16-SEP-1850 00:00:00&#xA0; 30&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-SEP-1850
        00:00:00&#xA0;&#xA0;&#xA0; 258
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 10&gt;&#xA0;&#xA0; 16-OCT-1850 12:00:00&#xA0; 31&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-OCT-1850
        00:00:00&#xA0;&#xA0;&#xA0; 288.5
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 11&gt;&#xA0;&#xA0; 16-NOV-1850 00:00:00&#xA0; 30&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-NOV-1850
        00:00:00&#xA0;&#xA0;&#xA0; 319
        <br>
        &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 12&gt;&#xA0;&#xA0; 16-DEC-1850 12:00:00&#xA0; 31&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 01-DEC-1850
        00:00:00&#xA0;&#xA0;&#xA0; 349.5
        <br>
        <br>
        <br>
        and I would compute from these monthly values the yearly means.
        According to
        <br>
        previous post I did the following to compute the yearly values:
        <br>
        <br>
        <br>
        ! Define monthly calendar time axis.
        <br>
        define
        axis/t=16-jan-1850:16-dec-2005:1/unit=months/calendar=noleap
        <br>
        month_noleap
        <br>
        <br>
        ! Regrid on new time axis
        <br>
        let tas_monthly = tas[gt=month_noleap@asn]
        <br>
        <br>
        <br>
        ! Define yearly calendar time axis.
        <br>
        define
        axis/t=16-jan-1850:16-dec-2005:12/unit=months/calendar=noleap
        <br>
        year_noleap
        <br>
        <br>
        <br>
        ! Regrid to get annual averages.
        <br>
        DEFINE VARIABLE/title="yearly tas [C]" tas_yearly = tas_monthly
        <br>
        [gt=year_noleap@ave]
        <br>
        <br>
        <br>
        So is it right? Otherwise, if I'm wrong, which is the best way
        to do that?
        <br>
        I believe there is something wrong, since I get 2 spikes at the
        first and last
        <br>
        year, respectively (namely the temperature is 1C lower that it
        should be).
        <br>
        <br>
        <br>
        Thanks into advance for help
        <br>
        <br>
        Best Regards
        <br>
        Markus
        <br>
      </blockquote>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00659" href="msg00659.html">[ferret_users] How compute mean yearly temperature from monthly dataset?</a></strong>
<ul><li><em>From:</em> markus.mingel@xxxxxxxxx</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00659.html">[ferret_users] How compute mean yearly temperature from monthly dataset?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00661.html">[ferret_users] axis font</a></strong>
</li>

</UL>
<center>[<a href="msg00659.html">Thread Prev</a>][<a href="msg00661.html">Thread Next</a>][<A HREF="threads.html#00660">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
