<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] How to grab time info? -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Fri, 18 Mar 2011 09:24:54 &#45;0700 -->
<!--X-Message-Id: 4D838756.3070207@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: AANLkTi=MyAQyt8iOzqGzWcq+et3&#45;gz2QPHz4EX1HjKMa@mail.gmail.com -->
<!--X-Reference: 20110317100018.GA19417@giotto.bmtargoss.org -->
<!--X-Reference: AANLkTin6GSEfdZZ&#45;c5s9uJxPorFst6foo8awMvS=RNWN@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] How to grab time info?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00195.html">Thread Prev</a>][<a href="msg00203.html">Thread Next</a>][<A HREF="threads.html#00201">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] How to grab time info?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Szymon Roziewski &lt;<a href="mailto:szymon.roziewski@DOMAIN.HIDDEN">szymon.roziewski@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] How to grab time info?</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 18 Mar 2011 09:24:54 -0700</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>, Hein Zelle &lt;<a href="mailto:hein.zelle@DOMAIN.HIDDEN">hein.zelle@xxxxxxxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="mailto:AANLkTin6GSEfdZZ-c5s9uJxPorFst6foo8awMvS%3DRNWN@DOMAIN.HIDDEN">AANLkTin6GSEfdZZ-c5s9uJxPorFst6foo8awMvS=RNWN@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:AANLkTi%3DMyAQyt8iOzqGzWcq%2Bet3-gz2QPHz4EX1HjKMa@DOMAIN.HIDDEN">AANLkTi=MyAQyt8iOzqGzWcq+et3-gz2QPHz4EX1HjKMa@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:20110317100018.GA19417@DOMAIN.HIDDEN">20110317100018.GA19417@xxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTin6GSEfdZZ-c5s9uJxPorFst6foo8awMvS%3DRNWN@DOMAIN.HIDDEN">AANLkTin6GSEfdZZ-c5s9uJxPorFst6foo8awMvS=RNWN@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US; rv:1.9.2.15) Gecko/20110303 Thunderbird/3.1.9</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">

  
  
    Hi - <br>
    You can assign a time to a variable that has no time axis by adding
    a variable with value zero defined at that time.&nbsp; Using your
    one-point time axis,<br>
    <blockquote>
      define
      axis/t="`t[g=swh,l=$1],return=tend`":"`t[g=swh,l=$1],return=tend`":1
      time<br>
      let timestamp = 0* t[gt=time]<br>
      <br>
      let var_with_time = var + timestamp<br>
    </blockquote>
    Ansley<br>
    <br>
    <br>
    On 3/18/2011 7:49 AM, Szymon Roziewski wrote:
    <blockquote
      cite=""
      type="cite">Dear Hein,<br>
      Thank you for your help.<br>
      I tried out your solution but it doesn't work. I mean this chunk
      of code<br>
      let swh_smooth_with_time = swh_smooth[gt=swh]<br>
      this one works fine<br>
      `t[g=swh,l=$1],return=tend`<br>
      <br>
      I would expect the time information to still be here when you do<br>
      "list swh". Is that correct?<br>
      <br>
      this time information are stuck there (in swh).<br>
      <br>
      I&nbsp; tried this approach by defining a new grid with time axis but
      it also doesn't work which looks odd for me.<br>
      <br>
      let swh_smooth_t =
scat2gridgauss_xy(xp[i=1:`npts`],yp[i=1:`npts`],dp[i=1:`npts`],x[g=grid_xfine_yfine],y[g=grid_xfine_yfine],xscale,yscale,cutoff,0)<br>
      <br>
      define
      axis/t="`t[g=swh,l=$1],return=tend`":"`t[g=swh,l=$1],return=tend`":1
      time<br>
      DEFINE AXIS/X=-5.666666667:5.25:0.010416667/unit=degree xfine<br>
      DEFINE AXIS/Y=-2.0:10.0:0.010416667/unit=degree yfine !1/8<br>
      DEFINE GRID/x=xfine/y=yfine/t=time grid_xfine_yfine1<br>
      <br>
      let swh_smooth = swh_smooth_t[gxy=grid_xfine_yfine1,gt=time]<br>
      <br>
      and also I checked<br>
      <br>
      let swh_smooth = swh_smooth_t[gxyt=grid_xfine_yfine1]<br>
      <br>
      Then I tested <br>
      <br>
      define
      axis/t="`t[g=swh,l=$1],return=tend`":"`t[g=swh,l=$1],return=tend`":1
      time2<br>
      let swh_smooth = swh_smooth_t[gt=time2]<br>
      <br>
      which also doesn't work.<br>
      <br>
      But I worked around this problem by that chunk of code as dr Hein
      wrote<br>
      <br>
      let label_time = SUBSTRING("`t[g=swh,l=$1],return=tend`",0,17)<br>
      LABEL/NOUSER 1.1 `($ppl$ylen)+0.5` 0 0 .14 `label_time`<br>
      <br>
      But I have no&nbsp; idea what to try out in case of changing time axis
      or grid.<br>
      <br>
      If someone would like to have a look at this file it is in
      address: <a rel="nofollow" moz-do-not-send="true"
        href="http://153.19.141.166/wam_2011031800.nc.tar.bz2">http://153.19.141.166/wam_2011031800.nc.tar.bz2</a>
      .<br>
      <br>
      and needed part of script<br>
      <br>
      DEFINE AXIS/X=-5.666666667:5.25:0.083333333/unit=degree xlon;\<br>
      DEFINE AXIS/Y=-2.0:10.0:0.083333333/unit=degree ylat;\<br>
      DEFINE GRID/x=xlon/y=ylat grid_xlon_xlat;\<br>
      DEFINE AXIS/X=-5.666666667:5.25:0.010416667/unit=degree xfine;\<br>
      DEFINE AXIS/Y=-2.0:10.0:0.010416667/unit=degree yfine !1/8;\<br>
      DEFINE GRID/x=xfine/y=yfine grid_xfine_yfine;\<br>
      <br>
      let hstmp = hs[d=4]<br>
      let swh = hstmp[i=1:132,j=1:145,k=0,l=$1]<br>
      let xpts = xsequence(0*swh+x[g=swh])<br>
      let ypts = xsequence(0*swh+y[g=swh])<br>
      let datapts = xsequence(swh)<br>
      let xscale=0.1<br>
      let yscale=0.1<br>
      let cutoff=2<br>
      let xp = compressi(xpts)<br>
      let yp = compressi(ypts)<br>
      let dp = compressi(datapts)<br>
      let npts = dp[i=@ngd]<br>
      let swh_smooth_t =
scat2gridgauss_xy(xp[i=1:`npts`],yp[i=1:`npts`],dp[i=1:`npts`],x[g=grid_xfine_yfine],y[g=grid_xfine_yfine],xscale,yscale,cutoff,0)<br>
      <br>
      <br>
      kind regards,<br>
      Szymon Roziewski<br>
      <br>
      <div class="gmail_quote">
        2011/3/17 Hein Zelle <span dir="ltr">&lt;<a rel="nofollow"
            moz-do-not-send="true"
            href="mailto:hein.zelle@xxxxxxxxxxxxx">hein.zelle@xxxxxxxxxxxxx</a>&gt;</span><br>
        <blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt
          0.8ex; border-left: 1px solid rgb(204, 204, 204);
          padding-left: 1ex;">
          Hi Szymon,<br>
          <div class="im"><br>
            &gt; How can I grab the time label e.g. when I do the
            command<br>
            &gt; let swh = hstmp[i=1:132,j=1:145,k=0,l=$1] I loose
            information about the time<br>
            &gt; (i.e. 16-Jan-2011 01:00)<br>
            <br>
          </div>
          I would expect the time information to still be here when you
          do<br>
          "list swh". Is that correct?<br>
          <div class="im"><br>
            &gt; and then when I smooth<br>
            &gt; let swh_smooth =<br>
            &gt;
scat2gridgauss_xy(xp[i=1:`npts`],yp[i=1:`npts`],dp[i=1:`npts`],x[g=grid_xfine_yfine],y[g=grid_xfine_yfine],xscale,yscale,cutoff,0)<br>
            &gt; set var/title = "Significant Wave Height [m]"
            swh_smooth<br>
            <br>
          </div>
          You've removed the time information here, because you're not
          defining a<br>
          grid with a time axis for the new variable. &nbsp;Try re-assigning
          a time<br>
          axis to variable swh_smooth, for example<br>
          <br>
          let swh_smooth_with_time = swh_smooth[gt=swh]<br>
          <br>
          You may have to define a new time axis with only 1 time step.<br>
          Alternatively, to plot a label you can use<br>
          <br>
          `t[g=swh,l=$1],return=tend`<br>
          <br>
          which gives you the formatted date/time string.<br>
          <br>
          Kind regards,<br>
          &nbsp; &nbsp; Hein<br>
          <br>
          --<br>
          <br>
          Dr. Hein Zelle<br>
          Advisor Meteorology &amp; Oceanography<br>
          <br>
          Tel: &nbsp; &nbsp;+31 (0)527-242299<br>
          Fax: &nbsp; &nbsp;+31 (0)527-242016<br>
          Email: &nbsp;<a rel="nofollow" moz-do-not-send="true"
            href="mailto:hein.zelle@xxxxxxxxxxxxx">hein.zelle@xxxxxxxxxxxxx</a><br>
          Web: &nbsp; &nbsp;<a rel="nofollow" moz-do-not-send="true"
            href="http://www.bmtargoss.com" target="_blank">www.bmtargoss.com</a><br>
          <br>
          BMT ARGOSS<br>
          P.O. Box 61, 8325 ZH Vollenhove<br>
          Voorsterweg 28, 8316 PT Marknesse<br>
          The Netherlands<br>
          <br>
          ----Confidentiality Notice &amp; Disclaimer----<br>
          <br>
          The contents of this e-mail and any attachments are intended
          for the<br>
          use of the mail addressee(s) shown. If you are not that
          person, you<br>
          are not allowed to read it, to take any action based upon it
          or to<br>
          copy it, forward, distribute or disclose the contents of it
          and you<br>
          should please delete it from your system. BMT ARGOSS does not
          accept<br>
          liability for any errors or omissions in the context of this
          e-mail or<br>
          its attachments which arise as a result of internet
          transmission, nor<br>
          accept liability for statements which are those of the author
          and<br>
          clearly not made on behalf of BMT ARGOSS.<br>
        </blockquote>
      </div>
      <br>
      <br clear="all">
      <br>
      -- <br>
      Z wyrazami szacunku,<br>
      Szymon Roziewski<br>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00203" href="msg00203.html">Re: [ferret_users] How to grab time info?</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00178" href="msg00178.html">[ferret_users] How to grab time info?</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
<li><strong><a name="00187" href="msg00187.html">Re: [ferret_users] How to grab time info?</a></strong>
<ul><li><em>From:</em> Hein Zelle</li></ul></li>
<li><strong><a name="00195" href="msg00195.html">Re: [ferret_users] How to grab time info?</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00195.html">Re: [ferret_users] How to grab time info?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00203.html">Re: [ferret_users] How to grab time info?</a></strong>
</li>

</UL>
<center>[<a href="msg00195.html">Thread Prev</a>][<a href="msg00203.html">Thread Next</a>][<A HREF="threads.html#00201">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
