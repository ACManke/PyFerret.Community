<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] current path length -->
<!--X-From-R13: Xnvfba Yhevna <wnvfbaNngzbf.hpyn.rqh> -->
<!--X-Date: Thu, 19 May 2011 15:39:35 &#45;0700 -->
<!--X-Message-Id: BANLkTi=wY&#45;7m8DpDi2rpe=4x5A_3NzhCrQ@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: BFAB582F&#45;8F26&#45;4C35&#45;9E1B&#45;B07FCA7CC798@gmail.com -->
<!--X-Reference: 4DD57742.9090006@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] current path length</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00382.html">Thread Prev</a>][<a href="msg00437.html">Thread Next</a>][<A HREF="threads.html#00383">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] current path length</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>mick spillane &lt;<a href="mailto:mick.spillane@DOMAIN.HIDDEN">mick.spillane@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] current path length</strong></li>
<li><strong>From</strong>: <strong>Jaison Kurian &lt;<a href="mailto:jaison@DOMAIN.HIDDEN">jaison@xxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 19 May 2011 15:39:32 -0700</li>
<li>Cc: Leela Frankcombe &lt;<a href="mailto:leela.frankcombe@DOMAIN.HIDDEN">leela.frankcombe@xxxxxxxxx</a>&gt;,        &quot;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma; h=domainkey-signature:mime-version:sender:in-reply-to:references:date :x-google-sender-auth:message-id:subject:from:to:cc:content-type; bh=x5iiU4Jz9ggey3gVK6bzV4cIiNUqCplflIOxoggouYI=; b=msYtUKcKBYEUpSEsjyc/yNIvzVQftmD/SC+lD9sJMvx3CkqCiaC5K62aze6OHYE/sn vCNwbUSo+pA09L5YRruGpfFhFton/oHA8t/AQPvKSnd2KMq3FwiA6y+S4jmw+kt0VL6y Tktl1iZtcT/FCYhz84AD8dEggkDGC6IvKEIZk=</li>
<li>Domainkey-signature: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma; h=mime-version:sender:in-reply-to:references:date :x-google-sender-auth:message-id:subject:from:to:cc:content-type; b=od/K6dN5P6WCA0znXaRXvYYjlr14bqY0tzxsse9VR1tIeibmn9yz0pdH75+TjR8CHZ zmDlXzgbuX+7hIKK9cmyOqhx6q5WW7g0YO6s/2eCW6VctKTjtWuuJEW9eFR9h8Y/vAcG SZyAgirBCOWdAvp4orCR6i50tfPTDmv8WtNgs=</li>
<li>In-reply-to: &lt;<a href="mailto:4DD57742.9090006@DOMAIN.HIDDEN">4DD57742.9090006@xxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:BFAB582F-8F26-4C35-9E1B-B07FCA7CC798@DOMAIN.HIDDEN">BFAB582F-8F26-4C35-9E1B-B07FCA7CC798@xxxxxxxxx</a>&gt; &lt;<a href="mailto:4DD57742.9090006@DOMAIN.HIDDEN">4DD57742.9090006@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Hello Leela and Mick,<br><br>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Mick&#39;s scripts are very useful for variety of &quot;non-conventional&quot; <br>applications in Ferret. I use them to create custom data masks. <br><br>
However, i think you have one more option to try.<br>Long back I wrote a example script to extract the lat-lon positions of a contour. You can<br>easily add few lines to compute distance between&#xA0; those points (using greatcircle distance<br>
method) and finally calculate the length of a contour. Give it a try...you can find this<br>script from<br><br><a rel="nofollow" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2006/msg00163.html">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2006/msg00163.html</a><br>
<br>Hope this helps,<br><br>Thanks and Regards,<br><br>Jaison<br><br><div class="gmail_quote">On Thu, May 19, 2011 at 1:02 PM, mick spillane <span dir="ltr">&lt;<a rel="nofollow" href="mailto:mick.spillane@xxxxxxxx">mick.spillane@xxxxxxxx</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt 0.8ex; border-left: 1px solid rgb(204, 204, 204); padding-left: 1ex;">Hi Leela,<br>
<br>
 &#xA0; &#xA0; This is not necessarily a better solution to your problem than use<br>
of transformations like @loc or @weq, but it illustrates how using<br>
Ferret as a digitizer, coupled with a Great Circle Distance calculator<br>
can be useful in a variety of situations. Apologies if this is already<br>
known to you but it may serve a wider audience.<br>
<br>
First: Check that Ferret&#39;s &quot;where&quot; command is working for you:<br>
 &#xA0; &#xA0; go ptest<br>
 &#xA0; &#xA0; where<br>
When you move the cursor over the plot and click. Ferret should report<br>
the &quot;mouse&quot; coordinates in user units. This is the key to digitizing and<br>
a variety of other tasks one could imagine.<br>
<br>
Next: Add the attached scripts to your directories (I would typically<br>
put the .jnl ones in my &quot;ferret&quot; directory and the shell script<br>
get_vertices [with chmod +x get_vertices] in &quot;bin&quot;)<br>
<br>
Demo: Here is an illustration. What is the length of the 25C isotherm of<br>
Levitus SST between Australia and South America?<br>
 &#xA0; &#xA0; use levitus_climatology ; let sst=temp[k=1]<br>
 &#xA0; &#xA0; fill/x=140:310/y=-30:10 sst ; cont/o/lev=(25)/x=140:310/y=-30:10 sst<br>
 &#xA0; &#xA0; go polydef &#xA0;! prompts user to click on desired points, terminating by<br>
 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; ! clicking offchart to the left. When this is<br>
done the coords of<br>
 &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; ! the point are loaded as a file with variables<br>
VX,VY<br>
 &#xA0; &#xA0; sho data<br>
 &#xA0; &#xA0;2&gt; ./vertices.xy &#xA0;(default)<br>
 &#xA0;name &#xA0; &#xA0; title &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; I &#xA0; &#xA0; &#xA0; &#xA0; J &#xA0; &#xA0; &#xA0; &#xA0; K &#xA0; &#xA0; &#xA0; &#xA0; L<br>
 &#xA0;VX &#xA0; &#xA0; &#xA0; VX &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; 1:76<br>
 &#xA0; &#xA0; &#xA0;...<br>
 &#xA0;VY &#xA0; &#xA0; &#xA0; VY &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; 1:76<br>
 &#xA0; &#xA0; &#xA0;...<br>
! As seen in the attached graphic I took 76 points to delineate the<br>
isotherm.<br>
<br>
! In this case, where VX,VY are lon,lat values, what is needed is to sum<br>
the great<br>
! circle distances along the curve. One way to do this is as follows:<br>
 &#xA0; &#xA0; go greatcircle &#xA0;! definitions for great circle calculations<br>
 &#xA0; &#xA0; let lon1=vx ; let lat1=vy ; let lon2=vx[k=@shf] ; let lat2=vy[k=@shf]<br>
 &#xA0; &#xA0; list gckm[k=1:75@sum] &#xA0;! sum up the GC contributions, giving the<br>
answer (in kilometers)<br>
 &#xA0; &#xA0; 18033.<br>
Note that you sum over one less than the number of vertices so as not to<br>
run off the end. I did the above twice, because I forgot to save the<br>
plot, and the first time got 18042. This suggests the method is good<br>
enough for a certain class of problem. Perhaps a better demo would have<br>
been to use the hints in &quot;greatcircle.jnl&quot; to plot a portion of a great<br>
circle, then digitize it and compare the result with the known answer,<br>
but this one at least illustrates how it can deal with complex paths.<br>
<br>
Hope it is of use,<br>
 &#xA0; &#xA0; Mick<br>
----------------<br>
<div><div></div><div class="h5">On 5/19/11 11:06 AM, Leela Frankcombe wrote:<br>
&gt; Dear Ferreters,<br>
&gt;<br>
&gt; I&#39;ve come across a question which is simple in theory but in practice I&#39;m having a little trouble. So I&#39;m wondering if anyone else has found a solution.<br>
&gt;<br>
&gt; What I would like to do is calculate the path length of an ocean current. To define the path of the current I pick a particular sea surface height contour, now I would like to be able to calculate the length of that contour. I&#39;ve been trying to use @loc or @weq to select the points at which SSH reaches the value that I&#39;ve chosen but they only find the first instance along a given latitude or longitude so they miss parts where the current meanders (and also sometimes pick up eddies). Is there a way to use @loc or @weq to find every instance of a particular value? Or has someone got a better solution?<br>

&gt;<br>
&gt; Thanks!<br>
&gt; Leela.<br>
&gt;<br>
&gt; -----------------------------------------------------------------------------------<br>
&gt; Leela Frankcombe<br>
&gt; Post-doctoral researcher<br>
&gt; Institute for Marine and Atmospheric research Utrecht<br>
&gt; Utrecht University<br>
&gt; The Netherlands<br>
&gt; <a rel="nofollow" href="http://www.phys.uu.nl/%7Efrankcmb" target="_blank">www.phys.uu.nl/~frankcmb</a><br>
&gt; <a rel="nofollow" href="mailto:l.m.frankcombe@xxxxx">l.m.frankcombe@xxxxx</a><br>
&gt; -----------------------------------------------------------------------------------<br>
<br>
</div></div></blockquote></div><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00437" href="msg00437.html">Re: [ferret_users] current path length</a></strong>
<ul><li><em>From:</em> Leela Frankcombe</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00381" href="msg00381.html">[ferret_users] current path length</a></strong>
<ul><li><em>From:</em> Leela Frankcombe</li></ul></li>
<li><strong><a name="00382" href="msg00382.html">Re: [ferret_users] current path length</a></strong>
<ul><li><em>From:</em> mick spillane</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00382.html">Re: [ferret_users] current path length</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00437.html">Re: [ferret_users] current path length</a></strong>
</li>

</UL>
<center>[<a href="msg00382.html">Thread Prev</a>][<a href="msg00437.html">Thread Next</a>][<A HREF="threads.html#00383">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
