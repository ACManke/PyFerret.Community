<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] How to turn on labeling on contour lines command? -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 26 Jul 2011 09:21:49 &#45;0700 -->
<!--X-Message-Id: 4E2EE995.9080306@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: BANLkTik6hoTh1nKdi6jXg5EsZip2aakLaA@mail.gmail.com -->
<!--X-Reference: 4E1392D7.7070803@noaa.gov -->
<!--X-Reference: CAMxxcfZUG6oRuHMZazNKj_2bKF59BZ64wdackQ8y3ryxgMe8Sg@mail.gmail.com -->
<!--X-Reference: 4E1E16D9.2000007@noaa.gov -->
<!--X-Reference: CAMxxcfa7ePhjA2yftarVBZoCvGF7Po3+=dHBxBdBZVknSui&#45;hQ@mail.gmail.com -->
<!--X-Derived: gifh7KPw2U7zX.gif -->
<!--X-Derived: gif29T0egRUcd.gif -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] How to turn on labeling on contour lines command?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00559.html">Thread Prev</a>][<a href="msg00508.html">Thread Next</a>][<A HREF="threads.html#00599">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] How to turn on labeling on contour lines command?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Szymon Roziewski &lt;<a href="mailto:szymon.roziewski@DOMAIN.HIDDEN">szymon.roziewski@xxxxxxxxx</a>&gt;,        Ferret users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] How to turn on labeling on contour lines command?</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 26 Jul 2011 09:21:41 -0700</li>
<li>In-reply-to:  &lt;<a href="mailto:CAMxxcfa7ePhjA2yftarVBZoCvGF7Po3%2B%3DdHBxBdBZVknSui-hQ@DOMAIN.HIDDEN">CAMxxcfa7ePhjA2yftarVBZoCvGF7Po3+=dHBxBdBZVknSui-hQ@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:BANLkTik6hoTh1nKdi6jXg5EsZip2aakLaA@DOMAIN.HIDDEN">BANLkTik6hoTh1nKdi6jXg5EsZip2aakLaA@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4E1392D7.7070803@DOMAIN.HIDDEN">4E1392D7.7070803@xxxxxxxx</a>&gt; &lt;<a href="mailto:CAMxxcfZUG6oRuHMZazNKj_2bKF59BZ64wdackQ8y3ryxgMe8Sg@DOMAIN.HIDDEN">CAMxxcfZUG6oRuHMZazNKj_2bKF59BZ64wdackQ8y3ryxgMe8Sg@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4E1E16D9.2000007@DOMAIN.HIDDEN">4E1E16D9.2000007@xxxxxxxx</a>&gt; &lt;<a href="mailto:CAMxxcfa7ePhjA2yftarVBZoCvGF7Po3%2B%3DdHBxBdBZVknSui-hQ@DOMAIN.HIDDEN">CAMxxcfa7ePhjA2yftarVBZoCvGF7Po3+=dHBxBdBZVknSui-hQ@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:5.0) Gecko/20110624 Thunderbird/5.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi -<br>
    I think we have a resolution of the question Szymon was asking here.
    <br>
    <br>
    In the last version of Ferret we did some work to improve the
    labeling of contours on fine grids.&nbsp; I think if you upgrade to
    Ferret v6.7, the latest release, you'll find that your contours are
    labeled.<br>
    <br>
    I created a function on your fine grid, xfine,yfine.&nbsp; I'll include
    the script below.<br>
    Plotted with Ferret v667, <br>
    <img alt="" src="gifh7KPw2U7zX.gif" border="1"
      height="500" width="580"><br>
    <br>
    and plotted with Ferret v67:<br>
    <img alt="" src="gif29T0egRUcd.gif" border="1"
      height="500" width="580"><br>
    <br>
    Here is the script:&nbsp; The command FILL/LINE/KEY is equivalent to FILL
    and then CONTOUR/OVER/NOLABEL.<br>
    <br>
    ! Define a function to contour<br>
    <br>
    let WAVE = SIN(KX*XPTS + KY*YPTS - PHASE) / 3<br>
    let PHASE = 0<br>
    let KAPPA = 0.4<br>
    let KX = 0.4<br>
    let KY = 0.7<br>
    let FCN1 = SIN(R)/(R+1)<br>
    let R = ((XPTS-X0)^2+ 5*(YPTS-Y0)^2)^0.5<br>
    let X0 = 3<br>
    let Y0 = 8<br>
    LET sample_function = fcn1 + wave<br>
    let xpts = x; let ypts = y<br>
    <br>
    ! Define coarser grid and plot the function<br>
    !1. swh_coarse value<br>
    DEFINE AXIS/X=-5.666666667:5.25:0.083333333/unit=degree xlon<br>
    DEFINE AXIS/Y=-2.0:10.0:0.083333333/unit=degree ylat<br>
    DEFINE GRID/x=xlon/y=ylat grid_xlon_ylat<br>
    <br>
    set grid grid_xlon_ylat<br>
    shade sample_function<br>
    fill/line/key sample_function<br>
    <br>
    ! Define fine grid and regrid to it.<br>
    !2. swh_smooth value<br>
    DEFINE AXIS/X=-5.666666667:5.25:0.010416667/unit=degree xfine<br>
    DEFINE AXIS/Y=-2.0:10.0:0.010416667/unit=degree yfine !1/8<br>
    DEFINE GRID/x=xfine/y=yfine grid_xfine_yfine<br>
    <br>
    fill/line/key sample_function[gxy=grid_xfine_yfine]; pause<br>
    <br>
    <br>
    <br>
    On 7/15/2011 5:03 AM, Szymon Roziewski wrote:
    <blockquote
cite=""
      type="cite">
      <pre wrap="">Hello Ansley,

thank you very much for your engagement. I very appreciate it.
In fact, the solutions with size=0.8/spacing=1 or even
size=0.2/spacing=0.001 or so on seem not to work.
I tried to work around the issue by smoothing.
What I did is as follows:
I shaded swh_smooth value and before making contours I smoothed the
value without regridding.
So, I have swh_smooth on a fine grid and swh_coarse on a coarse grid.
Doing in that way come up with following result (I attach a picture).
Now I have labels at contours.
But it's not a case. Because the contours are not well-fitting the
shaded values.
I'd rather have labels at well-fitting contours (straight by making
contours from swh_smooth value) but how I can get this effect?

My variables are on grids
1. swh_coarse value
DEFINE AXIS/X=-5.666666667:5.25:0.083333333/unit=degree xlon
DEFINE AXIS/Y=-2.0:10.0:0.083333333/unit=degree ylat
DEFINE GRID/x=xlon/y=ylat grid_xlon_ylat
2. swh_smooth value
DEFINE AXIS/X=-5.666666667:5.25:0.010416667/unit=degree xfine
DEFINE AXIS/Y=-2.0:10.0:0.010416667/unit=degree yfine !1/8
DEFINE GRID/x=xfine/y=yfine grid_xfine_yfine

Best wishes,
Szymon Roziewski
</pre>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00507" href="msg00507.html">[ferret_users] How to turn on labeling on contour lines command?</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
<li><strong><a name="00519" href="msg00519.html">Re: [ferret_users] How to turn on labeling on contour lines command?</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00549" href="msg00549.html">Re: [ferret_users] How to turn on labeling on contour lines command?</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
<li><strong><a name="00552" href="msg00552.html">Re: [ferret_users] How to turn on labeling on contour lines command?</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00558" href="msg00558.html">Re: [ferret_users] How to turn on labeling on contour lines command?</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00559.html">Re: [ferret_users] How to turn on labeling on contour lines command?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00508.html">[ferret_users] time axis</a></strong>
</li>

</UL>
<center>[<a href="msg00559.html">Thread Prev</a>][<a href="msg00508.html">Thread Next</a>][<A HREF="threads.html#00599">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
