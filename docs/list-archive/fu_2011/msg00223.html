<!-- MHonArc v2.6.16 -->
<!--X-Subject: RE: [ferret_users] Jason Images -->
<!--X-From-R13: BnhynAQ@ @harf <bprnabtensnNubgznvy.pbz> -->
<!--X-Date: Wed, 23 Mar 2011 12:37:48 &#45;0700 -->
<!--X-Message-Id: BAY161&#45;w600E1297FB1B2CE61BADC6B5B70@phx.gbl -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 4D558413.7080709@noaa.gov -->
<!--X-Reference: 4D592AE2.4070100@io&#45;warnemuende.de -->
<!--X-Reference: 4D596F7A.2070609@noaa.gov -->
<!--X-Reference: 4D5EA165.6050501@io&#45;warnemuende.de -->
<!--X-Reference: 4D5EC739.9030703@noaa.gov -->
<!--X-Reference: BAY161&#45;w1283EE09FB9CECEF7729D8B5B50@phx.gbl -->
<!--X-Reference: BAY161&#45;w2637E9F7C8B0E3B61CF103B5B50@phx.gbl -->
<!--X-Reference: 1300794090.10957.52.camel@oo -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RE: [ferret_users] Jason Images</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00219.html">Thread Prev</a>][<a href="msg00099.html">Thread Next</a>][<A HREF="threads.html#00223">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [ferret_users] Jason Images</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:pbo@DOMAIN.HIDDEN">pbo@xxxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>RE: [ferret_users] Jason Images</strong></li>
<li><strong>From</strong>: <strong>PaulaOCN Nunes &lt;<a href="mailto:oceanografa@DOMAIN.HIDDEN">oceanografa@xxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 23 Mar 2011 19:37:44 +0000</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>Importance: Normal</li>
<li>In-reply-to: &lt;<a href="mailto:1300794090.10957.52.camel@DOMAIN.HIDDEN"><a href="msg00219.html">1300794090.10957.52.camel@oo</a></a>&gt;</li>
<li>References: &lt;<a href="mailto:4D558413.7080709@DOMAIN.HIDDEN">4D558413.7080709@xxxxxxxx</a>&gt; &lt;<a href="mailto:4D592AE2.4070100@DOMAIN.HIDDEN">4D592AE2.4070100@xxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4D596F7A.2070609@DOMAIN.HIDDEN">4D596F7A.2070609@xxxxxxxx</a>&gt; &lt;<a href="mailto:4D5EA165.6050501@DOMAIN.HIDDEN">4D5EA165.6050501@xxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4D5EC739.9030703@DOMAIN.HIDDEN">4D5EC739.9030703@xxxxxxxx</a>&gt; &lt;<a href="mailto:BAY161-w1283EE09FB9CECEF7729D8B5B50@DOMAIN.HIDDEN">BAY161-w1283EE09FB9CECEF7729D8B5B50@xxxxxxx</a>&gt; &lt;<a href="mailto:BAY161-w2637E9F7C8B0E3B61CF103B5B50@DOMAIN.HIDDEN">BAY161-w2637E9F7C8B0E3B61CF103B5B50@xxxxxxx</a>&gt; &lt;<a href="mailto:1300794090.10957.52.camel@DOMAIN.HIDDEN"><a href="msg00219.html">1300794090.10957.52.camel@oo</a></a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td style="">


Paulo,<br><br>Thanks a lot, your program helped a lot!<br><br>Best regards e bom trabalho para voc&#xEA; tamb&#xE9;m!<br>Paula Lamosa Nunes<br><br><div>&nbsp;</div><br><br><br><br>&gt; Date: Tue, 22 Mar 2011 11:41:30 +0000<br>&gt; From: pbo@xxxxxxxxx<br>&gt; Subject: Re: [ferret_users] Jason Images<br>&gt; To: oceanografa@xxxxxxxxxxx<br>&gt; CC: oar.pmel.ferret_users@xxxxxxxx<br>&gt; <br>&gt; Hi Paula,<br>&gt; <br>&gt; The function RESHAPE allows you to skip the step of creating an<br>&gt; intermediate file to build triples. <br>&gt; <br>&gt; You can save intermediate results so that you don't need to have all<br>&gt; files open at the same time.<br>&gt; <br>&gt; The attached script should do what you're looking for. I've written a<br>&gt; loop to generate a sequence of LON data but you should be able to adapt<br>&gt; it easily. <br>&gt; <br>&gt; Bom trabalho!<br>&gt; <br>&gt; Paulo B. Oliveira<br>&gt; ----------------------------------------------------------------------<br>&gt; <br>&gt; <br>&gt; On Mon, 2011-03-21 at 20:49 +0000, PaulaOCN Nunes wrote:<br>&gt; &gt; <br>&gt; &gt; Hello Ferret users;<br>&gt; &gt; <br>&gt; &gt; I attached an example of a netcdf Jason file which I'm working on<br>&gt; &gt; ("JA1_IPR_2PcP334_001_20110125_040633_20110125_050240.nc")<br>&gt; &gt; I'm interested in the sea surface height anomaly (SSHA) and their<br>&gt; &gt; coordinates (lat, lon), but the file comes with all the data in the<br>&gt; &gt; time axis <br>&gt; &gt; (1 pair of coordinates and a measure of SSHA for each scan of the<br>&gt; &gt; satellite). Here goes the display of the data:<br>&gt; &gt; <br>&gt; &gt;     1&gt; ./JA1_IPR_2PcP334_001_20110125_040633_20110125_050240.nc<br>&gt; &gt; (default)<br>&gt; &gt;  name     title                             I         J         K<br>&gt; &gt; L<br>&gt; &gt;  LAT      latitude                         ...       ...       ...<br>&gt; &gt; 1:2350<br>&gt; &gt;  LON      longitude                        ...       ...       ...<br>&gt; &gt; 1:2350<br>&gt; &gt;  SSHA     sea surface height anomaly       ...       ...       ...<br>&gt; &gt; 1:2350, etc<br>&gt; &gt; <br>&gt; &gt; I realize I need to regrid it to the "I" and "J" axis to be able to<br>&gt; &gt; work with it, then, I first tried to regrid the "lat" variable to the<br>&gt; &gt; "I" axis:<br>&gt; &gt; <br>&gt; &gt; define axis/x=1:2350:1 iaxis<br>&gt; &gt; define grid/x=iaxis gridCOL<br>&gt; &gt; let lat2=lat[g=gridCOL]<br>&gt; &gt; <br>&gt; &gt; But it didn't show any difference on the grid ferret's display:<br>&gt; &gt; <br>&gt; &gt; sh grid lat<br>&gt; &gt;     GRID GSF1<br>&gt; &gt;  name       axis              # pts   start                end<br>&gt; &gt;  normal    X<br>&gt; &gt;  normal    Y<br>&gt; &gt;  normal    Z<br>&gt; &gt;  TIME      TIME              2350 i   25-JAN-2011 04:06    25-JAN-2011<br>&gt; &gt; 05:02<br>&gt; &gt; <br>&gt; &gt; sh grid lat2<br>&gt; &gt;     GRID GSF1<br>&gt; &gt;  name       axis              # pts   start                end<br>&gt; &gt;  normal    X<br>&gt; &gt;  normal    Y<br>&gt; &gt;  normal    Z<br>&gt; &gt;  TIME      TIME              2350 i   25-JAN-2011 04:06    25-JAN-2011<br>&gt; &gt; 05:02<br>&gt; &gt; <br>&gt; &gt; Second I tried to regrid the "lat" variable, but to a grid with the 3<br>&gt; &gt; axis:<br>&gt; &gt; <br>&gt; &gt;  define axis/y=1:2350:1 jaxis<br>&gt; &gt;  define axis/t=1:1:1 laxis<br>&gt; &gt;  define grid/x=iaxis/y=jaxis/t=laxis gridCOL_ROW<br>&gt; &gt; let lat3=lat[g=gridCOL_ROW]<br>&gt; &gt; sh grid lat3<br>&gt; &gt;     GRID (G002)<br>&gt; &gt;  name       axis              # pts   start                end<br>&gt; &gt;  normal    X<br>&gt; &gt;  normal    Y<br>&gt; &gt;  normal    Z<br>&gt; &gt;  LAXIS     T                    1 r   1                    1<br>&gt; &gt; <br>&gt; &gt; ...it was worse, ferret and I got more confused...The only way I could<br>&gt; &gt; work out to give this data a X/Y axis was to save it as a binary:<br>&gt; &gt; <br>&gt; &gt; list/clobber/format=unformatted/file="jason1.dat" lon,lat,ssha<br>&gt; &gt; <br>&gt; &gt; ...and open it again:<br>&gt; &gt; <br>&gt; &gt; define axis/x=1:2350:1 iaxis<br>&gt; &gt; define grid/x=iaxis gridCOL<br>&gt; &gt; file/format=unformatted/grid=gridCOL/var=lon,lat,ssha/col=3<br>&gt; &gt; "jason1.dat"<br>&gt; &gt;   sh da<br>&gt; &gt;     2&gt; ./jason1.dat  (default)<br>&gt; &gt;  name     title                             I         J         K<br>&gt; &gt; L<br>&gt; &gt;  LON      LON<br>&gt; &gt; 1:2350    ...       ...       ...<br>&gt; &gt;  LAT      LAT<br>&gt; &gt; 1:2350    ...       ...       ...<br>&gt; &gt;  SSHA     SSHA<br>&gt; &gt; 1:2350    ...       ...       ...<br>&gt; &gt; <br>&gt; &gt; Does anyone have an easier way to regrid the data from the "L" axis to<br>&gt; &gt; the "I"/"J" axis?<br>&gt; &gt;  After this, I used the "scat2gridgauss_xy" command to put the<br>&gt; &gt; variables to this global grid:<br>&gt; &gt; <br>&gt; &gt; !global grid for all Jason's possible tracks:<br>&gt; &gt; define axis/x=0:360:0.052252252/UNIT=degrees xJASON<br>&gt; &gt; define axis/y=-66.15:60.15:0.052252252/UNIT=degrees yJASON<br>&gt; &gt; let<br>&gt; &gt; sshaJASON=scat2gridgauss_xy(lon,lat,ssha,x[gx=xJASON],y[gy=yJASON],0.5, 0.5, 2, 0)<br>&gt; &gt; <br>&gt; &gt; I ploted these "sshaJASON" variable with "shade", no problems, but<br>&gt; &gt; isn't there a way to the axis recognize the coordinates described by<br>&gt; &gt; the variables "lat" and "lon",<br>&gt; &gt; without the need of the "scat2gridgauss_xy" command?<br>&gt; &gt; Well, this file is one track of the satellite, and I 'd like to join a<br>&gt; &gt; hole cycle of it, which is the sum of 254 files, to do so, I made a<br>&gt; &gt; script in loop, for load and save the 254 binaries files <br>&gt; &gt; but I'm not able, because Ferret allows until 100 datasets to be<br>&gt; &gt; loaded at the same time:<br>&gt; &gt;  <br>&gt; &gt; repeat/i=1:(numberFILES):1 (\<br>&gt; &gt; list `i`; \<br>&gt; &gt; file/var=ndata "ndata_`i`.txt"; \<br>&gt; &gt; define axis/x=1:`ndata[i=1]`:1 iaxis; \<br>&gt; &gt; ca da 1; \<br>&gt; &gt; define grid/x=iaxis gridTRIPA; \<br>&gt; &gt; let arq= "JASON_`i`.dat"; \<br>&gt; &gt; file/format=unformatted/grid=gridTRIPA/var=lon,lat,ssha/col=3<br>&gt; &gt; "`arq`" ; \<br>&gt; &gt; let<br>&gt; &gt; sshaJASON=scat2gridgauss_xy(lon,lat,ssha,x[gx=xJASON],y[gy=yJASON],0.5, 0.5, 2, 0) ; \<br>&gt; &gt; let sshaJASON`i` = missing(sshaJASON,0); \<br>&gt; &gt; let sobrepoe`i`_ssha=if (sshaJASON NE 0) then (sshaJASON) else<br>&gt; &gt; (sobrepoe`i-1`_ssha[l=1]); \<br>&gt; &gt; )<br>&gt; &gt; let sobrepoe_ssha=sobrepoe(numberFILES)_ssha[l=1]<br>&gt; &gt; set variable/bad=0 sobrepoe_ssha[l=1]<br>&gt; &gt; set memo/size=1000;shade sobrepoe_ssha;go land_hires<br>&gt; &gt; <br>&gt; &gt; So I tried to cancel the variables ("ca var ssha") at the end of loop,<br>&gt; &gt; but:<br>&gt; &gt; <br>&gt; &gt; **ERROR: invalid command: can only CANCEL variables you DEFINE SSHA<br>&gt; &gt; ca var ssha<br>&gt; &gt; <br>&gt; &gt; then I tried to cancel the dataset at the end of loop ("ca da/all" or<br>&gt; &gt; "ca da 1"), but it keep asking for the old variable (SSHA),<br>&gt; &gt; and I'm unabled to use the new variable with the overlappings<br>&gt; &gt; (sobrepoe_ssha):<br>&gt; &gt; <br>&gt; &gt; !-&gt; REPEAT: I=1<br>&gt; &gt;  !-&gt; list 1<br>&gt; &gt;              VARIABLE : constant<br>&gt; &gt;           1.000<br>&gt; &gt;  !-&gt; SET DATA/EZ/var=ndata<br>&gt; &gt; "/home/paula/Ressurgencia/JASON/c334/ndata_1.txt"<br>&gt; &gt;  !-&gt; define axis/x=1:2350:1 iaxis<br>&gt; &gt; Replacing definition of axis IAXIS<br>&gt; &gt;  !-&gt; DEFINE VARIABLE arq=<br>&gt; &gt; "/home/paula/Ressurgencia/JASON/c334/JASON_1.dat"<br>&gt; &gt;  !-&gt; SET<br>&gt; &gt; DATA/EZ/format=unformatted/grid=gridTRIPA/var=lon,lat,ssha/col=3<br>&gt; &gt; "/home/paula/Ressurgencia/JASON/c334/JASON_1.dat"<br>&gt; &gt;  !-&gt; DEFINE VARIABLE sshaJASON1 = missing(sshaJASON,0)<br>&gt; &gt;  !-&gt; DEFINE VARIABLE sobrepoe1_ssha=if (sshaJASON NE 0) then<br>&gt; &gt; (sshaJASON) else (sobrepoe0_ssha[l=1])<br>&gt; &gt;  <br>&gt; &gt; let sobrepoe_ssha=sobrepoe($cont2)_ssha[l=1]<br>&gt; &gt;  !-&gt; DEFINE VARIABLE sobrepoe_ssha=sobrepoe1_ssha[l=1]<br>&gt; &gt; set variable/bad=0 sobrepoe_ssha[l=1]<br>&gt; &gt;  <br>&gt; &gt; shade sobrepoe_ssha<br>&gt; &gt;  **ERROR: variable unknown or not in data set: SSHA<br>&gt; &gt; shade sobrepoe_ssha<br>&gt; &gt; Command file, command group, or REPEAT execution aborted<br>&gt; &gt; <br>&gt; &gt; Is there any way to clear the datasets so I'm able to handle with new<br>&gt; &gt; variables?<br>&gt; &gt; <br>&gt; &gt; Thanks,<br>&gt; &gt; Paula Lamosa Nunes<br>&gt; <br> 		 	   		  
</td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00096" href="msg00096.html">[ferret_users] Announcing Ferret v6.6.7, a bug-fix release</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00097" href="msg00097.html">Re: [ferret_users] Announcing Ferret v6.6.7, a bug-fix release</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00098" href="msg00098.html">Re: [ferret_users] Announcing Ferret v6.6.7, a bug-fix release</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00119" href="msg00119.html">[ferret_users] plotting and interpolating data given on curvilinear grids</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00120" href="msg00120.html">Re: [ferret_users] plotting and interpolating data given on curvilinear grids</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00206" href="msg00206.html">RE: [ferret_users] plotting and interpolating data given on curvilinear grids</a></strong>
<ul><li><em>From:</em> PaulaOCN Nunes</li></ul></li>
<li><strong><a name="00215" href="msg00215.html">[ferret_users] Jason Images</a></strong>
<ul><li><em>From:</em> PaulaOCN Nunes</li></ul></li>
<li><strong><a name="00219" href="msg00219.html">Re: [ferret_users] Jason Images</a></strong>
<ul><li><em>From:</em> Paulo B. Oliveira</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00219.html">Re: [ferret_users] Jason Images</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00099.html">[ferret_users] Fast Fourier Transformation</a></strong>
</li>

</UL>
<center>[<a href="msg00219.html">Thread Prev</a>][<a href="msg00099.html">Thread Next</a>][<A HREF="threads.html#00223">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
