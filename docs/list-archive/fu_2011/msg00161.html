<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Interpolation 2D issue -->
<!--X-From-R13: Emlzba Dbmvrjfxv <fmlzba.ebmvrjfxvNtznvy.pbz> -->
<!--X-Date: Thu, 10 Mar 2011 07:46:13 &#45;0800 -->
<!--X-Message-Id: AANLkTi=1tGXgx0wjccdWHQ7vQ1PmE+_U7ciV82F&#45;uDzr@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: AANLkTikhKS6nWJjTF9_JP4ssAbGnTwMpnfJUfmxF+igF@mail.gmail.com -->
<!--X-Reference: 4D772AA8.2060906@io&#45;warnemuende.de -->
<!--X-Reference: AANLkTikNM_U1XrgAj2V+6KUa_VDrztAg2cHX0YZ8aHrr@mail.gmail.com -->
<!--X-Reference: 4D7799B2.1080607@io&#45;warnemuende.de -->
<!--X-Reference: 4D77B903.2090301@noaa.gov -->
<!--X-Reference: AANLkTi=m+DNW=mGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Interpolation 2D issue</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00160.html">Thread Prev</a>][<a href="msg00163.html">Thread Next</a>][<A HREF="threads.html#00161">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Interpolation 2D issue</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>, <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Interpolation 2D issue</strong></li>
<li><strong>From</strong>: <strong>Szymon Roziewski &lt;<a href="mailto:szymon.roziewski@DOMAIN.HIDDEN">szymon.roziewski@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 10 Mar 2011 16:46:10 +0100</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=gmail.com; s=gamma;        h=domainkey-signature:mime-version:in-reply-to:references:date         :message-id:subject:from:to:content-type; bh=MamN+j3yjJ5vOcopH5IAGqvPdPTK8GK5I3CeARWzksk=; b=ghc1pWbvcaJms9gqrC2MOuTqXuMUbes9R5++svV5nRu6JAWfZvPKZ6HICMMcyWabHp JQ/usKJxawptLc/sapH4GM1Ik6HPEYo3v5Pw+HdIVGTofqfUSWPm8eFlukzzd2M8Qwx6 +1l+h+p1IqeXp+yz5i2p+KGIWrMyuuiXnIQ+c=</li>
<li>Domainkey-signature: a=rsa-sha1; c=nofws;        d=gmail.com; s=gamma; h=mime-version:in-reply-to:references:date:message-id:subject:from:to :content-type; b=Duae5HbIDOmMEoohcCJuqMuugMrRrrAURFFSuG9hMJTHs3AhNdhKVwgSFre3cjsdYh X4a4xQor8jDzum74Y3rfnm5pin3+uIdbm6/Swuh3zZiBjQJEbX+5DxuLCM7vFpZK85Q6 h9rOT7EF6d7ZinAAQB8RYUSh6Vzh2/lHObgww=</li>
<li>In-reply-to: &lt;<a href="mailto:AANLkTi%3Dm%2BDNW%3DmGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@DOMAIN.HIDDEN">AANLkTi=m+DNW=mGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:AANLkTikhKS6nWJjTF9_JP4ssAbGnTwMpnfJUfmxF%2BigF@DOMAIN.HIDDEN">AANLkTikhKS6nWJjTF9_JP4ssAbGnTwMpnfJUfmxF+igF@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4D772AA8.2060906@DOMAIN.HIDDEN">4D772AA8.2060906@xxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTikNM_U1XrgAj2V%2B6KUa_VDrztAg2cHX0YZ8aHrr@DOMAIN.HIDDEN">AANLkTikNM_U1XrgAj2V+6KUa_VDrztAg2cHX0YZ8aHrr@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4D7799B2.1080607@DOMAIN.HIDDEN">4D7799B2.1080607@xxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4D77B903.2090301@DOMAIN.HIDDEN">4D77B903.2090301@xxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTi%3Dm%2BDNW%3DmGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@DOMAIN.HIDDEN">AANLkTi=m+DNW=mGeUXV7VNTi_HrewxCAD2KW2r8tDfUd@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Ok, <br>I did some experiment and I found it.<br>It just sets a desired value instead of missing value.<br><br>Szymon<br><br><div class="gmail_quote">2011/3/10 Szymon Roziewski <span dir="ltr">&lt;<a rel="nofollow" href="mailto:szymon.roziewski@xxxxxxxxx">szymon.roziewski@xxxxxxxxx</a>&gt;</span><br>
<blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt 0.8ex; border-left: 1px solid rgb(204, 204, 204); padding-left: 1ex;">Hi Martin,<br>It looks very nice.<br>I have to try out this but I don&#39;t really know what the function missing does. I had a look at manual and searched ferret site but there&#39;s no anything about this function.<br>
<br>
Kind regards,<br>Szymon Roziewski<br><br><div class="gmail_quote">2011/3/9 Ansley Manke <span dir="ltr">&lt;<a rel="nofollow" href="mailto:Ansley.B.Manke@xxxxxxxx" target="_blank">Ansley.B.Manke@xxxxxxxx</a>&gt;</span><div><div></div><div class="h5">
<br><blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt 0.8ex; border-left: 1px solid rgb(204, 204, 204); padding-left: 1ex;">
Hi -<br>
We had noticed recently that documentation for fill_xy was missing from the manual. Your email here gives a nice example that we can use there.<br><font color="#888888">
<br>
Ansley</font><div><div></div><div><br>
<br>
On 3/9/2011 7:16 AM, Martin Schmidt wrote:<br>
<blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt 0.8ex; border-left: 1px solid rgb(204, 204, 204); padding-left: 1ex;">
Hi,<br>
you are right, the documentation did not find its way into the manual. It is easy anyway. The mask needs to be<br>
1 where filling is allowed and zero otherwise. Please try the following<br>
<br>
yes? use coads_climatology<br>
yes? let mask=missing(sst/sst,1)<br>
yes? shade/l=1 mask<br>
yes? shade/l=1 fill_xy(sst,mask,5)<br>
Filling is allowed<br>
<br>
!Now missings at land<br>
yes? let mask=sst/sst<br>
yes? shade/l=1 mask<br>
yes? shade/l=1 fill_xy(sst,mask,5)<br>
Nothing is filled.<br>
<br>
And now:<br>
yes? let mask= if y[gy=sst] gt 0 then missing(sst/sst,1) else sst/sst<br>
yes? shade/l=1 fill_xy(sst,mask,5)<br>
<br>
Now filling happens in the northern hemisphere.<br>
<br>
Hope this helps,<br>
Martin<br>
<br>
Szymon Roziewski wrote:<br>
<blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt 0.8ex; border-left: 1px solid rgb(204, 204, 204); padding-left: 1ex;">
Dear Martin / Ferreters,<br>
I have problem with using fill_xy function. I saw some examples and read sth in the ferret archives but I still stuck.<br>
I try to explain my issue.<br>
This is reading an ice field and putting into a lndseaf. I also quote the grid definition.<br>
<br>
DEFINE AXIS/X=-5.666666667:5.25:0.083333333/unit=degree xlon<br>
DEFINE AXIS/Y=-2.0:10.0:0.083333333/unit=degree ylat<br>
DEFINE GRID/x=xlon/y=ylat grid_xlon_xlat<br>
file/skip=1/format=(80f1.0/52f1.0)/columns=132/grid=grid_xlon_xlat/var=lndseaf ICE.DAT<br>
<br>
Then I interpolate the lndseaf onto a fine grid.<br>
<br>
DEFINE AXIS/X=-5.666666667:5.25:0.010416667/unit=degree xfine<br>
DEFINE AXIS/Y=-2.0:10.0:0.010416667/unit=degree yfine !1/8<br>
DEFINE GRID/x=xfine/y=yfine grid_xfine_yfine<br>
let ice_regridded lndseaf[gxy=grid_xfine_yfine]<br>
<br>
What I did next was make the mask.<br>
<br>
let mask = ice_regridded/ice_regridded<br>
<br>
And I used the mask with fill_xy as the following<br>
<br>
let ice_ext = fill_xy(ice_regridded,mask,5)<br>
<br>
But It didn&#39;t change anything. I tried out using different values of third argument of fill_xy. However, I didn&#39;t improve at all.<br>
So, I think either I was using fill_xy badly or I misunderstood something.<br>
<br>
I also tried out FLN function as follows<br>
<br>
let ext = ice_regridded[x=@FLN:50,y=@FLN:50]<br>
<br>
But this resulted with no changes to the ice_regridded as well.<br>
I attach ICE.DAT to make it more real.<br>
<br>
Kind regards,<br>
Szymon Roziewski<br>
<br>
<br>
<br>
2011/3/9 Martin Schmidt &lt;<a rel="nofollow" href="mailto:martin.schmidt@xxxxxxxxxxxxxxxxx" target="_blank">martin.schmidt@xxxxxxxxxxxxxxxxx</a> &lt;mailto:<a rel="nofollow" href="mailto:martin.schmidt@xxxxxxxxxxxxxxxxx" target="_blank">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;&gt;<br>


<br>
 &#xA0; &#xA0;Dear Szymon,<br>
<br>
 &#xA0; &#xA0;you may use fill_xy(data, mask, 2) before you filter data. This<br>
 &#xA0; &#xA0;extrapolates the data smoothly into land by two points and the<br>
 &#xA0; &#xA0;filter @SBX and @SHN<br>
 &#xA0; &#xA0;can do something reasonable near land too. Applying your land mask<br>
 &#xA0; &#xA0;later removes remaining extrapolated points.<br>
<br>
 &#xA0; &#xA0;Greetings,<br>
 &#xA0; &#xA0;Martin<br>
<br>
 &#xA0; &#xA0;Szymon Roziewski wrote:<br>
<br>
 &#xA0; &#xA0; &#xA0; &#xA0;Dear Ferreters,<br>
<br>
 &#xA0; &#xA0; &#xA0; &#xA0;I have an ice field that is a matrix filled by 0 or 1. Because<br>
 &#xA0; &#xA0; &#xA0; &#xA0;of weak resolution I need it to be interpolated on a finer grid.<br>
 &#xA0; &#xA0; &#xA0; &#xA0;I tried out two approaches.<br>
 &#xA0; &#xA0; &#xA0; &#xA0;The first, I interpolated with using @SBX and @SHN functions.<br>
 &#xA0; &#xA0; &#xA0; &#xA0;Basically, I got neat result except to the boundary where I<br>
 &#xA0; &#xA0; &#xA0; &#xA0;got a lack of data. Because this functions don&#39;t have data to<br>
 &#xA0; &#xA0; &#xA0; &#xA0;interpolate and ending up with 0 value.<br>
 &#xA0; &#xA0; &#xA0; &#xA0;As the second I used scat2gridgauss_xy function which gave me<br>
 &#xA0; &#xA0; &#xA0; &#xA0;smoother result but near the boundary I got the ice that<br>
 &#xA0; &#xA0; &#xA0; &#xA0;should not to be. I think that this function is do smooth the<br>
 &#xA0; &#xA0; &#xA0; &#xA0;data sometimes to much.<br>
<br>
 &#xA0; &#xA0; &#xA0; &#xA0;Have any of you had something similar with it?<br>
 &#xA0; &#xA0; &#xA0; &#xA0;Maybe there are some good ferret functions to interpolate ice<br>
 &#xA0; &#xA0; &#xA0; &#xA0;field which is 0 or 1.<br>
<br>
 &#xA0; &#xA0; &#xA0; &#xA0;I attach two graphics for better explanation.<br>
<br>
 &#xA0; &#xA0; &#xA0; &#xA0;Kind regards,<br>
 &#xA0; &#xA0; &#xA0; &#xA0;Szymon Roziewski<br>
<br>
<br>
<br>
<br>
<br>
-- <br>
Z wyrazami szacunku,<br>
Szymon Roziewski<br>
</blockquote>
<br>
</blockquote>
</div></div></blockquote></div></div></div><div><div></div><div class="h5"><br><br clear="all"><br>-- <br>Z wyrazami szacunku,<br>Szymon Roziewski<br>
</div></div></blockquote></div><br><br clear="all"><br>-- <br>Z wyrazami szacunku,<br>Szymon Roziewski<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00149" href="msg00149.html">[ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
<li><strong><a name="00152" href="msg00152.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00155" href="msg00155.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
<li><strong><a name="00156" href="msg00156.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00160" href="msg00160.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00160.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00163.html">Re: [ferret_users] Interpolation 2D issue</a></strong>
</li>

</UL>
<center>[<a href="msg00160.html">Thread Prev</a>][<a href="msg00163.html">Thread Next</a>][<A HREF="threads.html#00161">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
