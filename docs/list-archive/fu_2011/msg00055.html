<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Script crashed &#45;&#45; scat2gridgauss_xy -->
<!--X-From-R13: Dhffryy Tvrqyre <ehffryy.svrqyreNpfveb.nh> -->
<!--X-Date: Sun, 30 Jan 2011 22:06:58 &#45;0800 -->
<!--X-Message-Id: 201101311706.52347.russell.fiedler@csiro.au -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: AANLkTikzr=saN7vT=nbKZWR7CLhknMwOj=P3tcdAfxYT@mail.gmail.com -->
<!--X-Reference: AANLkTikne+YNAwB7WLR0JoxC=gNs3SeyDQAavD8dQRMg@mail.gmail.com -->
<!--X-Reference: AANLkTikSCB6rkmtFHHsUUF29i6=QyL7s8hJyi&#45;58XRCY@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Script crashed -- scat2gridgauss_xy</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00053.html">Thread Prev</a>][<a href="msg00057.html">Thread Next</a>][<A HREF="threads.html#00055">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Script crashed -- scat2gridgauss_xy</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Szymon Roziewski &lt;<a href="mailto:szymon.roziewski@DOMAIN.HIDDEN">szymon.roziewski@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Script crashed -- scat2gridgauss_xy</strong></li>
<li><strong>From</strong>: <strong>Russell Fiedler &lt;<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 31 Jan 2011 17:06:51 +1100</li>
<li>Cc: &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=simple/simple;  d=csiro.au; <a href="mailto:i%3Drussell.fiedler@DOMAIN.HIDDEN">i=russell.fiedler@xxxxxxxx</a>; q=dns/txt;  s=email; t=1296454016; x=1327990016; h=from:to:subject:date:cc:references:in-reply-to: mime-version:content-transfer-encoding:message-id; z=From:=20Russell=20Fiedler=20&lt;<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>&gt; |To:=20Szymon=20Roziewski=20&lt;<a href="mailto:szymon.roziewski@DOMAIN.HIDDEN">szymon.roziewski@xxxxxxxxx</a>&gt; |Subject:=20Re:=20[ferret_users]=20Script=20crashed=20-- =20scat2gridgauss_xy|Date:=20Mon,=2031=20Jan=202011=2017: 06:51=20+1100|CC:=20&quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot;=20&lt;ferret_use <a href="mailto:rs@DOMAIN.HIDDEN">rs@xxxxxxxx</a>&gt;|References:=20&lt;AANLkTikzr=3DsaN7vT=3DnbKZWR7 <a href="mailto:CLhknMwOj%3D3DP3tcdAfxYT@DOMAIN.HIDDEN">CLhknMwOj=3DP3tcdAfxYT@xxxxxxxxxxxxxx</a>&gt;=20&lt;AANLkTikne+YNAw <a href="mailto:B7WLR0JoxC%3D3DgNs3SeyDQAavD8dQRMg@DOMAIN.HIDDEN">B7WLR0JoxC=3DgNs3SeyDQAavD8dQRMg@xxxxxxxxxxxxxx</a>&gt;=20&lt;AANLk <a href="mailto:TikSCB6rkmtFHHsUUF29i6%3D3DQyL7s8hJyi-58XRCY@DOMAIN.HIDDEN">TikSCB6rkmtFHHsUUF29i6=3DQyL7s8hJyi-58XRCY@xxxxxxxxxxxxxx</a> &gt;|In-Reply-To:=20&lt;AANLkTikSCB6rkmtFHHsUUF29i6=3DQyL7s8hJy <a href="mailto:i-58XRCY@DOMAIN.HIDDEN">i-58XRCY@xxxxxxxxxxxxxx</a>&gt;|MIME-Version:=201.0 |Content-Transfer-Encoding:=207bit|Message-ID:=20&lt;2011013 <a href="mailto:11706.52347.russell.fiedler@DOMAIN.HIDDEN">11706.52347.russell.fiedler@xxxxxxxx</a>&gt;; bh=TO9V3wOrHxpQ9Qx6C4K91AM7qdBdXSf/q1MOThUGblw=; b=jOYFPtL8A7mzCvoeedDgEPpcb3NzWW0enfDv285PrL8YnZ+ULzV+gBAI 8oohgIf0S2UTpcYVg6DoB85AUzifGc0Yoy3ACwZvaegCHGWHmcYzSDFGl   jZzRtEcu8dEIUQu;</li>
<li>In-reply-to: &lt;<a href="mailto:AANLkTikSCB6rkmtFHHsUUF29i6%3DQyL7s8hJyi-58XRCY@DOMAIN.HIDDEN">AANLkTikSCB6rkmtFHHsUUF29i6=QyL7s8hJyi-58XRCY@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Organization: CSIRO</li>
<li>References: &lt;<a href="mailto:AANLkTikzr%3DsaN7vT%3DnbKZWR7CLhknMwOj%3DP3tcdAfxYT@DOMAIN.HIDDEN">AANLkTikzr=saN7vT=nbKZWR7CLhknMwOj=P3tcdAfxYT@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTikne%2BYNAwB7WLR0JoxC%3DgNs3SeyDQAavD8dQRMg@DOMAIN.HIDDEN">AANLkTikne+YNAwB7WLR0JoxC=gNs3SeyDQAavD8dQRMg@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTikSCB6rkmtFHHsUUF29i6%3DQyL7s8hJyi-58XRCY@DOMAIN.HIDDEN">AANLkTikSCB6rkmtFHHsUUF29i6=QyL7s8hJyi-58XRCY@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: KMail/1.9.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hi Szymon,

Rather than using linear interpolation use the @AVE operator. This will give you values within the area of
the coarse grid and won't chop off the edges.

If you wish to filter for some reason on the fine grid but want the edges kept you can use a mask

let var_fine = var_coarse[gxy=grid_fine@AVE]   ! Doesn't chop off
let var_fine_filtered = var_fine[x=@SBX:5]          ! example filter. Lose outside points
let var_fine_filtered_1 = if ( var_fine_filtered  ) then var_fine_filtered else var_fine  ! Interior points are filtered but keep the outer points.

Russ


On Saturday 29 January 2011 11:37, Szymon Roziewski wrote:
&gt; The data which I try to interpolate in this case are the same as the previous but the previous were as cdf and now I have in txt file. And when I read it I use the flag &quot;bad&quot;. So, I'm wondering why this script is not working for this data as worked for the previous one.
&gt; 
&gt; Kind regards,
&gt; Szymon Roziewski
&gt; 
&gt; 2011/1/29 Szymon Roziewski &lt;szymon.roziewski@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:szymon.roziewski@xxxxxxxxx">mailto:szymon.roziewski@xxxxxxxxx</a>&gt;&gt;
&gt; I have to use this or similar function because I get horrible result. I discussed that problem with Dr. Hein and he advised me to use scat2gridgauss_xy. Then I had cdf data and all worked properly. But now when I try to reuse it it doesn't work. The script looks like being hanged.
&gt; I give the link to what Dr. Hein said.
&gt; <a  rel="nofollow" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2010/msg00803.html">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2010/msg00803.html</a>
&gt; 
&gt; Kind regards,
&gt; Szymon Roziewski
&gt; 
&gt; 
&gt; 2011/1/28 Ansley Manke &lt;Ansley.B.Manke@xxxxxxxx&lt;<a  rel="nofollow" href="mailto:Ansley.B.Manke@xxxxxxxx">mailto:Ansley.B.Manke@xxxxxxxx</a>&gt;&gt;
&gt; 
&gt; Hi -
&gt; Is Ferret crashing, or the script exiting?  Or does it just take a very long time? Why are you using the scat2grid function?  It seems that you're starting with gridded data and regridding it to this very fine grid. The Ferret regridding transformations would do this directly.
&gt; 
&gt; Once you have read in your data, and defined the fine grid,
&gt; 
&gt;   yes? let swh_smooth = swh_grid[gx=xfine,gy=yfine]
&gt;   yes? fill swh_smooth
&gt; 
&gt; This regrids almost at once. There are several regridding transformations to choose from; run the Ferret command SHOW TRANSFORMS command for a list of them.
&gt; 
&gt; Ansley
&gt; 
&gt; 
&gt; On 1/28/2011 4:44 AM, Szymon Roziewski wrote:
&gt; Dear Ferreters,
&gt; I have such a script:
&gt; set win/size=6.0/aspect=`1.1`
&gt; SET VIEWPORT FULL
&gt; CANCEL MODE LOGO
&gt; DEFINE AXIS/X=-5.666666667:5.25:0.083333333/unit=degree xlon
&gt; DEFINE AXIS/Y=-2.0:10.0:0.083333333/unit=degree ylat
&gt; DEFINE GRID/x=xlon/y=ylat grid_xlon_xlat
&gt; FILE/VARIABLES=swh_grid/COLUMNS=132/GRID=grid_xlon_xlat swh20101018090000.txt
&gt; set var/bad=-1 swh_grid
&gt; set var/units=meters swh_grid
&gt; set var/title=&quot;Significant Wave Height&quot; swh_grid
&gt; DEFINE AXIS/X=-5.666666667:5.25:0.010416667/unit=degree xfine
&gt; DEFINE AXIS/Y=-2.0:10.0:0.010416667/unit=degree yfine
&gt; DEFINE GRID/x=xfine/y=yfine fine_grid
&gt; let xpts = xsequence(0*swh_grid+x[g=swh_grid])
&gt; let ypts = xsequence(0*swh_grid+y[g=swh_grid])
&gt; let datapts = xsequence(swh_grid)
&gt; let xscale=0.1
&gt; let yscale=0.1
&gt; let cutoff=2
&gt; let swh_smooth = scat2gridgauss_xy(xpts,ypts,datapts,x[g=fine_grid],y[g=fine_grid],xscale,yscale,cutoff,0)
&gt; list swh_smooth
&gt; 
&gt; wchich should do interpolation data, but it doesn't. The script follows up to the line with list swh_smooth and as reached as is iddle.
&gt; I think the line with scat2gridgauss_xy function failed. But I don't know the reason.
&gt; Why is that I don't know. I have very similar script which copes with cdf data and do it well.
&gt; But in this case previous approach failed. (When I try using txt data with flag bad=-1.)
&gt; I attach the data file.
&gt; 
&gt; 
&gt; Kind regards,
&gt; Szymon Roziewski
&gt; 
&gt; 
&gt; 
&gt; --
&gt; Z wyrazami szacunku,
&gt; Szymon Roziewski
&gt; 
&gt; 
&gt; 
&gt; --
&gt; Z wyrazami szacunku,
&gt; Szymon Roziewski
&gt; 

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00057" href="msg00057.html">Re: [ferret_users] Script crashed -- scat2gridgauss_xy</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00050" href="msg00050.html">[ferret_users] Script crashed -- scat2gridgauss_xy</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
<li><strong><a name="00053" href="msg00053.html">Re: [ferret_users] Script crashed -- scat2gridgauss_xy</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00053.html">Re: [ferret_users] Script crashed -- scat2gridgauss_xy</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00057.html">Re: [ferret_users] Script crashed -- scat2gridgauss_xy</a></strong>
</li>

</UL>
<center>[<a href="msg00053.html">Thread Prev</a>][<a href="msg00057.html">Thread Next</a>][<A HREF="threads.html#00055">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
