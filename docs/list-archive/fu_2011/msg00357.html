<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] fine&#45;resolution bathymetry for small regions -->
<!--X-From-R13: "Ivyyvnz E. Yrffyre" <Ivyyvnz.E.YrffyreNabnn.tbi> -->
<!--X-Date: Tue, 10 May 2011 05:48:35 &#45;0700 -->
<!--X-Message-Id: F6D52CDF&#45;776F&#45;49D1&#45;BA02&#45;7F1E7829E1E4@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 9CC10A74&#45;905A&#45;4B01&#45;9E80&#45;B9FCD6155EFE@noaa.gov -->
<!--X-Reference: 1305025320.2792.46.camel@oo -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] fine-resolution bathymetry for small regions</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00356.html">Thread Prev</a>][<a href="msg00358.html">Thread Next</a>][<A HREF="threads.html#00357">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] fine-resolution bathymetry for small regions</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;Paulo B. Oliveira&quot; &lt;<a href="mailto:pbo@DOMAIN.HIDDEN">pbo@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] fine-resolution bathymetry for small regions</strong></li>
<li><strong>From</strong>: <strong>&quot;William S. Kessler&quot; &lt;<a href="mailto:William.S.Kessler@DOMAIN.HIDDEN">William.S.Kessler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 10 May 2011 05:48:34 -0700</li>
<li>Cc: Ferret users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="mailto:1305025320.2792.46.camel@DOMAIN.HIDDEN"><a href="msg00356.html">1305025320.2792.46.camel@oo</a></a>&gt;</li>
<li>References: &lt;<a href="mailto:9CC10A74-905A-4B01-9E80-B9FCD6155EFE@DOMAIN.HIDDEN">9CC10A74-905A-4B01-9E80-B9FCD6155EFE@xxxxxxxx</a>&gt; &lt;<a href="mailto:1305025320.2792.46.camel@DOMAIN.HIDDEN"><a href="msg00356.html">1305025320.2792.46.camel@oo</a></a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>Thanks, Paulo. These products serve different purposes. GEBCO strives  
</tt><tt>for a uniform global product, while the marine-geo product I referred  
</tt><tt>to varies in resolution according to what is available. For regions  
</tt><tt>where side-scan sonar bathymetry exists, their grids provide  
</tt><tt>bathymetry at resolutions several times greater than 30 arc-seconds.  
</tt><tt>This can be useful in defining straits for fine-resolution models, or  
</tt><tt>for planning instrument deployments.
</tt><pre style="margin: 0em;">

</pre><tt>In any case, the script is an example of reading GMT-style files in  
</tt><tt>Ferret.
</tt><pre style="margin: 0em;">

Billy K

On 10 May 2011, at 4:02 AM, Paulo B. Oliveira wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Billy,

Thank you for sharing the info on fine-resolution bathymetry and
script.

Unfortunately my region of interest (W.Iberia) is not listed
specifically and the bathymetry provided is not the finest resolution
available.

</pre><tt>GEBCO (<a  rel="nofollow" href="http://www.gebco.net/data_and_products/">http://www.gebco.net/data_and_products/</a> 
</tt><tt>gridded_bathymetry_data/)
</tt><pre style="margin: 0em;">
provides a 30 arc-second grid which is, to my knowledge, the best
resolution available for the region.

Paulo
------------------------------------------------------------
On Mon, 2011-05-09 at 14:37 -0700, William S. Kessler wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Ferreters -

Here's a source of fine-resolution bathymetry, perhaps 10s of meters
horizontally in some areas. In any case, it is probably the finest
resolution available. Brief instructions below, then a Ferret script
to read the files.

These are GMT-format netcdf files with the extension *.grd; Ferret
will read and convert them using the attached script. However, the
native way to read them is with a program called grdcontour (a whole
</pre><tt>set of grd* routines are available on the web). But if you want to  
</tt><tt>use
</tt><pre style="margin: 0em;">
these files in Ferret, read on:

<a  rel="nofollow" href="http://www.marine-geo.org/tools/maps_grids.php">http://www.marine-geo.org/tools/maps_grids.php</a>

Pull down the &quot;Focus/Study Site&quot; menu. If you are lucky your region
will be listed specifically, otherwise pick &quot;World&quot;.

Enter the coordinates of your region, Click &quot;View Created Map&quot; .

You will get a map, and set of links to download the data. The
appearance of the map is an indication of the location of truly high-
resolution data (perhaps 10s of meters horizontal, from side-scan
sonar).

As far as I can tell, the most realistic choice is &quot;masked&quot; at the
same resolution as the map. But experiment with the options and write
back, please.
</pre><tt>This will produce a file with a long numerical name (GMT format =  
</tt><tt>*.grd)
</tt><pre style="margin: 0em;">

</pre><tt>Then bring this file into Ferret and rewrite using the attached  
</tt><tt>script
</tt><pre style="margin: 0em;">
(with Ansley's help).

In Ferret:
yes? go grd_to_netcdf_convert.jnlb 1304975255453   ! the argument is
an example of the filename

Billy K

------------------------
! read and convert grd format files to Ferret-usable netcdf
! read-write-read-write to fix problem of reversing latitudes:
</pre><tt>! the 1-d array Z contains the 2-d grid listed in north-to-south  
</tt><tt>order
</tt><pre style="margin: 0em;">
! (despite the apparent south-to-north order of Y_RANGE):
! first ($dimx) values are W-E along the northern edge
! next ($dimx) values are 1 gridpoint south of the northern edge
! ...
! last ($dimx) values are along the southern edge

! arg1 = grd file name

use $1.grd
set var/bad=nan 'Z'

! define the lat/lon grid using the file variables
def sym dimx `dimension[i=1]`
def sym dimy `dimension[i=2]`
define axis/x=`x_range[i=1]`:`x_range[i=2]`/npoints=($dimx)/unit=lon
xlon
define axis/y=`y_range[i=1]`:`y_range[i=2]`/npoints=($dimy)/unit=lat
ylat

</pre><tt>! RESHAPE the input 1-d vector Z to a 2-d grid (but reversed south- 
</tt><tt>to-
</tt><pre style="margin: 0em;">
north)
let zz = reshape('Z',x[gx=xlon]+y[gy=ylat])

save/file=$1_a.cdf zz     ! write an intermediate file

! read it back
can var zz
use/order=x-y $1_a.cdf             ! per Ansley, reverse the order
let bathy = zz[gx=xlon,gy=ylat]    ! regrid on correct lat/lon axis

save/file=$1.cdf bathy

sp rm $1_a.cdf              ! remove the intermediate file
--------------------------
</pre></blockquote><pre style="margin: 0em;">


</pre></blockquote><pre style="margin: 0em;">

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
William S. Kessler
NOAA / Pacific Marine Environmental Laboratory
7600 Sand Point Way NE
Seattle WA 98115 USA

william.s.kessler@xxxxxxxx
Tel: 206-526-6221
Fax: 206-526-6744
Web: <a  rel="nofollow" href="http://www.pmel.noaa.gov/people/kessler">http://www.pmel.noaa.gov/people/kessler</a>


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00354" href="msg00354.html">[ferret_users] fine-resolution bathymetry for small regions</a></strong>
<ul><li><em>From:</em> William S. Kessler</li></ul></li>
<li><strong><a name="00356" href="msg00356.html">Re: [ferret_users] fine-resolution bathymetry for small regions</a></strong>
<ul><li><em>From:</em> Paulo B. Oliveira</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00356.html">Re: [ferret_users] fine-resolution bathymetry for small regions</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00358.html">[ferret_users] ferret memory allocation problem</a></strong>
</li>

</UL>
<center>[<a href="msg00356.html">Thread Prev</a>][<a href="msg00358.html">Thread Next</a>][<A HREF="threads.html#00357">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
