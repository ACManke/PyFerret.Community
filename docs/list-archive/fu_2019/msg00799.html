<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Function MOD : strange behavior -->
<!--X-From-R13: Dlb Thehr <shehrNunjnvv.rqh> -->
<!--X-Date: Wed, 26 Aug 2020 08:15:10 &#45;0700 -->
<!--X-Message-Id: CAEwQpa+rY8FWYPCWR3mZjyKJpRNouOz_VVNpDoC8qNmScffCQw@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 2B520447&#45;DD3E&#45;4F65&#45;8173&#45;94C408D4A591@lsce.ipsl.fr -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Function MOD : strange behavior</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00797.html">Thread Prev</a>][<a href="msg00801.html">Thread Next</a>][<A HREF="threads.html#00799">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Function MOD : strange behavior</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Olivier Marti &lt;<a href="mailto:olivier.marti@DOMAIN.HIDDEN">olivier.marti@xxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Function MOD : strange behavior</strong></li>
<li><strong>From</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 27 Aug 2020 00:14:51 +0900</li>
<li>Arc-authentication-results: i=4; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=&quot;t3Ch8/dd&quot;;       arc=pass (i=2 dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.160.199 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=&quot;t3Ch8/dd&quot;;       arc=pass (i=2 dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.160.199 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=&quot;t3Ch8/dd&quot;;       arc=pass (i=1 spf=pass spfdomain=hawaii.edu dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=softfail (google.com: domain of transitioning <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> does not designate 65.153.203.173 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=&quot;t3Ch8/dd&quot;;       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-message-signature: i=4; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:sender:dkim-signature;        bh=we6gMozvO8kbottV7KVer0f/qnpISOn4QxAZhYM3/SI=;        b=dYbdfXTKHAiI+ioeCV4JeV2UO1uMXzCqNyIgx3X6x7yUWGXe8znuiG46AzpyaXl18B         WF0GTnSYO+6EpfgVw5d85faobQr4FkC0o3t9Z5v5d+uf5BipjgogpRdvkhR4lCJHbJFd         EtQRzMI7swKyQiocH6CPSKus3zkE90rQFfi+S2oCpT8S4x/2j6kqghfgCx1/JL6j1cd5         ieafI+oErogzv2Ih8AmsFOdhVu/EDZHUzg8gtEpGikUVGjEz6bRNlVB1LncPkVw44hvi         3dQXQD0eTzWWEcihpRvirEFOP02rL1IsAPH/F3QIqJ+Q0iGDBCiRDKrDSU8hEIHp96IH         0jpg==</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=we6gMozvO8kbottV7KVer0f/qnpISOn4QxAZhYM3/SI=;        b=cqw24K5O4nv0K+q9XBnO5SQEezUmEVypPWMiEDV3q4nNtK0O4ApIS485QkZcLOo3zs         qppLQk4CWX0xnD6FnQ9EOVzLFDn9e40CZO0u/1jBitAk62KBlQzauKz+GtNw+RzGHpPM         Ws6uQgxKc1aXc8K7ACniBcE4FXbAkwxJRX1kGz2IBEzyYyLCNd2QvL4VcyEuwVn1SQe3         baQkdFkrza8rTLsLd82YcDbid75rKG6gXqm/CYHKqK0EpBgqdBuJR4hxMVXPpTvZSxKl         sclUhiQiASDxbwvpFFMfh4yAbE0RhVaxU2RRt55QazNIooznWAg389mEBxtZz/XFhIBM         L2NQ==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=we6gMozvO8kbottV7KVer0f/qnpISOn4QxAZhYM3/SI=;        b=nr6qmy5M8XjUdsRxx5nWXAK4KxssHliHPnbWpOS/yxgb/2cfOLYsAEU9xd5lrXvnCS         aJ0HLVsFOnCO2UDWfeAr5jIYdDfmtMek7Ke6/pMtHqI2kqpgb1HbKyhPo2CUFGrmZhwt         bZXyqYbMGQIFMA9COrfUFpMIOqvrKHWhZ+nwOi1OORtweWoJhYWYXWlP3Q7q8ye36aUY         PzoM+s04RkpKIRImvBnyIKlgz9LFE2JwtMhFb6Kz6CJxSZboPc+GVdxQtxb8eZTs2B7n         mEo04fHRS6nFxuvGL7SKHtFjAcw99ylwjTNcyjRx4OsH0T0EshVd8QGUNABC+FPJ7uWJ         zYCw==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=we6gMozvO8kbottV7KVer0f/qnpISOn4QxAZhYM3/SI=;        b=EjT4hV5kCEhlkLxoy2/6CfqZuTaF90/d1dAyefzX5zSSfPn/vz5Goxnbyy4sKmQEdE         InmgfEwIJXtCWQZsW51Dpn7NzsN7rgGUa0xv9iy/RQ8dMegzJbl0hwClP9gQ7m+KrfEb         xKzSJeHLC2H9TLnAdEEX/8n2Ym46DIkdx4ezXkHOZ2KmOpbWPU8tDdf0gQx5FMPAbknD         ripeAb7Md4pFpNEQSctvHk7F8NpmW7Xqn2QxRIGdY2PIqMt+ARpts40l+yGvJKvGzc7J         KxW1D0V/qgkCb9+C67HQqLKt+wFB7L2Cp3rFmLWf0LhzwPY5e6RYQXrF5XeTiEdaAuA0         KWwQ==</li>
<li>Arc-seal: i=4; a=rsa-sha256; t=1598454909; cv=pass;        d=google.com; s=arc-20160816;        b=h8q1shKkYOPW+K93issra0lRMifMrT6SQwy+LMH7IQNT+ev9bOkF/3fdgEtl6D9rV8         HzACqAB23YTLqhS1HPaL8FpC/z0FxeXPpDoR1dg6X8DawAxlWZ/a/Mf1dRWiSyywHsZ1         HkaEWfmOmwzqslZsipkfUdfjHvbAUU9Hnaxf40iUaeAcGiG0GWMo4jWJmfhTv2yMwop4         CvIHhOkl6ttjoeP6EIRb3BCl6d6mXZFVHa5jiW4oy42POf7LDwkcTJ9rfeRL8+Dv9TY9         7ERD70AwDjXpSbiUzSExbA8YB7FHrMr9/mnlWTO/Wd9qAKQz9rHtN4UQ2Kkye6agj3Yv         wuuA==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1598454908; cv=pass;        d=google.com; s=arc-20160816;        b=PcH2DxDt0LCtleADnkQ4pFujE3ig5tjBgBkH+Ln6YPMZeBQ5uFKhlxRZaOtKSdcqSC         KPrFBDOvcj4StrWC4FdKfdlLIHDwyq4iO6boa6ldcNSQmE5qKvXO7jhYljHJFHYzXi3h         xGOEt54TZMsYg+OENARfTZjA7q86RokTzisGmXCUNeHIglR7/Q2PTsZRVD6T4GbCWP7P         t0mrfbiTVYYLYFP/m0CMGVA3jogYSROmKIi46RBACsOmh/GJUszYg5jtZjn5Whd0cfHk         S9xpEV3H0aZTYVmJT8op/KiBXYeZ43UewmKhmsNPZfzotUzQdi5FwOQMST4Q0bO8nbIL         ygsw==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1598454904; cv=pass;        d=google.com; s=arc-20160816;        b=DYQqZ3t8LAPyf6IzeEJhRoMGwkfT3n0uqf8sIc89Z5lEmcZstwqZR3LE0ejXtGWtUF         bCQzPRQYk9IEmi5uJksPoosWKOks1KbC/HxS1BdlzsJyJG2gjXXg56iYwL7EwjVpLvxf         GqpCRmQCRA2/Iid+Fo95lE+/2vqAhLM/ajEnkBjN5gnPIrzkh+DlJNi4iqSHdKLkMOLh         hUU68/ED7EV0ixEzxa794zYWq6p87bY9wKVudUEaYpXkpF9UbYknup/rZTXVt09KpuqU         FL8cNzFH70H3aa7b51NSco+ZIjlnLLQEX/2bLXE6opx8D7vvKaFD36cvwfqpheP8wymr         gtdA==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1598454903; cv=none;        d=google.com; s=arc-20160816;        b=enEswOF9vaP6lX+PaN+kMN6KAcpdwxMtHw8Xh+a8vw6MUxYj1NyxGyrG/5g7ywzyTD         IF/DN88UT/g151/Evpze5mhSURGaempXfPExeL33FutHu9EYOjc5w2bznUwZZJ/8TrUr         UFm5JZMgmZg2TABbapyP6wKZZcJVc08DsQEsBU34jbXOP+bHPl/QGJKT7gixREqmAwdw         Y3YizY4YcvH+AYoqjg1BoPoMMw8YRfy/bzpeSGs3OZDg3Cn2BRddhQCpq9egl2xrM7jq         SRyT4gnKcdquEn+M6DXodhK61y7fO9C1GeLHswtt5GXxVgT8o9XwTtGCJU7FhBCHYpLf         agaQ==</li>
<li>Cc: &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:mime-version:references:in-reply-to:from:date:subject:to:cc         :message-id:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive;        bh=we6gMozvO8kbottV7KVer0f/qnpISOn4QxAZhYM3/SI=;        b=j9IlmmoIHYrKckvCF4yUZfI8IHEOQ6sYRp1ldRadQ7qakxn8hc451VTIWfNI0MEqNv         8YuvnIfImkrEmUV8G/vvRRdwlp4IHQkdqNBP+NbZe9uc7xwngxR5QTP0H/QQeOlLQQUx         yDKrR71apLGBqAFHkBirOs60aAIigiySIZsAzlUj/XSlJwP2ON4wIhGD/NTJkXIfmYF7         9uVK9tkUzyVFNYR1s7FPCglvvtPne3Wf6uB4hmHdyFewDIaCd5lztxVaee8pexSAdFAt         PzLCX6P3r9DHdaEUDbVaSUF5yX0lVNfI+nSHojnJWZSZQDP80PpSX9uNMPC6+EWN29UI         C63w==</li>
<li>In-reply-to: &lt;<a href="msg00797.html">2B520447-DD3E-4F65-8173-94C408D4A591@lsce.ipsl.fr</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00797.html">2B520447-DD3E-4F65-8173-94C408D4A591@lsce.ipsl.fr</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div>Hi&#xA0;Olivier,</div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Wed, Aug 26, 2020 at 5:45 PM Olivier Marti &lt;<a rel="nofollow" href="mailto:olivier.marti@xxxxxxxxxxxx">olivier.marti@xxxxxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div style="overflow-wrap: break-word;"><div><br></div><div><div><font face="Courier">yes? LIST MOD(lon &#xA0; &#xA0;,360), MOD(lon-360,360), MOD(lon-720,360), MOD(lon+360,360)</font></div><div>[ . . . ]</div><div><font face="Courier">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; EX#1 &#xA0; EX#2 &#xA0; EX#3 &#xA0; EX#4</font></div><div><font face="Courier">1 &#xA0; &#xA0;/ &#xA0;1: &#xA0; 36.0 -324.0 -324.0 &#xA0; 36.0</font></div><div><br></div></div></div></blockquote><div>[ . . . ]&#xA0;</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div style="overflow-wrap: break-word;"><div><div></div></div><div><font face="Courier"><br></font></div><div>The result of <font face="Courier">EX#2</font> and <font face="Courier">EX#3</font> puzzles me. From what I remember from my math studies, the <font face="Courier">MOD</font> function should return a result in the interval [0,360[. All <font face="Courier">EX#s</font> should print the same result than <font face="Courier">EX#1</font> and <font face="Courier">EX#4.</font></div><div><br></div><div>Is this a bug or a feature ? If this is a feature, it should be at last documented. And another <font face="Courier">MOD</font> function with the &quot;correct&quot; behaviour would be strongly appreciated ;-)</div></div></blockquote><div><br></div><div>This Q&amp;A session</div><div><br></div><div><a rel="nofollow" href="https://stackoverflow.com/questions/11720656/modulo-operation-with-negative-numbers">https://stackoverflow.com/questions/11720656/modulo-operation-with-negative-numbers</a></div><div><br></div><div>explains why Ferret&#39;s MOD is the &quot;correct&quot; one.</div><div><br></div><div><font face="monospace">(m div n) * n&#xA0;+ (m mod n) == m</font></div><div><font face="monospace">&#xA0;</font><br></div><div>shall be an identity for any integers m and n.&#xA0; Therefore,</div><div><br></div><div><font face="monospace">(m mod n) = m - (m div n) * n</font></div><div><font face="monospace">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; = (-324) - ( -324 div 360) * 360</font></div><div><font face="monospace">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; = -324 - 0 * 360</font></div><div><font face="monospace">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; = -324</font></div><div><br></div><div>*Your* &quot;correct&quot; mod is found in the form of the MODULO function in Fortran.&#xA0; I don&#39;t know whether Ferret implements it or not.</div><div><br></div><div>To visualize what&#39;s going on, imaging an axis with integer labels and divide it into segments with a length of 360.</div><div><br></div><div>The MODULO(m, 360) function you want measures the distance of m from the nearest left edge of the segment. In contrast, the MOD(m, 360) function finds a vector from the nearest edge closer to 0, to m.&#xA0; The vector can be leftward (negative) or rightward (positive).</div><div><br></div><div>By the way, for the above identity to hold for the MODULO function, we would have to redefine</div><div><br></div><div><font face="monospace">-324 div 360 = -1</font></div><div><br></div><div>This kind of makes sense.&#xA0; Because MODULO is one-sided (always measures from the left edge of the interval), DIV should be one-sided, too, to be consistent.</div><div><br></div><div>Regards,</div><div>Ryo</div><div><br></div></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00801" href="msg00801.html">Re: [ferret_users] Function MOD : strange behavior</a></strong>
<ul><li><em>From:</em> Olivier Marti</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00797" href="msg00797.html">[ferret_users] Function MOD : strange behavior</a></strong>
<ul><li><em>From:</em> Olivier Marti</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00797.html">[ferret_users] Function MOD : strange behavior</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00801.html">Re: [ferret_users] Function MOD : strange behavior</a></strong>
</li>

</UL>
<center>[<a href="msg00797.html">Thread Prev</a>][<a href="msg00801.html">Thread Next</a>][<A HREF="threads.html#00799">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
