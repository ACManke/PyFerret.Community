<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Problems with netcdf output and zaxreplace -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Thu, 4 Jun 2020 11:06:02 &#45;0700 -->
<!--X-Message-Id: 8ae2f067&#45;bf28&#45;39ab&#45;7acc&#45;b666c66801fe@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1727fed6cc0.g.graffino@tim.it -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Problems with netcdf output and zaxreplace</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00718.html">Thread Prev</a>][<a href="msg00618.html">Thread Next</a>][<A HREF="threads.html#00719">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Problems with netcdf output and zaxreplace</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Problems with netcdf output and zaxreplace</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 4 Jun 2020 11:05:56 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=a8hRjHPx;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=a8hRjHPx;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :dkim-signature;        bh=nzVPbMREsXdaEANX6KgpBQYLdTJMOOEvk2spoClAnsc=;        b=iptd87ZlL6O5yKzCQ6LyriOXgYFePV6m/0q+W4oifQ1QlD1SDM83N+VAIogRsqEhHd         eLAecgMuST5Ai5GmUu3LPKRnQuXp5cuhOjhTiuZTARZGva35oQjjpruwl9elcHawIImv         tb1JzzBY+MGWCT9gT01NmpGZx40kNEt/bCGqdkeThaBzbciTsuzRPF/7peGppxyDAaxD         7Qi/PIl0WsKPn66bKmpmxg0UVNwpatHDl3n9kRUUedLFTdOP5hnSE3biA2uyPW6zAYBj         WiI/nt1IaJSyErGd5LmPd/glv2vv9Zlhz7hKTQ53zolwjc6Bv5uVL9tVSeS+h5qmPRhS         b09w==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :dkim-signature;        bh=nzVPbMREsXdaEANX6KgpBQYLdTJMOOEvk2spoClAnsc=;        b=LXY9hvIXFBfJJ5Tn1Lp0k6L+ORi5FwjQPWlAiA+9UBA6Wnytyx8PMfFX0OD7zOle86         vB5FTSK+hEsx4gdGdsSZG9b5w31LhYtgXF/wC5/+v7WKxC1vrotoxnjF7prlgB1Mmlbq         7akg1OHNtsSTWbXceIInGCEkOK+qdDfcdav7BRduaIW2t/eUGCP49RKXONRQQxU3ONsO         LU6MOFva4yIkmaaTwWLjd9EXLHuWwlISzdRfpFpZnT7ngUx+1g996AugFTDDWWWlzeoz         rZXeM75aeXTfp90ZX7hVDnPUpjGMdCkiIMhVCNIW+ogEX9SsG99BqYuAvtlzfBY28w1A         5+/w==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1591293961; cv=pass;        d=google.com; s=arc-20160816;        b=IJCQN8hs2asGS7PNsZ+KQAM/5x+yKeVNqrDKQhi9YeGqpm9tSWh9VIERVp7VkYen+W         H97fOyYoOEZpZQrBumuoYUCpyWeTtkeEU7b9lC3gYJB2UtxRdceqgyQp5rHlDrabPCB+         Mg4cp7ds+8lbOxOPuXQbQVA3z4QK/hPL5V2YYGyFX335lxtZUiG4Chtm7vGq+KXe7Gu4         FSKyzxNCtV2+TXPJBTeldeuE+iLrEzzNAlO+zBpq+KA6qxUV5CiUdibssJLVi2puPuKM         +GySt7KXil0EN2Cz2NVV2qcAnfL8Kfs4Ru62z3HhCGxDajWk9I6vrbiGXCHwdP7euezJ         0WzA==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1591293960; cv=none;        d=google.com; s=arc-20160816;        b=ivNKB7GInHQolOECRv7uFAptyiH5k+8kgXKhbxY5Q8fBBSC0mz8tCkrClVROulxq5O         5F6YElcsIFhf3LSvuoQC4b3xYZE0RT2w4A8TGNvP0QFvDi4kRagxh/yAp6iI3ODLBUjZ         kHNWUA7/ztHLuARY/nZdosKGFjzYCl0YrV2ouC1kE1EPxfEh1zRQmXfvuYUxjQOta4t5         HbhqYJodxs7WRIkNObXPjcZQldkSsqB07ZlN6QBNwsJbjvPXICXHxvLf3iorfqqnmvS9         FmQ4pM3R1XddpsZ2Flsu//U8KKLtmgtI5GZKbNt26cBpVlqT4WVI/fhzUqyGBisimjmv         kvXA==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-transfer-encoding:content-language         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=nzVPbMREsXdaEANX6KgpBQYLdTJMOOEvk2spoClAnsc=;        b=DYY1Mya8/rvsXxrqZIz6KwMZ427WULxjRm0mTM8fKiimjtHSDgs0eq24Anl9OD9ubK         TAhvVjnqQn4GnOJ2twOUV11bJO1H+jFml7g/12e5oeXjRe6BYQ2F+qwkFjfr5sMTPq4a         Q2A0VBrzYOOxrswal+/BwX4mPpYFlC3CioGSp0woKUsbg/d59kznO6Yusl3BK4tTJugq         Bzyd7ansXYms0t2DpcflJ0Thl2xLu2TFPRaOWSETwv46S6KToF3PZDI9cosjDQYjegN0         HbVZwOQoIoBjlPMWTZ8t//KykOU86LL9ACTw0mXexKeFqf7HaoxIMNK1LJ77Xio8HQmk         64Gw==</li>
<li>In-reply-to: &lt;<a href="msg00718.html">1727fed6cc0.g.graffino@tim.it</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00718.html">1727fed6cc0.g.graffino@tim.it</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101 Thunderbird/68.8.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>Try making a plot of the variable you've defined.&#xA0; That will load it 
</tt><tt>into memory, doing all the transformations.
</tt><pre style="margin: 0em;">

&#xA0;&#xA0; shade stc_trans_rho_1025



On 6/4/2020 8:22 AM, Giorgio Graffino wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Thanks Ansley for your suggestions.

</pre><tt>Unfortunately I'm running Ferret on a cluster, because data are too 
</tt><tt>big to be saved on my local computer, so I don't know whether I miht 
</tt><tt>install a newer version of Ferret by myself. I'll ask to my cluster 
</tt><tt>support. Meanwhile, I tried to increase the amount of allocated&#xA0;memory 
</tt><tt>and removed all subsetting, but the process got killed by the system.
</tt><pre style="margin: 0em;">

</pre><tt>Sorry, the script I sent also included other operations. I'm resuming 
</tt><tt>here the most relevant lines:
</tt><pre style="margin: 0em;">

!----- MERIDIONAL TRANSPORT ON DENSITY ------------
define axis/z=1020:1030:0.5/unit=&quot;density&quot;/depth dens_lev
</pre><tt>let ty_trans_pacific_rho = 
</tt><tt>zaxreplace(ty_trans_pacific,dens[g=ty_trans],z[gz=dens_lev])
</tt><pre style="margin: 0em;">

!--- COMPUTE TIME AVERAGE ON 25 SIGMA LEVEL -------
let ty_trans_pacific_rho_time = ty_trans_pacific_rho[l=@ave]
let ty_trans_pacific_rho_lats = ty_trans_pacific_rho_time[y=35n:35s]
let ty_trans_pacific_rho_lons = ty_trans_pacific_rho_lats[x=110e:70w]
let ty_trans_pacific_rho_1025 = ty_trans_pacific_rho_lons[z=1025]

!---------- RESHAPE OUTPUT FIELDS -----------------
</pre><tt>let/title=&quot;Meridional transport (Sv) on the 1025 kg/m3 isopycnal 
</tt><tt>surface&quot; stc_trans_rho_1025 = 
</tt><tt>reshape(ty_trans_pacific_rho_1025,x[gx=ty_trans]+y[gy=ty_trans])
</tt><pre style="margin: 0em;">

!------------ OUTPUT FILE -------------------------
</pre><tt>save/file=STC_sigma_1PctTo2X_($model)_pacific.nc/clobber 
</tt><tt>stc_trans_rho_1025
</tt><pre style="margin: 0em;">

</pre><tt>The error can't be related to append, because I'm saving only one 
</tt><tt>variable into that file.&#xA0; Other variables are saved into another file, 
</tt><tt>but I have no problem with that.
</tt><pre style="margin: 0em;">

Cheers,
Giorgio

    ----Messaggio originale----
    Da: ansley.b.manke@xxxxxxxx
    Data: 4-giu-2020 3.11
    A: &lt;ferret_users@xxxxxxxx&gt;
    Ogg: Re: [ferret_users] Problems with netcdf output and zaxreplace

    Hi Giorgio,
    When you can, try to update to a newer version of pyferret or ferret.
    Starting with Ferret v7.2
    &lt;<a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/release_notes/version-7-2-release-notes">https://ferret.pmel.noaa.gov/Ferret/documentation/release_notes/version-7-2-release-notes</a>&gt;,

    there is much better memory management.&#xA0; With your version of
    Ferret you
    can try &quot;set memory/size=&quot;&#xA0; to give it a larger&#xA0; working memory
    buffer.

    For the errors you're seeing when trying to append to a file, the
    thing
    to know is that the grid of the variable you are appending needs to
    match what is in the file, except for time when appending in the time
    direction.&#xA0; I can't quite see what is happening with the different
    grids
    and datasets in your script. What I would do to see what is
    happening,
    is at the point in your script where the error occurs, instead write
    that variable to a second file, and then compare the new file with
    the
    one you were trying to append to.&#xA0; The error message is saying
    that the
    latitude coordinates don't match.

    Ansley

    On 6/3/2020 10:51 AM, Giorgio Graffino wrote:
    &gt; Thanks Ashley about those useful tips.
    &gt;
    &gt; I'm now adapting my zaxreplace script for other applications (see
    &gt; attached), but I have again issues on saving the output. I think
    the
    &gt; problem is that the grid is too large for some models, and Ferret
    &gt; complains by saying
    &gt;
    &gt; **ERROR: request exceeds memory setting: A negative number of words
    &gt; were requested.
    &gt; *** NOTE: The current grid is most likely too large
    &gt;
    &gt; So I'm subsetting the variable to select only the region I need,
    and
    &gt; the computation works. But when I'm saving the generated field into
    &gt; netcdf at line 52, Ferret comes out with the good ol' error
    &gt;
    &gt; **TMAP ERR: error in line definition
    &gt; &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;file coords dont match variable coords on axis
    LAT77_203
    &gt;
    &gt; It doesn't change whether I'm using RESHAPE or not. I also tried to
    &gt; adapt my RESHAPE call according to what I read here
    &gt;
    (<a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS</a>),

    &gt; but with no luck. Can you please help me again about this?
    &gt;
    &gt; Cheers,
    &gt; Giorgio
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; ----Messaggio originale----
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; Da: ansley.b.manke@xxxxxxxx
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; Data: 20-mag-2020 18.52
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; A: &quot;Giorgio Graffino&quot;&lt;g.graffino@xxxxxx&gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; Cc: &lt;ferret_users@xxxxxxxx&gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; Ogg: Re: [ferret_users] Problems with netcdf output and
    zaxreplace
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; Hi,
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; You could pass into the script the number of models
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; &gt; ferret -script scriptname.jnl 7
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; The script then does a repeat loop that would start like this.
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; let nmodel = ($1)
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; repeat/range=1:($1)/name=r (\
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; use /home/data/model`r`.nc;\
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; ...
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; There are details on the grave-accent evaluation
    &gt;
    &lt;<a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/EMBEDDED-XPRESSIONS#_VPINDEXENTRY_562">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/EMBEDDED-XPRESSIONS#_VPINDEXENTRY_562</a>&gt;that

    &gt;&#xA0;&#xA0;&#xA0;&#xA0; give you some flexibility.&#xA0; For instance if the models are
    named
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; model01.nc, model02.nc, ...&#xA0; use the &quot;precision&quot; specifier
    to ask
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; for the value to be replaced with zero-filled numbers, here
    2-digits.
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; let nmodel = ($1)
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; repeat/range=1:`nmodel`/name=r (\
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0;&#xA0; use /home/data/model`r,p=z2`.nc;
    &gt;
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; Or, you could use a unix foreach loop and write your script to
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; operate on just one model if that makes sense for what you are
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; doing. Here I've made a script myscript.jnl with:
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; ! myscript.jnl
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; echo ($1)
    &gt;
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; This is csh, other shells will have other syntax.
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; /home/users/ansley&gt; set flist = 'model_run_7.nc
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; ocean_model_run5.nc <a  rel="nofollow" href="http://address/climate.nc">http://address/climate.nc</a>'
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; /home/users/ansley&gt; foreach fname ($flist)
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; foreach? ferret -script myscript.jnl $fname
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; foreach? end
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; model_run_7.nc
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; ocean_model_run5.nc
    &gt; <a  rel="nofollow" href="http://address/data/climate.nc">http://address/data/climate.nc</a>
    &gt;
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; On 5/18/2020 10:47 AM, Giorgio Graffino wrote:
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; Hi Ashley,
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; thanks for your suggestion.
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; I preferred to implement the other method because it
    involved a
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; single Ferret call, but I haven't thought about passing all
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; variables in that way. You are suggesting something like
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; ferret -script scriptname.jnl model1 model2 model3
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; which would be great to have, but I should find a way to loop
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; across all models from inside the jnl script. Now my jnl
    script
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; includes
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; define symbol model = ($01)
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; to read the argument, because I'm parsing only one argument
    at a
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; time. How can I loop over all models from inside the jnl
    script?
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; Cheers,
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0; Giorgio
    &gt;&gt;
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ----Messaggio originale----
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Da: ansley.b.manke@xxxxxxxx
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Data: 12-mag-2020 19.55
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; A: &lt;ferret_users@xxxxxxxx&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Ogg: Re: [ferret_users] Problems with netcdf output and
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; zaxreplace
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Hi Giorgio,
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Another method for sending Ferret/PyFerret a set of
    commands
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; is to use the -script option on startup.
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &gt; pyferret -script my_script.jnl [arguments]
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; This is generally more flexible than piping commands.&#xA0; The
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; startup option -batch for Ferret or -nodisplay for
    PyFerret
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; are also useful when you don't want to have graphics
    windows
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; display.&#xA0; Note that -script must appear last among command
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; line switches so that the script arguments will be parsed
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; correctly.
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Unix command-line switches
    &gt;&gt;
    &lt;<a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/introduction/GETTING-STARTED#_VPID_8">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/introduction/GETTING-STARTED#_VPID_8</a>&gt;

    &gt;&gt;
    &gt;&gt;
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; On 5/9/2020 3:19 AM, Giorgio Graffino wrote:
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Hi Ryo,
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; thanks to your &quot;quote&quot; suggestion I could successfully
    run
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; my bash script.
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Cheers,
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Giorgio
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ----Messaggio originale----
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Da: furue@xxxxxxxxxx
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Data: 28-apr-2020 14.28
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; A: &quot;Giorgio Graffino&quot; &lt;g.graffino@xxxxxx&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Cc: &quot;Ferret&quot; &lt;ferret_users@xxxxxxxx&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Ogg: Re: [ferret_users] Problems with netcdf
    output and
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; zaxreplace
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Hi Giorgio,
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; On Tue, Apr 28, 2020 at 7:09 PM Giorgio Graffino &lt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; g.graffino@xxxxxx &lt;invalidurl.gif&gt;&gt; wrote:
    &gt;&gt;&gt;
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; !-&gt; REPEAT: I=1
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; **ERROR: command syntax: II = ???
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; define symbol ii
    &gt;&gt;&gt;
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Compare this line with the one in the original shell
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; script:
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ferret &lt;&lt; STOP
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; . . .
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; define symbol ii `i`
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; . . .
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; STOP
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Where did `i`&#xA0; go?
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; In the shell script as well as in the ferret
    script, the
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; backquote construct is evaluated.&#xA0; In the above shell
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; script, the shell tries to run a command named
    &quot;i&quot;.&#xA0; It
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; fails and is replaced with an empty string. I
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; suppose&#xA0;you saw this error message on your screen
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; . . . i: command not found
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; To prevent the shell from interpreting the backquote
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; construct, you &quot;quote&quot; the here-document by
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ferret &lt;&lt;'STOP'
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; . . .
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; STOP
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Ryo
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; --------------------
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; To see what's going on, run this kind of test
    shell script
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; echo date
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; echo `date`
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; echo &quot;abc `date` def&quot;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; echo 'abc `date` def'
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; cat &lt;&lt;EOF
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; date
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; `date`
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; EOF
    &gt;&gt;&gt;
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; cat &lt;&lt;'EOF'
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; date
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; `date`
    &gt;&gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; EOF
    &gt;&gt;&gt;
    &gt;&gt;&gt;
    &gt;&gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; --
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Ansley Manke
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Science Data Integration Group
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; NOAA Pacific Marine Environmental Laboratory
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 7600 Sand Point Way NE
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Seattle WA 98115
    &gt;&gt;
    &gt;&gt;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; I am currently teleworking and am available Tue-Wed-Thu.
    &gt;&gt;
    &gt;&gt;
    &gt;&gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; --
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; Ansley Manke
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; Science Data Integration Group
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; NOAA Pacific Marine Environmental Laboratory
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; 7600 Sand Point Way NE
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; Seattle WA 98115
    &gt;
    &gt;&#xA0;&#xA0;&#xA0;&#xA0; I am currently teleworking and am available Tue-Wed-Thu.
    &gt;
    &gt;
    &gt;

</pre><tt>    -- 
</tt><tt>    Ansley Manke
</tt><pre style="margin: 0em;">
    Science Data Integration Group
    NOAA Pacific Marine Environmental Laboratory
    7600 Sand Point Way NE
    Seattle WA 98115

    I am currently teleworking and am available Tue-Wed-Thu.



</pre></blockquote><pre style="margin: 0em;">

--
Ansley Manke
Science Data Integration Group
NOAA Pacific Marine Environmental Laboratory
7600 Sand Point Way NE
Seattle WA 98115

I am currently teleworking and am available Tue-Wed-Thu.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00718" href="msg00718.html">Re: [ferret_users] Problems with netcdf output and zaxreplace</a></strong>
<ul><li><em>From:</em> Giorgio Graffino</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00718.html">Re: [ferret_users] Problems with netcdf output and zaxreplace</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00618.html">[ferret_users] install pyferret7.5 on mac high sierra</a></strong>
</li>

</UL>
<center>[<a href="msg00718.html">Thread Prev</a>][<a href="msg00618.html">Thread Next</a>][<A HREF="threads.html#00719">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
