<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Adding non&#45;consecutive levels containing missing values -->
<!--X-From-R13: Dlb Thehr <shehrNunjnvv.rqh> -->
<!--X-Date: Wed, 26 Feb 2020 18:13:57 &#45;0800 -->
<!--X-Message-Id: CAEwQpaKfdcb+Be2pS+ENm2W5OfXgQvFLBSHxXNb+6USZZo2Y6g@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: d95d2f78&#45;5a1d&#45;2e10&#45;3008&#45;e7698b694f8f.ref@yahoo.it -->
<!--X-Reference: d95d2f78&#45;5a1d&#45;2e10&#45;3008&#45;e7698b694f8f@yahoo.it -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Adding non-consecutive levels containing missing values</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00548.html">Thread Prev</a>][<a href="msg00551.html">Thread Next</a>][<A HREF="threads.html#00550">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Adding non-consecutive levels containing missing values</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;Fabio B.&quot; &lt;<a href="mailto:xxtraloud@DOMAIN.HIDDEN">xxtraloud@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Adding non-consecutive levels containing missing values</strong></li>
<li><strong>From</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 27 Feb 2020 11:13:02 +0900</li>
<li>Arc-authentication-results: i=4; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=fWYCIv5L;       arc=pass (i=2 dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.222.198 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=fWYCIv5L;       arc=pass (i=2 dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.222.198 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=fWYCIv5L;       arc=pass (i=1 spf=pass spfdomain=hawaii.edu dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=softfail (google.com: domain of transitioning <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> does not designate 65.153.203.175 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=fWYCIv5L;       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-message-signature: i=4; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:sender:dkim-signature;        bh=BbKKE2+j2PgVpyRg5BuqW3gzGAAzhdIeshYO8Zt6RhA=;        b=wuxG9DO+1Ke1QE9mhwAmssr2749e7pwr9H96HexWgBSAF1/hEGoO4MBB7m0DIaP3Tr         9d77wsz3gTd4HWvRJFEg52SEOrea8qCZz6DR7mjUyMjMTiLMhOBe3oPPA7FWiqxkijmM         UCbN6vfcuOnxtJ9TbaxxwM9gKXzPed2BsacyG7Bj/rDHE5b+sXrE1ADKY9SYK140O+aW         fEvCLDup6rO3/MZpJ4m5dDZrT9E+6pxNGD592IKeE+vXx0ASi6TygpQQh8If70g35KTg         mrBEn0Yv1sVRCMkWNjRvi+v1IVbHJ46UTYUO1al9/12e6PtkiHaD5RGd/6LEEhoF46+x         O2SA==</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=BbKKE2+j2PgVpyRg5BuqW3gzGAAzhdIeshYO8Zt6RhA=;        b=zj/yDqc7ZLu3sU8opavmouBQjWP/GVORmLiRzpwQhSvl7NeDYeg+N+b+hPXOJ9sRdt         9qhbgD4nrTXPzx4gbU3ea1NLceJIijRW0ruxfrEArIqpN5lg0A7bF9UIE0ZbKYO6RQhw         MLCbXK36xDaxAC995LaHW9EHMQk4urtu3oIsHvkozEe7sLjq7z0ynvhcQTtw7RXMBqzJ         JZfmQWhU0NpWu0mNwSNmgTmHbbcDziEDdJ8DqcuY293wLlmovwxzWMkM+IVqQjQrYmER         iJygDjfDVq6pPURRfqSXegpKypqL2ZnFne2qSWQnZOjvt6R1vrl4cuWi2RVk2yzRzDOF         muHQ==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=BbKKE2+j2PgVpyRg5BuqW3gzGAAzhdIeshYO8Zt6RhA=;        b=nAgCI5I0YToGRmmRA0+f93Kdql3TPQIz0S1t73Gr19ybIc2wT0Zim+K5e3iHiICqbB         2qCQ5AOtaI6Q3bAFaaRhVEa06s956tHGdCyhCDQEkpv0nojI1aoEkXZStnijAc0UGi6y         ftzmd/hssMl/xTb1Il7nY+altKsUYVIYeSIi5rN+gSNlTG2dUFHeHsZbaMIgWyZwjw4D         ZUbkfqVamqtyk+J18GOciNvkXQuW1Ohib/oszNQVgMm/9t2YnzlYAGD3xJ2JdK/bxK/q         +1dTjM8dhYCBdF9u+wZqgl5LFC4OkNChE3ZTLc/uLPwzEWyg9z/Zqag0fSpa0GB+97lk         H3IA==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=BbKKE2+j2PgVpyRg5BuqW3gzGAAzhdIeshYO8Zt6RhA=;        b=cp7yKd3L58rHfkKk+LI1j2c8F5oIzvpFAlsh/B5yrQGSNCecN8dvBKjCa71Uvczr+1         Gwf7YBhQ5cbUJrIUWXMjr2W5GxMT9LkG/9ZAdpPyDZFBX+uKVqfJQORge6VfrBmz+GOQ         T9wXtTyZAUA9Xjt2K1zBbxIeyLlsEa1wrFWHKo4MCb1pMyn/pB+eBYYj1mIv/5JJlOsY         ofO39VIpFvbCln5lOtzxH3awXP2kZXPZCkMyFLeKC/Ajpy59Sg6n8JTO/IFEKfqOYBUI         5zcGD51JX7aw1opxMhvSlB/GSp0jvBoaQhdPnsCWd8Do1IVLu+e5X2EkSzQytXm6o2aV         SQxg==</li>
<li>Arc-seal: i=4; a=rsa-sha256; t=1582769636; cv=pass;        d=google.com; s=arc-20160816;        b=sWwvzL6YHGZ77VLDO1cIGCAdsNaCUJun9kYZoyKq+cskz+bX+kXMD+erHhuVwY9pLz         OM8bq7KxhlI8tRUbD1Roa8r7fQUyo4q8cDcTqTxuyj6JS5tt9VbPxKPrSgajWpGNMpm7         MOTpuaxCO4LcVYWlhjxXt33WSvNCPtXtPy3MQt9lM9dcR9hGpPcidlFkD2OpwQOPaJ50         ynMqe/Filp9vTm4RKSB8KUpAktlTjrrPJHDeSjvc/diDaR97r2lqJDmXGljFLM3gVNry         2lakWON1P/xrapMKVVxUP7u1zUSMHZDEDGMTCE5s5hZrGdnsGQCYJggGL3oxCt/Y82d8         sZ4A==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1582769635; cv=pass;        d=google.com; s=arc-20160816;        b=cwVGYu8WFL8pEAbOixt/WJsknkpxsOyfkrugZKbowVBpWImci/R3RVqyXRK3Cd9umo         duS6fr6rxJyWnQW+qrjt33bKa46wiT3pQ9rxYAwJxpq/jJX4YdXMFYme43EomblB+Q8F         GTlK2yywdzJsSUWrh3by/sIX9qL5z8jFN64NudjswwzdLuTtfGjuIcUQxP0plwOj699d         tusXja+PmeuKzZ9pX3/9ssrokw5t6zLkyotL4CM6XQsnPL2aLxDCdcp31bB1g1Ht66MA         eJyh1m9TtMqSHASlhlVrU+SCZHRAMfmDv/KZukbBNay0ODClHClwuimlqSIwRTswsnXG         4KoQ==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1582769594; cv=pass;        d=google.com; s=arc-20160816;        b=PpnVsMONYPdDtBsB+8akFMJm6uWoa6QIYv678ByPf/93xheVhz554o0BatMEAGCcR8         H9LO6SlOCTyiCwbcKRlarmClAgzBSONM5b7QlySpxLIc3wml+o/qezYEZBQ2NzC6I0gs         W+cXKzXajnGtj//KiOA9k/sDL9HB/p+hqzYo/D26lGV5zFP+xMi9EHcklY1UVqc2roSj         e+AfCwRQkUm0yJTtrHE45yl7DzKnEIUS5HbD/OblGY0yooW4oxUtDI3ClUNwqRF28xwz         7wE5CbFNDqwGw6es35rTOG8BLFbCrZBPPNuvpA+Nd7jJ9FQGtemZpMSKBUE8YdCmcv4h         VCPg==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1582769593; cv=none;        d=google.com; s=arc-20160816;        b=BLYw4/iQ5Uatd94l548uCc/c7oFAPydXIwdERhfrwNDLxTgi1b1Qhny8ZcCRxSkHpd         U9uK5v0/XQVLo6ZVtDhPcWqn8gTpIkZ2bxIpMgC2p2FyRAtDXvg4ob6tQwfMzcyF6SAb         Nwp0OPEknxnH2hu7WJbsWyt9n/7AjtXqeBLqF4DMDIqA7NxJF68xPXfYA3en8+evmrm7         1TCUIRyx9A0H1pxbK825JP4pIag1i8ZtVmgOnsoB8Bo2ryVmMpQ1fhceYMeSA4iqqzPf         km0wgmsPo1f88L+RrT74vcQsDqawJAK3g533oOknbvNPbCiMkKzfWt85H4/zPQohsxbZ         r6EA==</li>
<li>Cc: ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:mime-version:references:in-reply-to:from:date:subject:to:cc         :message-id:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive;        bh=BbKKE2+j2PgVpyRg5BuqW3gzGAAzhdIeshYO8Zt6RhA=;        b=Hl8MHDrBbOSUT0xsB5mwgOM7tI+f0K3m5dS8sPr40XgLhP5LEasV0EXIMRuUtCkCU4         JNaULoH42fH1Tf7FfLEMQuv2IcLKOjZfPbPkNE3frnbDeHO5bEGZhvv6BijX0H3qZUG0         VrWl0fRtzmqlS4DLNyKg4XJz1bPDjSGow1pNnO3HUix+FhLLHtT2ZiQ4BYifqhmZFAsV         9ewIP1nKDYIhjL8PU6rT2Y3Nmn6Vr7QZi5KF21/Gl9QXv/KXyHNDLgd6HXt61i4zc1Qq         rjjRHznLAM0cXZjUG/DyDO+3auw0NFWPx3dihCzXXB/8Q8mtD8nKf4r94brgLXt6w2sQ         iVHA==</li>
<li>In-reply-to: &lt;<a href="msg00548.html">d95d2f78-5a1d-2e10-3008-e7698b694f8f@yahoo.it</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;d95d2f78-5a1d-2e10-3008-e7698b694f8f.ref@yahoo.it&gt; &lt;<a href="msg00548.html">d95d2f78-5a1d-2e10-3008-e7698b694f8f@yahoo.it</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div>Dear Fabio,</div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Feb 27, 2020 at 6:32 AM &#39;Fabio B.&#39; via _OAR PMEL Ferret Users &lt;<a rel="nofollow" href="mailto:ferret_users@xxxxxxxx">ferret_users@xxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><br>
The first part of the question is how to add non-consecutive levels, for <br>
example I know I can use myvar[k=3:6@sum] for consecutive ones, but how, <br>
for example, to add levels 2,5, and 7?</blockquote><div><br></div><div><br></div><div>One idea is to mask out the other levels:</div><div><br></div><div>let myvar_masked = IF (k eq 2) or&#xA0; (k eq 5) or . . . THEN myvar</div><div><br></div><div>This new variable has valid values only at levels k = 2, 5, . . . so that the sum you want is myvar_masked[k=1:kmax@SUM].</div><div>&#xA0;</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">
The second part, my data contains missing values, when I use @sum NaN <br>
are ignored and I get the desired result, for example if I have <br>
3,NaN,2,0 the result is 5. But if instead I use the notation <br>
myvar[k=2]+myvar[k=5]+etc. then I get NaN in every cell where there is <br>
at least one NaN. It seems an inconsistent behavior.<br></blockquote><div><br></div><div><br></div><div>For arithmetic operations (plus, minus, . . .) and functions (sin, exp, . . . ), the entire _expression_ results in a &quot;missing&quot; (&quot;undefined&quot;) value if one value is missing.&#xA0; On the other hand, the &quot;@&quot; operations <b>skip</b>&#xA0;missing values.&#xA0; The latter property is crucial when you, for example, want to ignore land points for your ocean temperature average.</div><div><br></div><div>In other words,&#xA0;@SUM is NOT</div><div><br></div></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div class="gmail_quote"><div>&#xA0;<font face="monospace">a(1)&#xA0;+ a(2)&#xA0;+ a(3)&#xA0;+ . . .&#xA0;</font></div></div></blockquote><div class="gmail_quote"><div><br></div><div>BUT</div><div><br></div></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px"><div class="gmail_quote"><div><font face="monospace">sum = 0</font></div></div><div class="gmail_quote"><div><font face="monospace">for i = 1 to N</font></div></div><div class="gmail_quote"><div><font face="monospace">&#xA0; &#xA0;if (a(i) is not missing) then</font></div></div><div class="gmail_quote"><div><font face="monospace">&#xA0; &#xA0; &#xA0; sum = sum&#xA0;+ a(i)</font></div></div><div class="gmail_quote"><div><font face="monospace">&#xA0; &#xA0;endif</font></div></div><div class="gmail_quote"><div><font face="monospace">endfor</font></div></div></blockquote><div class="gmail_quote"><div><br></div><div>Hope this helps.</div><div><br></div><div>Ryo</div><div><br></div></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00551" href="msg00551.html">Re: [ferret_users] Adding non-consecutive levels containing missing values</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00548" href="msg00548.html">[ferret_users] Adding non-consecutive levels containing missing values</a></strong>
<ul><li><em>From:</em> 'Fabio B.' via _OAR PMEL Ferret Users</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00548.html">[ferret_users] Adding non-consecutive levels containing missing values</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00551.html">Re: [ferret_users] Adding non-consecutive levels containing missing values</a></strong>
</li>

</UL>
<center>[<a href="msg00548.html">Thread Prev</a>][<a href="msg00551.html">Thread Next</a>][<A HREF="threads.html#00550">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
