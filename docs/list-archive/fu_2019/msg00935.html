<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] INT showing strange values -->
<!--X-From-R13: Ehyntan <fhyntan.enlNtznvy.pbz> -->
<!--X-Date: Thu, 8 Apr 2021 11:27:26 &#45;0700 -->
<!--X-Message-Id: CA+oOL4ZUSTs_x67sy&#45;GRd+eRj9tYguh1Uex+cp20tL4UucD4SQ@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CA+oOL4YUJfThX72P40sj0rmqUpHos94SYM_PRJvkB2AO5aSL4Q@mail.gmail.com -->
<!--X-Reference: CAEwQpaK2rGQf0TzXHaQVNaNisqxTLQwGewDfcb9EBiAZD0B3Tg@mail.gmail.com -->
<!--X-Reference: CA+oOL4YLobN3ti=hLzpD+GYBWNT3+CUEqC+zhWzbHQ1Xnuh54Q@mail.gmail.com -->
<!--X-Reference: CAKoe08Q&#45;Y1p4_OSsjTP&#45;pJzd1K_+e7NFhuAQG_WOvdQ0TtwbXw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] INT showing strange values</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00934.html">Thread Prev</a>][<a href="msg00925.html">Thread Next</a>][<A HREF="threads.html#00935">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] INT showing strange values</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Andrew Wittenberg - NOAA Federal &lt;<a href="mailto:andrew.wittenberg@DOMAIN.HIDDEN">andrew.wittenberg@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] INT showing strange values</strong></li>
<li><strong>From</strong>: <strong>Sulagna &lt;<a href="mailto:sulagna.ray@DOMAIN.HIDDEN">sulagna.ray@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 8 Apr 2021 14:27:10 -0400</li>
<li>Arc-authentication-results: i=4; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20161025 header.b=X5Gs84XA;       arc=pass (i=2 dkim=pass dkdomain=gmail.com);       spf=pass (google.com: domain of <a href="mailto:sulagna.ray@DOMAIN.HIDDEN">sulagna.ray@xxxxxxxxx</a> designates 209.85.160.198 as permitted sender) smtp.mailfrom=<a href="mailto:sulagna.ray@DOMAIN.HIDDEN">sulagna.ray@xxxxxxxxx</a></li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20161025 header.b=X5Gs84XA;       arc=pass (i=2 dkim=pass dkdomain=gmail.com);       spf=pass (google.com: domain of <a href="mailto:sulagna.ray@DOMAIN.HIDDEN">sulagna.ray@xxxxxxxxx</a> designates 209.85.160.198 as permitted sender) smtp.mailfrom=<a href="mailto:sulagna.ray@DOMAIN.HIDDEN">sulagna.ray@xxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20161025 header.b=X5Gs84XA;       arc=pass (i=1 spf=pass spfdomain=gmail.com dkim=pass dkdomain=gmail.com dmarc=pass fromdomain=gmail.com);       spf=softfail (google.com: domain of transitioning <a href="mailto:sulagna.ray@DOMAIN.HIDDEN">sulagna.ray@xxxxxxxxx</a> does not designate 65.153.203.168 as permitted sender) smtp.mailfrom=<a href="mailto:sulagna.ray@DOMAIN.HIDDEN">sulagna.ray@xxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20161025 header.b=X5Gs84XA;       spf=pass (google.com: domain of <a href="mailto:sulagna.ray@DOMAIN.HIDDEN">sulagna.ray@xxxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:sulagna.ray@DOMAIN.HIDDEN">sulagna.ray@xxxxxxxxx</a>;       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com</li>
<li>Arc-message-signature: i=4; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:sender:dkim-signature;        bh=rT9LNDykNjz5a0Wzh0KBAr3R7xJHxz7vlj227jp9ppc=;        b=YuVvDjUyu465EAH/AW5bgWoqS9+F3i7S/el1do7xEVNIE2ZyuAM5egz4v8lk26gRId         7Ep9BaVD52xTwRUDKJTbB5+vwyGXqhpfXv/6HlGviuyKyy5oYYSfA1+fyXznhrPon+yf         x/L9N5HGlRsw2lqruxKYHP1K94MPpuPOyzcrGC0mj/hZdp1ReeyUUODDzT/sixZNTrvV         RXktDZqq1ivUkprRFOjHsZudIPoxTer+2DyJproHmKJjli70fwRc0KJLwCgGLkWyhWQ1         HKR6os/dV9NNqeANdHTe8xpn7Cv2fGVVaBZykWis9w0TcuuLg2V6SEXFlYu8IUUMCbCo         X51A==</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=rT9LNDykNjz5a0Wzh0KBAr3R7xJHxz7vlj227jp9ppc=;        b=f/HNcDnz7BvhnPbdRe5h5LpldAB3eGwECNmhWHM0M7L88Q9KeheF+Z2R4+K2dyqgLm         VD7xA40r6anIHmDsuhhG5c53OPeT3JJG6YVK2PMfnrmugFe95tkVhGKcjMzK2HRTJlJS         l1ZFP5sjtRJ9jnwEhnhJ5IKwEtoTtOORIqXRwGsls9Vc7gmJMky+2jIQgwmU1a/RcuuU         pphhhmW/YbbOgmqHZBlaSreEFAbfjbkmvPTGDqHBl6RfuCxuIyLD4oZedQVozln8P19X         PhpEyAsFIQsZf5KazWaH8x0aHmFDcYhLGmdtPwRN0efsCT5Hnw6zBAwlETx9b3iTMv0V         a32w==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=rT9LNDykNjz5a0Wzh0KBAr3R7xJHxz7vlj227jp9ppc=;        b=p9vV9f+13gJt0SXHsjRgskMD5NKD86UB5s9jzVytAudaoA6KFT/76O532J1DKnN0l+         8XfMYzaxy6zMhunbW90JvI2gyKCRjIQ5aOFAOOY8w4c/VqUIQMZ95hUZ7bvqLPnZUN7F         Hks4eqkfC42ZLdNqc/bWfA6zNSTSbq+Jkay//8Le0KTX0JSkl/+wMAO0vGj9X7/ANWj+         p7H4VY7jJmwgul825NuAWUdZ3dll9n6jbxzn6mymeOv7VqYUI4yjzIIuhrj6NKDpSvIp         D75w3V0l7xHjyWdLGxUUD1KNvZYBitB+cDyL9/zdIdW4GDS0BYCD5kQbP7lWJF86O/ph         588w==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=rT9LNDykNjz5a0Wzh0KBAr3R7xJHxz7vlj227jp9ppc=;        b=wjipK08RlyL1CC1N/pDZyjqwNXXlU+wZyorWAmwBCYwVUxF8sSJrGEUR2FbH41wye7         OyYhAOh+4bkeeJAzLe0amxIOYq3O1+A83ihYnpGSg+ahZNUNg/7Fgxcdegj9k5eK3YUR         lfHnvKrFzRrlsTh3RijcAu8i5MbpbQyJtFTQEqOyA6jGGRWJtdkWin2kSddQnazAZqRz         js58vcDIet/6zn7kxEcHvDsQ7V7CfxdYm6GWPKfG+QKwusqWA4GFwpMDT1nYlO+Yftqa         eB6qmg8T/WXbkI32nCcfGLx8Uj8qAeUh3P/IaHeuXyzKsU8/QvR97wFl5HdmsJvD4jdW         zOMQ==</li>
<li>Arc-seal: i=4; a=rsa-sha256; t=1617906445; cv=pass;        d=google.com; s=arc-20160816;        b=ulxCzFjTA48tUPddf4bsBWKvYJIjor6VP8CihNq/YhaD146x6dsi6rKwKD8O7OANP0         /qcZwM/biZIrVrTChVRUEvaPHr+hWIEXA8LO6SCU4YsxyL7PHFuyTpVEecH9T8hupQUt         pErHnNP+easyjOSkEYsUwHt4C/TQkdVbLMxv20nKCFeOv47pkRiOwGYyw7VlnHKS183J         UNeI5Kpff4UqRb7Vj/VuRmXQImNTo+FFYH8gV5LXvVLV7u87zj7+ztuwxJnm8bFm+g19         nHtb9HAhveU7uU43wsAGskmDw+MKd9BUDBch3esemIK5NF0P3IyF47Ss/5jdHay4MPb6         Jd/w==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1617906444; cv=pass;        d=google.com; s=arc-20160816;        b=hSyPx4yW+dcNSDO0hfk99Y4pSjdP0c1IcUXWpSEQp2tWh+Rcg8/abtE0QM678o9R52         RFadzyXj1tvbs901/mXGFaZDO7V5evhUclduhx5nk2jEZOhbcyIArXS6Zhq3QJaSUA8X         TK/nbvjgE0tvHNkpqgrHhtt4Fn+FuTH5GW3rzQu92BiwmjJfJnlxoGRoxW5qLGz/988k         VOoVKWZCsaCZz5iXbdsqnjZUQ8Cgs94MNpHQOfTvtLE1Tl86BkwQYkPxYgpvVpLnMDji         ZXiGCuHBAqR6dtWm1cKPby1CqvNqg7AWlhNET7+teQhvc0mRMTj3fYuoHJuI+Aptaq81         HN4g==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1617906442; cv=pass;        d=google.com; s=arc-20160816;        b=RwAObicU7cdGnaB5+9+qXaotXTMXCbSnPI6FLio386u0qDmGGiMH8oozpYHhXQBKCc         186pM7Cr0otxrxpDf+YK3BdcmPwIbWcghaybniF6dIOv60kPGjgWUnfwM3aYqbOPtHZP         JjUkicIUn1T9cVtZ/W9L5HH1GslouxQLBfkVJUxsywHG/HRYuBD1e1IIUsDxPgrgjeS9         SFsL4tEp531TO2+rPNoDYingJzkv5lzjwucYLSolcmlkfwWDQ5upM9Kq6hGsiqDjvDWg         knOSVqqz5YfnxreMD9LKtGKdAti7WyGzRRXmcxmnNDaP9V1xOKmZELBscdlGadXnnEOi         DS2Q==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1617906441; cv=none;        d=google.com; s=arc-20160816;        b=SHDFFSZTqbzZa1hEVHyrMZLNjTmUGBqkQ8wUMB/zOIBi3zcpgRLly3DCnHFMCH/mLr         YtC50CL6fvizyNmZki0H4WyRd9jzHZZeawlA9ofLzdXXQXncy/T/6OKM6ZtTrkeguL0l         /MkAOezWlaW8D+KC+YPQ5Rqvq++IU/N6zTby7LAjQ+mL5nFMPTcXCGvtpOYDb9Ourf5H         XxKXYCVpyyDyTxlZJxmDfqQC9fknzi20J9cg7d9yKC9t2uD4+yx1M0btSETHNvX9zKKp         s51uFBcWNCldgnIRSIgybU1KQaJDLzR1w8QZls4Vn9QG4vkhIyjtNwJYVIbTGCSLNlR0         pchg==</li>
<li>Cc: Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;, Satyesh Ghetiya &lt;<a href="mailto:satyeshghetiya@DOMAIN.HIDDEN">satyeshghetiya@xxxxxxxxx</a>&gt;,        ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:mime-version:references:in-reply-to:from:date:subject:to:cc         :message-id:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive;        bh=rT9LNDykNjz5a0Wzh0KBAr3R7xJHxz7vlj227jp9ppc=;        b=aQxjAlCxoNux6tcuMXqMD4auWzkyBEgc0aRSiQ31kciV8gUuTm6ENAP+ftMmsoqq1u         YLH9AxapTLA0CLD4UvoNXvXLCf1iyAGMXxrTK0TOTKtUHDZRDMI2uPCdGEYEbp3X/3Sz         DSI3nRQgIglDtp0YXxSp91OBrMrzq8QL6JVJ6odiBQ1gj8Xjhf8vo1fSZ1gevYTCKznb         7fPydHjjybw5Yw1TVa3M5FCD5iiiBhQyDFcjg4Bgkk586BxBZAgIUDEocoMJyeFubGVb         jMZuGnZD7EAzyiInqO2OoTcwljm0QZMG26N53ZCEUJ78ik5Wzim3IDOhQFzzmxvG6dRX         Fl9w==</li>
<li>In-reply-to: &lt;<a href="msg00934.html">CAKoe08Q-Y1p4_OSsjTP-pJzd1K_+e7NFhuAQG_WOvdQ0TtwbXw@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00924.html">CA+oOL4YUJfThX72P40sj0rmqUpHos94SYM_PRJvkB2AO5aSL4Q@mail.gmail.com</a>&gt; &lt;<a href="msg00929.html">CAEwQpaK2rGQf0TzXHaQVNaNisqxTLQwGewDfcb9EBiAZD0B3Tg@mail.gmail.com</a>&gt; &lt;CA+oOL4YLobN3ti=hLzpD+GYBWNT3+CUEqC+zhWzbHQ1Xnuh54Q@mail.gmail.com&gt; &lt;<a href="msg00934.html">CAKoe08Q-Y1p4_OSsjTP-pJzd1K_+e7NFhuAQG_WOvdQ0TtwbXw@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr">Hi Andrew,<div><br></div><div>Yes!!! The order of operations did solve the problem! I should have guessed it.&#xA0;&#xA0;Indeed it was much easily solved. I did use INT() before, and was pretty sure there was no bug.</div><div><br></div><div>Thanks,</div><div>Sulagna</div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Apr 8, 2021 at 1:53 PM Andrew Wittenberg - NOAA Federal &lt;<a rel="nofollow" href="mailto:andrew.wittenberg@xxxxxxxx">andrew.wittenberg@xxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Hi <span id="gmail-m_7413052219233058358:5g7.1">Sulagna</span>,</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Per <span id="gmail-m_7413052219233058358:5g7.2">Ryo&#39;s</span> helpful reminder: when asking questions it&#39;s best to send a <i>self-contained example</i>, say using one of Ferret&#39;s built-in <span id="gmail-m_7413052219233058358:5g7.3">datasets</span> (in the $FER_<span id="gmail-m_7413052219233058358:5g7.4">DSETS</span> path) like <span id="gmail-m_7413052219233058358:5g7.5">coads</span>_climatology or <span id="gmail-m_7413052219233058358:5g7.6">levitus</span>_climatology.&#xA0; That way users can easily reproduce the issue themselves, and experiment to find a solution.&#xA0; If the problem is with one of your own <span id="gmail-m_7413052219233058358:5g7.7">datasets</span>, and you can&#39;t reproduce it with a built-in Ferret <span id="gmail-m_7413052219233058358:5g7.8">dataset</span>, then you can first <i>simplify your data file</i> (e.g. extract a single time level, depth, and latitude), and then attach that vastly smaller <span id="gmail-m_7413052219233058358:5g7.9">NetCDF</span> file to your email, or post it somewhere where users can access it.&#xA0; Then users can download your tiny test-<span id="gmail-m_7413052219233058358:5g7.10">dataset</span> and directly run the commands in your email to reproduce the problem.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">In this case, the problem may be with the <b>implied order of operations</b>.&#xA0; It appears that you have MODE INTERPOLATE on (which you can toggle with SET MODE <span id="gmail-m_7413052219233058358:5g7.11">INTERP</span> and CAN MODE <span id="gmail-m_7413052219233058358:5g7.12">INTERP</span>).&#xA0; This tells Ferret that if you request any values that aren&#39;t exactly aligned with <span id="gmail-m_7413052219233058358:5g7.13">gridpoints</span>, then Ferret should <span id="gmail-m_7413052219233058358:5g7.14">multilinearly</span> interpolate to that point from the nearest available <span id="gmail-m_7413052219233058358:5g7.15">gridpoints</span>.&#xA0; But there&#39;s an <b>ambiguity</b> in the order of operations when using a function on the same evaluation line: do we first interpolate the value from the field, and then apply the function to that value? or do we apply the function to the field, and then interpolate the value of that new field?&#xA0; Ferret&#39;s <span id="gmail-m_7413052219233058358:5g7.16">Mathematica</span>-like delayed-mode evaluation is extremely powerful, fast, and flexible -- but it does require care in not&#xA0;leaving things ambiguous, as when applying nonlinear&#xA0;functions like int() where the order of operations matters.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">So my guess is that for</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><span class="gmail_default"></span>list/y=49.50n/z=200 int(NB_DEG_LIB)<br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Ferret could be applying int() to the NB_DEG_LIB field, and then interpolating from that integer field to y=49.5 and z=200.&#xA0; (Whereas your expectation had been that it&#39;d first interpolate, and then truncate.)</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">If this is the case, then you can eliminate any ambiguity by explicitly stating the order of operations by defining one or more intermediate variables.&#xA0; So the two alternatives would be:</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">! Option 1: interpolate, then truncate</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">let <span id="gmail-m_7413052219233058358:5g7.17">interp</span>_<span id="gmail-m_7413052219233058358:5g7.18">vals</span> = <span id="gmail-m_7413052219233058358:5g7.19">nb</span>_deg_lib[y=49.5n,z=200]</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">list int(<span id="gmail-m_7413052219233058358:5g7.20">interp</span>_<span id="gmail-m_7413052219233058358:5g7.21">vals</span>)</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">! Option 2: truncate, then interpolate</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">let int_<span id="gmail-m_7413052219233058358:5g7.22">vals</span> = int(<span id="gmail-m_7413052219233058358:5g7.23">nb</span>_deg_lib)</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">list/y=49.5n/z=200 int_<span id="gmail-m_7413052219233058358:5g7.24">vals</span></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Please let us know if this solves your problem.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Best,</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Andrew</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"><br></div></div><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Apr 8, 2021 at 9:07 AM <span id="gmail-m_7413052219233058358:5g7.25">Sulagna</span> &lt;<a rel="nofollow" href="mailto:sulagna.ray@xxxxxxxxx" target="_blank"><span id="gmail-m_7413052219233058358:5g7.26">sulagna</span>.ray@xxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div dir="ltr">Thank you G Satyesh for suggesting an alternate way out. Appreciate it.<div><br></div><div>Ryo, I hope it is not a bug, and could be solved easily in ferret through some proper specifications. For example, taking only one point (say the first) in my earlier example, it gives the int (NB_DEG_LIB)&#xA0; correctly if it is int(`

NB_DEG_LIB`). i.e. when the user-defined variable is specified in grave accent. So this shows that int () works, but only in grave accents. However, when you use the grave accent for multiple points in the user-defined variable, it gives error.</div><div><br></div><div>yes? list/y=49.50n/z=200 NB_DEG_LIB<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;VARIABLE : GDN * ( 1 - R1 * R2 ) / (1 + R1 * R2 )<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE : 49.5N<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;Z (m) &#xA0; &#xA0;: 200 (interpolated)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;T &#xA0; &#xA0; &#xA0; &#xA0;: 2<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 20.48<br>yes? <span class="gmail_default" style="font-family:arial,helvetica,sans-serif"></span>list/y=49.50n/z=200 int(NB_DEG_LIB)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;VARIABLE : INT(NB_DEG_LIB)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE : 49.5N<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;Z (m) &#xA0; &#xA0;: 200 (interpolated)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;T &#xA0; &#xA0; &#xA0; &#xA0;: 2<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 3.000<br>yes? list/y=49.50n/z=200 int(`NB_DEG_LIB`)<br>&#xA0;!-&gt; list/y=49.50n/z=200 int(20.48211426660225)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;VARIABLE : INT(20.48211426660225)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 20.00<br></div><div><br></div><div>But doing the above in multiple points :</div><div><br></div><div>yes? list/y=40n:50n/z=200 int(`NB_DEG_LIB`)<br>&#xA0;**ERROR: invalid command: grave accent doesnt evaluate to scalar<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; NB_DEG_LIB<br></div></div><div><br></div><div>So what would be an alternative way to specify&#xA0;

 int(`NB_DEG_LIB`) in the above example?</div><div><br></div><div>Thanks for your help.</div><div><br></div><div>Best,</div><div>Sulagna</div><div><br></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Apr 8, 2021 at 2:22 AM Ryo Furue &lt;<a rel="nofollow" href="mailto:furue@xxxxxxxxxx" target="_blank">furue@xxxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div>Dear&#xA0;Sulagna,</div><div><br></div><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div>Does INT (X) (<a rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS" target="_blank">link</a>) not work on user-defined variables?</div></div></blockquote><div><br></div><div>It would be nice if you could send a complete (self-contained) example including datafiles if necessary and if they are not too large, so that anybody can reproduce your problem.&#xA0; If it is a bug (which it looks like, to me), the Ferret developers may like to look at it.</div><div><br></div><div>Ryo</div><div>&#xA0;</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div> For example, the variable NB_DEG_LIB has the following values, of which I want to take the integer values, which is supposed to be the part before decimal. However you would see on using int(NB_DEG_LIB) it returns varied values. Am I missing something here? Or should I use something else?</div><div><font face="arial, sans-serif"><br></font></div><div><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">list/y=40n:50n/z=200 NB_DEG_LIB</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;VARIABLE : GDN * ( 1 - R1 * R2 ) / (1 + R1 * R2 )</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;SUBSET&#xA0;&#xA0;&#xA0;: 10 points (LATITUDE)</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;Z (m)&#xA0; &#xA0;&#xA0;: 200 (interpolated)</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;T&#xA0; &#xA0; &#xA0; &#xA0;&#xA0;: 2</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;49.5N / 140:&#xA0;&#xA0;20.48</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;48.5N / 139:&#xA0;&#xA0;22.48</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;47.5N / 138:&#xA0;&#xA0;26.17</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;46.5N / 137:&#xA0;&#xA0;29.68</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;45.5N / 136:&#xA0;&#xA0;32.43</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;44.5N / 135:&#xA0;&#xA0;30.92</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;43.5N / 134:&#xA0;&#xA0;32.55</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;42.5N / 133:&#xA0;&#xA0;32.13</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;41.5N / 132:&#xA0;&#xA0;33.28</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;40.5N / 131:&#xA0;&#xA0;32.28</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif"><br></font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif"><br></font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">list/y=40n:50n/z=200 int(NB_DEG_LIB)</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;VARIABLE : INT(NB_DEG_LIB)</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;SUBSET&#xA0;&#xA0;&#xA0;: 10 points (LATITUDE)</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;Z (m)&#xA0; &#xA0;&#xA0;: 200 (interpolated)</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;T&#xA0; &#xA0; &#xA0; &#xA0;&#xA0;: 2</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;49.5N / 140:&#xA0;&#xA0;&#xA0;3.00</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;48.5N / 139:&#xA0;&#xA0;&#xA0;3.00</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;47.5N / 138:&#xA0;&#xA0;&#xA0;4.00</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;46.5N / 137:&#xA0;&#xA0;&#xA0;7.00</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;45.5N / 136:&#xA0;&#xA0;&#xA0;7.00</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;44.5N / 135:&#xA0;&#xA0;12.00</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;43.5N / 134:&#xA0;&#xA0;19.00</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;42.5N / 133:&#xA0;&#xA0;10.00</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;41.5N / 132:&#xA0;&#xA0;&#xA0;9.00</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">&#xA0;40.5N / 131:&#xA0;&#xA0;11.50</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif"><br></font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif">Thanks for your responses.</font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><span style="font-variant-ligatures:no-common-ligatures"><font face="arial, sans-serif"><br></font></span></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><font face="arial, sans-serif"><span style="font-variant-ligatures:no-common-ligatures">Best,</span></font></p><p style="margin:0px;font-variant-numeric:normal;font-variant-east-asian:normal;font-stretch:normal;line-height:normal;color:rgb(0,0,0)"><font face="arial, sans-serif"><span style="font-variant-ligatures:no-common-ligatures">Sulagna</span></font></p></div></div>
</blockquote></div></div>
</blockquote></div>
</div>
</blockquote></div></div>
</blockquote></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00924" href="msg00924.html">[ferret_users] INT showing strange values</a></strong>
<ul><li><em>From:</em> Sulagna</li></ul></li>
<li><strong><a name="00929" href="msg00929.html">Re: [ferret_users] INT showing strange values</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00933" href="msg00933.html">Re: [ferret_users] INT showing strange values</a></strong>
<ul><li><em>From:</em> Sulagna</li></ul></li>
<li><strong><a name="00934" href="msg00934.html">Re: [ferret_users] INT showing strange values</a></strong>
<ul><li><em>From:</em> Andrew Wittenberg - NOAA Federal</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00934.html">Re: [ferret_users] INT showing strange values</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00925.html">[ferret_users] [Doubt in script of regressxy function]</a></strong>
</li>

</UL>
<center>[<a href="msg00934.html">Thread Prev</a>][<a href="msg00925.html">Thread Next</a>][<A HREF="threads.html#00935">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
