<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] string composition -->
<!--X-From-R13: Oaqerj Ivggraoret &#45; @AOO Trqreny <naqerj.jvggraoretNabnn.tbi> -->
<!--X-Date: Wed, 19 Feb 2020 10:12:20 &#45;0800 -->
<!--X-Message-Id: CAKoe08Sn&#45;Fha+bsqaAwyZ0Czi124aeO6_u=SaSwGnq2GEH7i=A@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 20200219101500.25fafd97@gfi063209.klientdrift.uib.no -->
<!--X-Reference: d9a0458a&#45;e910&#45;62d2&#45;1533&#45;70fdc5ed598d@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] string composition</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00538.html">Thread Prev</a>][<a href="msg00540.html">Thread Next</a>][<A HREF="threads.html#00539">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] string composition</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] string composition</strong></li>
<li><strong>From</strong>: <strong>Andrew Wittenberg - NOAA Federal &lt;<a href="mailto:andrew.wittenberg@DOMAIN.HIDDEN">andrew.wittenberg@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 19 Feb 2020 13:12:02 -0500</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=Ihr2dFlX;       spf=pass (google.com: domain of <a href="mailto:andrew.wittenberg@DOMAIN.HIDDEN">andrew.wittenberg@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:andrew.wittenberg@DOMAIN.HIDDEN">andrew.wittenberg@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=Ihr2dFlX;       spf=pass (google.com: domain of <a href="mailto:andrew.wittenberg@DOMAIN.HIDDEN">andrew.wittenberg@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:andrew.wittenberg@DOMAIN.HIDDEN">andrew.wittenberg@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:cc         :to:subject:message-id:date:from:in-reply-to:references:mime-version         :dkim-signature;        bh=hzLI+lpNWjdjxaodXCTrUpvFYhjBxw7BEztcy4X7JZw=;        b=ng8PlHqUfOc4O+n9YZCVvVvuMaqcv0FSlZg6qggMDQhApdfZ4g/a/ULleDc/HpDfRx         id8dAzty55GSWx9dDMLFp6LxUludJniT3bx5OjvjbASUHtIMWP8CdvYz3PThhggIw68F         yogaLaYQ1u2czH1kYPBQQ60S3KgitZ10DaoNyaFRVPN/ZKG2w85Q86Im4rwEy/aEUPi+         63v1o8HJnaUT8l2eSeGg8OZEAf7soYnEs0KLzq8gBR+NSxxPr9QIW++nb4UHgdtVdhCa         YI7OoIWH2g2lNTtEvyzXFLrkH8yAtssuL+pH6tsFhJWQ+rJBVWXcpvhJ8afiEogiCy7Y         YELg==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=hzLI+lpNWjdjxaodXCTrUpvFYhjBxw7BEztcy4X7JZw=;        b=XHwcBs8f00foYNam6Lgcz+HAyCBYCWEvEWnTbFAVv3sAnnvpE7d8tK42iqVmQtFwYx         ptLug9zxFCokaI5/5yxW61lMamDvzwjSF8zyaxTGhtSFRL6BwIDxCK/UsQh7z4EuIJUU         0h4enCv+qvJd9t2DVAGHbqZI8KOdkDW7WECum3n4FIRZ7/oFxZWNQBwrrKO2vjfcUB9j         eboTabjMJ4qH0y9uH9Vh2kaIWKPinKP1bSTnkAwUaMcKOMdUsToAk2ppCDyyAdEtc5pE         APlK+eE/fRzkqHHuSRik1i16TKnkI6eN4noTYs0oN5QSy3S06ZFRplbc7IpJZMtbeWXg         qJ0g==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1582135939; cv=pass;        d=google.com; s=arc-20160816;        b=MKCHwsPh6BT4LNDFSHqG+VyRjwltg2SZKIxYmepgSqePuogChMnMupk0CRDsamanpQ         GPN2mbcfkU2bwZ09bA1uonG4NZxboe58w9Y88LPDdsJzCWIGru+mel53SaKyYEB7a3Ar         KVayxyLytzcPgBFfu6k0svmXBH8123r8HZ4hPaf4krJrkz4954BmLseq0uJEETR0YnHc         svodyU0ZFQnMf/9DpHO90KRYATEx9vrMgJ42oWljNyUbgjyfbHIvrJMsNaG83FGGPQM+         i3fHc66Itd6wYAIiNasBUapQO8wfh7NwaDWCIgkHz4s3WNsbYNnRymBF3IO7N2Dm21L1         TjXA==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1582135938; cv=none;        d=google.com; s=arc-20160816;        b=A8QDgkRY/ATvsvsdMH3pJYWXn1Gp4GR+PQO6S5Nwfm2li3huxGoyKCZNAmSHBDlxg+         7CZu+2FAI7VDI16tIUGtlMcfxfzL2322NwIk7/HpyvukaRwucvqxf+TaN+nTbXIw5e8a         IPp/EFhF4U/LgbjkZqlYo5JPzkx+/SgcggO6YeLbWif7lgex4PTWdbefS5VWRkTf6HkR         cfynoLksm/R2OrBNhGvklA+Lnbz1imZFLYcCTOD/51Bytv+cQoFfgBsusEBCmAgws1Ti         ZIdO9Q2NDdWWyvCs7i5icQbOqjaY8DIBPfUOxe57c/HREdnWgKoxL6Z/fcUp80RYx0wZ         Lyjg==</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>, Marco van Hulten &lt;<a href="mailto:Marco.Hulten@DOMAIN.HIDDEN">Marco.Hulten@xxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=mime-version:references:in-reply-to:from:date:message-id:subject:to         :cc:x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=hzLI+lpNWjdjxaodXCTrUpvFYhjBxw7BEztcy4X7JZw=;        b=S34E17deN5Gg10DXSWIWau8zv0z6AOkdLUcdiFFTbacd6NexY1ruXH+Em9XdUg63LX         vJ5bs2w+i8rp2GMuMCAM7clMSaKKZcZg5oyYg79AuAtt1pAezEkCIxr+alj/ko/5Fpqu         pJ8icSX5U1aw+iE0XusUbH2zNPzKDduwGj1NF/zDxm6h/gSj6VZOLioRtQqk25c9pnIX         qgZNVOksrsllvB0HmZm23f3gRVkng8G3uu9qOeZBYQZaeiE+cF/uCgUxFdnEXx4BvXzG         Qpp+mSp1i19SBV9c7tLR6MPU/UIP9KvIl5AWiq5XcxuU6o6sqQ1/CcXufeSRcfdThceO         LMVQ==</li>
<li>In-reply-to: &lt;<a href="msg00538.html">d9a0458a-e910-62d2-1533-70fdc5ed598d@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00537.html">20200219101500.25fafd97@gfi063209.klientdrift.uib.no</a>&gt; &lt;<a href="msg00538.html">d9a0458a-e910-62d2-1533-70fdc5ed598d@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Here&#39;s another workaround that avoids the immediate-mode (backquote) evaluation, so that the final result will update if the units change later:</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif"></div><div><div dir="ltr" class="gmail_signature" data-smartmail="gmail_signature"><div dir="ltr"><div><div dir="ltr"><div><div dir="ltr"></div></div></div></div></div></div></div><br></div><div dir="ltr">&#xA0; NOAA/PMEL TMAP<br>&#xA0;	FERRET v7.52 (optimized)<br>&#xA0;	Linux 2.6.32-754.23.1.el6.x86_64 64-bit - 12/03/19<br>&#xA0;	19-Feb-20 13:09 &#xA0; &#xA0; <br><br>yes? let/units=&quot;m/s&quot; v1 = 1.1<br>yes? let/units=&quot;mmol C m-3&quot; v2 = 2.2<br>yes? let v1_units = v1.units; let v2_units = v2.units<br>yes? list/nohead v1_units + v2_units<br>&#xA0; &#xA0; &#xA0; &#xA0; &quot;m/smmol C m-3&quot;<br></div><div dir="ltr"><br></div><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif">Andrew</div><br></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Wed, Feb 19, 2020 at 12:45 PM Ansley C. Manke &lt;<a rel="nofollow" href="mailto:ansley.b.manke@xxxxxxxx">ansley.b.manke@xxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">I agree this seems like a bug, and I&#39;ll have a look at this. Addition of <br>
strings is one way to work with them, but for combining two strings, the <br>
STRCAT function is the most reliable:<br>
<br>
<br>
yes? list/nohead strcat(v1.units, v2.units)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;m/smmol C m-3&quot;<br>
<br>
A variation on your last command could be this, creating a single string.<br>
<br>
yes? list/nohead &quot;`v1.units` + `v2.units`&quot;<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;m/s + mmol C m-3&quot;<br>
<br>
<br>
On 2/19/2020 1:15 AM, Marco van Hulten wrote:<br>
&gt; Hi Ferreters&#x2014;<br>
&gt;<br>
&gt; When I was composing unit strings from a product of variables, I found<br>
&gt; an unexpected behaviour:<br>
&gt;<br>
&gt; yes? let/units=&quot;m/s&quot; v1 = 1.1<br>
&gt; yes? let/units=&quot;mmol C m-3&quot; v2 = 2.2<br>
&gt; yes? list/nohead v1.units + &quot;XYZ&quot;<br>
&gt;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &quot;m/sXYZ&quot;<br>
&gt; yes? list/nohead v1.units + v2.units<br>
&gt;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &quot;m/sm/s&quot;<br>
&gt; yes? list/nohead &quot;`v1.units`&quot; + &quot;`v2.units`&quot;<br>
&gt;&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &quot;m/smmol C m-3&quot;<br>
&gt;<br>
&gt; I expected that the result of the panultimate command would be the same<br>
&gt; as that of the last command.<br>
&gt;<br>
&gt; (The last command can be used as a solution or workaround to this issue.)<br>
&gt;<br>
&gt; &#x2014;Marco<br>
&gt;<br>
</blockquote></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00537" href="msg00537.html">[ferret_users] string composition</a></strong>
<ul><li><em>From:</em> Marco van Hulten</li></ul></li>
<li><strong><a name="00538" href="msg00538.html">Re: [ferret_users] string composition</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00538.html">Re: [ferret_users] string composition</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00540.html">[ferret_users] Edges and @AVG</a></strong>
</li>

</UL>
<center>[<a href="msg00538.html">Thread Prev</a>][<a href="msg00540.html">Thread Next</a>][<A HREF="threads.html#00539">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
