<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [EXTERNAL] [ferret_users] minimum range for @DIN ? -->
<!--X-From-R13: Dlb Thehr <shehrNunjnvv.rqh> -->
<!--X-Date: Tue, 20 Jul 2021 20:06:09 &#45;0700 -->
<!--X-Message-Id: CAEwQpa+hssedHNFfPuAcR0ZHej7WW9Pb8TKKDhdhh+gfCXENtQ@mail.gmail.com -->
<!--X-Content-Type: multipart/related -->
<!--X-Reference: CAEwQpaLJEzvabe=7h=NRgSjJ1&#45;Pgb=JxRDq4YXY70NBYLQus1g@mail.gmail.com -->
<!--X-Reference: CAKE4FWp+gb+XdFBkxgLuE5ZJsQWsEWw1yrbckHVgv3Mz4DcJyw@mail.gmail.com -->
<!--X-Derived: pngHN2o7j1Xtz.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00979.html">Thread Prev</a>][<a href="msg00981.html">Thread Next</a>][<A HREF="threads.html#00980">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Xiaoyu Bai &lt;<a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</strong></li>
<li><strong>From</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 21 Jul 2021 12:05:47 +0900</li>
<li>Arc-authentication-results: i=4; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=okdmQ7qg;       arc=pass (i=2 dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.219.70 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=okdmQ7qg;       arc=pass (i=2 dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.219.70 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=okdmQ7qg;       arc=pass (i=1 spf=pass spfdomain=hawaii.edu dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=softfail (google.com: domain of transitioning <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> does not designate 65.153.203.172 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=okdmQ7qg;       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-message-signature: i=4; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:sender:dkim-signature;        bh=KZxNRKRs7EiocgkgGyID+GDGzAyMgy70h83cI39OYSw=;        b=raMWBx3x95juQ1mRQYiOmxZZySIDNr4UgKTtCqF+ODgJyRQxrXvICNAl01dxdoZgzY         8YSU7ErkIYtqi19w+CGt/mFO2CJyr4mXy1UcAoCy9CAlDWWNmEQ3Ep+FrrT6DYzgPAew         nZjAJExxQn3uAbrrN4MMTbUe7YsD8R3E1bJSCEIGAOvyMaD2meMQzjnq8AeSgsLMr+qO         7/rIfqqEAhmcfaO2Dew9jalKII6rodfQAoB4bEXx46TQchm6ZnTc6MTXnN3Rlq6wWrll         WRrTSD+9ngyczFMfG8uAF1F0m7BxB82bBYz9USfaxXR8D4HWrzSz1Xms0pNeP5TkOyH9         LHew==</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=KZxNRKRs7EiocgkgGyID+GDGzAyMgy70h83cI39OYSw=;        b=yJAGzBU41+LHtwzSyajrLU2XUGt22I9eJmm/KEY/8zZLYIoyYBaiIL5zXU7sp8bo76         fMR8pSo2EpdDetDkHlXH9HOjRE2SZXQ8hMXQXyh4cGGGPa7RCPCr0s8g1qxEDH/I5aQg         RQz/TVBqHRqnp/lP/efzdcA9aod/OfEV1VaJcC18b6gUEsLmC0TMt4Rs602e5Wx55vRT         RX6VPnjlJuvq+vkid36mYizDeyKHW36f/dAsFuz2oyukt8AyP2lb0/d3mH7KkkOn1MtS         uBoNYntyhmdc7aqZZniQcjtb+PcsE8DzsfitGoM7PCyWOtWb5M6vGMY0wDDx5WvBRIKk         hOWw==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=KZxNRKRs7EiocgkgGyID+GDGzAyMgy70h83cI39OYSw=;        b=a/tFviJLfZAm67Ik6O9uejbNPggAgixwq4vLQOjMOQ59mQwqiCo6d8ytTHZXgkhDQY         Q5LFPZ6L9bkPkNJi+O0PCrg476fV6/Q/FVOMKwTinY1g/B0w4mRcMD1+RxfPtfrcd8nX         dEXluPnNWax4awUX9SvRruHHBRuzb8eHMs/wnoP0xC6PVm6akgpIOW2HSE3/4yOgduX2         /iaW0YoRmG6dDE+Q6fChacgVh6iGkXbyik65WZUkZPsU3SAbPoOPhIVXH1o3Gc9fCpvt         Qh74OzM47gzbwNtYe6/+OkW9ZdPPhtr02q1zBBRGEeUL8lKfprLkyWChys09wUrE4vLt         Hhtg==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=KZxNRKRs7EiocgkgGyID+GDGzAyMgy70h83cI39OYSw=;        b=LlhzME9ntx7Zr0kJZmKuWE8wwYFXw401i0Pg7uUqbAQzVbDpgKaoR+NvFd6/7Ub9sJ         oSSfMae6MB5Gv7KEZUS6tSsCfw6Sbgc5rvzH8raf+BxmBteQqceo7UaDrVFS0Zej/pMM         mCVn6G5chP2+oyVHWP6XvkQyZvd0LPKxJAPfEFPzCIPAvj48XMxeA7/aJBNG0end0gZj         u5Fq62iNuuRru795CfGJgrHC7jBUzWCqTf1TXoETHuWvKFpZNYHcpsf4EcnYxzcr+FEQ         65SXgJgyckKCUv1ShwqelsDFYRVGUjDmtTdFKjAbcVc+PtKuFwd+W3Vbsf60ZpUjjmwU         89mQ==</li>
<li>Arc-seal: i=4; a=rsa-sha256; t=1626836768; cv=pass;        d=google.com; s=arc-20160816;        b=orXHblcPyU7nSmkqHtb5Ou+SPIGMtep8HtOiLpuv3D8aT1dog3jjUx4o0ol6xJfCIU         wK4+uUONmh3W0zUslLlrM8QtOikb5xJ/7SxXRIaygc2tvl7aBCQSpPuPXijyJZsngwdu         0HPBB3C569ZQdLNnNlUQXmHhR3GL6Uk6hS55jO5ATnLve50qfofoAgnS5lqQQzqRupe+         gsSzGLrFTpgWMuU4XcKHBnFW04lIxDphuglSd9w+J5RSQkwMLlXmB0RXC2M+P3sSb7ey         dEjGK3uO1DacBmr5dW9O/h4vAcCV+d6IanCR6mKMqm3gM4ANWLcmyLhIf+wTRfTMzfL2         CGnA==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1626836764; cv=pass;        d=google.com; s=arc-20160816;        b=0MRsuNHPyD0C2Uww8XEAs6/etk3EnUJP+i4JURvejyOP2kUc2UoYqtNJODWo6kwjFp         HW7gFsZjNZEFuklpktJ5CSsqkQRF31FuYWwI9uk9OuzgPyQpxr6X8HJG2MXa3G2m2vyi         oqkbVEtmywD1/l+NnAa33Ea1fv+j/OTWZi/Z5w/ti5Aduew1I15FKFvyj2jvIl0RPu5/         CLHNwmE1aFjYkPAyt1FoprbZE0ieHGuOLT5qmXAaWZH041KISqcQCoWP1fzmgxuuQoTO         eyHOuvCyMhZDgHzknx0zxrGupQPVL2Xh1g/HC0P0757jk6UfDPPuYrWLRgGRVZL5baL3         xiYQ==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1626836761; cv=pass;        d=google.com; s=arc-20160816;        b=yK6DDZ+vqPFGPSjJb8G9CG0zPymJ1fqCDExKmaVu5u87im4cjzC8vetqVd/TYEnjvQ         DzSv/3V3dKm/q3FjcC/Lp/naGP+cB2Y2h/a8UWJRx4dzSJEqCBOKBi/SMGBoAG05kyXF         6/jopEH6COZdT3fU4r4bgSWKUmcjMr8rS5UxOs7SgDkKAyZu0DNQfYh/v34s76ndSg2r         yUehMZL2AKhpA4cwSaFZYq/M5VFurMvF7S4Hv2ircGc43eV5AdQVj39ucg9UCRuI21sB         6RSq6OBRGksCZd2D6nfNhATBqBPbS5rqWl8iWCR7z0vDE8Xn+yMWb/yaVZ7Vrc5Z8uPM         RHrg==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1626836760; cv=none;        d=google.com; s=arc-20160816;        b=FV3pRVqzDs/hQtU/QhC4RuweOa3nI+R932mPOenvFu8FOk1z873G/scJiMHZQSGyXv         d2jZCsI41iaZLwDMyAosKuSJbdHoiEPfNF5J7skLg6gZL4sIKlQvSCalyaWeiHNsOpv0         eOzOZKuMZjIV0bqLqg7m4j0pIwwUKx97O0/IdHXz1nBXN95naepMiWv9u1YMhmTNfec7         D1XnAD42uDYTpvjfxgD9ZzXDccay2MQInYUFK98zo3aI/gSLJGouxH0h2jz51Zisnt2z         sjuaLDiMJVcSZKjoK147oEvf/cgZjM8h6lil6gkeYDAtvtDZJFN9n6YoIMRyg5ewUr5q         IiiA==</li>
<li>Cc: ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:mime-version:references:in-reply-to:from:date:subject:to:cc         :message-id:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive;        bh=KZxNRKRs7EiocgkgGyID+GDGzAyMgy70h83cI39OYSw=;        b=bk6qMaaIefvuSNcn4Zp/tw5tnESchYdtZJNVLhpJqkPOb8AinR4uGo7RNE9iTD2Fc4         yc8NpvXxDfh/PXsJq1uCca2aEk6eRmaQ89nahtrjEDU1MQXt65j1WwJihSiLc+9fMiMA         dhpPZP9p9UpzV52kPmETuJWHVIODYtdrgbEvyDpbqUbW/20kiIM0ocrWyDoJz1ni20I2         kROPXirBjhya1QaFIvrB9+HVXL9wbD02k6PErE4ucfIOPnbTAqPJzEkK592WP4qnUaw0         Jp6fujmZCP3OdBg5oIerOKOOpFwQMtr60bOuc46HULdoXmiPxv3MUn/18I6I+eAfizxp         JruQ==</li>
<li>In-reply-to: &lt;<a href="msg00979.html">CAKE4FWp+gb+XdFBkxgLuE5ZJsQWsEWw1yrbckHVgv3Mz4DcJyw@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAEwQpaLJEzvabe=7h=NRgSjJ1-Pgb=JxRDq4YXY70NBYLQus1g@mail.gmail.com&gt; &lt;<a href="msg00979.html">CAKE4FWp+gb+XdFBkxgLuE5ZJsQWsEWw1yrbckHVgv3Mz4DcJyw@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div>Hi Xiayu,</div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Wed, Jul 21, 2021 at 6:42 AM Xiaoyu Bai &lt;<a rel="nofollow" href="mailto:xbai1@xxxxxxxx">xbai1@xxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr">I usually use at least two grids. My understanding is that&#xA0;@DDN [<font color="#ff0000">@DIN</font>] needs to apply a weight, most of the time is the cosine effect. If there is only one grid, pyferret will possibly only consider the one grid&#39;s value only.</div></blockquote><div><br></div><div>Yes, but the point is that the weight is continuous.&#xA0; Suppose that our SST is defined at lat = 1&#xB0;, 3&#xB0;, 5&#xB0;, . . . at an interval of 2&#xB0; .&#xA0; Then,</div><div><br></div><div>SST[y=0:yhi@DIN]</div><div><br></div><div>is a continuous function of yhi.&#xA0; Below is a figure showing this function (when SST is uniformly 1). The horizontal axis of the plot is yhi.&#xA0; If you increase yhi slightly, the integral increases slightly because Ferret adjusts the weight.</div><div><br></div><div>The problem is that Ferret seems to stop adjusting the weight when yhi &lt; 2&#xB0; as the figure shows.&#xA0; In particular, one would expect that SST[y=<font color="#ff0000">0:0</font>@DIN] is zero.</div><div><br></div><div>This can be a source of error when you use Ferret programmatically&#xA0;to calculate integrals.&#xA0; For example, I can imagine a calculation like this</div><div><br></div><div>repeat/range=1:`iend`/name=ii (</div><div>&#xA0; &#xA0;let yhi = curvey[i=`ii`]<br></div><div>&#xA0; &#xA0;let xx = xvals[i=`ii`]</div><div>&#xA0; &#xA0;list/append/nohead/file=integral.txt/format=(G0,1X,G0) xx, SST[i=`ii`, y=0:`yhi`@DIN]<br></div><div>)</div><div><br></div><div>to calculate the integral of SST from the equator to a curve&#xA0; (x, curvey(x) ) as a function of x.</div><div><br></div><div>Regards,</div><div><br></div><div>Ryo</div><div><br></div><div>-------------------------------------------------</div><div>! --- script to generate the data for the plot below ---</div>set data coads_climatology &#xA0;! grid spacing is 2&#xB0;<br><div>let _ones_ = 1 + 0*y[gy=SST]</div><div>repeat/range=0:40/name=yy (let yhi=`yy/4`; let val = ones[y=0:`yhi`@DIN]; say/quiet `yhi` `val`)<br></div><div><br></div><img src="pngHN2o7j1Xtz.png" alt="ferret-din.png" width="472" height="283"><br><div>&#xA0;</div><div><br></div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr">&#xA0;&#xA0;<div><br></div><div>Stay healthy,</div><div><br></div><div>Xiaoyu</div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Jul 15, 2021 at 10:02 PM Ryo Furue &lt;<a rel="nofollow" href="mailto:furue@xxxxxxxxxx" target="_blank">furue@xxxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">[<strong><font color="red">Caution</font></strong>: Email from External Sender. Do not click or open links or attachments unless you know this sender.]<br><span>&#xA0;</span><div dir="ltr">Dear Ferreters,<div><br></div><div>Does @DIN have a minimum range?&#xA0; It seems that it stops shrinking when the integration range shrinks below the gridsize.</div><div><br></div><div>For a test, I define a variable which is always one and print the values of the integration over y=0:ylim, where ylim = 0, 0.5, 1, 1.5, . . . .</div><div><br></div><div><font face="monospace">set data coads_climatology&#xA0; ! grid spacing is 2&#xB0;<br>let _ones_ = 1 + 0*y[gy=SST]<br></font></div><div><font face="monospace">repeat/range=0:8/name=yy (let val = ones[y=0:`yy/2`@DIN]; say `val`)<br></font></div><div><br></div><div>I find that the value of the integral is constant when ylim &lt;=&#xA0;dely and then it starts to linearly grow after that.</div><div><br></div><div>Perhaps this isn&#39;t intended?</div><div><br></div><div>Best regards,</div><div><br></div><div>Ryo</div></div>
</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr"><div dir="ltr">Xiaoyu</div></div>
</blockquote></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00981" href="msg00981.html">Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</a></strong>
<ul><li><em>From:</em> Xiaoyu Bai</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00974" href="msg00974.html">[ferret_users] minimum range for @DIN ?</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00979" href="msg00979.html">Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</a></strong>
<ul><li><em>From:</em> Xiaoyu Bai</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00979.html">Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00981.html">Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</a></strong>
</li>

</UL>
<center>[<a href="msg00979.html">Thread Prev</a>][<a href="msg00981.html">Thread Next</a>][<A HREF="threads.html#00980">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
