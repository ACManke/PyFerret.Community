<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] trailing slash in symbol -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 23 Jun 2020 10:27:45 &#45;0700 -->
<!--X-Message-Id: c828d024&#45;e5c0&#45;7145&#45;d763&#45;1a695549c2b9@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20200619115546.226a51cd@gfi063209.klientdrift.uib.no -->
<!--X-Reference: CAEwQpa+DFAUcHj0_WU6KBvwu4SqwoxuOsUT=fUWQvrWEvnZSyg@mail.gmail.com -->
<!--X-Reference: 20200620215506.7bfb0175@uib.no -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] trailing slash in symbol</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00738.html">Thread Prev</a>][<a href="msg00742.html">Thread Next</a>][<A HREF="threads.html#00740">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] trailing slash in symbol</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] trailing slash in symbol</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 23 Jun 2020 10:27:37 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=KC1TnBgZ;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=KC1TnBgZ;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :dkim-signature;        bh=TzY5odBBoeWvVnkttjN5qhES1+s/4qRF6DP+oHTOUrU=;        b=tPK0w6Z9oRMr5MOO+nN24TReSYYDzMSXXJeVpu9uTdgI2eC6LR6wtTzBuVmln9HpB+         gff20P9D+FutAQCTibnIh/LZEobZFwep7qr26akGafmV2m1ZgAnRnUAuaPWU4h/ROUtO         XuWlP+GafKDuiYnGZ9NdfWrN/DXtXwlLxWi+pYAa3gcrBxOwzkXUADDbzCIhfzkrIbuv         qD88Zs0OsRI4NV5NHtc5ouLXq80BcCwB+9wInRxfte+8PhpefMSfQ22TAgk72cQMEfKF         31FZnyZC4KRldUrT6saUQf2qwCZnY5Vuhy3nTfak8wT10VKwKxfDk1+LnwX6W+8pkH3b         GR5w==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :dkim-signature;        bh=TzY5odBBoeWvVnkttjN5qhES1+s/4qRF6DP+oHTOUrU=;        b=zbQriWuRvIu/RbccEYJUhmlhG0snr0LNJz0Cq+ZEcoEvwuIrCci7XXCtYWpUMWsSyI         wHFETGlMj90U7g9CE4MCLtYW7aIHa8JTr6igwGRZmfwTlf7A8BU/aBMXHUqPnZEbWdjr         mtqVGxKehJ9X0FHE0Kj1eyyGWQQLz1a2jzMnY8SLCdWDolotsql6JQ+o6BZtOYvimjSL         YscptBHK4mKn+H9D6zs/GXhSS/ezKosEfkRuA9X22a7web+cXYpB0jU8we0nDBZYLFV4         oK0bw1avkpn8bpuvdi9wfOfp6fIREysP8dxCs1bkGcDsNa1FlDu7nk3/xyGztArbob9G         BoiA==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1592933264; cv=pass;        d=google.com; s=arc-20160816;        b=JiqdZJv5fOXVyAkFWOYBXADGzIozWau1UreMw6Zta1VY2jmoTRS7QJT6wt0qd7dILc         OUHgFpoGV2Ck8oC0dUmQMot++fVkv4FFiuwUEgKYzvpL3ff9GW/85oqMTv7/F+2ryKNX         I2Lq3/ftHNQ32QRHrVhDuMXfpjyPlXEbd1F6KFGWdPU/5TlJ5p5BQF0EvOTmLZeDm7Y5         H3Wxl5fOVpDBtnkj7gfU5D0U4zN0ONcWoC6Q6oV7jxApZhx5qVIurmtmSPsG6Bwyrydi         VmdEZoEYryI+sAzFw/OwlEqRp/MTXZZ0rs7mN0m05MdT6sXkgDXO+6TLiFT8EQU5U0xf         weew==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1592933260; cv=none;        d=google.com; s=arc-20160816;        b=V7N7A9ag11afMzqVKWgGArw/VDR2tUrrlrbdT5Ne/soGVe1qASjBQyYiypbtoGlMbP         jsCXoshjnA7oUU7qsy5UBFbA0Svn1L8c+2M0I9PTPSJK9FTtl7VtPTqd1W1gpPIEYyBY         hmWoloacZB5rbDDNc/4LQqUJ7ayQMQN690R4H9j87tUOyak7j4oBmft32yAk3oUmsgr5         va28L+py4EeA0NIEv8OI1PJJRyxlbYFNxweYswbYA83bAJS+EIkyae/zuTrcsWmjDCAJ         zvD6brgkJn03iPHvtzOsE0V1Q3sBz/IQRD9geBA8z7hptVxIv4RR2iiAcqW/TRWyM//e         EXHQ==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-transfer-encoding:content-language         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=TzY5odBBoeWvVnkttjN5qhES1+s/4qRF6DP+oHTOUrU=;        b=LxEczbXybyBx0wxiFE4l/XHHjqH+jgDicHxh6BKXlKiFXF5qMyqc7EYw1TpafLSNLx         a8YXGvdcy11IRQTVH6uFqXgfS2z6kiVGeENJbnKBffatM5n+UEuhGsChEaKlBBq8TZfQ         eQcxbNYjBrg+84FHiTF6KmeiScYe0mdO1xFq0W1iL53fsYwor/+Xg14WG/B+yHouqCpd         R7wCLpFCUJSqncybtjgzPksmSwiFiHqBliYGqmF1UVigtjDArxY4kVKQIlADSNFna3sk         XKD1H7LtCjNI1N3Q/liVCvdOtLz9RzTPp3cQJVHieeM/4ic8a/vaHIJbRrYfM+on70Ei         ZCqQ==</li>
<li>In-reply-to: &lt;<a href="msg00737.html">20200620215506.7bfb0175@uib.no</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00731.html">20200619115546.226a51cd@gfi063209.klientdrift.uib.no</a>&gt; &lt;CAEwQpa+DFAUcHj0_WU6KBvwu4SqwoxuOsUT=fUWQvrWEvnZSyg@mail.gmail.com&gt; &lt;<a href="msg00737.html">20200620215506.7bfb0175@uib.no</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101 Thunderbird/68.9.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi,

</pre><tt>Interesting thread.&#xA0; I hadn't been aware of that detail regarding the 
</tt><tt>equal sign on DEFINE SYMBOL.
</tt><pre style="margin: 0em;">

</pre><tt>Some of this is described in Command Syntax, 
</tt><tt><a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/introduction/COMMAND-SYNTAX">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/introduction/COMMAND-SYNTAX</a> 
</tt><tt>and other documentation about syntax is linked in that section,
</tt><pre style="margin: 0em;">


</pre><tt>In the Ferret/PyFerret command parser, the first thing that happens, is 
</tt><tt>that the different &quot;words&quot; in the command are located.&#xA0; They're 
</tt><tt>separated by spaces,
</tt><pre style="margin: 0em;">

&#xA0;&#xA0;&#xA0; LET variable = 7

or by slashes

&#xA0;&#xA0; PLOT/X=157/Y=33/Z=20/COLOR=blue/title=&quot;measured oxygen&quot; o2_observed

</pre><tt>If it finds quotes, then everything inside those quotes is grouped 
</tt><tt>together, until the next quote is found.&#xA0; Likewise the start and end of 
</tt><tt>square brackets or curly braces is located.
</tt><pre style="margin: 0em;">

</pre><tt>During command parsing, any expression within any grave-accents, so 
</tt><tt>`stuff`&#xA0; is immediately evaluated and its value put into the command line.
</tt><pre style="margin: 0em;">

</pre><tt>Once the &quot;words&quot; are located, their role is identified, is it a command, 
</tt><tt>or a subcommand, e.g. DEFINE SYMBOL are a command and subcommand.&#xA0; Or is 
</tt><tt>it a qualifier, /X=157, or /TITLE=&#xA0; or is it an argument, or an element 
</tt><tt>of an expression.
</tt><pre style="margin: 0em;">


There seem to be some odd little artifacts about trailing slashes.

</pre><tt>On the left-hand side of an equal sign, a slash is generally seen as the 
</tt><tt>start of the next qualifier, and if there isn't one,
</tt><pre style="margin: 0em;">

&#xA0;&#xA0; yes? let/title=myvar/units=m/ var = 8
&#xA0;**ERROR: unknown command qualifier: var = 8

but if it's in an expression, it's ignored.

yes? let/title=myvar/units=m&#xA0; var = 9/
yes? list var
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : myvar (m)
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 9.000


</pre><tt>DEFINE SYMBOL seems to be set up so the value of the symbol is taken to 
</tt><tt>be everything following &quot;define symbol&quot; on the command line, up to but 
</tt><tt>not including a ! comment,&#xA0; and not including a trailing slash.
</tt><pre style="margin: 0em;">

</pre><tt>yes? define symbol sym1 = Some text including $ and / but not including 
</tt><tt>this comment ! comment
</tt><tt>yes? define symbol sym2 Some text including $ and / but not including 
</tt><tt>this comment ! comment
</tt><pre style="margin: 0em;">

yes? show symbol sym*
SYM1 = &quot;Some text including $ and / but not including this comment&quot;
SYM2 = &quot;Some text including $ and / but not including this comment&quot;




</pre><tt>In scripts, I sometimes build up a set of qualifiers, so the qualifiers 
</tt><tt>for a PLOT command might be built up depending on the state of things 
</tt><tt>and different settings, so over the course of running a set of scripts 
</tt><tt>that open a dataset and make a plot, these definitions might be 
</tt><tt>scattered in there.&#xA0; If the first one starts with a slash, and each new 
</tt><tt>one gets its own slash, it all works out in the end.&#xA0; The PLOT command 
</tt><tt>also works even if there are no qualifiers set at all.
</tt><pre style="margin: 0em;">

cancel symbol qualifiers&#xA0; ! at the start of the session.

DEFINE SYMBOL qualifiers = ($qualifiers)/X=157/Y=33/Z=20
DEFINE SYMBOL qualifiers = ($qualifiers)/T=1-jan-2020:31-mar-2020
DEFINE SYMBOL qualifiers = ($qualifiers)/title=&quot;the title&quot;
DEFINE SYMBOL qualifiers = ($qualifiers)/dash/color=red

plot($qualifiers)&#xA0; theta
</pre><tt>&#xA0;!-&gt; plot/X=157/Y=33/Z=20/T=1-jan-2020:31-mar-2020/title=&quot;the 
</tt><tt>title&quot;/dash/color=red theta
</tt><pre style="margin: 0em;">




On 6/20/2020 12:55 PM, Marco van Hulten wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Ryo&#x2014;

Je Sat, 20 Jun 2020 14:52:57 +0900 skribis Ryo:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
On Fri, Jun 19, 2020 at 6:57 PM Marco van Hulten &lt;Marco.Hulten@xxxxxx&gt;
wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
I noticed that a trailing slash is ignored for in a string variable,
</pre></blockquote><pre style="margin: 0em;">

I guess the correct statement is that trailing slashes are ignored *by the
commands.*

yes? define symbol ss &quot;/abc/&quot;
yes? show symbol ss
SS = &quot;/abc/&quot;
yes? define symbol ss /abc/
yes? show symbol ss
SS = &quot;/abc&quot;

That means that it was the &quot;DEFINE SYMBOL&quot; command which ignored the
trailing backslash.

Furthermore,

yes? define symbol ss &quot;/abc/&quot;
yes? say ($ss)
  !-&gt; MESSAGE/CONTINUE /abc
/abc
yes? say &quot;($ss)&quot;
!-&gt; MESSAGE/CONTINUE &quot;/abc/&quot;
/abc/

In this case, it was the SAY command which ignored the trailing backslash.

So, to avoid the trailing slash from being interpreted by the command, you
quote the string.
</pre></blockquote><pre style="margin: 0em;">
Thanks, it looks like this works very well!

According to the manual [1], however, the syntax should contain an
equal sign, like

    define symbol ss = something

instead of

    define symbol ss something

Without the equal sign it works best, though, because you can use
quotation marks without them becoming part of the symbol.  The
following two statements seem equivalent (according to what a quoted
SAY command tells me):

    define symbol sja = ka\/\/
    define symbol sja &quot;ka/&quot;

Earlier I was referring to my &quot;solution&quot; as &quot;doubly escaping&quot;, but that
would rather look like \\/ (or \\\\ that one sometimes needs to print
a backslash); I don't know what \/\/ is or why I thought it was a good
idea to try it out.

The behaviour of variables of type string (DEFINE VARIABLE or LET)
seems more predictable to me, so I guess it is best to only use DEFINE
SYMBOL when absolutely needed (basically, to avoid `embedded
`backtics``).

If one would use the non-= syntax for LET, this happens:

yes? let aa = 3
yes? list aa
              VARIABLE : 3
           3.000
yes? let bb 7
yes? list bb
              VARIABLE : 7
           7.000
yes? let cc &quot;abc&quot;
  **ERROR: command syntax: abc&quot;
           unclosed quotation, parenthesis, or bracket

suggesting it may be a bad habit to omit the equal sign.  But I really
don't know!  It seems that Ferret is quite lax in its syntax, but that
introduces some unpredictable behaviour!  Unless we read the source, of
course.

&#x2014;Marco

[1]: <a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/DEFINE">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/DEFINE</a>

</pre></blockquote><pre style="margin: 0em;">

--
Ansley Manke
Science Data Integration Group
NOAA Pacific Marine Environmental Laboratory
7600 Sand Point Way NE
Seattle WA 98115

I am currently teleworking and am available Tue-Wed-Thu.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00742" href="msg00742.html">Re: [ferret_users] trailing slash in symbol</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00731" href="msg00731.html">[ferret_users] trailing slash in symbol</a></strong>
<ul><li><em>From:</em> Marco van Hulten</li></ul></li>
<li><strong><a name="00732" href="msg00732.html">Re: [ferret_users] trailing slash in symbol</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00737" href="msg00737.html">Re: [ferret_users] trailing slash in symbol</a></strong>
<ul><li><em>From:</em> Marco van Hulten</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00738.html">Re: [ferret_users] trailing slash in symbol</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00742.html">Re: [ferret_users] trailing slash in symbol</a></strong>
</li>

</UL>
<center>[<a href="msg00738.html">Thread Prev</a>][<a href="msg00742.html">Thread Next</a>][<A HREF="threads.html#00740">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
