<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] DAYS1900 function not working as I expect -->
<!--X-From-R13: Ivyyvnz Yrffyre &#45; @AOO Trqreny <jvyyvnz.f.xrffyreNabnn.tbi> -->
<!--X-Date: Thu, 23 Feb 2023 10:56:17 &#45;0800 -->
<!--X-Message-Id: CAK0Qe2Oc=Tye&#45;WaMQgyGURKi_GcBPE3sNRbemxtiWKjiUbNeZw@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAPcTZwy+L+&#45;3d2jetxDePaa1&#45;mhhrPRZP7LSbbTmhruAyP0U=w@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] DAYS1900 function not working as I expect</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg01236.html">Thread Prev</a>][<a href="msg01238.html">Thread Next</a>][<A HREF="threads.html#01237">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] DAYS1900 function not working as I expect</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Gary Strand &lt;<a href="mailto:strandwg@DOMAIN.HIDDEN">strandwg@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] DAYS1900 function not working as I expect</strong></li>
<li><strong>From</strong>: <strong>William Kessler - NOAA Federal &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 23 Feb 2023 10:56:02 -0800</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=QHWo8JSt;       spf=pass (google.com: domain of <a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=REJECT dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=QHWo8JSt;       spf=pass (google.com: domain of <a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=REJECT dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:cc         :to:subject:message-id:date:from:in-reply-to:references:mime-version         :dkim-signature;        bh=Z88ilupBc2BVKnKTJky9FzLkfoq9hTls3RCjh9RnZN4=;        b=Wam1MP0qmQnp+kXvoof/XrxQi2uyZZU7mcLxfr6bHgRlwGsuCbS9FmDP1S7sdnkw2w         jQZh0pnSXiQYiw5dwNp18XRhaocwlkyOpJ5Zgtvrd6cfxBIuCWKo032UozIQngCV2Sdu         LYt6GMxkUEtA6sDQJ2SiEOjdmXMg8+P7/C+uIHZDakgxRpwEdAuZxNC2wSFUhJf5nn30         BslwmjsaAIDFEQlbXUhcrekeQNnaongAndVfMsaeICJZTnwhj4w0GIx2HPcJBWpIezec         5Z6At04H63ukp75UocDlUaJx4bokltZQEUeCOitlHY1gYmsyW1w9vy880J78I/b/CK1J         9Swg==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=Z88ilupBc2BVKnKTJky9FzLkfoq9hTls3RCjh9RnZN4=;        b=03RFsxFv5KtqAQN1J6vY/CCM9SJXsb3Fvl05kPMCxVFI4IovyTrFYdrnxIwfh9d74B         IqqMx7mFeVaZvdT2wq/qieZAuwbggD8YQJOhqH91MAWFYWy+VYvo/vzaSpB5HlC+Q3n4         d21WvgR1/Q46e/JJYZpmGPfARkSHJHtenO+HNCwaf97htxEGoJs5zXmDv/YkEJIMy6xY         9+rcLcJfdKwoqDuEj15iV5g2/c2RsauzyROg9i+099z76zicswiFuvjMk7XLXgFg/i1J         fRwzLGNW7REEHZdVjEcEgYO5pX0qRU1w1TH4Vmbvp+Chug4iT6DMkKHQOjk9S+tgT3OR         1xjg==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1677178576; cv=pass;        d=google.com; s=arc-20160816;        b=fRuOZwjp2O4j4xcg9jS1fF1se5WMrZJkijezETMr5apwZOsw+uinpqsm5/hKzjY1vK         /LbH0Y02ec472SUTRYYXlRjXxXHykbkrirfdlEILHrjjVsY4GnILG2YVyhbVQ77UV1kw         AeDTuVb0Ljo/eI6GzKNacKOYOrPpdVAMSniRGY4E2qB4u2CpmiDB3feifTSKEEzBP7ZS         A4sTcMueWzpzXyk6z/9vJIXXJl7jxmxAYvC04Y34D2BJqXzEGg6UJyTkkl3bIucv9KO2         4vuMTkWw4WoQgouXXXnzv2ksfRf+zmEEoR83ccxN/XyQYaOeLqVXM9dUGxk0jrHvnP49         KmHw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1677178574; cv=none;        d=google.com; s=arc-20160816;        b=LmFbJ4XfZ0szoAvZJUiXRjKQuCy2nprnnKYDnhQMvvlwpDGeBpYwEP9a/8pKpK0bWW         flx51rH3KjhvZJmSrN5QwW+4oQi7iA6G++wj11oQSYp+mrnlWbCcK4JsBcmd/NGtFTgv         WbQgiN0qgHqD+WM0tn3adVGqsgOThpkqCJwclhQWK4PsPYuBhLpt5vcmyitWQdUei3DO         qdsQSfMw8t/b4EmfjPN/svCPkWA5hYRwmYKtoUcolORHW1pxabkKXDIMgxJk1AI9OI/k         1BGrGaCvU5P8RHIJDmAFZ1mGDBTeKVv5Pl9tjRHGQx+5D/VCJpw9xLCJx+lqNg2NYMUt         OGEg==</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :x-original-authentication-results:x-original-sender:cc:to:subject         :message-id:date:from:in-reply-to:references:mime-version:from:to:cc         :subject:date:message-id:reply-to;        bh=Z88ilupBc2BVKnKTJky9FzLkfoq9hTls3RCjh9RnZN4=;        b=Grqyf5tO9h8CxM4F1+WSOhDTobBGtGOknl75Qkm5Nm0v2OXDLV/5XZWwpSoJHcf0mn         DMrYxFwMwSryNQB6cYzP8Fv92zqefBLhLPbF1N1k8xQdroIaQmwMUnksoUAPD7tmOILE         Hg9VqeHazajnwVOYu37oqFhDTqWjmv5LqhJaSnMhMHCI+AbIXrLkql+5lFuQ7vF4m4r1         wPHvIsBduC8d20CpQ3Bc4UTLePcKfxTPepVlDS1UNbuX3J3f7wjzusGB9DEsUsXYoeAu         cFH3wAk21l7yL0WKw4pmSL0FgnTF7JaDuIGIG85aMSf8a78u6P/gJAiyiUmkC/Rf2UOw         bXoA==</li>
<li>In-reply-to: &lt;CAPcTZwy+L+-3d2jetxDePaa1-mhhrPRZP7LSbbTmhruAyP0U=w@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAPcTZwy+L+-3d2jetxDePaa1-mhhrPRZP7LSbbTmhruAyP0U=w@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div><div><br></div><div>The very first thing to do would be to test your read by listing the first few values of mon,day,hour,minute,data:</div><div>LIST/I=1:30 mon,day,hour,minute,data&#xA0;&#xA0; ! Noting more than 24 points to test HR. Is this correct?<br></div></div><div><br></div><div>Two possibilities come to mind:</div><div><br></div><div>1) Since you do not specify the axes/grid of the input, Ferret is taking it along the x-axis, not the time axis as you want. Apparently DAYS1900 is just reading the numbers so it works at least partly but I think everything would be smoother (especially later if you want to plot on a time axis) if you defined the time axis and grid right at the start with DEFINE AXIS and then DEFINE GRID, then read the data with FILE/.../GRID=</div><div><br></div><div>If you know the time range and axis exactly - and since you have a small number of records - you can define the time axis from looking at the raw data. Otherwise, if you know that the time axis is regular you could use that information. <br></div><div>Or, you can do a double read:</div><div>First read ingests MON,DAY,HR,MIN and uses that to construct the axis and grid. Then use those for the second (actual) read on the defined grid. Using the same file, the second read will simply replace the first, and the axes/grid defined from the first read will remain defined.<br></div><div><br></div><div>2) Define a fortran format for your read. The problem might be the integer values of MON,DAY,HR,MIN. But you can fake it with a fortran format with zero decimal places:</div><div>FILE/FORMAT=(f3.0,f4.0,f5.0,f4.0,f5.1) ... ! I think this will read your MON,DAY,HR,MIN,DATA</div><div><br></div><div>Billy <br></div><div><br></div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Feb 23, 2023 at 10:01 AM Gary Strand &lt;<a rel="nofollow" href="mailto:strandwg@xxxxxxxx" target="_blank">strandwg@xxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small"><br clear="all"></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small">I have some 5-minute data for an entire month that I&#39;m trying to read in and save as netCDF and the DAYS1900 function doesn&#39;t appear&#xA0;to be incrementing the date as I expect.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small">Here&#39;s a data sample, two days&#39; worth&#xA0;(24 samples)</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small"><br></div><div class="gmail_default" style="font-size:small"><font face="monospace">mon day hour min data<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0; 0 13.4<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0; 5 13.1<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;10 12.7<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;15 12.2<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;20 11.9<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;25 11.5<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;30 11.3<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;35 11.0<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;40 10.8<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;45 10.7<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;50 10.5<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;0 &#xA0;55 10.3<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0; 0 10.1<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0; 5 10.1<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;10 10.0<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;15 9.8<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;20 9.7<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;25 9.6<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;30 9.6<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;35 9.6<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;40 9.5<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;45 9.4<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;50 9.4<br>&#xA0; 1 &#xA0; 1 &#xA0; &#xA0;1 &#xA0;55 9.3</font><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small">And part of a script to read the data:</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small"><br></div><div class="gmail_default" style="font-size:small"><font face="monospace">[...]</font></div><div class="gmail_default" style="font-size:small"><font face="monospace">file/skip=1/var=mon,day,hour,minute,data $1<br>!<br>let time = (DAYS1900(2022,mon,day)-DAYS1900(2022,1,1))+(hour/24)+(minute/60)<br>list time<br></font></div><div><div class="gmail_default" style="font-size:small"><font face="monospace">[...]</font></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small"></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small">And the output of &quot;list time&quot;:</div><div class="gmail_default" style="font-size:small"><font face="monospace"><br></font></div><font face="monospace">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;VARIABLE : (DAYS1900(2022,MON,DAY)-DAYS1900(2022,1,1))+(HOUR/24)+(MINUTE/60)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;FILENAME : <span class="gmail_default" style="font-size:small">TEST</span><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;SUBSET &#xA0; : 2<span class="gmail_default" style="font-size:small">4</span>&#xA0;points (X)<br>&#xA0;1 &#xA0; &#xA0; / &#xA0; 1: &#xA0;0.000<br>&#xA0;2 &#xA0; &#xA0; / &#xA0; 2: &#xA0;0.083<br>&#xA0;3 &#xA0; &#xA0; / &#xA0; 3: &#xA0;0.167<br>&#xA0;4 &#xA0; &#xA0; / &#xA0; 4: &#xA0;0.250<br>&#xA0;5 &#xA0; &#xA0; / &#xA0; 5: &#xA0;0.333<br>&#xA0;6 &#xA0; &#xA0; / &#xA0; 6: &#xA0;0.417<br>&#xA0;7 &#xA0; &#xA0; / &#xA0; 7: &#xA0;0.500<br>&#xA0;8 &#xA0; &#xA0; / &#xA0; 8: &#xA0;0.583<br>&#xA0;9 &#xA0; &#xA0; / &#xA0; 9: &#xA0;0.667<br>&#xA0;10 &#xA0; &#xA0;/ &#xA0;10: &#xA0;0.750<br>&#xA0;11 &#xA0; &#xA0;/ &#xA0;11: &#xA0;0.833<br>&#xA0;12 &#xA0; &#xA0;/ &#xA0;12: &#xA0;0.917<br>&#xA0;13 &#xA0; &#xA0;/ &#xA0;13: &#xA0;0.042<br>&#xA0;14 &#xA0; &#xA0;/ &#xA0;14: &#xA0;0.125<br>&#xA0;15 &#xA0; &#xA0;/ &#xA0;15: &#xA0;0.208<br>&#xA0;16 &#xA0; &#xA0;/ &#xA0;16: &#xA0;0.292<br>&#xA0;17 &#xA0; &#xA0;/ &#xA0;17: &#xA0;0.375<br>&#xA0;18 &#xA0; &#xA0;/ &#xA0;18: &#xA0;0.458<br>&#xA0;19 &#xA0; &#xA0;/ &#xA0;19: &#xA0;0.542<br>&#xA0;20 &#xA0; &#xA0;/ &#xA0;20: &#xA0;0.625<br>&#xA0;21 &#xA0; &#xA0;/ &#xA0;21: &#xA0;0.708<br>&#xA0;22 &#xA0; &#xA0;/ &#xA0;22: &#xA0;0.792<br>&#xA0;23 &#xA0; &#xA0;/ &#xA0;23: &#xA0;0.875<br></font><div class="gmail_default" style="font-size:small"><font face="monospace">&#xA0;24 &#xA0; &#xA0;/ &#xA0;24: &#xA0;0.958</font><font face="arial, helvetica, sans-serif"></font></div><br></div><div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small">Why is the 13th sample not 1.042? Of course, ferret is complaining that the axis isn&#39;t monotonically increasing.</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small">What am I missing?</div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small"><br></div><div class="gmail_default" style="font-family:arial,helvetica,sans-serif;font-size:small">Thanks!</div><br></div>-- <br><div dir="ltr"><div dir="ltr">Gary Strand, CESM Data Manager<br>ORCID 0000-0001-9740-0104<br><a rel="nofollow" href="mailto:strandwg@xxxxxxxx" target="_blank">strandwg@xxxxxxxx</a><br></div></div></div>
</blockquote></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="01238" href="msg01238.html">Re: [ferret_users] DAYS1900 function not working as I expect</a></strong>
<ul><li><em>From:</em> Gary Strand</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01235" href="msg01235.html">[ferret_users] DAYS1900 function not working as I expect</a></strong>
<ul><li><em>From:</em> Gary Strand</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg01236.html">Re: [ferret_users] DAYS1900 function not working as I expect</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01238.html">Re: [ferret_users] DAYS1900 function not working as I expect</a></strong>
</li>

</UL>
<center>[<a href="msg01236.html">Thread Prev</a>][<a href="msg01238.html">Thread Next</a>][<A HREF="threads.html#01237">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
