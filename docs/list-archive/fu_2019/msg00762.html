<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] minor issue: "Ignoring erroneous point_spacing=even attribute." -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 7 Jul 2020 13:54:07 &#45;0700 -->
<!--X-Message-Id: be2512de&#45;bec3&#45;18f2&#45;b732&#45;1a45ee8f88be@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAEwQpa+PF1pgqvzDQkbWFe_hMtLmsH5NjzgqWWUc9Pab_UhhWA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] minor issue: &quot;Ignoring erroneous point_spacing=even attribute.&quot;</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00761.html">Thread Prev</a>][<a href="msg00763.html">Thread Next</a>][<A HREF="threads.html#00762">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] minor issue: &quot;Ignoring erroneous point_spacing=even attribute.&quot;</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;, ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] minor issue: &quot;Ignoring erroneous point_spacing=even attribute.&quot;</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 7 Jul 2020 13:54:03 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=XSoDPYCT;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=XSoDPYCT;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:in-reply-to:mime-version:user-agent:date         :message-id:references:to:subject:from:dkim-signature;        bh=sVGE0DR7MPoo4R4WUPEwHSAVyZ7EHTK1Kww/EHG0TkM=;        b=waJkeBMdllX2Z/sMMHfBX9RUfMrvyWwSN2BlUqBe2etqaEI39lotO16SnECpVvcFVy         4hylgQMYe3jTk1KPqqeAOC56hfbmGIdybvTvRfzUAXo9Q/v1oHKD9jYjQrGaqRUUv3im         iBkPiHk8IHyErMDCwaS+axS1RcUAj6EVMN6p7EpFm6w2LcyrWHfLAL9uukCiQcFWRkBx         +xJK2lEPDkm+pe52p+nWce4j2bTOtLic8017UtZD4eqxwpVUzBV0Qj3TE0ZHW7HcEi2S         TdU5KZGi7767OAXLE9Nxr/o4vu0crM7lp6z3ASIlNWeJV2ZTRfaSS/STyK6T9WJGAvTO         77zQ==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:references:to:subject:from:dkim-signature;        bh=sVGE0DR7MPoo4R4WUPEwHSAVyZ7EHTK1Kww/EHG0TkM=;        b=lh9DQEL5oGal8YHOoTVwh4B/YFUEtJ3hxQkKlt+1kzsHebR/wmKqe2K+hYopABidX8         3eRuA0XfOnpzj5kP9nIadiFmk+MDRHuuoYzj2THQAOidI8WKOEVckN5bfupkJk2iA0dy         kbWd3LKjVDLYbpNoJEe2dWMdNPUEubNrCMDH+g0aERs7L922IZhnEErpvc0nzeR9ruuc         amEPBGng7lhsmuYOa300LXdeoQBK9KFyShZk+GifMoTBpd2VCGDe/tfF9cz6XbR9tU6u         qE+xj4lCkxs7KoGheuZFQD+C3dT9winToh+3gQlKHLMprPvoZB/XjS98e47YLdCmznuB         052w==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1594155246; cv=pass;        d=google.com; s=arc-20160816;        b=OrmnUMxgT7KagXMTVrnqWdhn5D8OtoYMZvWsXjOL0fcW8ccUURRvwAG3HoaxlYLvcM         VBJ0/I1tQf8xo0xOnJMW8CHnx0JoLa4OiESt9p7JKk7X0eewvT7DDoFhQtgVgaNW8LE7         rWa/7TD8uEjPV1MIJPuKNrycQaTZEBFy3kFnaxVZji7GYfdnroKfd4Fcgde+ag8oI6xq         oSWiM13IY/JVX1Feo8ff59YgA1ENQwdpbPzhYx1gCSKnJrIecAg+rWY9Zn+dS6qcijmC         zUiuqy1DFoztIWXBm4RhesbIve9YKY4scA+ZNhEXqaSNarCz/5Nwsyu/F27Z3iBUWe3p         ifrA==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1594155246; cv=none;        d=google.com; s=arc-20160816;        b=Mv+yhFsekf5P2I/s0ogoSwsCY70kxfIykiOeYu/VHVTCjg2rUIAc04bYtpydD1y5GD         KZ/QipVsabUPN6hGqdd2YNtO93GKEtDgx5zrBkzr/vDK85vLQPCq8uFdLxA74OdFkemu         cCKqZA2y9V/j3mgKuStrnwLmGbiM0bkby6mnZeJ+vcFBJHAJgJHU/h0kY4ySHmPjq6/G         lhM3grOlAOMacEI9Ssn1tggB+w/3RslUIVo8lc7UHOwSfQZbDj7xM3l0KDSpBntioH+b         ByKkyqovMjOMtcj9oHOV3JiPg+Nv9HW6EyI8yUMvkrsq4vevcqWXtYmQ9bstkU6ArKRP         KfYA==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=from:subject:to:references:message-id:date:user-agent:mime-version         :in-reply-to:content-language:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=sVGE0DR7MPoo4R4WUPEwHSAVyZ7EHTK1Kww/EHG0TkM=;        b=oV3Vjhciz6KvpWCSc/mO+7e0dYhZ4fuMuoV7KEtmC7B2ROe1DzgF/vhEp5OJ39kCWH         vhmtkD7UdDvG+NPqCCA93Za4L3Kb7Ux9N6FzksZMxrwjqLOCgbNsbjjejyM3b8XQAPbn         wPNtDRCzzOCSI7MTiOS/dGqV8AxItH3SmBb/JSFth31v0RrP+bg5pHMLz9+xyL1FIMYi         haHSI0d3r9wzV7RVHVFxXlC318TKtLnrXsUTx4AoTYgz7KPt8LQOEKsQhBb6GhZ4CNUB         i76iO/8JZ7Ot94ci0crohl1S/EA0NuvIulk96B6CIIwUZ0m/18sDnA6f54JEkH/UDYfi         9uBA==</li>
<li>In-reply-to: &lt;<a href="msg00761.html">CAEwQpa+PF1pgqvzDQkbWFe_hMtLmsH5NjzgqWWUc9Pab_UhhWA@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00761.html">CAEwQpa+PF1pgqvzDQkbWFe_hMtLmsH5NjzgqWWUc9Pab_UhhWA@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101 Thunderbird/68.10.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->

  
  
    Hi Ryo,<br>
    Yes, this is somewhat of a known problem; I've also occasionally
    seen things of this sort.&#xA0; When a coordinates are read in on
    initializing a dataset, they're checked for regular spacing using
    the data type of the coordinates in the file, so a floating-point
    axis is checked using single-precision testing. And there's a sanity
    check on axes marked as regularly-spaced.&#xA0; Apparently in the past
    there were egregious errors because a truly irregular axis was
    marked as regular. (Interestingly, point_spacing is not in the CF
    standard, but does seem to be widely used and goes back to early
    days of Ferret.) So datasets that are correct are treated correctly
    and any calculations using coordinates are fine when working with
    that file. But, on writing a netCDF dataset, Ferret/PyFerret always
    writes coordinates in double precision.&#xA0; This is where we wind up
    getting a bit of inaccuracy.<br>
    <br>
    It looks as&#xA0; though we changed the testing for regular-spacing
    somewhere at about version 7.4, and I'll have a look at that.&#xA0; Also,
    we've been working along in general on changes so that any netCDF
    files that Ferret writes as subsets or otherwise based on netcdf
    files, match what is in the input files.&#xA0; Things like upcasing
    variable names and ignoring attributes should at least be
    controllable. In recent versions we write data using the same data
    type as the input file, and it should be easy to do the same for
    axes, so for this example the y-axis would be written as single
    precision coordinate variable.&#xA0; So we'll have a look at that too.<br>
    <br>
    Ansley<br>
    <br>
    <div class="moz-cite-prefix">On 7/3/2020 6:51 AM, Ryo Furue wrote:<br>
    </div>
    <blockquote type="cite"
cite="">
      
      <div dir="ltr">Ferret Team,
        <div><br>
        </div>
        <div>I searched our mailing archive but didn't find it there.</div>
        <div><br>
        </div>
        <div>My original netCDF file has an&#xA0;x axis like</div>
        <div><br>
        </div>
        <div>&#xA0; &#xA0;<font face="monospace">float lat = 9.95, 10.05, 10.15, .
            . .</font></div>
        <div><br>
        </div>
        <div>without the "point_spacing=even" attribute.</div>
        <div><br>
        </div>
        <div>I open the file in PyFerret and save just one timestep (L)
          into a new file:</div>
        <div><br>
        </div>
        <div>&#xA0; &#xA0; <font face="monospace">save/file=<a rel="nofollow"
              href="http://tmp.nc/l=10" moz-do-not-send="true">tmp.nc/l=10</a>
            var</font></div>
        <div><br>
        </div>
        <div>I then open this new file and PyFerret says,</div>
        <div><br>
        </div>
        <div><font face="monospace">&#xA0; &#xA0; *** NOTE: Axis "LAT" is
            irregular. Ignoring erroneous point_spacing=even attribute.</font><br>
        </div>
        <div><br>
        </div>
        <div>Indeed the new file has gotten the "point_spacing=even"
          attribute.</div>
        <div><br>
        </div>
        <div>I come across this problem from time to time.&#xA0; (Today I
          reproduced this on PyFerret v7.5 on Linux.)</div>
        <div><br>
        </div>
        <div>The axis is a single-precision real and the&#xA0;gridpoints&#xA0;may
          not be&#xA0; precisely&#xA0;represented.&#xA0; So, I'm not surprised&#xA0;that
          this axis isn't regarded as "even".&#xA0; That is, PyFerret is
          doing the right thing when it reads the new netCDF file.&#xA0; So,
          it's probably a mistake that it added the "even" attribute
          when it saved the data.</div>
        <div><br>
        </div>
        <div>Strangely, the longitude axis -0.05, 0.05, 0.15, . . . ,
          which originally didn't have a point_spacing attribute either,
          got a point_spacing = "<font color="#ff0000">un</font>even"
          attribute in the new file!</div>
        <div><br>
        </div>
        <div>Cheers,</div>
        <div>Ryo</div>
        <div><br>
        </div>
      </div>
    </blockquote>
    <br>
    <pre class="moz-signature" cols="72">-- 
Ansley Manke
Science Data Integration Group
NOAA Pacific Marine Environmental Laboratory
7600 Sand Point Way NE
Seattle WA 98115

I am currently teleworking and am available Tue-Wed-Thu.</pre>
  


<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00763" href="msg00763.html">Re: [ferret_users] minor issue: &quot;Ignoring erroneous point_spacing=even attribute.&quot;</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00761" href="msg00761.html">[ferret_users] minor issue: &quot;Ignoring erroneous point_spacing=even attribute.&quot;</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00761.html">[ferret_users] minor issue: &quot;Ignoring erroneous point_spacing=even attribute.&quot;</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00763.html">Re: [ferret_users] minor issue: &quot;Ignoring erroneous point_spacing=even attribute.&quot;</a></strong>
</li>

</UL>
<center>[<a href="msg00761.html">Thread Prev</a>][<a href="msg00763.html">Thread Next</a>][<A HREF="threads.html#00762">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
