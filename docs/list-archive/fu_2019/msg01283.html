<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data -->
<!--X-From-R13: Dlb Thehr <shehrNunjnvv.rqh> -->
<!--X-Date: Fri, 1 Sep 2023 07:58:20 &#45;0700 -->
<!--X-Message-Id: CAEwQpa+RpwmG=8z5Ujxw58=jfgSq2PdTEdBVqsGb0jeCN9KK&#45;Q@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CADrnUWwbv0wyB3x&#45;Mt+xq5jotsBJcfLz4HrAiMHa0c8Teu0mJA@mail.gmail.com -->
<!--X-Reference: CAEwQpaKOu0W7F4m&#45;d5PLnuwFhCeveKF0Mc1tbdSGLD9ErdzwCA@mail.gmail.com -->
<!--X-Reference: CAEwQpa+cNebt6ThHs8SYPMew=Awu741c+SBhpwz4T450BrN8Rw@mail.gmail.com -->
<!--X-Reference: CADrnUWyY+zyv6vxvsV5OvayQjQgiAwVj3qZfZxQmxCm2w5Ghew@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg01282.html">Thread Prev</a>][<a href="msg01284.html">Thread Next</a>][<A HREF="threads.html#01283">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Satheesh Shenoi &lt;<a href="mailto:shenoi1958@DOMAIN.HIDDEN">shenoi1958@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</strong></li>
<li><strong>From</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 1 Sep 2023 23:58:03 +0900</li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@hawaii.edu header.s=google header.b=P1+PVo98;       arc=pass (i=1 spf=pass spfdomain=hawaii.edu dkim=pass dkdomain=hawaii.edu dmarc=pass fromdomain=hawaii.edu);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.216.71 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@hawaii.edu header.s=google header.b=P1+PVo98;       arc=pass (i=1 spf=pass spfdomain=hawaii.edu dkim=pass dkdomain=hawaii.edu dmarc=pass fromdomain=hawaii.edu);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.216.71 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@hawaii.edu header.s=google header.b=P1+PVo98;       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>;       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=hawaii.edu</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:cc         :to:subject:message-id:date:from:in-reply-to:references:mime-version         :sender:dkim-signature;        bh=/7Gi42kymmgDwYVA6FPu7W4yUYiZ4Me2SKsqAe4LwyE=;        fh=OCQe8cYc4LR2DBuZzRbbb5j2VtBt+ExvcEnL7VAcf7Q=;        b=gAL6Zn2XGF7qZk/Ws9vSPekYwbuSVTPrN8TJmt7r10tyrS06F4lQM/o5ytdUHT+P0K         1JqCFuXkCPAUWqyeX9EKFkMDb+e1t4QuooYLnEtaNPEr4aBEb7zDjeAXeQydamDGdOql         fjQ0wnDI0C6DIrWHnoHmGrw+WQVKGm83aFzmE3ofi1Hfr+7kJnzuD951+WhWrqWCk/b/         fI4tc/KZ5YAu+Xs2B6r0kpGBgq07X9anUuil1jg86zwh0qwZPEDyyXZDLeW14VZ0Rq8o         M3DfyctIgYg2JF9i3CpgTOh07wFx/9AepENxSPU+uD2QKZF6lGSwyNRjT5o39zKhQWFF         13KA==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=/7Gi42kymmgDwYVA6FPu7W4yUYiZ4Me2SKsqAe4LwyE=;        fh=OCQe8cYc4LR2DBuZzRbbb5j2VtBt+ExvcEnL7VAcf7Q=;        b=YDl2AszUY0mO8hsXiWDAg3JTxAdJPxlo8mJRm4SR3EAweaQCp0bcQA08jZut0YDw8s         1KDrpw8BJxP97GaaCb0FRR5GwD3qNQMqg7Yuo5wdimvpH+ZE7aCmkmnzSWuBaka9Zcm1         WtaNWnnlPMYtgbF5QSS2uouO8Llc04Iu1/Kksz6OH/nClWr2G637vWIBNrUJkwlYTPo7         dBrxE9venuBaBd0D+YXbP/eqF9SiCqu8KxqwSi5MTdgU5NJe/iJIbTRqj9t/7d1z+yel         fESGADHgxCPlieuuu63RlxIFtzz/wq7pHVrhrM9bybmRCFgUpW0N6tKt9T3e3xDj6B/e         KUUw==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=/7Gi42kymmgDwYVA6FPu7W4yUYiZ4Me2SKsqAe4LwyE=;        fh=OCQe8cYc4LR2DBuZzRbbb5j2VtBt+ExvcEnL7VAcf7Q=;        b=b3/iIG0p3HhAU5UBGnEzlAImQt4BPnZ20w1d2B+aVgXStQam9RhnaprKpFFqr3paJh         EZrAJeLJ3fbKKkoBOq1Sv1dSK+FUX+nKkhFw4v+toOUryGdhN0Buus8CVTu3bigZsjwP         zweSEOm4Jk9p0tDSjgryug3d0+WfzMPznabHk+39zd/SSivCacZg6njVu4UYceFcA8ZE         p51g3+dskzhOZMeF8su0t3RzsCFYesLnG/ThVvjbggk/6ASOZqKHkHXMV81I70fnYu93         nkzaQumvbA+l7Fg7+OeGafPGxeG/nqLBEW1OL5atBOqo7AeyNJTEbjZ0WUFjxCZwvNah         I8oA==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1693580299; cv=pass;        d=google.com; s=arc-20160816;        b=Y3wzL1Hic6m6aEMtwxDtlj8qsxlKP4I2/nv6XqNeNCRcwTFhz+kJKcwGY643hB52T2         +iGI6Xf6kCbHgbSb1N0KQ1mLzWCXFetZFef8z6sNrOTuRGB6zDDwY2tu8VEGnWEMugBt         g/BsbvXMyfMi1z3nOHtU8S2O4cXJTBGV/mlXG85Yn1W1KHkRNaUJpL3MDCGgOgHb8vsL         5+Ge8oXd7yHdGABrzeXh+fte+GrH5R1yaBUoe7JbJ19vrMNSK0SvwUBjrqjNRoRAMRWJ         RIsPs0eAX4FHRXLMXReEa6FEPP0KnuhbUnZqAOg3pjPSrOmnxhnzL91V+o/rb1jBEbyj         Vhtw==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1693580298; cv=pass;        d=google.com; s=arc-20160816;        b=HuVhk3k/zAiD5jCDJq6Rh3TSZyyuof7XEl/ts23n892IDGHBsjEKvQ8NQr84TNvvUW         u36Clc7cnZ+bfP07RGXXBTmFG+gFrdkSTIVcsYnc+pHasu5devyQnAqi3/DmoExe/QNE         Cwml9nz79p9f+0HKyfblHYchetv0j2cfTlbgVypd1kgKvV/nfi/LzqF/NVxG2zewh07f         7SvEeUNLgZW+rSRpIE9zl+PfpczlWhsgEQPAmQa/INbAK+QyM6XBtDL8EIf/qnOGWMno         j91W0HcM4B5SOBS2SEZTwehtwrAHvPYcjx54A3f+7wS7mnmIAKWKqimvLgoXurqG8NO2         mFrA==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1693580294; cv=none;        d=google.com; s=arc-20160816;        b=To1vQbvprNIYbQfILvwIIRqM/d7Mvy2k9ZHcAYbX6lb5OD2IBFAn5UyI80YRxyf/kk         0TzNJPjb3uRy8vk4qCb4Js1Qnq5dhkmearvnjvgvUc2rp7cWKpV6x97zhcGuJxfj7GUi         7QzpFQNd/FSKgICTVGLq7QccXsPFDhuwu+6O5qfx97KYAymwjZRb3pdIV2Fqtrt5Zdn3         WOuX0gH3UVbPkXj+T5AnEbuVI8A9fRbvCYXfLJF/VcgnmfYYl0SR8se7Db6gnTXkqzf7         W5Yx4AkdGPnIfGuhNo3tb3qZi0Z88QuA+GVdW6t/+FWH/h/CTHrexo3MVEBeSQGMRKGn         D10w==</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google; t=1693580299; x=1694185099; darn=eclipse.pmel.noaa.gov;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :x-original-authentication-results:x-original-sender:cc:to:subject         :message-id:date:from:in-reply-to:references:mime-version:sender         :from:to:cc:subject:date:message-id:reply-to;        bh=/7Gi42kymmgDwYVA6FPu7W4yUYiZ4Me2SKsqAe4LwyE=;        b=eQxWw4f0rzGxSESzefNut790TJOJRquN/fDmrkTeiZFsXLf1JErIXb0MuwDfvXIzxb         v9Ggg9Q3XgnsV79+MYMtYO4o/cykEHi2I9v92mFtk5arTcGU4vBcaxSckzFLKWOtrqvb         LFDk9QxXAjCQthYPGob5BADcTJrF96RgMK7ivmRWgGih03luK4M9rqRFDy47uLUV8Mde         DXWPAwiZmce+0nbweVbzCmJbA+KH7tDBuQkLRCO50qLQ7jpJQw7Y99NmjNl4dmzJ9TYl         GGR5Rd8BjCcWP0u9c4gcUv9PwnOSRxPywS6DvgF0J/DibOytTXzqJvE46CMifEQ2mXGb         Yrvg==</li>
<li>In-reply-to: &lt;<a href="msg01282.html">CADrnUWyY+zyv6vxvsV5OvayQjQgiAwVj3qZfZxQmxCm2w5Ghew@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg01279.html">CADrnUWwbv0wyB3x-Mt+xq5jotsBJcfLz4HrAiMHa0c8Teu0mJA@mail.gmail.com</a>&gt; &lt;<a href="msg01280.html">CAEwQpaKOu0W7F4m-d5PLnuwFhCeveKF0Mc1tbdSGLD9ErdzwCA@mail.gmail.com</a>&gt; &lt;CAEwQpa+cNebt6ThHs8SYPMew=Awu741c+SBhpwz4T450BrN8Rw@mail.gmail.com&gt; &lt;<a href="msg01282.html">CADrnUWyY+zyv6vxvsV5OvayQjQgiAwVj3qZfZxQmxCm2w5Ghew@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div>Dear&#xA0;Satheesh and Ferret users,</div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Fri, Sep 1, 2023 at 6:16&#x202F;PM Satheesh Shenoi &lt;<a rel="nofollow" href="mailto:shenoi1958@xxxxxxxxx">shenoi1958@xxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div style=""><div style="">[ . . . ]</div><div style=""><font face="arial, sans-serif" style="">If I understand your&#xA0;response correctly, it is possible to get the vertical velocity using the continuity equation by smoothing &#39;w&#39; appreciably.&#xA0;</font></div></div></div></blockquote><div><br></div><div><br></div><div>That&#39;s not quite what&#xA0;I meant.&#xA0; I meant:</div><div><br>1. Use exactly the same discrete continuity equation that the model uses.&#xA0; Different discretization will often result in large error.</div><div><br>2. If you cannot use the exact discrete continuity equation, then you would need to heavily smooth the w field calculated with an ad-hoc discrete continuity equation.</div><div><br>In case 2, you don&#39;t know how much smoothing is appropriate because you don&#39;t know the true w field.&#xA0;<br><br><br><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">I would like to try it out because my earlier attempt without non-smoothing did not yield&#xA0;any reasonable structure for w.<br></blockquote><div>&#xA0;</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">However, I have a question because you say that because your numerical code uses&#xA0;B-grid and the Cartesian coordinates, u[x=@DDC]&#xA0;+ v[y=@DDC]&#xA0;is the right calculation.&#xA0;</blockquote><div><br></div><br>On the B-grid, both velocity components, u and v, are located at the same gridpoint.&#xA0; So, both central-difference derivatives u[x=@DDC] and v[y=@DDC] are located at the same velocity points.&#xA0; In the C-grid, the u and v components are located at different grid points and there u[x=@DDC] and v[y=@DDC] are located at different gridpoints.&#xA0; For this reason, to sum the discrete &#x2202;u/&#x2202;x and &#x2202;v/&#x2202;y, you need to map them to a common grid by interpolation.</div><div><br></div><div>With SODA, you use the spherical coordinate.&#xA0; Then,</div><div><br></div><div>div(u, v) = (&#x2202;u/&#x2202;&#x3BB;)/(r cos &#x3D5;)&#xA0;+ [&#x2202;(v cos &#x3D5;)/&#x2202;&#x3D5;] / (r cos &#x3D5;)&#xA0; . . . (A)</div><div><br></div><div>(See <a rel="nofollow" href="https://en.wikipedia.org/wiki/Del_in_cylindrical_and_spherical_coordinates">https://en.wikipedia.org/wiki/Del_in_cylindrical_and_spherical_coordinates</a> ).&#xA0;&#xA0;@DDC calculates the correct &quot;gradient&quot; in both directions in the spherical coordinates.&#xA0; So, the zonal gradient (&#x2202;u/&#x2202;&#x3BB;)/(r cos &#x3D5;) is correct because dx = r (cos &#x3D5;) d&#x3BB;.&#xA0; On the other hand, the meridional &quot;gradient&quot; is<br></div><div><br></div><div>&#xA0;(&#x2202;v/&#x2202;&#x3D5;) / r . . . (B)<br></div><div><br></div><div>because dy = r d&#x3D5; .&#xA0; This gradient is, however, not the derivative we want: compare (B) with (A).&#xA0; Normally, this error is minor unless you go to high latitudes, but, as I demonstrated in my previous message, a small error in horizontal divergence translates to large error in w . . .&#xA0; I don&#39;t know whether this error would be cured by smoothing . . .</div><div><br></div><div>The GCM of course uses a discrete version of (A), which isn&#39;t hard to program if you know how to do it . . .&#xA0;</div><div><br></div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><span style="color:rgb(0,0,0);font-family:arial,sans-serif">Mercator coordinate horizontal grid</span></blockquote><div><br></div><div>Oops!&#xA0; I&#39;m not familiar with that coordinate system.</div><div><br></div><div>Perhaps the best way may be to ask the creators of SODA.</div><div><br></div><div>Ryo</div></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="01284" href="msg01284.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
<ul><li><em>From:</em> Satheesh Shenoi</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01279" href="msg01279.html">[ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
<ul><li><em>From:</em> Satheesh Shenoi</li></ul></li>
<li><strong><a name="01280" href="msg01280.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="01281" href="msg01281.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="01282" href="msg01282.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
<ul><li><em>From:</em> Satheesh Shenoi</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg01282.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01284.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
</li>

</UL>
<center>[<a href="msg01282.html">Thread Prev</a>][<a href="msg01284.html">Thread Next</a>][<A HREF="threads.html#01283">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
