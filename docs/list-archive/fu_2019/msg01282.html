<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data -->
<!--X-From-R13: Engurrfu Eurabv <furabv1958Ntznvy.pbz> -->
<!--X-Date: Fri, 1 Sep 2023 02:16:52 &#45;0700 -->
<!--X-Message-Id: CADrnUWyY+zyv6vxvsV5OvayQjQgiAwVj3qZfZxQmxCm2w5Ghew@mail.gmail.com -->
<!--X-Content-Type: multipart/related -->
<!--X-Reference: CADrnUWwbv0wyB3x&#45;Mt+xq5jotsBJcfLz4HrAiMHa0c8Teu0mJA@mail.gmail.com -->
<!--X-Reference: CAEwQpaKOu0W7F4m&#45;d5PLnuwFhCeveKF0Mc1tbdSGLD9ErdzwCA@mail.gmail.com -->
<!--X-Reference: CAEwQpa+cNebt6ThHs8SYPMew=Awu741c+SBhpwz4T450BrN8Rw@mail.gmail.com -->
<!--X-Derived: pngeFvS8TxxXx.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg01281.html">Thread Prev</a>][<a href="msg01283.html">Thread Next</a>][<A HREF="threads.html#01282">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</strong></li>
<li><strong>From</strong>: <strong>Satheesh Shenoi &lt;<a href="mailto:shenoi1958@DOMAIN.HIDDEN">shenoi1958@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 1 Sep 2023 14:46:30 +0530</li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20221208 header.b=pTWcRhoi;       arc=pass (i=1 spf=pass spfdomain=gmail.com dkim=pass dkdomain=gmail.com dmarc=pass fromdomain=gmail.com);       spf=pass (google.com: domain of <a href="mailto:shenoi1958@DOMAIN.HIDDEN">shenoi1958@xxxxxxxxx</a> designates 209.85.208.69 as permitted sender) smtp.mailfrom=<a href="mailto:shenoi1958@DOMAIN.HIDDEN">shenoi1958@xxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20221208 header.b=pTWcRhoi;       arc=pass (i=1 spf=pass spfdomain=gmail.com dkim=pass dkdomain=gmail.com dmarc=pass fromdomain=gmail.com);       spf=pass (google.com: domain of <a href="mailto:shenoi1958@DOMAIN.HIDDEN">shenoi1958@xxxxxxxxx</a> designates 209.85.208.69 as permitted sender) smtp.mailfrom=<a href="mailto:shenoi1958@DOMAIN.HIDDEN">shenoi1958@xxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20221208 header.b=pTWcRhoi;       spf=pass (google.com: domain of <a href="mailto:shenoi1958@DOMAIN.HIDDEN">shenoi1958@xxxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:shenoi1958@DOMAIN.HIDDEN">shenoi1958@xxxxxxxxx</a>;       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:cc         :to:subject:message-id:date:from:in-reply-to:references:mime-version         :sender:dkim-signature;        bh=aW2vFsJkkkb/u3rKFDVLjxooEJXSXxgknwPRxd6BJjY=;        fh=jhmVzNMnlw00j5ImqfeuhxenVznlle5R6n3JG6qGc9g=;        b=I7b8KLRLkqdZy7VeiEmEiiWO1SqOmq89lUNwUOgI8hYIm9gZ9Bc9WlnuCFXOUfPlcY         x2Y9LK7BbNPnSxF40gjb9RncSxKmTPbvSoSyq7dPqrTD///+5g/7vcpTNAAB4SZcpDSr         4JUnLj9kHClbb2fs53WTR1q8H2nq30vL/W46G4jczeAYjFGrkOnaZ204wSTCfF1D/4di         0WrRvWtfahYVUSZoIL/WVP0mhoZJEmUGlIWxYi9l77cMF8dQC2oYmWNoF1ZEI12v7TjQ         8mCkWhF84WONek4i5fqXQkGaayeB2qpM80OwJIYZCZ0YRr5omUy0eNJf9spS9OAvot9W         r4Hg==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=aW2vFsJkkkb/u3rKFDVLjxooEJXSXxgknwPRxd6BJjY=;        fh=jhmVzNMnlw00j5ImqfeuhxenVznlle5R6n3JG6qGc9g=;        b=FYoP0InkDN9wl7HlsDtGc10LXF6XtBkBCjVN3YtWgQf6GpCjBafV/ZCzr76NlP97xy         o/J467JihHEsSStFhS7ed2C74nQ/jCStC/iECHeNGrveS3SgGLSVKyvzxY3V2JGZ+LoT         rb3xITLPSFrg9QDodDk9Olbymsp4qoIsT+2iQPdCBkQxS6F8qrO1zKwT1Vg6ZWm0FIVB         CujUoZ9LFAh3L3fK5nA9aGK2TWLXO9FnTAV7oN2xyuaSHCdrKDiZ4UQ7DaDtbzntUImD         /H//fiHRgzKcx0l9lZZqke0oQ3ZlUQ3BWRyfshSt1gu3SpsdsAJEqw53lpWgpp0Zl60h         UwzA==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=aW2vFsJkkkb/u3rKFDVLjxooEJXSXxgknwPRxd6BJjY=;        fh=jhmVzNMnlw00j5ImqfeuhxenVznlle5R6n3JG6qGc9g=;        b=IhN4/GEAJR8lB4wVhN961PBAyVkkqJWy2nbALAo1s08GylqoREoQnp3Vq3k7BfGcv4         PPQTTwrWscmiaga6Kvqls6YUm8ad7/MJfkXRh1tTSdzjFB17GZprEUrNrmqGRq6XgUeb         LrZpuYc4LTV/VYaX6c9t/khx99oWhwSc+3gN/igpsVJ3adXgCDoZQDeD7PtGOLovGft9         hLk122X/ZxflqW7hJCMY5d5TXzMk3ampXnakH+ZFy5wS8O+Qgpl1wPPYRfEkE4eOc2m/         +BQB9YN1a43Q618gBNQ3T3f/TbMGI2ZXXxhuuWybAx5mIUHmjmKAWK9f0Zh39soIVbHy         CGYw==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1693559811; cv=pass;        d=google.com; s=arc-20160816;        b=OCdOV3OPOycM4kIfFpOCHbCUMLTSoYJY21FV8cCd4bPgm2NAW/eIckrxQeKyi3tjeq         BuXVyHd3k067mKZ+6ivevYwSCiSMZxCSLmCenD0KLSj/0lvpwa5Y896ctAOSNv3H+Ueu         EbtW8Kj2l3gi8Zl9FiSZa+/cHajlcEu9RiTlblRKgGn+k/qlAWypmyXycFhLjLOlU+go         IWCcj2oVBJ/qbCFDYCYCWWfVoChC8nRR6WknHlQNWzqu7ONeq31fMv5H/gI+eUr92Hhl         PL+7PYxLoiBgyR2GdmCm8uika6Y54as8RbrIEOZBPx+Y0+nFJ2mwtpCYwllz1fkOHKQy         S2MA==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1693559809; cv=pass;        d=google.com; s=arc-20160816;        b=MIXMd6gHzXWILbMQz0B+H+WjoxosABTdet4Ulbln9zyQ9ZMb8GpS540w85YadOWATa         +WJGzUDA///oeibHDcGqK8powwVWaW4lFVus3fD4lPw47MHNRa13TH7T1YrzTGNyG6kD         RY/8UFGlrfQ1DWKGp6Rkx/XrQeYoFeTA2ymE/YwiMS9lQFEemWM1ctABGGj8uCJ4hpVi         bYSYn98rYuZ5cjNCEpAGWOiAy8mYFjsN3hupdLCJ3LYhXuUwI8gbwfmPEi5v9Z/J/bRc         KLfX8TsIWuAyl5hw259IADopftlP44LhipQeQirPdhJnjwaQEIEE2hjhlAGIghq1CV7H         geWA==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1693559803; cv=none;        d=google.com; s=arc-20160816;        b=v+Tvn57MAGny0RrHiW6utWc/43bgA35abP9ipy8vkoCXMLulVHE008Bv6Ljd8Qe73W         hZNDBdqiPWFTLEDkW6Z1q5Z5uhwV/IIhkMM7zo685kjIlc3hy13xBoiKDcj3WSJ5tgf8         3+HHcMDPVeGe5TLf+Lmxc4TP3bMSx0Glxi7Gh3YS3f94S24lQlQ6xvFC3N3VokYrMyvq         k9xxvKc9B+4tgCKhNWYEI20KGsU9ipnBysu72E5UCItZ+u6SmVDalCDBlWLhrAdRk9Qx         txzqKf6J2sEKj1XLYq4BXGnMGhDH7DuK0SBeUNiOsstebClaRpQmSRFIBxTIP+++dg6F         Xyng==</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google; t=1693559811; x=1694164611; darn=eclipse.pmel.noaa.gov;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :x-original-authentication-results:x-original-sender:cc:to:subject         :message-id:date:from:in-reply-to:references:mime-version:sender         :from:to:cc:subject:date:message-id:reply-to;        bh=aW2vFsJkkkb/u3rKFDVLjxooEJXSXxgknwPRxd6BJjY=;        b=oCSMVkXmFGWpFXq/pZ3M8abrfTWxwGWrxIQq3U0TV/95rMtqYMdElGKYgw2gLvQGes         qBy2fziKuOs/8fCuWTa1fmgONs8g/ijpyrgGK96nURTzQUkWsHWAnwav74ZXFGUixr9g         1issYLgiPtJTBr1eAXE+ncgar4Ubnx57bxi07FzRNxskyuMWfiChsvyDaxQvkwAHgo5B         Ic0y3giZEd7pXJuE13gIq8oAdHTFY3+tj2VxwdWvVxGJ5iWVxC/awW8c7gKKiKFN4htu         08gK5a+dJaXhICLJCa13w6YkH4KciLzwrEojmuvQ3+Dyg+cTfMrh5OZl3YRtNmZKE2BY         seFg==</li>
<li>In-reply-to: &lt;CAEwQpa+cNebt6ThHs8SYPMew=Awu741c+SBhpwz4T450BrN8Rw@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg01279.html">CADrnUWwbv0wyB3x-Mt+xq5jotsBJcfLz4HrAiMHa0c8Teu0mJA@mail.gmail.com</a>&gt; &lt;<a href="msg01280.html">CAEwQpaKOu0W7F4m-d5PLnuwFhCeveKF0Mc1tbdSGLD9ErdzwCA@mail.gmail.com</a>&gt; &lt;CAEwQpa+cNebt6ThHs8SYPMew=Awu741c+SBhpwz4T450BrN8Rw@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div class="gmail_default" style="font-size:large"><div class="gmail_default"><font face="arial, sans-serif">Dear&#xA0;Ryo,</font></div><div class="gmail_default"><font face="arial, sans-serif"><br></font></div><div class="gmail_default"><font face="arial, sans-serif">Thanks a lot for an elaborate reply to my earlier query on &quot;how to calculate vertical velocity from SODA3.15, 0.5degx0.5 deg monthly average?&quot; downloaded from the source indicated earlier.</font></div><div class="gmail_default"><font face="arial, sans-serif"><br></font></div><div class="gmail_default" style="font-size:small"><span style="font-size:large"><font face="arial, sans-serif">If I understand your&#xA0;response correctly, it is possible to get the vertical velocity using the continuity equation by smoothing &#39;w&#39; appreciably. I would like to try it out because my earlier attempt without non-smoothing did not yield&#xA0;any reasonable structure for w.</font></span></div><div class="gmail_default" style="font-size:small"><span style="font-size:large"><font face="arial, sans-serif"><br></font></span></div><div class="gmail_default" style="font-size:small"><font face="arial, sans-serif"><span style="font-size:large">However, I have a question because you say that&#xA0;</span><font size="4">because your numerical code uses&#xA0;B-grid and the Cartesian coordinates, u[x=@DDC]&#xA0;+ v[y=@DDC]&#xA0;is the right calculation.&#xA0;</font></font></div><div class="gmail_default" style="font-size:small"><font size="4" face="arial, sans-serif"><br></font></div><div class="gmail_default" style="font-size:small"><font size="4" face="arial, sans-serif">So, will the same calculation,&#xA0;</font><span style="font-family:arial,sans-serif;font-size:large;color:rgb(0,0,0)">w =&#xA0;</span><span style="font-family:arial,sans-serif;font-size:large">u[x=@DDC]&#xA0;+ v[y=@DDC], will work&#xA0;for the&#xA0;</span><span style="font-family:arial,sans-serif;font-size:large">SODA data&#xA0;</span><span style="color:rgb(0,0,0);font-family:arial,sans-serif;font-size:large">remapped onto a uniform 1/2x1/2 Mercator coordinate horizontal grid? The remapping was from the&#xA0;</span><span style="font-family:arial,sans-serif;font-size:large">native grid, the&#xA0;</span><span style="font-family:arial,sans-serif;font-size:large;color:rgb(0,0,0)">tripolar Arakawa-B grid that varies from 0.1&#xB0;x0.25&#xB0; at high latitude to 1/4&#xB0;x1/4&#xB0; in the tropics.</span></div><div class="gmail_default" style="font-size:small"><span style="font-family:arial,sans-serif;font-size:large;color:rgb(0,0,0)"><br></span></div><div class="gmail_default" style="font-size:small"><span style="font-family:arial,sans-serif;font-size:large;color:rgb(0,0,0)">Thanks again for the help.</span></div><div class="gmail_default" style="font-size:small"><span style="font-family:arial,sans-serif;font-size:large;color:rgb(0,0,0)"><br></span></div><div class="gmail_default" style="font-size:small"><font size="4" face="arial, sans-serif">with best&#xA0;regards</font></div><font color="#888888" style="font-size:small"><div class="gmail_default"><font size="4" face="arial, sans-serif">Satheesh</font></div></font><span class="gmail-im" style="color:rgb(80,0,80);font-size:small"><div><div dir="ltr" class="gmail_signature"><div dir="ltr"><div>Email:&#xA0;<a rel="nofollow" href="mailto:shenoi1958@xxxxxxxxx" target="_blank">shenoi1958@xxxxxxxxx</a></div><div>Mobile: +91 9441013377</div></div></div></div></span></div><br></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Fri, 1 Sept 2023 at 09:21, Ryo Furue &lt;<a rel="nofollow" href="mailto:furue@xxxxxxxxxx">furue@xxxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div dir="ltr">Dear Satheesh and Ferret users,<br></div><div class="gmail_quote"><div dir="ltr" class="gmail_attr"><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div><div style="margin:0px;padding:0px 0px 20px;width:704px;font-family:&quot;Google Sans&quot;,Roboto,RobotoDraft,Helvetica,Arial,sans-serif"><div><div id="m_1496731775415575058m_-5983644045542807880m_741472129057522475gmail-:1f2" style="direction:ltr;margin:8px 0px 0px;padding:0px"><div id="m_1496731775415575058m_-5983644045542807880m_741472129057522475gmail-:1f1" style="font-variant-numeric:normal;font-variant-east-asian:normal;font-variant-alternates:normal;font-kerning:auto;font-feature-settings:normal;font-stretch:normal;line-height:1.5;font-family:Arial,Helvetica,sans-serif;overflow:hidden"><div dir="ltr"><div>I have &quot;soda_3.15.2_mn_ocean_reg_*.nc&quot; data obtained from&#xA0;<a rel="nofollow" href="https://urldefense.com/v3/__https://www2.atmos.umd.edu/*ocean/index_files/soda3.15.2_mn_download_b.htm__;fg!!PvDODwlR4mBZyAb0!STqnaFzfI35zGo-dhbwl4vmDgAUDrbBEMzPOfq0LCXWdC7pcF7TVhf5kngRfXHA4c9HqbeiKsVQm0CktoRY$" target="_blank">https://www2.atmos.umd.edu/~ocean/index_files/soda3.15.2_mn_download_b.htm</a></div><div><br></div><div>It has T,S,U,V, dia-surface velocity T-points, SSH, etc.&#xA0;</div><div>Please advise how I can estimate vertical velocity using the available information.</div></div></div></div></div></div></div></div></blockquote><div><br></div><div>A short answer is, vertically integrate the continuity equation w_z = - u_x - v_y, where the horizontal derivatives are calculated with Ferret&#39;s differentiation operators.</div><div><br></div><div>But, I have no idea how robust the result will be.&#xA0; Vertical velocity is a noisy quantity and an ad-hoc method like this may&#xA0;give you an unreliable answer.</div></div></div></blockquote><div><br></div><div><br></div><div>Since that message of mine, I have experienced exactly this problem.&#xA0; The bottom line is, <b><i>use the model&#39;s continuity equation!</i></b></div><div><br></div><div>Below is a plot of vertical velocity from a numerical linear shallow-water equation: w = -H * (&#x2202;u/&#x2202;x&#xA0;+ &#x2202;v/&#x2202;y).&#xA0; The black curve is the true w, calculated using the model&#39;s (discrete) continuity equation. The horizontal velocity field (u,v) is very smooth and well resolved by the grid, and as a result, the black curve is very smooth and well resolved.&#xA0; In contrast,&#xA0;&#xA0;the red curve is w calculated with Ferret&#39;s centered difference operator @DDC.&#xA0; I&#39;m pasting the Ferret code below the image.&#xA0; Although the central, large-amplitude wiggles are suspicious with only one gridpoint per peak, the outer lobe looks well resolved.&#xA0; So, if&#xA0;you look at the red curve without knowing the true vertical velocity, you might think this may be a real physical phenomenon, perhaps a gravity wave!</div><div><br></div><div>Am I not using the&#xA0;@DDC operator correctly?&#xA0; I don&#39;t think that&#39;s the case.&#xA0; If you heavily smooth the red curve, it approaches the true vertical velocity, as the blue curve shows.&#xA0; (This numerical code uses the B-grid and the Cartesian coordinates. So, u[x=@DDC]&#xA0;+ v[y=@DDC]&#xA0;is the right calculation.)</div><div><br></div><div>Vertical velocity is proportional to the difference between &#x2202;u/&#x2202;x and &#x2212;&#x2202;v/&#x2202;y.&#xA0; If you plot them, they look almost identical.&#xA0; That is, for a large-scale flow, the horizontal velocity field is almost divergenceless: &#x2202;u/&#x2202;x&#xA0;+ &#x2202;v/&#x2202;y &#x2248; 0.&#xA0; That means that w is the residual.&#xA0; It&#39;s a big number minus a big number.&#xA0; So, a little minor difference in horizontal derivative results in a significant difference in w.&#xA0; (This is not the classical truncation error of single-precision floats.&#xA0; As the blue curve shows, even this big-number-minus-big-number calculation is giving the &quot;correct&quot; numbers.)</div><div><br></div><div>Now, if you look at typical GCM results, you find that the horizontal field isn&#39;t always as well-resolved as in my ideal model.&#xA0; You often find the horizontal field marginally resolved.&#xA0; Our experience is that that&#39;s fine: even a marginally resolved field isn&#39;t very far from the reality.&#xA0; So, the vertical velocity field, if calculated correctly, should also be physically sound.&#xA0; The problem here is that you have to calculate it correctly.</div><div><br></div><div>Ryo</div><div><br></div><div><br></div><div><br></div><div><img src="pngeFvS8TxxXx.png" alt="tmp.png" width="536" height="536"><br></div><div><br></div><div>set data <a rel="nofollow" href="http://all.nc" target="_blank">all.nc</a><br>let div = (-1)*(u[x=@DDC] + v[y=@DDC])*4000 ! depth * div(u,v)<br>let div_s = div[i=@SHN:3,j=@SHN:3] ! a bit smoothed<br>let div_ss = div[i=@SHN:17,j=@SHN:17] ! heavily smoothed<br>plot/line/symbol/x=1030/L=1/hlimits=2400:3600 w, div, div_s, div_ss<br>frame/file=tmp.png<br></div><div><br></div><div><br></div><div><br></div><div>&#xA0;</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div class="gmail_quote"><div><br></div><div>To get a robust result,</div><div><br></div><div>1. First, examine the SODA manual to find out what grid configuration SODA uses.&#xA0; For example, let&#39;s assume that it uses the C grid.</div><div><br></div><div>2. Use the C-grid continuity equation to calculate vertical velocity, which should be identical to the vertical velocity within SODA.&#xA0; &#xA0;(SODA must have vertical velocity internally. Whether it saves/outputs it or not is a separate issue.)</div><div><br></div><div>I don&#39;t think you can do this within Ferret.</div><div><br></div><div>Ryo</div><div><br></div></div></div>
</blockquote></div></div>
</blockquote></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="01283" href="msg01283.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01279" href="msg01279.html">[ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
<ul><li><em>From:</em> Satheesh Shenoi</li></ul></li>
<li><strong><a name="01280" href="msg01280.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="01281" href="msg01281.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg01281.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01283.html">Re: [ferret_users] Vertical velocity in Soda3.15.2 monthly mean data</a></strong>
</li>

</UL>
<center>[<a href="msg01281.html">Thread Prev</a>][<a href="msg01283.html">Thread Next</a>][<A HREF="threads.html#01282">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
