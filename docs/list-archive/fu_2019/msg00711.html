<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Re: [ferret_users] pyferret aliasing in jupyter notebooks -->
<!--X-From-R13: Yney Ezvgu &#45; @AOO Ossvyvngr <xney.fzvguNabnn.tbi> -->
<!--X-Date: Fri, 29 May 2020 09:40:47 &#45;0700 -->
<!--X-Message-Id: CAELLC7XXEXi38jSuEgV8ojeR2ZHM6CDGF7iTDpz6UOu48+g7jQ@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 1c39f8f3&#45;78b8&#45;4a8e&#45;4983&#45;4eecd3df8de1@lsce.ipsl.fr -->
<!--X-Reference: 1066022272.1131391.1590743259824.JavaMail.zimbra@lsce.ipsl.fr -->
<!--X-Reference: c46a8ccd7ec291a48e48f2d67999f412@ipma.pt -->
<!--X-Reference: 95d7d14c&#45;5674&#45;8029&#45;8a30&#45;e74d9e80df14@lsce.ipsl.fr -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Re: [ferret_users] pyferret aliasing in jupyter notebooks</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00710.html">Thread Prev</a>][<a href="msg00715.html">Thread Next</a>][<A HREF="threads.html#00711">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Re: [ferret_users] pyferret aliasing in jupyter notebooks</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Pierre Sepulchre &lt;<a href="mailto:pierre.sepulchre@DOMAIN.HIDDEN">pierre.sepulchre@xxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Re: [ferret_users] pyferret aliasing in jupyter notebooks</strong></li>
<li><strong>From</strong>: <strong>Karl Smith - NOAA Affiliate &lt;<a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 29 May 2020 09:40:32 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=h2E2kC3o;       spf=pass (google.com: domain of <a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=h2E2kC3o;       spf=pass (google.com: domain of <a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:cc         :to:subject:message-id:date:from:in-reply-to:references:mime-version         :dkim-signature;        bh=YpEcFtJRfCjqQESt/OGH3mihr8yPmcybIYe8GF39+rI=;        b=Wfm25hn0BsR/DM4d4dcAgvXlKxmckeONv2SpcuaYeTFSE2RGddk2P9ZE9QWar5nmOO         GkieaTCAb7N8jn3OvRRqDrlkvDoh99yTBNclVq0zNBzTv2VBk7qCOyb/4P97yI0ERuXt         0aDztYZzdXwanCX/O5esaLpJZzHdEdVdpukx+SQzB7wUzKiRt/cuzQJBXElnl6WLjuY8         LIyZpvJGMM4EktGR3jrqLtaqiEZizrUyO7KGb94VzDdZ5/HjRdD3eyyLlyDQdsUVVNhu         nqmQvon7AmPDzGN3lxQyVMWe7ApR+xBl1Op8cA6DJw6DvB0ZJklwz4tMroq69UJeEm7W         efMQ==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=YpEcFtJRfCjqQESt/OGH3mihr8yPmcybIYe8GF39+rI=;        b=zybY4ErJ9BqaPIDnhh9s9eyojbThojcE+OVIgy5Al/adYDn5u+V8jDGwUrFwkRI7Gw         /ihOaDX9H7KC+pKuf8Eh8Iy8MD7rdZkkuRvr5D2Nt93FnL/Q0LpxSYhbKKJLDy/3HPPV         Y8fNSSrIcdzk+CoUBfaxsJ3mRITbQMYV7KiJolilYM+vlWgF1EGb9kz3J/uvhGtMZaBo         QDb4ovNxM9txMayjyhkiaUUhZKdfxrJNcG+5nMhedjw0lSzaG4tPHR76/nEvNxqCrDWg         cy6OEwvtbqR5gCCTNgMKbEs+qVvvuAvoPc0nyuQiArhYWc++1mxzSCYJywqhrExuTtnP         GveA==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1590770446; cv=pass;        d=google.com; s=arc-20160816;        b=eaTS1sG/kQY2SeJOzErx4/BhBfNdekOA2MNAiXV1a/Z88j2w9AvSVfi6lBO2fHECWp         RfAopte7qcAe84dexCS9TJLP28nLGp1pa7gHAxpMYueK5DIugGOutXCr2sn7Uxd6luSO         UOSWRKvM4OR+8qAbPRaJhYSKvl0rTt3uC9apvBS5up+sLZiIpviE2Oqo6t5gwICNpnTS         kMIZ3DXmCnbHus3MHc8/MEYawbizvJPVFgS4NVD/sfraQS1OH0yuIc63l0IC0y8lN8S1         yxIBeVwLq6FIXjQVmh19X2wbVJbCiOsc0sAk/awO+Cs3W5jXVUWLTKUbWGGO6s2LdlJn         VIwQ==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1590770443; cv=none;        d=google.com; s=arc-20160816;        b=cIsCpgCJah47yMyMaLbxqf08n7XvnqradDOnWlh3jwsUAmd6RmHIs1CUl7qNmrGlz3         ZAKfViMWUMoyuurU1WHKDQEZrpoTrQWyh7K6UuK3t5MITchhGQeR5g5BBPuV4BSGyIqN         c7dxqOxuGgfC2BEQHDRpxkOKpj9v07v8gNuo24y3Xi3q9lwdanG32a0gVK68eWIxGEy2         6+VIoALjr3cmYbeSdWGXKL98YKIC2lfLDhv273uqh/qVFvxezc4B+evwVq9lMkzxHsot         MnxZttbQjmb1iyyPpjjAXdZdHddhr/Ggc+XeQGVBAWoa0Xo9lyqOywRKKsKVNrr+B0Ok         m05w==</li>
<li>Cc: ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=mime-version:references:in-reply-to:from:date:message-id:subject:to         :cc:x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=YpEcFtJRfCjqQESt/OGH3mihr8yPmcybIYe8GF39+rI=;        b=iDgQ13n/FWK2ueuc3X+ePNwXK4W2tSm6ZrHQIoPf9M6bJLsypHz9yzZCdGj9St93RT         Sid5WqQy/PRlWgHlIG2o9/ZxFmMPzDbjS19hcmMsHXgjZs2Wp4/tf5tKd2mAREA6eusW         L4BuDhIiO1MPCcNyMYbomJv6JTh2wiQNnaYEeG1N9th+guAk1DvWoBwl11nkvwUgkJCP         GMjLAZvQj9FeiF7gxqkYJAZFV7NZ8GMdozHHGGbsA9amdlheCo/q4xXSRWmaUgGJ09Rb         mUhIRm9dKERNntFJKVsKw8hEfP87h+/IjPVSe+7CEZ3YRB6EttNgVN+5pVsj8SFXDVYM         Xh5w==</li>
<li>In-reply-to: &lt;<a href="msg00710.html">95d7d14c-5674-8029-8a30-e74d9e80df14@lsce.ipsl.fr</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00706.html">1c39f8f3-78b8-4a8e-4983-4eecd3df8de1@lsce.ipsl.fr</a>&gt; &lt;<a href="msg00708.html">1066022272.1131391.1590743259824.JavaMail.zimbra@lsce.ipsl.fr</a>&gt; &lt;<a href="msg00709.html">c46a8ccd7ec291a48e48f2d67999f412@ipma.pt</a>&gt; &lt;<a href="msg00710.html">95d7d14c-5674-8029-8a30-e74d9e80df14@lsce.ipsl.fr</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr">Hi all,<div><br></div><div>This &quot;thin white line&quot; issue has been around for a long time, unfortunately.<br>There is a work-around with the PyFerret &quot;SET WINDOW /OUTLINE=...&quot; command (<a rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/SET#set_window_outline">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/SET#set_window_outline</a>) in which an outline of the specified width is added to all polygons.&#xA0; Usually a small value, such a 0.05, is enough to remove all these lines.</div><div><br></div><div>We did discover this is a known issue with many graphics products drawing two polygons right next to each other using floating point coordinates.&#xA0; Their solution was similar to ours - add an outline.&#xA0; We have not done this by default since the outline does slightly change the dividing line between the two polygons (since the outlines overlap, and one outline is drawn after the other) if one is inspecting closely.</div><div><br></div><div>Karl</div><div><br></div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Fri, May 29, 2020 at 6:40 AM Pierre Sepulchre &lt;<a rel="nofollow" href="mailto:pierre.sepulchre@xxxxxxxxxxxx" target="_blank">pierre.sepulchre@xxxxxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">
  
    
  
  <div>
    <p>Hi Paulo,</p>
    <p>I think so, for now.</p>
    <p>But actually, the problem is not that bad. pyferret+ferretmagic
      still make very nice figures in jupyter notebooks. <br>
    </p>
    <p>For a taste, you&#39;ll find a link to an interactive notebook here :</p>
    <p><a rel="nofollow" href="https://zenodo.org/record/3549652" target="_blank">https://zenodo.org/record/3549652</a></p>
    <p>Pierre</p>
    <p><br>
    </p>
    <div>Le 29/05/2020 &#xE0; 15:12, Paulo B.
      Oliveira a &#xE9;crit&#xA0;:<br>
    </div>
    <blockquote type="cite">
      
      <p>Hi,&#xA0;</p>
      <p>Thank you Pierre and Patrick for sharing your experience with
        ferret and jupyter, and Patrick for <a rel="nofollow" href="https://github.com/PBrockmann/ipython_ferretmagic" target="_blank">ferretmagic</a>.</p>
      <p>I use ferret for a long time, but I&#39;m just starting with
        jupyter. If I understood correctly, the only way to avoid the
        horizontal lines is by calling pyferret externally ?</p>
      <p>On Fri, 29 May 2020 11:07:39 +0200 (CEST), Patrick Brockmann
        wrote:</p>
      <blockquote type="cite" style="padding-left:5px;border-left:2px solid rgb(16,16,255);margin-left:5px;width:100%">
        <div style="font-family:arial;font-size:12pt;color:rgb(0,0,0)">
          <div>Hi Pierre,</div>
          <div>Indeed I can see some horizontal lines in the example you
            gave.</div>
          <div>But by digging a little bit more into the problem, I can
            reduce it to a</div>
          <div>simple call (that is indeed beneath the ferretmagic
            code).</div>
          <div>$ cat simple.jnl</div>
          <div><span style="font-family:monospace"><span style="color:rgb(0,0,0);background-color:rgb(255,255,255)">shade
                i[i=1:100]*j[j=1:100]*0 </span><br>
              frame/xpixel=800/file=tyty.png/format=PNG<br>
            </span></div>
          <div><span style="font-family:monospace"><br>
            </span></div>
          <div><span style="font-family:monospace"><span style="color:rgb(0,0,0);background-color:rgb(255,255,255)">$ pyferret -script
                simple.jnl</span><br>
            </span></div>
          <div><span style="font-family:monospace"><span style="color:rgb(0,0,0);background-color:rgb(255,255,255)">produces a correct
                image ok.png</span></span></div>
          <div><span style="font-family:monospace"><span style="color:rgb(0,0,0);background-color:rgb(255,255,255)"><br>
              </span></span></div>
          <div><span style="font-family:monospace"><span style="color:rgb(0,0,0);background-color:rgb(255,255,255)">whereas</span></span></div>
          <div><span style="font-family:monospace"><span style="color:rgb(0,0,0);background-color:rgb(255,255,255)">$ pyferret
                -unmapped -script simple.jnl</span><br>
            </span></div>
          <div><span style="font-family:monospace">produces a aliased
              image (horizontal lines are visible) aliased.png</span></div>
          <div><span style="font-family:monospace">Tested with 7.5
              pyferret release.</span></div>
          <div><span style="font-family:monospace">Regards</span></div>
          <div><span style="font-family:monospace">Patrick</span></div>
          <div><span style="font-family:monospace"><br>
            </span></div>
          <div>--<br>
            Data Analysis and Visualization Engineer / Project Manager<br>
            LSCE/IPSL, CEA-CNRS-UVSQ laboratory<br>
            LSCE - Climate and Environment Sciences Laboratory<br>
            IPSL - Institut Pierre Simon Laplace<br>
            --</div>
          <hr id="gmail-m_-2241813634467962454gmail-m_-3863661316742858260zwchr">
          <div><strong>De: </strong>&quot;Pierre Sepulchre&quot; <br>
            <strong>&#xC0;: </strong>&quot;ferret users&quot; <br>
            <strong>Envoy&#xE9;: </strong>Jeudi 28 Mai 2020 23:10:03<br>
            <strong>Objet: </strong>[ferret_users] pyferret aliasing in
            jupyter notebooks</div>
          <div>
            <p>Dear all,</p>
            <p>I am using pyferret v7.43/python3.6 in jupyter notebooks,
              within jupyter-lab and with ferretmagic extension, on
              macOS high sierra.</p>
            <p>I realized that sometimes plotting with shade/ led to
              &quot;aliased&quot; maps, i.e. with unesthetic horizontal lines
              starting from both sides of the map.</p>
            <p>However running the exact same command in a terminal
              (i.e. not in a notebook) provides a nice plot !</p>
            <p>Playing with set window/noantialiasing does not improve
              much, but I noticed that changing the window aspect in the
              notebook, either through the use of &quot;%ferret -s X,Y&quot;
              parameters or with the set window /aspect, would change
              the location of the horizontal bars.</p>
            <p>I would be grateful if someone had an hint to solve this
              issue.</p>
            <p>I provide the examples here :</p>
            <p><a rel="nofollow" href="https://sharebox.lsce.ipsl.fr/index.php/s/QleW9tCk7HSYxhT" target="_blank">https://sharebox.lsce.ipsl.fr/index.php/s/QleW9tCk7HSYxhT</a></p>
            <p>All the best,</p>
            <p>Pierre</p>
            <div>-- <br>
              <p>CNRS/Laboratoire des Sciences du Climat et de
                l&#39;Environnement, Gif-sur-Yvette, France<br>
                tel : +33 (0) 1 69 08 65 49<br>
                <a rel="nofollow" href="https://scholar.google.fr/citations?hl=fr&amp;user=Er4h_F8AAAAJ&amp;view_op=list_works&amp;sortby=pubdate" target="_blank">What I am working on </a><br>
                twitter: <a rel="nofollow" href="https://twitter.com/pierresepulchre?lang=fr" target="_blank">@PierreSepulchre</a><br>
                github: <a rel="nofollow" href="https://github.com/psepulchre/" target="_blank">psepulchre</a></p>
            </div>
          </div>
        </div>
      </blockquote>
    </blockquote>
    <div>-- <br>
      <p>CNRS/Laboratoire des Sciences du Climat et de l&#39;Environnement,
        Gif-sur-Yvette, France<br>
        tel : +33 (0) 1 69 08 65 49<br>
        <a rel="nofollow" href="https://scholar.google.fr/citations?hl=fr&amp;user=Er4h_F8AAAAJ&amp;view_op=list_works&amp;sortby=pubdate" target="_blank">What
          I am working on&#xFEFF; </a><br>
        twitter: <a rel="nofollow" href="https://twitter.com/pierresepulchre?lang=fr" target="_blank">@PierreSepulchre</a><br>
        github: <a rel="nofollow" href="https://github.com/psepulchre/" target="_blank">psepulchre</a></p>
    </div>
  </div>

</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr"><div dir="ltr">Karl M. Smith, Ph.D.<br>JISAO Univ. Wash. and PMEL NOAA<br><br>Note that I am working remotely (from home)<div><br>The policy of the DOC and NOAA requires me to inform you that the contents<br>of this message are mine personally and do not necessarily reflect any position<br>of the Government or the National Oceanic and Atmospheric Administration.</div></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00706" href="msg00706.html">[ferret_users] pyferret aliasing in jupyter notebooks</a></strong>
<ul><li><em>From:</em> Pierre Sepulchre</li></ul></li>
<li><strong><a name="00708" href="msg00708.html">Re: [ferret_users] pyferret aliasing in jupyter notebooks</a></strong>
<ul><li><em>From:</em> Patrick Brockmann</li></ul></li>
<li><strong><a name="00709" href="msg00709.html">[ferret_users] Re: [ferret_users] pyferret aliasing in jupyter notebooks</a></strong>
<ul><li><em>From:</em> Paulo B. Oliveira</li></ul></li>
<li><strong><a name="00710" href="msg00710.html">Re: [ferret_users] Re: [ferret_users] pyferret aliasing in jupyter notebooks</a></strong>
<ul><li><em>From:</em> Pierre Sepulchre</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00710.html">Re: [ferret_users] Re: [ferret_users] pyferret aliasing in jupyter notebooks</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00715.html">Re: [ferret_users] Re: [ferret_users] pyferret aliasing in jupyter notebooks</a></strong>
</li>

</UL>
<center>[<a href="msg00710.html">Thread Prev</a>][<a href="msg00715.html">Thread Next</a>][<A HREF="threads.html#00711">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
