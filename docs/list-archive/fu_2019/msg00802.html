<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Function MOD : strange behavior -->
<!--X-From-R13: Dlb Thehr <shehrNunjnvv.rqh> -->
<!--X-Date: Thu, 27 Aug 2020 08:13:46 &#45;0700 -->
<!--X-Message-Id: CAEwQpaLoyq9fun4Fr+dWWUoEc+vouRjj7vqM57SJynHptG0Ycg@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 2B520447&#45;DD3E&#45;4F65&#45;8173&#45;94C408D4A591@lsce.ipsl.fr -->
<!--X-Reference: CAEwQpa+rY8FWYPCWR3mZjyKJpRNouOz_VVNpDoC8qNmScffCQw@mail.gmail.com -->
<!--X-Reference: FCF4D742&#45;3B56&#45;45EF&#45;BF05&#45;A570E23B2665@lsce.ipsl.fr -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Function MOD : strange behavior</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00801.html">Thread Prev</a>][<a href="msg00803.html">Thread Next</a>][<A HREF="threads.html#00802">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Function MOD : strange behavior</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Olivier Marti &lt;<a href="mailto:olivier.marti@DOMAIN.HIDDEN">olivier.marti@xxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Function MOD : strange behavior</strong></li>
<li><strong>From</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 28 Aug 2020 00:13:27 +0900</li>
<li>Arc-authentication-results: i=4; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=hDYCefUM;       arc=pass (i=2 dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.160.197 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=hDYCefUM;       arc=pass (i=2 dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.160.197 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=hDYCefUM;       arc=pass (i=1 spf=pass spfdomain=hawaii.edu dkim=pass dkdomain=hawaii-edu.20150623.gappssmtp.com);       spf=softfail (google.com: domain of transitioning <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> does not designate 65.153.203.169 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@hawaii-edu.20150623.gappssmtp.com header.s=20150623 header.b=hDYCefUM;       spf=pass (google.com: domain of <a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a></li>
<li>Arc-message-signature: i=4; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:sender:dkim-signature;        bh=pqACy6tjY1jM8/giKtyUjo88mcUHlCsZDboh9gI9NXk=;        b=vJtAqt9+GbRGHCikG5wH/L0aCBydpxggnmvK5xc3Gs2zzsRCsUq/vW+Pn7xEfVziID         yhjrXokLl1YrFmlljn/lIBavLygb2JcpX09mpbYf5Y7q5g/Db4jHL0jg2cW4Tc11aJCt         NLFrIwBG81y+4ErMaxZ7T5NNaXZIt/+IVvj1wQwB+DDsW+jM78Cs1OGn5yQmHteJkRJU         R7JCUEMbwDaK6qWA/kqneF7mNSa8pgLYv4DV5zhfsmFRrUXGP0Pzfv9dwucPJfClJ6yU         MccajehJHPSH2Juw/LQ8Vjk8zaMgpGYPfhDSmltH8N4xhFLYz6ms/JCA7Bo5VwnomsEA         yPGw==</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=pqACy6tjY1jM8/giKtyUjo88mcUHlCsZDboh9gI9NXk=;        b=puLVj6cjBY0r+xdJqRejab4vgTCcB5vngSvjb9Ck2xH7iTihGZ1mZxpB2cEkTfHmd9         M1rEbTRGbYq5/0SNLkBbT2OUgQ9+MUowmASYO5hAJEXIQFYCoKMaQCYj1Q8z1Jmscoou         TBHwq84aQYKM5ofgIJDjYibO67JwOM+I+Dpxat+ZjCnwjmuiicoPYTfuSsOyOxBz+IvP         Cgv08q6+wQ0wkXPWAH2+y1BDFym/sV2044gKHB2wuDbvFCH0R4fnoQETZ0VzwOMmMiCa         aPSWdhIr2aCW66LF0CMBcGXz/seRMajUomZ9nn+9UpFTkxdPeCOL3IZifXotwwmQncli         W2gA==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=pqACy6tjY1jM8/giKtyUjo88mcUHlCsZDboh9gI9NXk=;        b=M1w5fEvAKBWJmS8bdrDWmWhvhkax6CdnptlfJCy004dQagvlzp2SHvsza5fG6gEVTz         4IiBGuJRZh792WYWs5Nx+5uwo514lhPtQ4MgZem4ENS9ootU742lF213D6UuDHe5mGen         t89ar2R2jSSG/gEQ8xObxh4SPgIl+qifz/XUTlwFK65lsTJo+YEy9Ir68Z9lFnnITNq/         9G4bycG+OsGBpNT3O89snLUnEtg0MQ9FKSLepPDbQHeSDa9+gWUxjaOrTeSe3+JknJ6Z         Su7e/AoZnmOzn9mQTwFDxpi4RgbNYNJSVjGoJM1uumRbM1yPnFyQ3RqKj/5/JHGT8ns6         XuGQ==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=pqACy6tjY1jM8/giKtyUjo88mcUHlCsZDboh9gI9NXk=;        b=VK0d53SjAKa3whsvLJayPT4TbPxgA5iTN6fd63NxUAD13iIWiThEzj8NOyPGfj5F3K         L0SdUiXaa/z7xWFXcVlluhvth/PecfSmh5c4IPRxJ8C7vRDbfQT8Vt31sLTqS0UYYmqE         5q8mprLPkRxrOgyYwSsZxlN2sLDKvZkaBMPePS9cBbYZcrtJQPApUW7655WXC1hzW14Z         DsafnbLuDPuyQ8k8mNGrgAOxgPln+ws6YMhYgtBzl31KOIusE+4zOxOVwK1JeDbbn6sh         4vJG+P+22mTdzEA30uv/7ELM960OgVkxPfQhI7KRPjE60wgETqKMJ21GI/7EfsaY+VXl         R4pw==</li>
<li>Arc-seal: i=4; a=rsa-sha256; t=1598541224; cv=pass;        d=google.com; s=arc-20160816;        b=A7z9huWm/TbDvKuIkbF0t0kM/P18fDdSSALNBZ0VZIHIR8VqhDvv2FmVt4+mz+TVZb         3b/tRHg0TQUdvmqHC2duBPavPw16mgKnPSDrfK/DYBmU4Y8sG8PmXmj7n+E8D0DsuGbc         hHlJf2O5eLE+K7OLoy+OrK5R1GOi/OCd/Q2MB+uPqyAbwU5N74rnYs4Vl/mh3T0yIkRs         1AU7BxqoNp2/FrMEF0nzjMPLp6U77wzaFtgtGQNtQTKr58tBEF50J9fafNlIOyYu8n2B         a/LWNtxSfjlBONGgEEzoH+pE3DWR6abk1WK1O1CXJjQo4kHAMeJkoVhP4XNpkKeAcFWq         dCtg==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1598541223; cv=pass;        d=google.com; s=arc-20160816;        b=j6xlCwrPztwwcHuDbZh5Px99W+MQXSCgyudcntnwShckESg2R2j1wAUTbwJQh8V/rg         Ak+NaFz1HpLQHS7X7XqmuA4Q6DwhUagQ3Sjb2VocUdYr40d3rKrggjhm3Y80bqWWu9Kv         4LUt6wwvsKg4Aq2Yfz6bqWlmOCHPB2Lp3lFz5Mre4yygD2o1L1ultfOquSjueyT8aTbG         ipA3CjIxh0vIWziZy1xLg3GZkTU8CaCkkT04sx3XU4H7ZPJjE2P0gvwutB8csnYswajJ         4nnTOjuL1DZ5d2VCSDeW6DHLweOJDgrzPUrgWj55h052uHOaeEFv028PUC37fjXZr9vj         78Sg==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1598541220; cv=pass;        d=google.com; s=arc-20160816;        b=z+3KRZ+hhupz36SGFfaSZliw6nP2qqgEUuli6eJH//g5ow3oqfMfGV8EdqzQLnJZ97         SkymxxnwiRwskD/ePN4K/jjE++6tctYNa+3PIOy+DWeAzqLPJ+VK5vNhhozPODbBbwEL         MTg1N2HfKAWdT0Ct3UdSrkmAcvxjS5a8XjZEQL5MyWMo7CrdBLXnNGEEqA+CWqAQOH0P         rBB5U1VFXtEwOsdaDVYf7VUAVjU874F3JZ6lRrchwyoAxXFbpy4X8LXEhaN2qMtlpE6A         AtksgUL8ztIxapTbZGE6M1kdqUsQhzDh/VEiXQ5GnVcaSuCHCxRHsao1tOMubqC6iJCx         1mJw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1598541219; cv=none;        d=google.com; s=arc-20160816;        b=O9C8xUQp7os5XPX6JKfIIJuqQFqJFi/vqLqNIWLJbCQ6TZe3HqorJAGU1453V3mLsW         iWMXxfCiB0UUEYH2QNRZB4+hN/9At8/Faruwvcq+M0x8NWc3ItHBi3t3ttyn/1hSx4B+         QrJvIxZeKxzVcy5RxO6xRzUnsGR5D8jXBdhFazSjIjR83RIWf0NOKzScu4T1jQMJJOKk         TBEWAWpSZIPXwN9yTuTxm2Ta8oqjBTY1XgxltcQDDphLRsnzL6Cf2HfvuIZOQeQhDcMc         caAWI4fwEOFXPd0+kHfdpwiSHCT2N353fXg8NB3w3kvOXbKvuZxqOzDkvxSAPYCGQK4w         O2Tw==</li>
<li>Cc: &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:mime-version:references:in-reply-to:from:date:subject:to:cc         :message-id:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive;        bh=pqACy6tjY1jM8/giKtyUjo88mcUHlCsZDboh9gI9NXk=;        b=N9+TQM3gCSw0mw2Qfu7AjH+yo+RTwN09JF4kSbPF3d4+LeYuNujVhjplfC8ZiKcvM2         ygm+jNYVb7M8Z8vS+t1bg3ZATyvtHzhWYJS0Xe9fzuhId6ZSAj8mqYOUCjgtFK0H43r+         r56KC+fryRbDIQSGzMjvlQOkULJJxToEiv5rHJzMRGZQTQmiop/gQ23FaxgolPxoCRv8         Hfqyv7fH/GveSXWuJCSiC0lf3lwIFH61F4N87cLVA6Gd7+i8kFTwb2B/YfmdwIXo36lT         wID9RdLqTgSvn8dgyD+xWrAGZ6FQ1UU2r3EVUaNjmsSpXxAHlqkfQ5EMowuMU+Soa6AK         HmfA==</li>
<li>In-reply-to: &lt;<a href="msg00801.html">FCF4D742-3B56-45EF-BF05-A570E23B2665@lsce.ipsl.fr</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00797.html">2B520447-DD3E-4F65-8173-94C408D4A591@lsce.ipsl.fr</a>&gt; &lt;<a href="msg00799.html">CAEwQpa+rY8FWYPCWR3mZjyKJpRNouOz_VVNpDoC8qNmScffCQw@mail.gmail.com</a>&gt; &lt;<a href="msg00801.html">FCF4D742-3B56-45EF-BF05-A570E23B2665@lsce.ipsl.fr</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div>Hi Olivier,</div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Aug 27, 2020 at 4:51 PM Olivier Marti &lt;<a rel="nofollow" href="mailto:olivier.marti@xxxxxxxxxxxx">olivier.marti@xxxxxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div style="overflow-wrap: break-word;"><div>[ . . . ]</div><div>In computer, there is a difference between the &quot;truncated division&quot; (also called &quot;symmetric&quot;) and the &quot;floored division&quot;. Most langage implement the truncated division, when the math definition is the &quot;floored division&quot;. And I agree that modulo and integer division should be compatible to get&#xA0;<span style="color:rgb(0,0,0);font-family:monospace">(m div n) * n&#xA0;+ (m mod n) == m</span></div><div><span style="color:rgb(0,0,0);font-family:monospace"><br></span></div><div><span style="color:rgb(0,0,0);font-family:monospace">I</span><font color="#000000">n Fortran, <font face="Courier">MOD</font> and <font face="Courier">MODULO</font> functions have different behaviour with negative numbers !!</font></div></div></blockquote><div><br></div><div>Yes, and MOD is symmetric about 0 and MODULO is floored (left-biased). If I remember correctly, MODULO was added to the standard much later than MOD.&#xA0; As you say, the integer division in most computer languages is the symmetric version and therefore, the &quot;correct&quot; MOD function in such languages is the symmetric one.&#xA0; (An exception I&#39;ve found is Haskell.&#xA0; This language&#xA0;uses the floored div and mod.)</div><div>&#xA0;<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div style="overflow-wrap: break-word;"><div><font color="#000000"> I&#39;m&#xA0;afraid&#xA0;Fortran misses a floored&#xA0;division (?)</font></div></div></blockquote><div><br></div><div>Floored division isn&#39;t hard to implement.&#xA0; In a pseudo code:</div><div><br></div><div>&#xA0; &#xA0; fdiv(m,n) = floor(real(m) / real(n))</div><div>&#xA0; &#xA0;! I don&#39;t know what&#39;s correct when n &lt; 0</div><div>&#xA0; &#xA0;! but I guess that <font face="monospace">m div (-n) == (-m) div n</font> should be an identity.<br></div><div><br></div><div>But, while MODULO is clearly useful as you demonstrate, the floored division doesn&#39;t have much practical use in the application domain of Fortran.&#xA0; That&#39;s why Fortran has added only MODULO to its standard while it didn&#39;t bother to standardize FDIV(m,n).</div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div style="overflow-wrap: break-word;"><div>But my point is far more practical : I define some geographical areas with mask from latitude and longitude values. The work would be simpler if I could use a MOD (or MODULO or whatever) function that return a number in [0,360[, and not in ]-360,360[</div></div></blockquote><div><br></div><div>We can build the MODULO function out of the MOD function:</div><div><br></div><div>let mod_m_360 = mod(m,360)</div><div>let modulo_m_360 = if mod_m_360 lt 0 then (360 + mod_m_360) else mod_m_360</div><div>&#xA0;<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div style="overflow-wrap: break-word;"><div><font color="#000000"><span>this would be simpler if I could write :</span></font></div><div><font color="#000000"><span><br></span></font></div><div><span style="color:rgb(0,0,0)"><font face="Courier">LET m1 = IF lat LT 63 AND MODULO(lon,360) &#xA0;LT 330 THEN 0 ELSE 1</font></span></div><div><font color="#000000"><span><br></span></font></div><div><font color="#000000">A floored division&#xA0;could also be useful :-)</font></div></div></blockquote><div><br></div><div>I agree.&#xA0; I&#39;d welcome MODULO, FLOOR, and CEILING.</div><div><br></div><div>Ryo</div><div><br></div></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00803" href="msg00803.html">Re: [ferret_users] Function MOD : strange behavior</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00797" href="msg00797.html">[ferret_users] Function MOD : strange behavior</a></strong>
<ul><li><em>From:</em> Olivier Marti</li></ul></li>
<li><strong><a name="00799" href="msg00799.html">Re: [ferret_users] Function MOD : strange behavior</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00801" href="msg00801.html">Re: [ferret_users] Function MOD : strange behavior</a></strong>
<ul><li><em>From:</em> Olivier Marti</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00801.html">Re: [ferret_users] Function MOD : strange behavior</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00803.html">Re: [ferret_users] Function MOD : strange behavior</a></strong>
</li>

</UL>
<center>[<a href="msg00801.html">Thread Prev</a>][<a href="msg00803.html">Thread Next</a>][<A HREF="threads.html#00802">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
