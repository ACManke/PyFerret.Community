<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [EXTERNAL] Re: [ferret_users] ensemble or compare data from two time series -->
<!--X-From-R13: fnhenou enguber <ebuvgfeo2020Ntznvy.pbz> -->
<!--X-Date: Mon, 10 Jan 2022 16:33:05 &#45;0800 -->
<!--X-Message-Id: CAFXLzPhOvNjbCM&#45;y2ZM+2n0+31ZYnr1zzfM6jFOkmnXR=_wAEA@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAKE4FWqUQPj5WmRwNZDxHj2X2pMdUDFMo_70JdVepXJMJUVrFw@mail.gmail.com -->
<!--X-Reference: 08760b2e&#45;2ee0&#45;a232&#45;018e&#45;4b10d3bfc67f@gmail.com -->
<!--X-Reference: CAKE4FWqDRgzJq+f&#45;=EyM5cG4C6XDW7rHhFr=&#45;fSLaBgZvc9gBA@mail.gmail.com -->
<!--X-Reference: CAEwQpa+BRJJjNyT3qURN7RFqen7omVVtmqmhNmWzX8YMzXKu5g@mail.gmail.com -->
<!--X-Reference: CAFXLzPjx&#45;+udeR2kscjjgAUiEugrY3PJfdyO9M8=fQgGb&#45;wndQ@mail.gmail.com -->
<!--X-Reference: CAKE4FWrJToKucQkngEOavxvDfDbTUAtALJh91uyQ_6fKKdW16w@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [EXTERNAL] Re: [ferret_users] ensemble or compare data from two time series</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg01057.html">Thread Prev</a>][<a href="msg01034.html">Thread Next</a>][<A HREF="threads.html#01058">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [EXTERNAL] Re: [ferret_users] ensemble or compare data from two time series</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Xiaoyu Bai &lt;<a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [EXTERNAL] Re: [ferret_users] ensemble or compare data from two time series</strong></li>
<li><strong>From</strong>: <strong>saurabh rathore &lt;<a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 11 Jan 2022 01:32:46 +0100</li>
<li>Arc-authentication-results: i=4; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20210112 header.b=acrrhIrR;       arc=pass (i=2 dkim=pass dkdomain=gmail.com);       spf=pass (google.com: domain of <a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a> designates 209.85.219.69 as permitted sender) smtp.mailfrom=<a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a></li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20210112 header.b=acrrhIrR;       arc=pass (i=2 dkim=pass dkdomain=gmail.com);       spf=pass (google.com: domain of <a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a> designates 209.85.219.69 as permitted sender) smtp.mailfrom=<a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20210112 header.b=acrrhIrR;       arc=pass (i=1 spf=pass spfdomain=gmail.com dkim=pass dkdomain=gmail.com dmarc=pass fromdomain=gmail.com);       spf=softfail (google.com: domain of transitioning <a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a> does not designate 65.153.203.176 as permitted sender) smtp.mailfrom=<a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@gmail.com header.s=20210112 header.b=acrrhIrR;       spf=pass (google.com: domain of <a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:rohitsrb2020@DOMAIN.HIDDEN">rohitsrb2020@xxxxxxxxx</a>;       dmarc=pass (p=NONE sp=QUARANTINE dis=NONE) header.from=gmail.com</li>
<li>Arc-message-signature: i=4; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:cc         :to:subject:message-id:date:from:in-reply-to:references:mime-version         :sender:dkim-signature;        bh=9vMrpQiBXqT7Jjs2NmbHkLHKA2gUPVz1GtOfGHkQyRs=;        b=pWrrbvdMjbAS6/185KEq0C/YmUHm8t8AMdCg+FbME55PRwejXwW/iuD+rIZliKogml         +Ljf6OVt/Ig9Fzc4d7Sze/aKJDRbsPxDY0QRXbem3WrlGxmIBfnqBjqI0xgSwcsWxAzl         O2ICY/Zb82znkDZ3q8NsBricK0zxgVMjAcXznNfqeOYr9eYsSZ9/iUsLb2Say4GraRR2         lTrYDjb1xsMiaHeo/i198uF/GyfpP3syUGP86JGP2sNCKcFPv8Q57kJlG6bbuR5U3hqc         6kJlAAMIJEl1eoNejBEN3ScZ5i5celfAJcS0LsFkFKjb6tc1H7l3aStb8VjwW04KQJD5         bEBQ==</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=9vMrpQiBXqT7Jjs2NmbHkLHKA2gUPVz1GtOfGHkQyRs=;        b=CMQMyfVi8Yd0gJZNEkWKVgH0qxiBNV81zK+ehQFOqeE6M4ytZkCb2NNNNZ7vWmHQ/b         EaRiPCXIY1u/q3ZDe1XoiUDGdDFRungCtf5UPgbQ6uyIZ3EoKA7eid137FFNyooV+YTR         CYEYF4+TkcO/yUe0k5bYGtyhEFMT/QO+EYiLYK8q1gUK0tYqfdsEP9qD0XkMmGmwiBFF         LikNUYkaj20+lMnB8v26l1hwSvMabHYYqPcIQl3wxXQLB0XdjdEa6iKbueVgDTMjP0PJ         iF6gBj0xYHrqCSRlXhSRJFKj9WZAH3Q9nubOBOFLbIfIsp7Q518yux2owyz8I5czT64X         hmhw==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=9vMrpQiBXqT7Jjs2NmbHkLHKA2gUPVz1GtOfGHkQyRs=;        b=vpnELx3f5cwCYijVjaF5TfkehHNaTnGGYz3Y3+1HcsJosdNjkomZeRXmCQdPdyXz8k         EEksKnSEj3IQ5jR5g04Ztw5KdIbpbJTGq9ufeFY2H1fvJgXt2J5N/dwkNXdmA6gJXnnY         GnuUz23aFvFXlBBi7RkEExiUAsFCauBfObiXX6C6kbOeS6yW3+lzhzPlkh/cjYvXfDNW         ZpVGs9ifwqBokyfaceJCgtefMu6DdHayOeH5/lwn3BS/0vDdnH0MqTaD9TvxGj0fK3sU         z+bAT/zhgEkkTYfFZlbI2YM9HAqS2k+ZhYkpj1XbFn3zweq74eWa22+y0wPgNvgVq/b2         8sJw==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=9vMrpQiBXqT7Jjs2NmbHkLHKA2gUPVz1GtOfGHkQyRs=;        b=apFGj8R+p+9Qydw7rRQqaWq+DXO2GixmSCgcKRytmgL8bzWbrlYxuuZOvZWPwO2IgV         5IvGu8kGXxyAFokJpIg9lkkPIkO0NoBKfoKOFdMhqTk+Eyv8oXAw0+w6hYeRWrQ3hJF+         ycM7OvsnA2vZDPsdgB57n/3Vi7TYvZo5NARkmf1Fsa7DMjf1kb7VohiEtOcGxXpsSmWo         5TRRre8x2+uCitsNxr5wKG6YBA2xMFc9fRzNs147S9kcVRPr7gmId3nlvKIQmRg1kgqW         AzAaFvGuho7aS16V+o9sWCOjHbnocDLlu2n3OwlKicTjUX9x5l9LByXGfflXht/MV2E/         HcLw==</li>
<li>Arc-seal: i=4; a=rsa-sha256; t=1641861185; cv=pass;        d=google.com; s=arc-20160816;        b=iqrKbg4tLrpwIAltc5IThLPYi8yh5htB2uSB2BS4ZuNcAlaQbyQ01aBLA3MqoCJHrT         SiSu48xf1+QuQP2ymPb+WCYEmcwszJW+voUU5M3PCGm6JIEWckRA2wfwU5pGpsrSvG+L         PXamGeP4OOySNeECx5k+tlPeB7NUY37T7EgyopriVqPC9tHmUVVoxaqyKvung1ackJaC         SEplqEzlQfZPM/WzZ5eBZ6H37UylB8MMYond9y89rUEDqhKRDRj9R014U+MddEdQvRZO         POth+g/h3+xTArWOUFhtM4feYOfBHJc3l4FOWWknC9MIouXhHPgU5gFR2Ba1Rf+w+JQB         PeqQ==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1641861183; cv=pass;        d=google.com; s=arc-20160816;        b=ZAl1EbMnOoNaEQvHLAbtWnrxFCrPJLxjTWjWs8LFN2VXGT5FtyL3FbG7Xk6M1U0hBz         MFw8UPJ0UNK5cJ/uQ5q/OXaQKtbU6RUMTN62SpdtBAyenBQc94tcQz+QvdHXl8OAyWf+         UkAqjK67FbG/seixmxU/vGgx8ZxEp++e1tqj/2N49I86pqicdgvvk2k5ctiVIon3eNwz         MzS3iPga8EvJG7K/Kx1jIBf/Ov9TPShGyzw8QE41nA40TDakYaS/c0Kh9IAqOoOfSmYa         aMXb5Npz3QvIaie5aHUGCcc67Ky+A2T5sCsLTdmKNUwIdHuxlG1RgIGv6RDD1TkDylu1         lVpA==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1641861180; cv=pass;        d=google.com; s=arc-20160816;        b=bLsbGtLkc+Ewmh6Wm7Gn21LnvzVSYkbN+PaFH9tk5JgXmE3s8a8Pur8QJuSQ4z/CFK         rQHhzrceTcHgGgzqSc4fJFnI0hEwbaL7JrYJdFE8v7WhRuN8Nar0jjvrPPQeSrWF8k+U         IyO2PjoUt5rl+jWbamg7JdFAJ7O3nRtkeThw8/ToXG5tWI2dtc9JLk2OpXUWMSEckXea         YQA1Jnzlsdvv+CdcqrdTeU5aqNLaTqlQM/ziC1SsVtVrNIC3D2H62U1PVf2U3ecTzeuE         8OaQo8hPduTCLr0dBq1sB5z1WGvGkdZT4oRtP2zvHd4udhMRS26BlPQrGPmA2199bGic         xCOw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1641861178; cv=none;        d=google.com; s=arc-20160816;        b=c7aDCEfrHnx4VS+5mOPf/ZPeZ765Eo0iKuiPHgins11X9piQA9ipyn6Es6DyAPUnyo         7+CDL6Tz6XS6ZXICqt89xuibKhypGvKnw5wQy+na4vxs8COyiDUi0EcpIsN6RcLF+XoO         KwdShamJL+QfokJl25F4AJkl+8xumIArxafY33AGURP9s8NAtP8q3N4JiWEUdGALagaP         wcze4HHI676nnwQfuF3CmuGlL4jcyNIpIcYlq9ibHKOYi7C1sk3iQCkcLTGPIH4aJHP7         fE9x2JA2yjJGw6mPjmWpWYjfKL5NFSsnr+IZxL6pinmKsRsr8kJBwa+uShJVMWMWl7x+         hYiw==</li>
<li>Cc: Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;, Ansley Manke &lt;<a href="mailto:a.c.manke@DOMAIN.HIDDEN">a.c.manke@xxxxxxxxx</a>&gt;,        ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:mime-version:references:in-reply-to:from:date:message-id         :subject:to:cc:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive;        bh=9vMrpQiBXqT7Jjs2NmbHkLHKA2gUPVz1GtOfGHkQyRs=;        b=fcS7LNJbURODPG3jxXAKNKtPy8BTj/ooPv0oRpYhgZkGPjvqntJIO0xxjsiXikud6e         oyJbRCwXBIS9rBefCGtrgnWf2M0c/cdKFUj0oiZAFlBFKQKPhg35JUu7JX4+miCYKxXo         NLqVIO567L299EEZS06o8wqHcsEwl/y3H9kj3TT6ePJHdsyEfVgm2C15DcSRA2ik7Rz4         nWQlBqDJudRX3r9bakUdapM8WitvlSPcWPwv3WyDDIuQsvv0CQHVCyqWJHoPn4Os2kAd         VehWRr5YGQliDZMoOiOkp6gAFcLDKvDkgaMzqEGqNoUyh321pAK96XJ3pi1pfPBDiSyi         3l5g==</li>
<li>In-reply-to: &lt;<a href="msg01057.html">CAKE4FWrJToKucQkngEOavxvDfDbTUAtALJh91uyQ_6fKKdW16w@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg01030.html">CAKE4FWqUQPj5WmRwNZDxHj2X2pMdUDFMo_70JdVepXJMJUVrFw@mail.gmail.com</a>&gt; &lt;<a href="msg01033.html">08760b2e-2ee0-a232-018e-4b10d3bfc67f@gmail.com</a>&gt; &lt;CAKE4FWqDRgzJq+f-=EyM5cG4C6XDW7rHhFr=-fSLaBgZvc9gBA@mail.gmail.com&gt; &lt;<a href="msg01036.html">CAEwQpa+BRJJjNyT3qURN7RFqen7omVVtmqmhNmWzX8YMzXKu5g@mail.gmail.com</a>&gt; &lt;CAFXLzPjx-+udeR2kscjjgAUiEugrY3PJfdyO9M8=fQgGb-wndQ@mail.gmail.com&gt; &lt;<a href="msg01057.html">CAKE4FWrJToKucQkngEOavxvDfDbTUAtALJh91uyQ_6fKKdW16w@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div class="gmail_default" style="color:#000000">Hello Xiaoyu</div><div class="gmail_default" style="color:#000000">G&#39;day</div><div class="gmail_default" style="color:#000000">In the command below......</div><div class="gmail_default" style="color:#000000"><span style="color:rgb(34,34,34);font-family:monospace">contour PRECIPITATION[d=1,L=@AVE]-</span><span style="color:rgb(34,34,34);font-family:monospace">PRECIPITATION[d=2,L=@AVE]</span><br></div><div class="gmail_default" style="color:#000000"><br></div><div class="gmail_default" style="color:#000000">The error might be due to the different time axes of d=1 and d=2. I am guessing that d=1 is RCP and d=2 is the Historical data set. When you do the subtraction (or any arithmetic) the time axis must be the same length without any ambiguity. However, in your case, as I can see you want to get the difference between the Precip averaged over historical and RCP. So, in this case you have to fist store the average into a variable</div><div class="gmail_default" style="color:#000000"><br></div><div class="gmail_default" style="color:#000000">let hist =&#xA0;PRECIPITATION[d=2,L=@AVE]&#xA0; &#xA0; &#xA0; !!!! if d=2 is Historical data</div><div class="gmail_default" style="color:#000000">let rcp =&#xA0;PRECIPITATION[d=1,L=@AVE]&#xA0; &#xA0; &#xA0; !!!! if d=1 is RCP data<br></div><div class="gmail_default" style="color:#000000"><br></div><div class="gmail_default" style="color:#000000">then&#xA0;</div><div class="gmail_default" style="color:#000000"><br></div><div class="gmail_default" style="color:#000000">let change = rcp - hist</div><div class="gmail_default" style="color:#000000">contour change</div><div class="gmail_default" style="color:#000000"><br></div><div class="gmail_default" style="color:#000000">I hope this will work.</div><div class="gmail_default" style="color:#000000"><br></div><div class="gmail_default" style="color:#000000"><span style="color:rgb(34,34,34)">why do you use 360 as your limits when your echunk is 5?</span><br></div><div class="gmail_default" style="color:#000000"><span style="color:rgb(34,34,34)">echunk is not the longitude axis, this is the M axis (i,j,k,l,m) and I used this exis to store the 20 models in the chunk of 5 at a time. This means at each time this will save 5 models on M axis. In this M=1 means cmip5 model number 1,&#xA0;</span><span style="color:rgb(34,34,34)">M=2 means cmip5 model number 2.... etc. So the loop over M will run 4 times (20/5) i.e. total no. of models divided by echunk.</span></div><div class="gmail_default" style="color:#000000"><span style="color:rgb(34,34,34)"><br></span></div><div class="gmail_default" style="color:#000000"><span style="color:rgb(34,34,34)">Let me know if I am unclear. Happy to help.</span></div><div class="gmail_default" style="color:#000000"><span style="color:rgb(34,34,34)"><br></span></div><div class="gmail_default" style="color:#000000"><span style="color:rgb(34,34,34)">Take care</span></div><div class="gmail_default" style="color:#000000"><span style="color:rgb(34,34,34)"><br></span></div><div class="gmail_default" style="color:#000000"><span style="color:rgb(34,34,34)">Cheers, Saurabh</span></div><div class="gmail_default" style="color:#000000"><br></div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Tue, Jan 11, 2022 at 12:36 AM Xiaoyu Bai &lt;<a rel="nofollow" href="mailto:xbai1@xxxxxxxx">xbai1@xxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr">Dear Sayrabh,<div><br></div><div>Thank you for your script.&#xA0;&#x1F638; Your method worked if I regrid my historical runs to RCPs.&#xA0;&#x1F601; However, I still want to keep my historical time axis as 1950-2005 and RCP time axis as 2006-2099. But if I want to keep the time axis, I still get the same error. The&#xA0;strange thing is that even I do the most simple calculation:&#xA0;</div><div><br></div><div><font face="monospace">contour PRECIPITATION[d=1,L=@AVE]-PRECIPITATION[d=2,L=@AVE]</font></div><font face="monospace">&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;*** NOTE: Ambiguous coordinates on T axis: PRECIPITATION[D=1,L=@AVE]-PRECIPITATION[D=2,L=@AVE]<br>&#xA0;**ERROR: illegal limits: PRECIPITATION is not in the range T=30-DEC-2005 12:00:30-DEC-2099 00:00@AVE<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Axis extremes are T=30-DEC-1949 12:00:30-DEC-2005 00:00</font><div><font face="monospace"><br></font><div>I didn&#39;t regrid anything, I just simply read my data in and Ferret won&#39;t let me compare the average value.&#xA0;</div></div><div><br></div><div>By the way, for your jnl,&#xA0;</div><div><br></div><div><font color="#0000ff">set list/xchunk=120/ychunk=63/zchunk=12/tchunk=66/echunk=5/deflate=2/shuffle/ncformat=4</font></div><font color="#0000ff">save/i=1/j=1/k=1/l=1/m=1/ilimits=1:360/jlimits=1:126/klimits=1:36/llimits=1:132/mlimits=1:20/file=<a rel="nofollow" href="http://histrcp-2005-2015.nc/clob" target="_blank">histrcp-2005-2015.nc/clob</a> heatcal</font><div><br></div><div>why do you use 360 as your limits when your echunk is 5?</div><div><br></div><div>Thank you very much and stay healthy,</div><div><br></div><div>Xiaoyu</div><div><br></div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Tue, Dec 28, 2021 at 5:51 AM saurabh rathore &lt;<a rel="nofollow" href="mailto:rohitsrb2020@xxxxxxxxx" target="_blank">rohitsrb2020@xxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div class="gmail_default" style="color:rgb(0,0,0)">Sorry for getting back late to you, might be the attached script be helpful for you.&#xA0;</div><div class="gmail_default" style="color:rgb(0,0,0)"><br></div><div class="gmail_default" style="color:rgb(0,0,0)">So basically I was having 20 CMIP models having the same variable name HEATCAL, so read the variable name and assign a new variable&#xA0;based on the model e.g. &quot;rcpbb&quot; which is model number two in my script. Then I regrid all the models according to my model number one on all the axes i.e. gz, gx, gy, and gt. I also apply the mask from my model number one so&#xA0; that every model must look like model number one in x,y,z,t axes.&#xA0;</div><div class="gmail_default" style="color:rgb(0,0,0)"><br></div><div class="gmail_default" style="color:rgb(0,0,0)">Then I save all the models in x,y,z,t, and e axes. Here the &quot;e&quot; axis is equal to 20 which contains all the models.</div><div class="gmail_default" style="color:rgb(0,0,0)"><br></div><div class="gmail_default" style="color:rgb(0,0,0)">Suppose if you want to plot a time series from model number 5 then you have to use the command like this</div><div class="gmail_default" style="color:rgb(0,0,0)">plot/x=85/y=16/k=15 heatcal[m=5]</div><div class="gmail_default" style="color:rgb(0,0,0)"><br></div><div class="gmail_default" style="color:rgb(0,0,0)">This will plot a time series at lon=85, lat=16, depth level = 15 and for model number 5.</div><div class="gmail_default" style="color:rgb(0,0,0)"><br></div><div class="gmail_default" style="color:rgb(0,0,0)">I hope this will solve your issue. Let me know if you have any&#xA0;questions.</div><div class="gmail_default" style="color:rgb(0,0,0)"><br></div><div class="gmail_default" style="color:rgb(0,0,0)">Cheers, Saurabh</div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Dec 2, 2021 at 8:24 AM Ryo Furue &lt;<a rel="nofollow" href="mailto:furue@xxxxxxxxxx" target="_blank">furue@xxxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div dir="ltr">Dear&#xA0; Xiaoyu,</div><br><div class="gmail_quote"><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div><br><br></div><div>use agg_macav2metdata_pr_NorESM1-M_r1i1p1_historical_1950_2005_CONUS_monthly.nc<br>yes? let/like=precipitation <font color="#ff0000">p_tave=precipitation[t=@AVE]</font><br>yes? save/file=NorESM_hist_ave.nc p_tave<br>&#xA0;LISTing to file NorESM_hist_ave.nc<br></div><div>cancel data 1<br>yes? use NorESM_hist_ave.nc<br>yes? use agg_macav2metdata_pr_NorESM1-M_r1i1p1_rcp85_2006_2099_CONUS_monthly.nc<br>yes? let/d=2/like=precipitation <font color="#ff0000">p_tave</font>=precipitation[t=@AVE,gxy=<font color="#ff0000">p_tave</font>[d=1]]<br></div><div><br></div><div><font face="monospace">I got an error saying:</font></div><div><br></div><div>**ERROR: variable unknown or not in data set: <font color="#ff0000">PRECIPITATION[T=@AVE]</font></div></div></blockquote><div><br></div><div>In the second LET statement, the variable <font face="monospace" color="#ff0000">p_tave</font> is re-defined using its own previous definition. Essentially,</div><div><br></div><div>let <font color="#ff0000">p_tave</font> = precip[gxy=<font color="#ff0000">p_tave</font>[d=1]]</div><div><br></div><div>But you have already canceled the former dataset 1 by &quot;cancel data 1&quot;.</div><div><br></div><div>Although I don&#39;t know exactly what&#39;s happening in this case, I suspect this is the cause of the problem you encounter.&#xA0; So, I suspect you&#39;ll get a result you like if you don&#39;t use the same name &quot;p_tave&quot; and don&#39;t cancel dataset 1.</div><div><br></div><div>Hope this helps,</div><div><br></div><div>Ryo</div><div><br></div><div><br></div><div><br></div><div><br></div><div>&#xA0;</div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div><br></div><div><br></div><div><font face="monospace">When I checked the data:</font></div><div><br></div><div>&#xA0;sh data<br>&#xA0; &#xA0; &#xA0;currently SET data sets:<br>&#xA0; &#xA0; 1&gt; ./NorESM_hist_ave.nc<br>&#xA0;name &#xA0; &#xA0; title &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; I &#xA0; &#xA0; &#xA0; &#xA0; J &#xA0; &#xA0; &#xA0; &#xA0; K &#xA0; &#xA0; &#xA0; &#xA0; L<br>&#xA0;P_TAVE &#xA0; Monthly Precipitation Amount &#xA0; &#xA0; 1:251 &#xA0; &#xA0; 1:144 &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ...<br>&#xA0; &#xA0; &#xA0; &#xA0;(T=30-DEC-1949 12:00:30-DEC-2005 00:00)<br>&#xA0;<br>&#xA0; &#xA0; 2&gt; ./agg_macav2metdata_pr_NorESM1-M_r1i1p1_rcp85_2006_2099_CONUS_monthly.nc &#xA0;(default)<br>&#xA0;name &#xA0; &#xA0; title &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; I &#xA0; &#xA0; &#xA0; &#xA0; J &#xA0; &#xA0; &#xA0; &#xA0; K &#xA0; &#xA0; &#xA0; &#xA0; L<br>&#xA0;PRECIPITATION<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Monthly Precipitation Amount &#xA0; &#xA0; 1:251 &#xA0; &#xA0; 1:144 &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; 1:1128<br>&#xA0;------------------------------<br>&#xA0;P_TAVE[D=agg_macav2metdata_pr_NorESM1-M_r1i1p1_rcp85_2006_2099_CONUS_monthly] = PRECIPITATION[T=@AVE,GXY=P_TAVE[D=1]]<br>&#xA0;<br></div><div><font face="monospace">So I tested&#xA0;</font></div><div><br></div><div>let test= PRECIPITATION[T=@AVE,d=2]-P_TAVE[d=1]<br></div><div><br></div><div><font face="monospace">but still got the same error. Interestingly, If I only compare the two variables&#39; T=@AVE, I got an error:</font></div><div><font face="monospace"><br></font></div><div>contour Precipitation[d=2,T=@AVE]-Precipitation[d=1,T=@AVE]<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;*** NOTE: Ambiguous coordinates on T axis: PRECIPITATION[D=2,L=@AVE]-PRECIPITATION[D=1,L=@AVE]<br>&#xA0;**ERROR: illegal limits: PRECIPITATION is not in the range T=30-DEC-1949 12:00:30-DEC-2005 00:00@AVE<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Axis extremes are T=30-DEC-2005 12:00:30-DEC-2099 00:00<br></div><div><br></div><div><br></div><div><font face="monospace">I am using Pyferret v7.6 on Linux 4.15.0-1089-azure. I am wondering how to solve this problem.</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">Stay healthy,</font></div><div><font face="monospace"><br></font></div><div><font face="monospace">Xiaoyu</font></div><div><font face="monospace"><br></font></div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Wed, Nov 24, 2021 at 6:24 PM Ansley Manke &lt;<a rel="nofollow" href="mailto:a.c.manke@xxxxxxxxx" target="_blank">a.c.manke@xxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">
  
    
  
  <div>[<strong><font color="red">Caution</font></strong>: Email from External Sender. Do not click or open links or attachments unless you know this sender.]<br><span>&#xA0;</span>
    <p>Hi,</p>
    <p>Your datasets do not share a time range, so this is not a typical
      ensemble.</p>
    <p>Usually, you can define an ensemble when the datasets do not have
      the same space/time grids,&#xA0; by first defining a regridding
      operation so that all datasets have the same space/time grid as
      the first dataset in your list. On the page,</p>
    <p><a rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/DEFINE#_define_data_agg" target="_blank">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/DEFINE#_define_data_agg</a></p>
    <p>scroll down in that page to find &quot;Ensemble Examples&quot;. Example 3
      shows how to define an ensemble for data on two different grids,
      including for this data a modulo regridding operation to define
      variables with consistent grids. The variable names must also
      match, so that example also shows how to rename the file variable
      within the Ferret session, and then define the new regridded
      variables using the desired names.</p>
    <p><br>
    </p>
    <p>I am not sure what commands you tried using @AVE.&#xA0; If you did a
      time average, then the resulting grid no longer depends on time,
      so there should not be an error message about time axes. Look at
      this example:</p>
    <p><font face="monospace">! Make a file containing the variables in
        the first dataset, averaged in time.&#xA0; <br>
        ! An ensemble needs one file with the grid that is going to be
        used in the <br>
        ! ensemble; not all of the grids can come from LET definitions.<br>
      </font></p>
    <p><font face="monospace">yes? use dataset_1<br>
        yes? let/like=precip p_tave = precip [t=@ave]<br>
        yes? save/file=<a rel="nofollow" href="http://data1.nc" target="_blank">data1.nc</a> p_tave <br>
        yes? cancel data 1</font></p>
    <p><font face="monospace">! Now open this data and define variables
        in the other dataset(s) so that <br>
        ! they can be included in an ensemble.<br>
      </font></p>
    <p><font face="monospace">yes? use <a rel="nofollow" href="http://data1.nc" target="_blank">data1.nc</a><br>
      </font></p>
    <p><font face="monospace">yes? use dataset_2<br>
        yes? let/d=2/like=precip p_tave = precip[t=@ave,gxy=p_tave
        [d=1]]<br>
        <br>
        yes? ensemble time_ave = 1,2<br>
        <br>
        ! The ensemble dataset should contain the variable p_tave with a
        grid in X-Y-E<br>
      </font></p>
    <p><font face="monospace">yes? show data time_ave </font></p>
    <p><br>
    </p>
    <div>On 11/18/2021 3:22 PM, Xiaoyu Bai
      wrote:<br>
    </div>
    <blockquote type="cite">
      
      <div dir="ltr">Dear ferreters,
        <div><br>
        </div>
        <div>I am trying to ensemble&#xA0;RCPs (2005-2099) and control runs
          (1949-2005) together but keep getting T axis differs error.</div>
        <div><br>
        </div>
        <div>*** NOTE: Variable &quot;PRECIPITATION&quot; excluded from aggregate:
          T axis differs among members<br>
          &#xA0;**ERROR: error defining aggregate dataset: No valid datasets
          or datasets share no variables that can be aggregated.<br>
        </div>
        <div><br>
        </div>
        <div>It makes sense for pyferret to think the time axis are
          different. But comparing the&#xA0;@AVE value from different time
          series should also make sense to&#xA0;pyferret. I am wondering how
          to solve this problem.</div>
        <div><br>
        </div>
        <div>By the way, I already tried to read data in separately&#xA0;and
          do&#xA0;@AVE first then compare. It still showed the same
          error&#xA0;because the data still come from different time series.&#xA0;</div>
        <div><br>
        </div>
        <div>If you want to learn more about&#xA0;ensembles: <a rel="nofollow" href="https://ferret.pmel.noaa.gov/tutorials/PyFerret_exploring_ensembles.pdf" target="_blank">https://ferret.pmel.noaa.gov/tutorials/PyFerret_exploring_ensembles.pdf</a></div>
        <div>
          <div><br>
          </div>
          -- <br>
          <div dir="ltr">
            <div dir="ltr">Xiaoyu (she/her)</div>
          </div>
        </div>
      </div>
    </blockquote>
  </div>
</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr"><div dir="ltr">Xiaoyu (she/her)</div></div>
</blockquote></div></div>
</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr"><div dir="ltr"><div><div dir="ltr"><div><font color="#0000ff" size="4"><b><br></b></font></div><div><font color="#0000ff" size="4"><b><br></b></font></div><font color="#0000ff" size="4" face="times new roman, serif"><b>REGARDS</b></font><div><font color="#0000ff" size="4" face="times new roman, serif"><b><br></b></font><div><font color="#0000ff" size="4" face="times new roman, serif"><b>Saurabh Rathore</b></font></div><div><font color="#0000ff" size="4" face="times new roman, serif"><b>Research Scholar (PhD.)</b></font></div><div><font color="#0000ff" size="4" face="times new roman, serif"><b>Centre For Oceans, Rivers, Atmosphere &amp; Land Science Technology</b></font></div><div><font color="#0000ff" size="4" face="times new roman, serif"><b>Indian Institute Of Technology, Kharagpur</b></font></div><div><font color="#0000ff" size="4" face="times new roman, serif"><b>contact :- 91- 8345984434</b></font></div></div></div></div></div></div>
</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr"><div dir="ltr">Xiaoyu (she/her)</div></div>
</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr" class="gmail_signature"><div dir="ltr"><div><div dir="ltr"><div><font color="#0000ff" size="4"><b><br></b></font></div><div><font color="#0000ff" size="4"><b><br></b></font></div><font color="#0000ff" size="4" face="times new roman, serif"><b>REGARDS</b></font><div><font color="#0000ff" size="4" face="times new roman, serif"><b><br></b></font><div><font color="#0000ff" size="4" face="times new roman, serif"><b>Saurabh Rathore</b></font></div><div><font color="#0000ff" size="4" face="times new roman, serif"><b>Research Scholar (PhD.)</b></font></div><div><font color="#0000ff" size="4" face="times new roman, serif"><b>Centre For Oceans, Rivers, Atmosphere &amp; Land Science Technology</b></font></div><div><font color="#0000ff" size="4" face="times new roman, serif"><b>Indian Institute Of Technology, Kharagpur</b></font></div><div><font color="#0000ff" size="4" face="times new roman, serif"><b>contact :- 91- 8345984434</b></font></div></div></div></div></div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01030" href="msg01030.html">[ferret_users] ensemble or compare data from two time series</a></strong>
<ul><li><em>From:</em> Xiaoyu Bai</li></ul></li>
<li><strong><a name="01033" href="msg01033.html">Re: [ferret_users] ensemble or compare data from two time series</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="01035" href="msg01035.html">Re: [EXTERNAL] Re: [ferret_users] ensemble or compare data from two time series</a></strong>
<ul><li><em>From:</em> Xiaoyu Bai</li></ul></li>
<li><strong><a name="01036" href="msg01036.html">Re: [EXTERNAL] Re: [ferret_users] ensemble or compare data from two time series</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="01057" href="msg01057.html">Re: [EXTERNAL] Re: [ferret_users] ensemble or compare data from two time series</a></strong>
<ul><li><em>From:</em> Xiaoyu Bai</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg01057.html">Re: [EXTERNAL] Re: [ferret_users] ensemble or compare data from two time series</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01034.html">[ferret_users] Pyferret &quot;No Active window&quot; error Post-Installation</a></strong>
</li>

</UL>
<center>[<a href="msg01057.html">Thread Prev</a>][<a href="msg01034.html">Thread Next</a>][<A HREF="threads.html#01058">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
