<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Problem to plot grid -->
<!--X-From-R13: Oaqer Bnvz <cnvz.bprnabNtznvy.pbz> -->
<!--X-Date: Mon, 14 Sep 2015 13:10:04 &#45;0700 -->
<!--X-Message-Id: CAGfCSpvKpzo9JwHfVtS_PHoNzBbGmomou0uLZ&#45;gYs5BF&#45;HC=_g@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAGfCSpuMCMNW2T1eaOf+GWRWvj2xW3TtoET9HZacibC_3Vv4jQ@mail.gmail.com -->
<!--X-Reference: 55F0CF07.7000506@noaa.gov -->
<!--X-Reference: 55F0EE98.9090601@csiro.au -->
<!--X-Reference: CAGfCSps35+xW8jFas2vdpo5OEz+z9uZBfq0cZo6DZ_V7=efO1g@mail.gmail.com -->
<!--X-Reference: 55F22D0A.9020408@csiro.au -->
<!--X-Reference: CAGfCSpvGGYkRMWFJiAw_h0Exv+RsNouqEOQwrVAyWtBkYQzeVA@mail.gmail.com -->
<!--X-Reference: 55F643C5.1090703@csiro.au -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Problem to plot grid</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00266.html">Thread Prev</a>][<a href="msg00244.html">Thread Next</a>][<A HREF="threads.html#00267">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Problem to plot grid</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Russ Fiedler &lt;<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Problem to plot grid</strong></li>
<li><strong>From</strong>: <strong>Andre Paim &lt;<a href="mailto:paim.oceano@DOMAIN.HIDDEN">paim.oceano@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 14 Sep 2015 16:09:33 -0400</li>
<li>Cc: Ferret users mailing list &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00266.html">55F643C5.1090703@csiro.au</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00242.html">CAGfCSpuMCMNW2T1eaOf+GWRWvj2xW3TtoET9HZacibC_3Vv4jQ@mail.gmail.com</a>&gt; &lt;<a href="msg00243.html">55F0CF07.7000506@noaa.gov</a>&gt; &lt;<a href="msg00246.html">55F0EE98.9090601@csiro.au</a>&gt; &lt;CAGfCSps35+xW8jFas2vdpo5OEz+z9uZBfq0cZo6DZ_V7=efO1g@mail.gmail.com&gt; &lt;<a href="msg00256.html">55F22D0A.9020408@csiro.au</a>&gt; &lt;<a href="msg00265.html">CAGfCSpvGGYkRMWFJiAw_h0Exv+RsNouqEOQwrVAyWtBkYQzeVA@mail.gmail.com</a>&gt; &lt;<a href="msg00266.html">55F643C5.1090703@csiro.au</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div><div>Dear Russ,<br></div>Just now I really understood what you meant and it works perfectly! Thanks a lot!<br></div><div><br>In case anyone has the same doubt now or in the future, below is the script I used to generate the lon_c and lat_c containing the cell corners.<br>and plot the model grid on top of it.<br><br></div><div>Cheers<br></div><div>Andre Rodrigues<br></div><div><br><br><div style="margin-left:40px">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br><br>def symb inumber 150&#xA0;&#xA0;&#xA0; ! Number of cells in the X direction<br>def symb jnumber 300&#xA0;&#xA0;&#xA0; ! Number of cells in the Y direction<br><br>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br><br>def symb inumber2 `($inumber)+1`<br>def symb jnumber2 `($jnumber)+1`<br><br>def ax/x=0:($inumber):1 xaxc<br>def ax/y=0:($jnumber):1 yaxc<br><br>let lon_c1 = lon_rho[gx=xaxc,gy=yaxc]<br>let lon_c2 = ((lon_c1[i=@shf:0,j=@shf:0]+lon_c1[i=@shf:1,j=@shf:0]+lon_c1[i=@shf:0,j=@shf:1]+lon_c1[i=@shf:1,j=@shf:1])/4)<br>let lon_c3 = if i eq 1 then lon_c2[i=2]-(lon_c2[i=2@ddf]) else lon_c2<br>let lon_c4 = if i eq `($inumber2)` then lon_c3[i=`($inumber)`]+(lon_c3[i=`($inumber)`@ddb]) else lon_c3<br>let lon_c5 = if j eq 1 then lon_c4[j=2]-(lon_c4[j=2@ddf]) else lon_c4<br>let lon_c = if j eq `($jnumber2)` then lon_c5[j=`($jnumber)`]+(lon_c5[j=`($jnumber)`@ddb]) else lon_c5<br><br>let lat_c1 = lat_rho[gx=xaxc,gy=yaxc]<br>let lat_c2 = ((lat_c1[i=@shf:0,j=@shf:0]+lat_c1[i=@shf:1,j=@shf:0]+lat_c1[i=@shf:0,j=@shf:1]+lat_c1[i=@shf:1,j=@shf:1])/4)<br>let lat_c3 = if i eq 1 then lat_c2[i=2]-(lat_c2[i=2@ddf]) else lat_c2<br>let lat_c4 = if i eq `($inumber2)` then lat_c3[i=150]+(lat_c3[i=150@ddb]) else lat_c3<br>let lat_c5 = if j eq 1 then lat_c4[j=2]-(lat_c4[j=2@ddf]) else lat_c4<br>let lat_c = if j eq `($jnumber2)` then lat_c5[j=300]+(lat_c5[j=300@ddb]) else lat_c5<br><br>!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br></div><br><br></div></div><div class="gmail_extra"><br><div class="gmail_quote">On 13 September 2015 at 23:49, Russ Fiedler <span dir="ltr">&lt;<a rel="nofollow" href="mailto:russell.fiedler@xxxxxxxx" target="_blank">russell.fiedler@xxxxxxxx</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
  
    
  
  <div text="#000000" bgcolor="#FFFFFF">
    <div><br>
      <br>
      Hi Andre,<br>
      <br>
      The problem is that you are still making a shade plot with the&#xA0;
      dimensions of the lat and lon being the same as the variable you
      are plotting.<br>
      This results in a half cell at the edges. Ferret is plotting on a
      centred grid. You don&#39;t need to interpolate your data to the to
      the cell corners.<br>
      <br>
      You plot command needs to be&#xA0; something like<br>
      <br>
      shade
      var[i=1:150,j=1:300],lon_c[i=1:151,j=1:301],lat_c[i=1:151,j=1:1:301]
      ! Dimensions of lon,lat EXACTLY 1 larger.<br>
      <br>
      where lon_c and lat_c are the cell corners.<br>
      <br>
      &#xA0;
      Cheers,<br>
      Russ<div><div class="h5"><br>
      <br>
      <br>
      On 12/09/15 07:45, Andre Paim wrote:<br>
    </div></div></div><div><div class="h5">
    <blockquote type="cite">
      
      <div dir="ltr">
        <div>
          <div>
            <div>
              <div>
                <div>
                  <div>Russ,<br>
                    <br>
                  </div>
                  I&#39;ve tried that but still could not get anywhere.<br>
                </div>
                I&#39;ve actually added one point at each extreme, changing
                my grid from 150x300 to 152x302.<br>
              </div>
              However, I am still getting the same problem with the last
              cell just being half plotted, as you can see below. The
              plot on the left uses the original lon_rho and lat_rho and
              the one on the right uses the edited lon_rho2 and
              lat_rho2. (I&#39;ve created an over complicated script to
              generate these figures... for that reason I will just add
              it to the end of the email). when I tried to plot it just
              until the second to last cell (in this case i=151), then
              that cell was also half plotted.<br>
            </div>
            <br>
          </div>
          Best regards,<br>
        </div>
        Andre<br>
        <div>
          <div>
            <div><br>
              <img alt="Inline images 2" height="210" width="561"><br>
              <br>
              <br>
              <div style="margin-left:40px">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>
                use <a rel="nofollow" href="http://grids_example.nc" target="_blank">grids_example.nc</a><br>
                <br>
                !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>
                <br>
                def ax/x=0:151:1 xax1<br>
                def ax/y=0:301:1 yax1<br>
                <br>
                !!!!!!!!!!!!!!<br>
              </div>
              <div style="margin-left:40px">!Generating new first and
                last cells<br>
              </div>
              <div style="margin-left:40px">let lon_rhoa =
                lon_rho[gx=xax1,gy=yax1]<br>
                let lon_rhob = if i lt 152 then lon_rhoa else
                (lon_rhoa[i=150]+(lon_rhoa[i=150]-lon_rhoa[i=149]))<br>
                let lon_rhoc = if j lt 302 then lon_rhob else
                (lon_rhob[j=300]+(lon_rhob[j=300]-lon_rhob[j=299]))<br>
                let lon_rhod = if i gt 1 then lon_rhoc else
                (lon_rhoc[i=2]+(lon_rhoc[i=2]-lon_rhoc[i=3]))<br>
                let lon_rhoe = if j gt 1 then lon_rhod else
                (lon_rhod[j=2]+(lon_rhod[j=2]-lon_rhod[j=3]))<br>
                <br>
                let lat_rhoa = lat_rho[gx=xax1,gy=yax1]<br>
                let lat_rhob = if i lt 152 then lat_rhoa else
                (lat_rhoa[i=150]+(lat_rhoa[i=150]-lat_rhoa[i=149]))<br>
                let lat_rhoc = if j lt 302 then lat_rhob else
                (lat_rhob[j=300]+(lat_rhob[j=300]-lat_rhob[j=299]))<br>
                let lat_rhod = if i gt 1 then lat_rhoc else
                (lat_rhoc[i=2]+(lat_rhoc[i=2]-lat_rhoc[i=3]))<br>
                let lat_rhoe = if j gt 1 then lat_rhod else
                (lat_rhod[j=2]+(lat_rhod[j=2]-lat_rhod[j=3]))<br>
                <br>
                !!!!!!!!!!!!<br>
              </div>
              <div style="margin-left:40px">!Calculating limits between
                grid cells<br>
              </div>
              <div style="margin-left:40px">let lon_rho2 =
((lon_rhoe[i=@shf:0,j=@shf:0]+lon_rhoe[i=@shf:1,j=@shf:0]+lon_rhoe[i=@shf:0,j=@shf:1]+lon_rhoe[i=@shf:1,j=@shf:1])/4)<br>
                let lat_rho2 =
((lat_rhoe[i=@shf:0,j=@shf:0]+lat_rhoe[i=@shf:1,j=@shf:0]+lat_rhoe[i=@shf:0,j=@shf:1]+lat_rhoe[i=@shf:1,j=@shf:1])/4)<br>
                <br>
                !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>
                <br>
                set win/asp=0.5 2<br>
                let diff_rho = lon_rho+lat_rho<br>
                let diff_rhoe = lon_rhoe+lat_rhoe<br>
                <br>
                def symb hlim -74.8:-74.55<br>
                def symb vlim 36.58:36.7<br>
                def symb lev (-38.2,-37.9,0.01)<br>
                <br>
                can mode verify<br>
                set view left<br>
                shade/i=1:150/j=1:300/lev=($lev)/hlim=($hlim)/vlim=($vlim)/nolab
                diff_rho,lon_rho,lat_rho<br>
                rep/i=1:150 (plot/ov/vs/dash/line/col=1/nolab
                lon_rho,lat_rho)<br>
                rep/j=1:300 (plot/ov/vs/dash/line/col=1/nolab
                lon_rho,lat_rho)<br>
                rep/i=148:150 (rep/j=1:3
                (plot/size=0.2/col=1/ov/vs/nolab/symb=2
                {`lon_rho`},{`lat_rho`}))<br>
                label/nouser `($ppl$xlen)/2` `($ppl$ylen)*1.1` 0 0 0.2
                Original variables<br>
                <br>
                set view right<br>
                shade/i=1:152/j=1:302/lev=($lev)/hlim=($hlim)/vlim=($vlim)/nolab
                diff_rhoe,lon_rhoe,lat_rhoe<br>
                rep/i=1:151 (plot/ov/vs/dash/line/col=1/nolab
                lon_rho2,lat_rho2)<br>
                rep/j=1:300 (plot/ov/vs/dash/line/col=1/nolab
                lon_rho2,lat_rho2)<br>
                rep/i=148:150 (rep/j=1:3
                (plot/size=0.2/col=1/ov/vs/nolab/symb=2
                {`lon_rho2`},{`lat_rho2`}))<br>
                label/nouser `($ppl$xlen)/2` `($ppl$ylen)*1.1` 0 0 0.2
                Edited variables<br>
                <br>
              </div>
              <div style="margin-left:40px">set mode verify<br>
              </div>
              <br>
            </div>
          </div>
        </div>
      </div>
      <div class="gmail_extra"><br>
        <div class="gmail_quote">On 10 September 2015 at 21:23, Russ
          Fiedler <span dir="ltr">&lt;<a rel="nofollow" href="mailto:russell.fiedler@xxxxxxxx" target="_blank">russell.fiedler@xxxxxxxx</a>&gt;</span>
          wrote:<br>
          <blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
            <div text="#000000" bgcolor="#FFFFFF">
              <div><br>
                Hi Andre,<br>
                <br>
                Yes, you will need to construct the corners of each cell
                somehow. This will allow Ferret to extrapolate correctly
                out to the edges.<br>
                If you have the corners saved, good. Then all you need
                to do is<br>
                <br>
                Assuming your grid is 150x300 the corner arrays will be
                151x301<br>
                <br>
                shade var,lon_corner,lat_corner<br>
                repeat/i=1:151 plot/ov/vs/dash lon_corner,lat_corner<br>
                repeat/j=1:301 plot/ov/vs/dash lon_corner,lat_corner<br>
                <br>
                <br>
                If you don&#39;t have the corners saved I would write a
                quick program (not Ferret) to calculate them and save
                them to a file which can be read in.<br>
                You can do this in Ferret but it&#39;s quite fiddly. You
                will also need to interpolate in 2D and not 1D as you
                have done below.<span><font color="#888888"><br>
                    <br>
                    Russ</font></span>
                <div>
                  <div><br>
                    <br>
                    &#xA0;<br>
                    <br>
                    <br>
                    On 11/09/15 06:22, Andre Paim wrote:<br>
                  </div>
                </div>
              </div>
              <div>
                <div>
                  <blockquote type="cite">
                    <div dir="ltr">
                      <div>
                        <div>Dear Russ and Ansley, thanks a lot for your
                          answers. <br>
                          <br>
                          I&#xA0; think I wasn&#39;t as thorough as I should have
                          when explaining my issue. Attached is a netcdf
                          with the the lon and lat variables.<br>
                        </div>
                        <div>This is the code I used to create the first
                          figure in the previous email:<br>
                          <br>
                          <div style="margin-left:40px">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>
                            <br>
                            let lon_hyc2 = (lon_hyc+lon_hyc[i=@shf:1])/2<br>
                            let lat_hyc2 = (lat_hyc+lat_hyc[j=@shf:1])/2<br>
                            <br>
                            !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>
                            <br>
                            set win/asp=1 1<br>
                            shade/title=&quot;Hycom
                            Grid&quot;/nokey/x=-75.8:-73.8/y=38.0:40.0
                            surf_hyc<br>
                            go land_detail <br>
                            <br>
                            rep/i=1:126
                            (plot/ov/vs/line/dash/col=1/nolab
                            lon_hyc2,lat_hyc2)<br>
                            rep/j=1:87&#xA0;
                            (plot/ov/vs/line/dash/col=1/nolab
                            lon_hyc2,lat_hyc2)<br>
                            <br>
                            !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>
                          </div>
                          <br>
                        </div>
                        The /dash in here is just because this is not my
                        main grid. What I&#39;m trying to accomplish here is
                        to just show the differences between these two
                        grids (one from the HYCOM available at <a rel="nofollow" href="http://hycom.org" target="_blank">hycom.org</a>, and the other
                        one is my grid) at my boundaries and in my area
                        of interest. <br>
                        <br>
                        So, the HYCOM grid works fine. However when I
                        try to do the same to my grid (using the code
                        below), I get the second figure<br>
                      </div>
                      <div><br>
                        <div style="margin-left:40px">!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>
                          <br>
                          let lon_rho2 = (lon_rho+lon_rho[i=@shf:-1])/2<br>
                          let lat_rho2 = (lat_rho+lat_rho[j=@shf:1])/2<br>
                          <br>
                          !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>
                          <br>
                          set win/asp=1 2<br>
                          shade/lev=(-38.5,-37.4,0.02)/hlim=-75.2:-74.4/vlim=36.4:37.1/nolab

                          lon_rho+lat_rho,lon_rho,lat_rho<br>
                          <br>
                          rep/i=2:150 (plot/ov/vs/line/col=7/nolab
                          lon_rho2,lat_rho2)<br>
                          rep/j=1:299 (plot/ov/vs/line/col=7/nolab
                          lon_rho2,lat_rho2)<br>
                          <br>
                          !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!<br>
                        </div>
                        <br>
                        <div><img alt="Inline images 2" height="350" width="443"><br>
                        </div>
                        <div><br>
                          This second figure is actually a little
                          different from the original; I figured a
                          mistake a had done in my code. However, the
                          offset is still there. I&#39;ve plotted using
                          /dash just to make it easier to notice the
                          offset.<br>
                        </div>
                        <div>Also, it seems that I&#39;m not showing the
                          first row and last column. And they seem to
                          have just half of the size of the other cells.
                          <br>
                        </div>
                        <div><br>
                          Russ, I think the link you suggested me kind
                          of cover this last issue, but I didn&#39;t
                          understand how to use that. Should I write:<br>
                          <br>
                          <div style="margin-left:40px">shade/lev=(-38.5,-37.4,0.02)/hlim=-75.2:-74.4/vlim=36.4:37.1/nolab
lon_rho+lat_rho,lon_rho[i=1:151,j=0:300],lat_rho[i=1:151,j=0:300]<br>
                          </div>
                        </div>
                        <div><br>
                        </div>
                        <div>I doesn&#39;t seem to make any difference.<br>
                          <br>
                        </div>
                        <div>Any suggestions?<br>
                          <br>
                        </div>
                        <div>Thanks a lot!<br>
                        </div>
                        <div>Andre<br>
                        </div>
                        <div><br>
                        </div>
                        <div><br>
                        </div>
                      </div>
                    </div>
                    <div class="gmail_extra"><br>
                      <div class="gmail_quote">On 9 September 2015 at
                        22:44, Russ Fiedler <span dir="ltr">&lt;<a rel="nofollow" href="mailto:russell.fiedler@xxxxxxxx" target="_blank">russell.fiedler@xxxxxxxx</a>&gt;</span>
                        wrote:<br>
                        <blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
                          <div text="#000000" bgcolor="#FFFFFF">
                            <div><br>
                              Hi Ansley,<br>
                              <br>
                              If you look at your plot you see lines at
                              approximately half the cell heights. This
                              is an artifact due to joining the wrapped
                              endpoints (380E -&gt;20E). Missing values
                              need to be introduced at the ends. The
                              vertical lines can be plotted by plotting
                              the transposes of lon2 and lat2<br>
                              <br>
                              yes? use coads_climatology<br>
                              <br>
                              ! Cell centres<span><br>
                                yes?
                                let/title=&quot;longitude&quot;/units=degrees_east
                                lon = x[gx=sst] + 0*y[gy=sst]<br>
                                yes?
                                let/title=&quot;latitude&quot;/units=degrees_north&#xA0;
                                lat = 0*x[gx=sst] + y[gy=sst]<br>
                                yes? shade/l=1/hlim=180:240/vlim=0:40
                                sst, lon, lat<br>
                                <br>
                              </span> ! Define cell NE points<span><br>
                                yes? let&#xA0; lon2 = (lon+lon[i=@shf:1])/2<br>
                              </span> yes? let lat2 = if i ne 1 then
                              (lat+lat[j=@shf:1])/2 ! Stop wrap.<br>
                              <br>
                              yes? plot/dash/vs/ov/col=black/nolab
                              lon2,lat2<br>
                              yes? plot/dash/vs/ov/col=black/nolab
                              transpose_xy(lon2),transpose_xy(lat2)<br>
                              <br>
                              <br>
                              Andre, I think you want to be using the
                              boundary specified version of the 3
                              argument shade plot if possible.<br>
                              <br>
                              <a rel="nofollow" href="http://ferret.pmel.noaa.gov/static/FAQ/graphics/curvilinear_edges.html" target="_blank">http://ferret.pmel.noaa.gov/static/FAQ/graphics/curvilinear_edges.html</a><br>
                              <br>
                              i.e. specify the cell boundaries for your
                              shade plot command. You can then overlay
                              those coordinates. That should fix the
                              offset problem that you seem to be having.<span><font color="#888888"><br>
                                  <br>
                                  Russ</font></span>
                              <div>
                                <div><br>
                                  <br>
                                  On 10/09/15 10:29, Ansley Manke wrote:<br>
                                </div>
                              </div>
                            </div>
                            <div>
                              <div>
                                <blockquote type="cite"> Hi,<br>
                                  If what you want is dashed lines, you
                                  could try fiddling with adding
                                  arguments to the /DASH qualifier,
                                  making shorter &quot;down&quot; segments:<br>
                                  <a rel="nofollow" href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/PLOT#_VPINDEXENTRY_1475" target="_blank">http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/PLOT#_VPINDEXENTRY_1475</a>&#xA0;
                                  <br>
                                  <br>
                                  Another alternative for showing the
                                  grids is to just make symbols, either
                                  at the grid cells or the corners,&#xA0; so
                                  <tt><br>
                                  </tt>
                                  <blockquote><tt>yes? shade
                                      h,lon_hyc2,lat_hyc2</tt>
                                    <div class="gmail_extra"><tt>yes?
                                        plot/nolab/vs/ov/sym=dot
                                        lon_hyc2,lat_hyc2</tt></div>
                                  </blockquote>
                                  or with a small symbol of some other
                                  shape.<br>
                                  <br>
                                  That first plot you showed is pretty
                                  nice looking. Interestingly I can&#39;t
                                  seem to replicate what you did for a
                                  rectangular grid where I define
                                  2-dimensional longitudes and latitudes
                                  for a simple 1-D grid, trying to
                                  simulate the 2-D coordinates:<br>
                                  <blockquote><tt>yes? use
                                      coads_climatology</tt><br>
                                    <br>
                                    <tt>yes?
                                      let/title=&quot;longitude&quot;/units=degrees_east
                                      lon = x[gx=sst] + 0*y[gy=sst]</tt><br>
                                    <tt>yes?
                                      let/title=&quot;latitude&quot;/units=degrees_north&#xA0;
                                      lat = 0*x[gx=sst] + y[gy=sst]</tt><br>
                                    <br>
                                    <tt>yes?
                                      shade/l=1/hlim=180:240/vlim=0:40
                                      sst, lon, lat</tt><br>
                                    <tt>yes? let&#xA0; lon2 =
                                      (lon+lon[i=@shf:1])/2</tt><br>
                                    <tt>yes? let lat2 =
                                      (lat+lat[j=@shf:1])/2</tt><br>
                                    <tt>yes? plot/dash/vs/ov lon2,lat2</tt><br>
                                  </blockquote>
                                  I only see the horizontal dashed
                                  lines. Did you show your whole script?<br>
                                  <br>
                                  <br>
                                  <div>On 9/9/2015 2:54 PM, Andre Paim
                                    wrote:<br>
                                  </div>
                                  <blockquote type="cite">
                                    <div dir="ltr">
                                      <div class="gmail_extra">Dear all,</div>
                                      <div class="gmail_extra"><br>
                                      </div>
                                      <div class="gmail_extra">I&#39;ve been
                                        trying to plot the grid from my
                                        model on top of a shade plot and
                                        I just cant seem to make it
                                        right. I have two grids, one
                                        regular and another irregular
                                        and curved along the coast.&#xA0;</div>
                                      <div class="gmail_extra"><br>
                                      </div>
                                      <div class="gmail_extra">Here is
                                        how I&#39;m plotting that for the
                                        regular grid.</div>
                                      <div class="gmail_extra"><br>
                                      </div>
                                      <div class="gmail_extra">
                                        <div class="gmail_extra">&#xA0; &#xA0;let
                                          lon_hyc2 =
                                          (lon_hyc+lon_hyc[i=@shf:1])/2</div>
                                        <div class="gmail_extra">&#xA0; &#xA0;let
                                          lat_hyc2 =
                                          (lat_hyc+lat_hyc[j=@shf:1])/2</div>
                                        <div><br>
                                        </div>
                                      </div>
                                      <div class="gmail_extra">&#xA0; &#xA0;shade
                                        h,lon_hyc2,lat_hyc2</div>
                                      <div class="gmail_extra">&#xA0;
                                        &#xA0;plot/dash/vs/ov
                                        lon_hyc2,lat_hyc2</div>
                                      <div class="gmail_extra"><br>
                                      </div>
                                      <div class="gmail_extra">I don&#39;t
                                        know if that is a coincidence,
                                        but the plot works fine for the
                                        area I&#39;m plotting as can be seem
                                        bellow.&#xA0;<br>
                                        <img alt="Inline images 3" height="476" width="544"><br>
                                      </div>
                                      <div class="gmail_extra"><br>
                                      </div>
                                      <div class="gmail_extra">
                                        <div class="gmail_extra"><br>
                                        </div>
                                      </div>
                                      <div class="gmail_extra">However,
                                        when I try to do the same to the
                                        irregular grid, this is what I
                                        get.<br>
                                      </div>
                                      <div class="gmail_extra"><br>
                                        <img alt="Inline images 4" height="435" width="544"><br>
                                        <br>
                                        <div class="gmail_extra"><br>
                                        </div>
                                        <div class="gmail_extra">Both
                                          models are not projected, with
                                          lon and lat in their
                                          respective variables.</div>
                                        <div class="gmail_extra">Is
                                          there an easier way to do
                                          that?<br>
                                          <br>
                                          Thanks in advance,</div>
                                        <div class="gmail_extra">Andre
                                          Rodrigues</div>
                                      </div>
                                    </div>
                                  </blockquote>
                                  <br>
                                </blockquote>
                                <br>
                              </div>
                            </div>
                          </div>
                        </blockquote>
                      </div>
                      <br>
                    </div>
                  </blockquote>
                  <br>
                </div>
              </div>
            </div>
          </blockquote>
        </div>
        <br>
      </div>
    </blockquote>
    <br>
  </div></div></div>

</blockquote></div><br></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00242" href="msg00242.html">[ferret_users] Problem to plot grid</a></strong>
<ul><li><em>From:</em> Andre Paim</li></ul></li>
<li><strong><a name="00243" href="msg00243.html">Re: [ferret_users] Problem to plot grid</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00246" href="msg00246.html">Re: [ferret_users] Problem to plot grid</a></strong>
<ul><li><em>From:</em> Russ Fiedler</li></ul></li>
<li><strong><a name="00255" href="msg00255.html">Re: [ferret_users] Problem to plot grid</a></strong>
<ul><li><em>From:</em> Andre Paim</li></ul></li>
<li><strong><a name="00256" href="msg00256.html">Re: [ferret_users] Problem to plot grid</a></strong>
<ul><li><em>From:</em> Russ Fiedler</li></ul></li>
<li><strong><a name="00265" href="msg00265.html">Re: [ferret_users] Problem to plot grid</a></strong>
<ul><li><em>From:</em> Andre Paim</li></ul></li>
<li><strong><a name="00266" href="msg00266.html">Re: [ferret_users] Problem to plot grid</a></strong>
<ul><li><em>From:</em> Russ Fiedler</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00266.html">Re: [ferret_users] Problem to plot grid</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00244.html">[ferret_users] help</a></strong>
</li>

</UL>
<center>[<a href="msg00266.html">Thread Prev</a>][<a href="msg00244.html">Thread Next</a>][<A HREF="threads.html#00267">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
