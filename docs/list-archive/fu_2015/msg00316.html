<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] vland and vfland &#45; global meridional sections -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 28 Sep 2015 17:26:48 &#45;0700 -->
<!--X-Message-Id: 5609DAC4.6020705@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 7c0cc27473d54bb0b957f2ad91e07111@MBX3.utas.ad.internal -->
<!--X-Reference: 56098F4B.2000006@noaa.gov -->
<!--X-Reference: 5609CC08.5010008@io&#45;warnemuende.de -->
<!--X-Derived: pngBLiJnq_J4v.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] vland and vfland - global meridional sections</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00315.html">Thread Prev</a>][<a href="msg00322.html">Thread Next</a>][<A HREF="threads.html#00316">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] vland and vfland - global meridional sections</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>,        &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] vland and vfland - global meridional sections</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 28 Sep 2015 17:26:44 -0700</li>
<li>In-reply-to: &lt;5609CC08.5010008@io-warnemuende.de&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;7c0cc27473d54bb0b957f2ad91e07111@MBX3.utas.ad.internal&gt; &lt;<a href="msg00315.html">56098F4B.2000006@noaa.gov</a>&gt; &lt;5609CC08.5010008@io-warnemuende.de&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:38.0) Gecko/20100101 Thunderbird/38.2.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Martin,<br>
    This depends a lot on how the script is written, but an _expression_
    can definitely be sent in as the argument to a script.&#xA0; When running
    Ferret or PyFerret the behavior is the same when running Ferret
    commands and scripts.<br>
    <br>
    The vland and vfland scripts take arguments which specify a line in
    X or Y, given by a single value and a range, given as strings
    containing x= and y= specifiers.<br>
    <tt><br>
    </tt><tt>! usage:&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; arg1&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; arg2&#xA0; arg3&#xA0;&#xA0;&#xA0;&#xA0; arg4</tt><tt><br>
    </tt><tt>!&#xA0; GO vland&#xA0; [resolution] [pen]&#xA0; x=val&#xA0;&#xA0;&#xA0; y=lo:hi</tt><tt><br>
    </tt><tt>!&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; x=lo:hi&#xA0; y=val</tt><tt><br>
    </tt><tt><br>
      <br>
    </tt><tt>! usage:&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; arg1&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; arg2&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; arg3&#xA0;&#xA0;&#xA0;&#xA0; arg4</tt><tt><br>
    </tt><tt>!&#xA0; GO vfland [resolution] [palette]&#xA0; x=val&#xA0;&#xA0;&#xA0; y=lo:hi</tt><tt><br>
    </tt><tt>!&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; x=lo:hi&#xA0; y=val</tt><br>
    <br>
    They specifically look for argument 3 and 4 to be in that form, and
    they check that those arguments fit that requirement.&#xA0; So in this
    case the answer is to just find out what the script is doing, do
    something similar in a custom script.<br>
    <br>
    Script arguments are treated as symbols on entry into the script.
    The script will evaluate them and may treat them as numbers, or as
    strings which refer to variable names, whole complex expressions,
    file names, etc.&#xA0; They are just seen by Ferret on entry to the
    script as pieces of text.<br>
    <br>
    If I have a script with just this:<tt><br>
    </tt>
    <blockquote><tt>! my_plot_script.jnl<br>
        !<br>
        plot/color=blue $1</tt><tt></tt><br>
    </blockquote>
    then it works fine to call it as follows:<tt><br>
    </tt>
    <blockquote><tt>yes? use etopo20<br>
        yes? go </tt><tt><tt>my_plot_script </tt>rose[x=@var]<br>
        <br>
        ! my_plot_script.jnl<br>
        !<br>
        plot/color=blue $1<br>
        &#xA0;!-&gt; plot/color=blue rose[x=@var]<br>
      </tt></blockquote>
    <tt></tt>and it makes the plot.<br>
    <br>
    Another example of a complex script argument: the "polymark.jnl"
    script takes a whole graphics command as an argument.&#xA0; Here's the
    argument at the start of that script<br>
    <br>
    <tt>!&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; yes? LET xpts = 180 + 50*COS(2*3.14*I[I=1:50]/60)</tt><tt><br>
    </tt><tt>!&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; yes? LET ypts = 15&#xA0; + 20*SIN(2*3.14*I[I=1:50]/60)</tt><tt><br>
    </tt><tt>!&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; yes? LET sst = 25 - ypts + RANDN(ypts)</tt><tt><br>
    </tt><tt><br>
    </tt><tt>!&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; yes? GO basemap x=120:250 Y=25s:65n 20</tt><tt><br>
    </tt><tt>!</tt><tt><br>
    </tt><tt>!&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; yes? GO polymark polygon/over/key/title="SST"&#xA0;
      xpts,ypts,sst,ex, 0.5 </tt><tt><br>
    </tt><tt>!</tt><br>
    <br>
    - the first argument is this string:<br>
    <br>
    <tt>
      &#xA0;&#xA0; polygon/over/key/title="SST"</tt><br>
    <br>
    so an _expression_ may be passed into a script - and of course when
    writing your own scripts they can handle arguments as you wish.&#xA0;
    Symbol substitution is a dense syntax, but also a powerful one.<br>
    <br>
    -Ansley<br>
    <br>
    <div class="moz-cite-prefix">On 9/28/2015 4:23 PM, Martin Schmidt
      wrote:<br>
    </div>
    <blockquote cite=""
      type="cite">
      
      Hi Anley,<br>
      I am in Luanda in the moment and have only a windows PC. So I
      cannot check anything and I do not write to the list ...<br>
      <br>
      Using pyferret I had observed recently that scripts take only a
      variable but not the transformations applied to. To be<br>
      specific, I tried:<br>
      <br>
      go script var[x=@din]<br>
      <br>
      and in the script <br>
      <br>
      a=$1<br>
      <br>
      I did not get an error message but the output was not as expected.
      But I needed such a script since "var" was many variables. As a
      solution I have shifted the [x=@din] to the script<br>
      <br>
      go script var<br>
      <br>
      a=$1[x=@din]<br>
      <br>
      This solved the problems as far as output was as expected. May be
      the point is the difference between<br>
      <br>
      go script var[x=@din]<br>
      a=$1<br>
      <br>
      and<br>
      <br>
      go script var<br>
      a=$1[x=@din]<br>
      <br>
      If there is non, I am wrong, if there is some - ferret behaves
      differently then expected from intuition.<br>
      <br>
      The question was on the list, so a fast late nite answer from
      nowhere .... <br>
      <br>
      Best,<br>
      Martin<br>
      <br>
      Am 28.09.2015 21:04, schrieb Ansley Manke:
      <blockquote cite="" type="cite">
        
        Hi Pearse,<br>
        Yes, the arguments to those scripts are simple numbers or
        ranges, not expressions.<br>
        <br>
        To see what the scripts are doing, use<br>
        <br>
        <tt>&#xA0;&#xA0; yes? go/help vland</tt><br>
        <tt>&#xA0;&#xA0; yes? go/help vfland</tt><br>
        <br>
        It would be quite simple to do the same thing as <b>vland</b>,
        using the x-average of a topography variable.&#xA0; In vland.jnl, the
        script opens a topo dataset, and does this plot command.<br>
        <br>
        <tt>&#xA0;&#xA0; PLOT/NOLAB/overlay/VLIM=($ppl$ymax):($ppl$ymin)/SET&#xA0;
          -1*fv_rosedepth[($fv_xyregion)]</tt><br>
        <br>
        but in defining the XY region, the script requires a range in
        one direction and a scalar in the other.&#xA0; Instead, it sounds as
        if you want something along these lines:<br>
        <br>
        <tt>&#xA0;&#xA0; USE etopo20</tt><tt><br>
        </tt><tt>&#xA0;&#xA0; PLOT/NOLAB/overlay/VLIM=($ppl$ymax):($ppl$ymin)/SET&#xA0;
          -1*rose[x=@AVE,y=-90:90]</tt><tt><br>
        </tt><br>
        <br>
        vfland.jnl sets up some variables and symbols, and calls the
        "fill_between" script.&#xA0; Here, I'd suggest you watch it in action
        for a single value of X, to see how you could set things up to
        call it with an x-averaged topography variable.&#xA0; Make your plot
        calls:<br>
        <br>
        <tt>&#xA0;&#xA0; yes? fill my_variable&#xA0;&#xA0; </tt><br>
        <br>
        then turn on "mode verify" so you can see the commands as
        they're run.<br>
        <tt><br>
        </tt><tt>&#xA0;&#xA0; yes? set mode verify:always</tt><tt><br>
        </tt><tt>&#xA0;&#xA0; yes? go vfland 20 gray x=150 y=-90:90</tt><br>
        <br>
        What you're looking for in that output, is how the "GO
        fill_between" script is called.&#xA0; <br>
        <br>
        <br>
        <div>On 9/28/2015 12:17 AM, Pearse Buchanan wrote:<br>
        </div>
        <blockquote
          cite=""
          type="cite">
          <div>
            <p>Hi fellow ferreters, </p>
            <p> &#xA0; </p>
            <p>I&#x2019;m trying to make some meridional section plots over
              various regions of the ocean. This includes a global zonal
              average, as well as zonal averages for the Indian, pacific
              and Atlantic oceans with various variables (please see the
              attached pretty plots). </p>
            <p> &#xA0; </p>
            <p>I came across the vland and vfland scripts during my
              searching, and was attempting to use them. However, it
              seems that you must define an exact vertical/horizontal
              section, i.e. no averages! </p>
            <p> &#xA0; </p>
            <p>This is how I tried to get it to work originally, with no
              success: </p>
            <p><span>go vfland 20 grey x=@ave y=-90:90 </span></p>
            <p><span>Command file, command group, or REPEAT execution
                aborted </span></p>
            <p><span>**ERROR: error: data is not a line </span></p>
            <p> &#xA0; </p>
            <p>It seems the <span> x=@ave</span> argument is not
              recognised. Is there an alternative? </p>
            <p> &#xA0; </p>
            <p>Any help would be appreciated. </p>
            <p> &#xA0; </p>
            <p>Thanks, </p>
            <p>Pearse </p>
            <p> &#xA0; </p>
            <p><b><span>Pearse J. Buchanan</span></b><b><span> </span></b></p>
            <p><span>PhD Candidate / CSIRO-UTAS Quantitative Marine
                Science </span></p>
            <p><span>Institute for Marine and Antarctic Studies (IMAS),
                University of Tasmania </span></p>
            <p><span> &#xA0; </span></p>
            <p><span><img src="pngBLiJnq_J4v.png"
                  alt="sig"> </span></p>
            <p><span> &#xA0; </span></p>
            <p><span>~~~ &#x201C;Ocean deoxygenation: A Palaeo-Modelling
                Perspective&#x201D; ~~~ </span></p>
            <p><span>Parts of the Ocean are predicted to lose oxygen in
                the coming century. But why? </span></p>
            <p><span>Looking into the past, how does oxygen in the ocean
                change across climate transitions? </span></p>
            <p> &#xA0; </p>
          </div>
          <p><br>
            <br>
            University of Tasmania Electronic Communications Policy
            (December, 2014). <br>
            This email is confidential, and is for the intended
            recipient only. Access, disclosure, copying, distribution,
            or reliance on any of it by anyone outside the intended
            recipient organisation is prohibited and may be a criminal
            offence. Please delete if obtained in error and email
            confirmation to the sender. The views expressed in this
            email are not necessarily the views of the University of
            Tasmania, unless clearly intended otherwise. </p>
        </blockquote>
        <br>
      </blockquote>
      <br>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00314" href="msg00314.html">[ferret_users] vland and vfland - global meridional sections</a></strong>
<ul><li><em>From:</em> Pearse Buchanan</li></ul></li>
<li><strong><a name="00315" href="msg00315.html">Re: [ferret_users] vland and vfland - global meridional sections</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00315.html">Re: [ferret_users] vland and vfland - global meridional sections</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00322.html">RE: [ferret_users] vland and vfland - global meridional sections</a></strong>
</li>

</UL>
<center>[<a href="msg00315.html">Thread Prev</a>][<a href="msg00322.html">Thread Next</a>][<A HREF="threads.html#00316">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
