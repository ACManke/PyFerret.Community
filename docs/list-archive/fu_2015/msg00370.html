<!-- MHonArc v2.6.18 -->
<!--X-Subject: RE: [ferret_users] Re: Ferret &#45; masking based on altitude -->
<!--X-From-R13: Ehqurre Xbfrcu <fwbNvapbvf.tbi.va> -->
<!--X-Date: Sat, 17 Oct 2015 06:43:21 &#45;0700 -->
<!--X-Message-Id: aa5aed85dbda402192aefc9398cd7017@INCOISEXCMB02.incois.gov.in -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAOzkrhEza0pU76NxOYOx0=Nyx_tU=NSjmNF6PMLoiscmsiTtDQ@mail.gmail.com -->
<!--X-Reference: CAGfCSpuA9k+dXvirD3mP5dkju7_c3BSo3bwj16+oN809g33Rdg@mail.gmail.com -->
<!--X-Reference: CAOzkrhHCATHTcKw5DXiuqSp4miz0SnNiBCK6_suQcFfP0A4=7g@mail.gmail.com -->
<!--X-Reference: CAOzkrhGxcyQFEVJyoqcsPHY&#45;9AQ_302YDSMbtXNk0TvkYJTqmg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RE: [ferret_users] Re: Ferret - masking based on altitude</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00369.html">Thread Prev</a>][<a href="msg00371.html">Thread Next</a>][<A HREF="threads.html#00370">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [ferret_users] Re: Ferret - masking based on altitude</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>simon EK &lt;<a href="mailto:simonambat@DOMAIN.HIDDEN">simonambat@xxxxxxxxx</a>&gt;,        &quot;<a href="mailto:ferret-majordomo@DOMAIN.HIDDEN">ferret-majordomo@xxxxxxxx</a>&quot;	&lt;<a href="mailto:ferret-majordomo@DOMAIN.HIDDEN">ferret-majordomo@xxxxxxxx</a>&gt;,        Ferret users mailing list	&lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>RE: [ferret_users] Re: Ferret - masking based on altitude</strong></li>
<li><strong>From</strong>: <strong>Sudheer Joseph &lt;<a href="mailto:sjo@DOMAIN.HIDDEN">sjo@xxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Sat, 17 Oct 2015 13:42:12 +0000</li>
<li>Accept-language: en-US</li>
<li>In-reply-to: &lt;<a href="msg00369.html">CAOzkrhGxcyQFEVJyoqcsPHY-9AQ_302YDSMbtXNk0TvkYJTqmg@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAOzkrhEza0pU76NxOYOx0=Nyx_tU=NSjmNF6PMLoiscmsiTtDQ@mail.gmail.com&gt;	&lt;<a href="msg00365.html">CAGfCSpuA9k+dXvirD3mP5dkju7_c3BSo3bwj16+oN809g33Rdg@mail.gmail.com</a>&gt;	&lt;CAOzkrhHCATHTcKw5DXiuqSp4miz0SnNiBCK6_suQcFfP0A4=7g@mail.gmail.com&gt;,&lt;<a href="msg00369.html">CAOzkrhGxcyQFEVJyoqcsPHY-9AQ_302YDSMbtXNk0TvkYJTqmg@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>Thread-index: AQHRCNAIvru9g0ejh0K9a9i3OPsxp55vsDky</li>
<li>Thread-topic: [ferret_users] Re: Ferret - masking based on altitude</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hello Simon,
             Both data should be having identical grid, ie same starting point and same ending point with same delta lat lon. Else ferret cannot handle such masks from a second data-set.
One way out will be to define a new grid and assign both data set to the new grid then repeat the process
Sudheer



________________________________________
From: owner-ferret_users@xxxxxxxx [owner-ferret_users@xxxxxxxx] on behalf of simon EK [simonambat@xxxxxxxxx]
Sent: Saturday, October 17, 2015 4:40 PM
To: Andre Paim; ferret-majordomo@xxxxxxxx; Ferret users mailing list
Subject: [ferret_users] Re: Ferret - masking based on altitude

Dear Andre/ ferret users,

I downloaded .25x.25 grid topography dataset and tried with one mask as adviced by you::
(the journal file and the errors &amp; warnings are listed below:
I could not much understand the errors.
kindly help.

Regards
Simon

!====================================================================
!topo-rf.jnl
!====================================================================
use spi-rf.nc&lt;<a  rel="nofollow" href="http://spi-rf.nc">http://spi-rf.nc</a>&gt;     ! Rainfall data on .25x.25 grid - variable name 'rainfall'
set region/x=74E:81E/y=8N:15N/l=1:365     ! selected 365 days data from ~ 100 years data

use elev.0.25-deg.nc&lt;<a  rel="nofollow" href="http://elev.0.25-deg.nc">http://elev.0.25-deg.nc</a>&gt;      ! elevation on .25x.25 grid - variable name 'data'
set region/x=74E:81E/y=8N:15N/l=1

let mask1 = IF (data GE 0 AND data LT 100) THEN 1 else 1/0

let rf_100 = rainfall[D=1] * mask1

plot rf_100[x=@ave,y=@ave,l=1:365]    ! plotting 365 days xy spacially averaged data
!====================================================================

Error

yes? go topo-rf.jnl
use spi-rf.nc&lt;<a  rel="nofollow" href="http://spi-rf.nc">http://spi-rf.nc</a>&gt;     ! Rainfall data on .25x.25 grid
set region/x=74E:81E/y=8N:15N/l=1:365     ! selected 365 days data from ~ 100 years data

use elev.0.25-deg.nc&lt;<a  rel="nofollow" href="http://elev.0.25-deg.nc">http://elev.0.25-deg.nc</a>&gt;      ! elevation on .25x.25 grid - variable name 'data' - got dataset from site.
 *** NOTE: Axis coordinates are decreasing-ordered. Reversing ordering for axis lat
set region/x=74E:81E/y=8N:15N/l=1

let mask1 = IF (data GE 0 AND data LT 100) THEN 1 else 1/0
!let mask2 = IF (data GE 100 AND data LT 500) THEN 1 else 1/0


let rf_100 = rainfall[D=1] * mask1
!let rain_500 = rainfall * mask2

plot rf_100[x=@ave,y=@ave,l=1:365]
 *** NOTE: Ambiguous coordinates on X axis: RAINFALL[D=1] * MASK1
 *** NOTE: Ambiguous coordinates on Y axis: RAINFALL[D=1] * MASK1
 *** NOTE: Ambiguous coordinates on T axis: RAINFALL[D=1] * MASK1
 **ERROR: inconsistent sizes of data regions: X axis
          MASK1 has 28 points (I=297:324)
          expression has 29 points (I=31:59)
plot rf_100[x=@ave,y=@ave,l=1:365]
Command file, command group, or REPEAT execution aborted
yes?
=================================================================

On Sat, Oct 17, 2015 at 9:58 AM, simon EK &lt;simonambat@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:simonambat@xxxxxxxxx">mailto:simonambat@xxxxxxxxx</a>&gt;&gt; wrote:
Dear Andre,
I saw the mail of Jorg and got the background information. Now I have to regrid the topo data to 1/4deg as in the rain data and proceed with the masking as clearly given in your mail.

Can you please help me in regridding 1 minute grid to 1/4 (0.25) deg as in rainfall data.
(The rainfall data is on 1/4 deg xy grid with daily data for about 100 years).

Thanking you so much,
Regards
Simon

On Fri, Oct 16, 2015 at 10:04 PM, Andre Paim &lt;paim.oceano@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:paim.oceano@xxxxxxxxx">mailto:paim.oceano@xxxxxxxxx</a>&gt;&gt; wrote:
Did you see Joerg's answer in you other e-mail? If you manage to have both data sets on the same grid, this should be easy enough to go from there.

About the masking, you would need to do something like:
(assuming you have topography variable called &quot;topo&quot;)

let mask1 = IF (topo GE 0 AND topo LT 100) THEN 1 else 1/0
let mask2 = IF (topo GE 100 AND topo LT 500) THEN 1 else 1/0

Then you need to create a new variable containing only the data in the level you want:
(assuming a variable called &quot;rain&quot;)

let rain_100 = rain * mask1
let rain_500 = rain * mask2

Now all you need to do is compute your average anyway you want.

Let me know if you have more questions.

Best regards,
Andre


On 16 October 2015 at 05:38, simon EK &lt;simonambat@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:simonambat@xxxxxxxxx">mailto:simonambat@xxxxxxxxx</a>&gt;&gt; wrote:
Dear Ferret users,

I have a daily rainfall dataset on .25x.25 grid and
I have a topography dataset with 1 minute resolution.

I would like to study the impact of altitude on rainfall.  Hence I would like to get spacial averages of rainfall over different altitude regions, say
0 to 100 meters
100 to 500 meters
500 to 1000 meters
and above 1000 meters.
I have seen certain ferret scripts  using masking, etc.

Can you pl. help me?

Regards
Simon






Email secured by Check Point



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00363" href="msg00363.html">[ferret_users] Ferret - masking based on altitude</a></strong>
<ul><li><em>From:</em> simon EK</li></ul></li>
<li><strong><a name="00365" href="msg00365.html">[ferret_users] Re: Ferret - masking based on altitude</a></strong>
<ul><li><em>From:</em> Andre Paim</li></ul></li>
<li><strong><a name="00369" href="msg00369.html">[ferret_users] Re: Ferret - masking based on altitude</a></strong>
<ul><li><em>From:</em> simon EK</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00369.html">[ferret_users] Re: Ferret - masking based on altitude</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00371.html">RE: [ferret_users] Re: Ferret - masking based on altitude</a></strong>
</li>

</UL>
<center>[<a href="msg00369.html">Thread Prev</a>][<a href="msg00371.html">Thread Next</a>][<A HREF="threads.html#00370">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
