<!-- MHonArc v2.6.18 -->
<!--X-Subject: Fwd: Re: [ferret_users] regridding 3D data -->
<!--X-From-R13: [negva Epuzvqg <znegva.fpuzvqgNvb&#45;jnearzhraqr.qr> -->
<!--X-Date: Mon, 30 Nov 2015 22:36:40 &#45;0800 -->
<!--X-Message-Id: 565D3FD5.6040804@io&#45;warnemuende.de -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 565C282C.90505@io&#45;warnemuende.de -->
<!--X-Derived: pngRRaDieboGo.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Fwd: Re: [ferret_users] regridding 3D data</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00454.html">Thread Prev</a>][<a href="msg00470.html">Thread Next</a>][<A HREF="threads.html#00458">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Fwd: Re: [ferret_users] regridding 3D data</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Fwd: Re: [ferret_users] regridding 3D data</strong></li>
<li><strong>From</strong>: <strong>Martin Schmidt &lt;<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 01 Dec 2015 07:36:05 +0100</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=message-id:date:from:reply-to:organization:user-agent:mime-version         :to:subject:references:in-reply-to:content-type:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive:list-unsubscribe;        bh=e/HCX6Jb/HAFnTrG74ZlE6vJ2apZVces5erFUHEta4I=;        b=E5semb8LO/ZhrfQcFdtk7+tydDYgneakBfVmuXm5bwxUdHUwZ14PmPqNS9woq3kvFh         svAej6VyqffVOfYwyFc3IJ2kb+U2h1abAdQzKLjsGtpM1zV9h9isGXBNwGnPkTFbZZWO         +Qe45CBX8nPZ87he4YVNf7rAdJpfuGUXTPn8oaZa0udQ/J50uTHe+DJWiz2TQ/TcN30e         o4P+XIYw4Q0NhiRY5Sl67djeIZHdkYCe5SQn2ka72smNccRfxKdPGe7hvDlrQwKd2jLZ         jZqNKhrEFa0OljXCvkcKIFuDhomnTdfk7OCsfu3dCHu7oPqQB2+5osZi0K0UZohHkUGL         CfwA==</li>
<li>In-reply-to: &lt;565C282C.90505@io-warnemuende.de&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>Organization: IOW</li>
<li>References: &lt;565C282C.90505@io-warnemuende.de&gt;</li>
<li>Reply-to: <a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a></li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:9.0) Gecko/20111222 Thunderbird/9.0.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi Pearse,<br>
    <br>
    3d interpolation is not simple - like any interpolation. You have to
    make assumptions on the rules how to find values between source grid
    points. May be "trilinear" interpolation. But how do you justify
    this? The ocean is highly anisotropic between horizontal and
    vertical. Stratification is formed by mostly vertical processes,
    mixing is isoneutral in many cases. Hence ocean dynamics is not
    following linear "interpolation rules". So why to invest much work
    in this direction. Also, in some areas the WOA is a climatology that
    is supported by only a few measurements anyway. So seeking accuracy
    from best interpolation onto the model grid may be hopeless.<br>
    <br>
    So I just use combined 2d-interpolation horizontally (bilinear with
    @ave) and 1d-interpolation vertically. The steps are:<br>
    <br>
    - extend the original field into land by fill_xy before
    interpolation to the model grid. This is a 2d nearest-neighbour
    averaging filler. Please consult the manual. The aim is to improve
    interpolation results for coastal points. Nevertheless, WOA is not
    well supported by data points near coasts in some cases.<br>
    - map horizontally to the model&nbsp; grid by bilinear interpolation with
    @ave<br>
    - apply your model land mask<br>
    - interpolate vertically<br>
    - fill missing model (mostly bottom and surface) cells by the
    1d-nearest neighbour filler of ferret @fnr. This is an extrapolation.<br>
    <br>
    I am aware that your initial total nitrate content of the model may
    be incorrect this way. But the WOA itself has uncertaincy.
    Stratification from inclined isolines may be disturbed from this
    method. But this should be corrected during the models spin up by
    the model dynamics itself. At least the model should run into its
    own equilibrium during some time and should "forget" initial errors
    due to nitrate surfcace flux, denitrification, nitrification flux to
    sediments ... <br>
    <br>
    If you are interested I can send you my scripts, just let me know.<br>
    <br>
    I hope this helps a little bit,<br>
    Martin<br>
    Am 30.11.2015 09:48, schrieb Pearse Buchanan:
    <blockquote
      cite=""
      type="cite">
      
      <div>
        <p>Hi ferreters, </p>
        <p> &nbsp; </p>
        <p>I&#8217;m in the process of building some new routines within a
          global biogeochemical model. This means adding a climatology
          of Nitrate into the model&#8217;s restart file. </p>
        <p> &nbsp; </p>
        <p>But I&#8217;m having some issues. Essentially, </p>
        <p> <span><span>&middot;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span></span>I
          want to take the World Ocean Atlas global annual mean of
          Nitrate, which has the following lat,lon,depth coordinates:
          [180,360,102] </p>
        <p> <span><span>&middot;<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><span></span>And
          I want to regrid the data into the model&#8217;s coordinate system:
          [112,128,21] </p>
        <p> &nbsp; </p>
        <p>I have looked everywhere online for some information on 3D
          regridding!!!!!!!! I&#8217;ve tried downloading the Earth System
          Modelling Framework toolbox for regridding, but to no avail. </p>
        <p> &nbsp; </p>
        <p>So, I turn to this amazing ferret community for help. Does
          anyone have any experience doing 3-dimensional regridding!?
          How can I do this seemingly simple thing? </p>
        <p> &nbsp; </p>
        <p>Thank you, </p>
        <p> &nbsp; </p>
        <p><b><span>Pearse J. Buchanan</span></b><b><span> </span></b></p>
        <p><span>PhD Candidate / CSIRO-UTAS Quantitative Marine Science
          </span></p>
        <p><span>Institute for Marine and Antarctic Studies (IMAS),
            University of Tasmania </span></p>
        <p><span> &nbsp; </span></p>
        <p><span><img
              src="pngRRaDieboGo.png"
              alt="sig"> </span></p>
        <p><span> &nbsp; </span></p>
        <p><span>~~~ &#8220;Ocean deoxygenation: A Palaeo-Modelling
            Perspective&#8221; ~~~ </span></p>
        <p><span>Parts of the Ocean are predicted to lose oxygen in the
            coming century. But why? </span></p>
        <p><span>Looking into the past, how does oxygen in the ocean
            change across climate transitions? </span></p>
        <p> &nbsp; </p>
      </div>
      <p><br>
        <br>
        University of Tasmania Electronic Communications Policy
        (December, 2014). <br>
        This email is confidential, and is for the intended recipient
        only. Access, disclosure, copying, distribution, or reliance on
        any of it by anyone outside the intended recipient organisation
        is prohibited and may be a criminal offence. Please delete if
        obtained in error and email confirmation to the sender. The
        views expressed in this email are not necessarily the views of
        the University of Tasmania, unless clearly intended otherwise. </p>
    </blockquote>
    <br>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00470" href="msg00470.html">RE: Re: [ferret_users] regridding 3D data</a></strong>
<ul><li><em>From:</em> Pearse Buchanan</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00454.html">[ferret_users] regridding 3D data</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00470.html">RE: Re: [ferret_users] regridding 3D data</a></strong>
</li>

</UL>
<center>[<a href="msg00454.html">Thread Prev</a>][<a href="msg00470.html">Thread Next</a>][<A HREF="threads.html#00458">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
