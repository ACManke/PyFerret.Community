<!-- MHonArc v2.6.18 -->
<!--X-Subject: RE: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates -->
<!--X-From-R13: Brnefr Phpunana <crnefr.ohpunanaNhgnf.rqh.nh> -->
<!--X-Date: Mon, 7 Dec 2015 14:08:46 &#45;0800 -->
<!--X-Message-Id: f339c51ebe074e938bdc9e6b6f56d01c@MBX3.utas.ad.internal -->
<!--X-Content-Type: multipart/related -->
<!--X-Reference: 152b2e89658f457eae1640fd4dc0d7a4@MBX6.utas.ad.internal -->
<!--X-Reference: 5665C9FA.1020604@noaa.gov -->
<!--X-Derived: jpgrcE6Q37yL5.jpg -->
<!--X-Derived: jpgMWIMgRc1x4.jpg -->
<!--X-Derived: pngu9_Tio_4O5.png -->
<!--X-Derived: png67buklZa9q.png -->
<!--X-Derived: jpgZKAFLw9bZR.jpg -->
<!--X-Derived: jpgYXlsnL3P9y.jpg -->
<!--X-Derived: jpgJBRepShCWn.jpg -->
<!--X-Derived: jpgKgsCz1v0VP.jpg -->
<!--X-Derived: pngzRDlq2TfOJ.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RE: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00497.html">Thread Prev</a>][<a href="msg00499.html">Thread Next</a>][<A HREF="threads.html#00498">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;,        &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot;	&lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>RE: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates</strong></li>
<li><strong>From</strong>: <strong>Pearse Buchanan &lt;<a href="mailto:pearse.buchanan@DOMAIN.HIDDEN">pearse.buchanan@xxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 7 Dec 2015 22:08:36 +0000</li>
<li>Accept-language: en-US, en-AU</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=from:to:subject:thread-topic:thread-index:date:message-id         :references:in-reply-to:accept-language:content-language         :content-type:mime-version:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive:list-unsubscribe;        bh=n2olr5k/SLOveV/OINiSVvBCVr/FoMLRmVNBNCn3pWc=;        b=fXQU5JivwFCN3SxVUqoZy0WM0rfrg77+2282l8vjs5fYIZIicCiw15y7PmFNXhMcZt         r+QPbNiZmt7+crXuQ8+hvSiHJU8L+cu3WIZNs2cuAqch38/uHDe3k293Wfv1dVDOfWF3         7bNzue0AEp1qmp4A5hJyxeNSl+/tNgRTya2ADwrjNzA33NPmCvm//BAr/FKJNG1raB+y         sVZMzyrAOF3ZYZ7H0Z6Gj4vryg0VEUi5tn3mo7nCkkI2OBMAIy4ius6ERtvtQzgCg0Eo         s6jR4TXnBEj2Sb0nAMwuKncHwkvVmcm0gBt3hzudBUp+MB4wkAb7SDe6tgXIb4PaEajm         THRg==</li>
<li>In-reply-to: &lt;<a href="msg00497.html">5665C9FA.1020604@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;152b2e89658f457eae1640fd4dc0d7a4@MBX6.utas.ad.internal&gt; &lt;<a href="msg00497.html">5665C9FA.1020604@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>Thread-index: AdEv6eY5iKtsjZIKQH++3qfL0ZvENAA039AAAB9tfrA=</li>
<li>Thread-topic: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="white" style="background-color: white; a:link { color: #0563C1 } a:visited { color: #954F72 } ">


<div class="WordSection1">
<p class="MsoNormal"><span style="color:#1F497D">Thanks for your answer Ansley,<o:p></o:p></span></p>
<p class="MsoNormal"><span style="color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span style="color:#1F497D">I spoke with my supervisor and his suggestion solved the problem.
<o:p></o:p></span></p>
<p class="MsoNormal"><span style="color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class="MsoListParagraph" style="text-indent:-18.0pt;mso-list:l0 level1 lfo1"><![if !supportLists]><span style="color:#1F497D"><span style="mso-list:Ignore">1.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span dir="LTR"></span><span style="color:#1F497D">I used ferret to read in the World Ocean Atlas data and filled in the land points with the @fav command. I saved this as a new netcdf file.<o:p></o:p></span></p>
<p class="MsoListParagraph" style="text-indent:-18.0pt;mso-list:l0 level1 lfo1"><![if !supportLists]><span style="color:#1F497D"><span style="mso-list:Ignore">2.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span dir="LTR"></span><span style="color:#1F497D">I transferred the netcdf file into python, together with the file containing the Oxygen variable and its dimensions, and created a new variable using those dimensions of O<sub>2</sub>
 and the values of NO<sub>3</sub><o:p></o:p></span></p>
<p class="MsoListParagraph" style="margin-left:108.0pt;text-indent:-108.0pt;mso-text-indent-alt:-9.0pt;mso-list:l0 level3 lfo1">
<![if !supportLists]><span style="color:#1F497D"><span style="mso-list:Ignore"><span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>i.<span style="font:7.0pt &quot;Times New Roman&quot;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></span><![endif]><span dir="LTR"></span><span style="color:#1F497D">Python does this step very well, as it is easy to create new variables within an existing .nc file with existing dimensions<o:p></o:p></span></p>
<p class="MsoNormal"><span style="color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span style="color:#1F497D">A new meaning to the word PyFerret<o:p></o:p></span></p>
<p class="MsoNormal"><span style="color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span style="color:#1F497D">Pearse<o:p></o:p></span></p>
<p class="MsoNormal"><span style="color:#1F497D"><o:p>&nbsp;</o:p></span></p>
<div>
<div style="border:none;border-top:solid #E1E1E1 1.0pt;padding:3.0pt 0cm 0cm 0cm">
<p class="MsoNormal"><b><span lang="EN-US" style="color:windowtext">From:</span></b><span lang="EN-US" style="color:windowtext"> owner-ferret_users@xxxxxxxx [mailto:owner-ferret_users@xxxxxxxx]
<b>On Behalf Of </b>Ansley C. Manke<br>
<b>Sent:</b> Tuesday, 8 December 2015 5:04 AM<br>
<b>To:</b> ferret_users@xxxxxxxx<br>
<b>Subject:</b> Re: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates<o:p></o:p></span></p>
</div>
</div>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p>
<p class="MsoNormal">Hi,<br>
You'll need to give Ferret more information about how the lon/lat grid should map onto the grid that has simple indices x=1:130 and y=1:114. Does the grid of the Oxygen data represent a global dataset as well?<br>
<br>
If the Oxygen grid should in fact be a global grid, then you can redefine the coordinate axes so that they describe a lon/lat map.&nbsp; For example (Here you will need to determine what the start and end coordinates should be! This is just a made-up example to
 show how it looks):<span style="font-size:12.0pt"><o:p></o:p></span></p>
<blockquote style="margin-top:5.0pt;margin-bottom:5.0pt">
<p class="MsoNormal"><tt><span style="font-size:10.0pt">yes? define axis/x=-178:178/npoints=130/units=degrees_east imt</span></tt><span style="font-size:10.0pt;font-family:&quot;Courier New&quot;"><br>
<tt>yes? define axis/y=-90:90/npoints=114/units=degrees_north jmt</tt></span><o:p></o:p></p>
</blockquote>
<p class="MsoNormal" style="margin-bottom:12.0pt">You'll get messages from Ferret warning you that redefining axes in a dataset will alter the way Ferret treats the contents. Then the regridding operation would do more what you expect. Again, though, Ferret
 itself does not have enough information to determine how to do the regridding automatically and so you are intervening to make the definitions.<br>
<br>
I notice that the Z axis has the same issues; in the first datset it looks as if it's in meters, in the Oxygen dataset it's simply z=1:21.&nbsp; You could redefine that axis as well.&nbsp; If it's a depth axis use define axis/DEPTH so it will be increasing downwards.&nbsp;
<br>
<br>
Note that for any of these definitions you can also define irregularly-spaced axes by giving a list of values instead of start:stop:delta.<br>
<a rel="nofollow" href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/DEFINE#_VPINDEXENTRY_1317">http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/DEFINE#_VPINDEXENTRY_1317</a><br>
<br>
Ansley<br>
<br>
<br>
<o:p></o:p></p>
<div>
<p class="MsoNormal">On 12/5/2015 9:49 PM, Pearse Buchanan wrote:<o:p></o:p></p>
</div>
<blockquote style="margin-top:5.0pt;margin-bottom:5.0pt">
<p class="MsoNormal">Hi all,<o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">Currently using ferret v6.842.<o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">I have a 3D matrix of nitrate concentrations (N_AN) taken from the World Ocean Atlas 2013. This dataset has the following grid coordinates:<o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal"><img border="0" width="736" height="183" id="Picture_x0020_2" src="jpgrcE6Q37yL5.jpg"><o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">I have ensured that all land points are filled in with averages using the @fav command so that I have a complete global dataset with no missing values where the land might exist.<o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">What I want to do is regrid this data, represented in the figure on the left underneath this paragraph, onto the same grid as my Oxygen data, represented by the figure to the right underneath this paragraph. The oxygen data has the following
 grid coordinates:<o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal"><img border="0" width="739" height="173" id="Picture_x0020_7" src="jpgMWIMgRc1x4.jpg"><o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal" style="page-break-after:avoid"><img border="0" width="311" height="38" id="_x0000_i1027" src="pngu9_Tio_4O5.png" alt="OXYGEN
              CONCENTRATION"><img border="0" width="313" height="38" id="_x0000_i1028" src="png67buklZa9q.png" alt="NITRATE
              CONCENTRATION"><img border="0" width="863" height="670" id="Picture_x0020_4" src="jpgZKAFLw9bZR.jpg"><img border="0" width="851" height="665" id="Picture_x0020_5" src="jpgYXlsnL3P9y.jpg"><o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">I have so far been unable to do this because when I define a new grid, like so:<o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal"><img border="0" width="983" height="76" id="Picture_x0020_10" src="jpgJBRepShCWn.jpg"><o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">The old grid is placed onto the new grid assuming that the new grid coordinates represent latitude and longitude. This is the problem. Essentially, the new grid only contains nitrate data from 0-130&#xB0;E and from 0-114&#xB0;N. Now, because latitudes
 between 90-114&#xB0;N don&#8217;t exist, there is no data for this region (Fig. below)<o:p></o:p></p>
<p class="MsoNormal"><img border="0" width="817" height="698" id="Picture_x0020_6" src="jpgKgsCz1v0VP.jpg"><o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">I&#8217;m really not sure how to fix this problem. I want the original dataset of Nitrate[360,180,102] to be placed within a new grid of Nitrate[130,114,21].<o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p class="MsoNormal">Thanks for any suggestions!<o:p></o:p></p>
<p class="MsoNormal">Pearse<o:p></o:p></p>
<p class="MsoNormal"><b><span style="font-size:10.0pt;color:#333399">Pearse J. Buchanan</span></b><o:p></o:p></p>
<p class="MsoNormal"><span style="font-size:10.0pt;color:#333399">PhD Candidate / CSIRO-UTAS Quantitative Marine Science</span><o:p></o:p></p>
<p class="MsoNormal"><span style="font-size:10.0pt;color:#333399">Institute for Marine and Antarctic Studies (IMAS), University of Tasmania</span><o:p></o:p></p>
<p class="MsoNormal"><span style="font-size:10.0pt;color:#333399">&nbsp;</span><o:p></o:p></p>
<p class="MsoNormal"><span style="font-size:10.0pt;color:#333399"><img border="0" width="530" height="119" id="Picture_x0020_1" src="pngzRDlq2TfOJ.png" alt="sig"></span><o:p></o:p></p>
<p class="MsoNormal"><span style="font-size:10.0pt;color:#333399">&nbsp;</span><o:p></o:p></p>
<p class="MsoNormal"><span style="font-size:10.0pt;color:#333399">~~~ &#8220;Ocean deoxygenation: A Palaeo-Modelling Perspective&#8221; ~~~</span><o:p></o:p></p>
<p class="MsoNormal"><span style="font-size:10.0pt;color:#333399">Parts of the Ocean are predicted to lose oxygen in the coming century. But why?</span><o:p></o:p></p>
<p class="MsoNormal"><span style="font-size:10.0pt;color:#333399">Looking into the past, how does oxygen in the ocean change across climate transitions?</span><o:p></o:p></p>
<p class="MsoNormal">&nbsp;<o:p></o:p></p>
<p style="line-height:10.0pt;calibri"><span style="font-size:10.0pt"><br>
<br>
University of Tasmania Electronic Communications Policy (December, 2014). <br>
This email is confidential, and is for the intended recipient only. Access, disclosure, copying, distribution, or reliance on any of it by anyone outside the intended recipient organisation is prohibited and may be a criminal offence. Please delete if obtained
 in error and email confirmation to the sender. The views expressed in this email are not necessarily the views of the University of Tasmania, unless clearly intended otherwise.
<o:p></o:p></span></p>
</blockquote>
<p class="MsoNormal"><span style="font-size:12.0pt;font-family:&quot;Times New Roman&quot;,serif"><o:p>&nbsp;</o:p></span></p>
</div>


</td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00499" href="msg00499.html">Re: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00487" href="msg00487.html">[ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates</a></strong>
<ul><li><em>From:</em> Pearse Buchanan</li></ul></li>
<li><strong><a name="00497" href="msg00497.html">Re: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00497.html">Re: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00499.html">Re: [ferret_users] regridding of a regular lat,lon,depth grid onto a grid without Lat,lon,dep coordinates</a></strong>
</li>

</UL>
<center>[<a href="msg00497.html">Thread Prev</a>][<a href="msg00499.html">Thread Next</a>][<A HREF="threads.html#00498">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
