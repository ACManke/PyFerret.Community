<!-- MHonArc v2.5.4 -->
<!--X-Subject: Re: spatial average -->
<!--X-From-R13: irefpuryNnznebar.tfsp.anfn.tbi ([nex O. Hrefpuryy) -->
<!--X-Date: Fri, 4 Dec 1998 07:41:10 &#45;0800 -->
<!--X-Message-Id: 9812041041.ZM11295@amarone.gsfc.nasa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 199812041435.MAA11231@panulirus.inpe.br. -->
<!--X-Reference: caetano@ltid.inpe.br -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: spatial average</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00248.html">Thread Prev</a>][<a href="msg00250.html">Thread Next</a>][<A HREF="threads.html#00249">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: spatial average</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Antonio Caetano Vaz Caltabiano &lt;<A HREF="mailto:caetano@DOMAIN.HIDDEN">caetano@xxxxxxxxxxxx</A>&gt;,       <A HREF="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxx</A></strong></li>
<li><strong>Subject</strong>: <strong>Re: spatial average</strong></li>
<li><strong>From</strong>: <strong><A HREF="mailto:verschel@DOMAIN.HIDDEN">verschel@xxxxxxxxxxxxxxxxxxxxx</A> (Mark A. Verschell)</strong></li>
<li>Date: Fri, 4 Dec 1998 10:41:06 -0500</li>
<li>In-reply-to: Antonio Caetano Vaz Caltabiano &lt;caetano@ltid.inpe.br&gt;       &quot;spatial average&quot; (Dec  4, 12:35pm)</li>
<li>References: &lt;<a href="msg00248.html">199812041435.MAA11231@panulirus.inpe.br.</a>&gt;</li>
<li>Sender: owner-ferret_users</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Antonio,

	Ferret is doing exactly what you want. The structure
my_var[x=@ave,y=@ave] will give you a mean value over the whole region
excluding points identified as BAD or MISSING. An additional note, the @AVE
transformation provides a grid box size weighted average. Therefor (for
example), if your grid is on longitude and latitude, the decreasing width (in
longitude) will be taken into account as you move away from the equator -
giving you a true spatial average. If you do not want a weighted average, then
you can calculate an unweighted average with the command:

yes? let southuw=my_var[x=@sum,y=@sum]/my_var[x=@ngd,y=@ngd]

and southuw will be the grid box average value.

	Regards, Mark


On Dec 4, 12:35pm, Antonio Caetano Vaz Caltabiano wrote:
&gt; Subject: spatial average
&gt; Dear ferreters
&gt;
&gt; I have some problems.
&gt;
&gt; 1. I want to calculate spatial averages, I mean, one mean value for a whole
&gt; region. My data has 204 point on the L index. I've used the commands below:
&gt;
&gt; yes? set data my_data
&gt; yes? set region/x=50w:10e/y=0:10n
&gt; yes? let south=my_var[x=@ave,y=@ave]
&gt;
&gt; Ferret gave me a time serie as I expected. But, does anyone know if the
commands
&gt; above are correct?? Did Ferret make what I want??
&gt;
&gt; 2. Another doubt: I set -999 value over land. If the commands above are
right,
&gt; when Ferret calculates the spatial average, does Ferret automatically
recognize
&gt; that -999 is a bad value and it does not use them to calculate the average??
If
&gt; not, what can I do to make that Ferret recognizes them as a bad value??


-- 
 Mark Verschell                     NASA/Goddard Space Flight Center
 verschell@neptune.gsfc.nasa.gov    Code 970/Lab. for Hydrospheric Proc.
 301-614-5669  Fax: 301-614-5666    Greenbelt, MD 20771

                  USQC Certified: 100% Microsoft Free

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00248" href="msg00248.html">spatial average</a></strong>
<ul><li><em>From:</em> Antonio Caetano Vaz Caltabiano</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00248.html">spatial average</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00250.html">floating point precision e.g. spatial ave</a></strong>
</li>

</UL>
<center>[<a href="msg00248.html">Thread Prev</a>][<a href="msg00250.html">Thread Next</a>][<A HREF="threads.html#00249">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
