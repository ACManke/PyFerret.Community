<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] corrupted time axis or ferret bug ? -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Fri, 11 May 2012 09:47:37 &#45;0700 -->
<!--X-Message-Id: 4FAD42A3.8070606@noaa.gov -->
<!--X-Content-Type: multipart/related -->
<!--X-Reference: 375ce9fb&#45;3938&#45;454f&#45;ad21&#45;f21d0d3bedd3@zimbra.actimar.fr -->
<!--X-Derived: gifLCXOEU3VsW.gif -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] corrupted time axis or ferret bug ?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00197.html">Thread Prev</a>][<a href="msg00200.html">Thread Next</a>][<A HREF="threads.html#00198">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] corrupted time axis or ferret bug ?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] corrupted time axis or ferret bug ?</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 11 May 2012 09:47:31 -0700</li>
<li>In-reply-to: &lt;<a href="msg00192.html">375ce9fb-3938-454f-ad21-f21d0d3bedd3@zimbra.actimar.fr</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US</a>&gt;</li>
<li>List-help: &lt;<a href="http://www.google.com/support/a/noaa.gov/bin/static.py?hl=en_US&page=groups.cs">http://www.google.com/support/a/noaa.gov/bin/static.py?hl=en_US&page=groups.cs</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00192.html">375ce9fb-3938-454f-ad21-f21d0d3bedd3@zimbra.actimar.fr</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20120428 Thunderbird/12.0.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi -<br>
    Ferret's coordinate-axis calculations are in double precision, so
    the precision of the numbers that represent the time axis is not the
    problem. It represents the time axis correctly for computations or
    things like writing a subset.&#xA0; However I think Martin is right that
    the axis gives the plot routines trouble when setting up the plot
    axis.&#xA0;This axis is only 2 hours long, but see how the time axis of
    your plot shows DAYS along the time axis.&#xA0; The time-axis styles
    don't go down to hours and minutes.&#xA0; You can LIST the data and the
    correct times are shown:<br>
    <blockquote><tt>yes? use S1</tt><br>
      <tt>yes? sh grid temp</tt><br>
      <tt>&#xA0;&#xA0;&#xA0; GRID GDG4</tt><br>
      <tt>&#xA0;name&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; axis&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; # pts&#xA0;&#xA0; start&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; end</tt><br>
      <tt>&#xA0;LONGITUDE LONGITUDE&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 7mr&#xA0;&#xA0; 5.477E(5.4775)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
        5.506E(5.5069)</tt><br>
      <tt>&#xA0;LATITUDE&#xA0; LATITUDE&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 5 r&#xA0;&#xA0; 43.133N&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
        43.147N</tt><br>
      <tt>&#xA0;LEVEL&#xA0;&#xA0;&#xA0;&#xA0; Z (level)&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 30 i-&#xA0; -0.9775&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
        -0.0005</tt><br>
      <tt>&#xA0;TIME&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TIME&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 9 r&#xA0;&#xA0; 01-DEC-2011 00:00&#xA0;&#xA0;&#xA0;
        01-DEC-2011 02:00</tt><br>
      <tt></tt><br>
      <tt>yes? list/i=4/j=3/k=1 temp</tt><br>
      <tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : temperature (Deg Celsius)</tt><br>
      <tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DATA SET : RIOT</tt><br>
      <tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILENAME : S1.nc</tt><br>
      <tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SUBSET&#xA0;&#xA0; : 9 points (TIME)</tt><br>
      <tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LONGITUDE: 5.5E(5.5)</tt><br>
      <tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LATITUDE : 43.1N</tt><br>
      <tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Z (level): -0.9775</tt><br>
      <tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 5.4922E</tt><br>
      <tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 4</tt><br>
      <tt>&#xA0;01-DEC-2011 00:00:00 / 1:&#xA0; 14.12</tt><br>
      <tt>&#xA0;01-DEC-2011 00:15:00 / 2:&#xA0; 13.97</tt><br>
      <tt>&#xA0;01-DEC-2011 00:30:00 / 3:&#xA0; 13.63</tt><br>
      <tt>&#xA0;01-DEC-2011 00:45:00 / 4:&#xA0; 13.38</tt><br>
      <tt>&#xA0;01-DEC-2011 01:00:00 / 5:&#xA0; 13.27</tt><br>
      <tt>...</tt><br>
    </blockquote>
    <tt></tt>You could define a time axis that just has units of hours
    or minutes. If you define it without a /T0= qualifier, then it is
    not a calendar axis that gets nicely labeled with formatted dates
    (and we couldn't regrid data on it to a calendar time axis), but you
    will&#xA0; get correct plots.&#xA0; One idea:<br>
    <blockquote><tt>yes? define axis/t=0:2:0.25/units="hours,
        1-Dec-2001"&#xA0; `sal,return=taxis`<br>
        &#xA0;*** NOTE: (fyi) units are not subject to auto-conversion:
        HOURS, 1-DEC-2001<br>
        Replacing definition of axis TIME<br>
        &#xA0;*** NOTE: grid&#xA0; used by data set S1<br>
        &#xA0;*** NOTE: Redefinition may alter apparent contents of data set<br>
      </tt><br>
      <tt>yes? shade/i=4/j=3 sal</tt><br>
    </blockquote>
    notice the warning messages when you redefine the axis. They're
    telling us that units of "hours, 1-Dec-2001" can't be automatically
    converted to other time units, and that I've redefined the time axis
    of a dataset.&#xA0; You could also define a new axis and regrid to it
    using @ASN as Martin did in his message.<br>
    <br>
    <img alt="the resulting image"
      src="gifLCXOEU3VsW.gif" height="462"
      width="536"><br>
    <br>
    On 5/11/2012 12:06 AM, Nicolas Perenne wrote:
    <blockquote
      cite=""
      type="cite">
      <pre wrap="">Hello, 

I have a strange problem with the attached NetCDF file (generated by a numerical model, but this one is pretty small). Can't figure it out and was unable to find a clue in the mail archive. 

So this is about 'shade': a vertical slice through the attached NetCDF is fine in y-z but another in t-z doesn't show anything (cf 'pb.jnl' also attached to this mail). 

'plot/k=30' is ok though, and moreover this is the first time I have such a problem with a t-z slice (doing quite a lot of it on various other datasets)

Currently using Ferret V6.72 but same pb with an old (windows) V5.51. 

Do you think it could be a ferret bug, or a corruption of the NetCDF file, or a subtle combination of both?

Thanks,
Nicolas</pre>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00192" href="msg00192.html">[ferret_users] corrupted time axis or ferret bug ?</a></strong>
<ul><li><em>From:</em> Nicolas Perenne</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00197.html">Re: [ferret_users] corrupted time axis or ferret bug ?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00200.html">[ferret_users] How proceed smi/hdf and bin/hdf (hdf4?) file to convert to hdf5 or netcdf in TDS?</a></strong>
</li>

</UL>
<center>[<a href="msg00197.html">Thread Prev</a>][<a href="msg00200.html">Thread Next</a>][<A HREF="threads.html#00198">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
