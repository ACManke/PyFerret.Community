<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Regridding a WRF output using ferret -->
<!--X-From-R13: Oegheb Oivyn Dbfnf <nnivyneNvzc.zk> -->
<!--X-Date: Thu, 12 Jul 2012 08:40:44 &#45;0700 -->
<!--X-Message-Id: 1342107632.2057.69.camel@arturo&#45;desktop -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 003c01cd5fae$e452c3f0$acf84bd0$@mx -->
<!--X-Reference: 20120712071247.GB15997@giotto.bmtargoss.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Regridding a WRF output using ferret</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00334.html">Thread Prev</a>][<a href="msg00335.html">Thread Next</a>][<A HREF="threads.html#00337">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Regridding a WRF output using ferret</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Hein Zelle &lt;<a href="mailto:hein.zelle@DOMAIN.HIDDEN">hein.zelle@xxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Regridding a WRF output using ferret</strong></li>
<li><strong>From</strong>: <strong>Arturo Avila Rosas &lt;<a href="mailto:aavilar@DOMAIN.HIDDEN">aavilar@xxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 12 Jul 2012 10:40:32 -0500</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>, &quot;'Ansley Manke'&quot; &lt;<a href="mailto:Ansley.B.Manke@DOMAIN.HIDDEN">Ansley.B.Manke@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00334.html">20120712071247.GB15997@giotto.bmtargoss.org</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;003c01cd5fae$e452c3f0$acf84bd0$@mx&gt;	 &lt;<a href="msg00334.html">20120712071247.GB15997@giotto.bmtargoss.org</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Dear Hein,
Many thanks for your prompt response. I used the default WRF projection,
but I don't see XLONG and XLAT variables in the netcdf file, Do you mean
GLON and GLAT variables? Shall I use curv_to_rect function to achieve
step 1?
Below there is a WRF output, this includes some parameters such as:
:DX = 0.09629f ;
:DY = 0.096011f ;
:DT = 30.f ;
:CEN_LAT = 24.25f ;
:CEN_LON = -89.45f ;
:MAP_PROJ = 203 ;

Regards,
-- 
Arturo Avila Rosas
Ingenier&#xED;a de Software
Instituto Mexicano del Petr&#xF3;leo
T. 91.75.73.99
 
netcdf wrfout_d01_2012-06-26_00_00_00 {
dimensions:
	Time = UNLIMITED ; // (1 currently)
	DateStrLen = 19 ;
	west_east = 159 ;
	south_north = 259 ;
	bottom_top = 27 ;
	bottom_top_stag = 28 ;
	soil_layers_stag = 4 ;
variables:
	char Times(Time, DateStrLen) ;
	float GLAT(Time, south_north, west_east) ;
		GLAT:FieldType = 104 ;
		GLAT:MemoryOrder = &quot;XY &quot; ;
		GLAT:description = &quot;Geographic latitude, radians&quot; ;
		GLAT:units = &quot;&quot; ;
		GLAT:stagger = &quot;&quot; ;
	float GLON(Time, south_north, west_east) ;
		GLON:FieldType = 104 ;
		GLON:MemoryOrder = &quot;XY &quot; ;
		GLON:description = &quot;Geographic longitude, radians&quot; ;
		GLON:units = &quot;&quot; ;
		GLON:stagger = &quot;&quot; ;
	float U10(Time, south_north, west_east) ;
		U10:FieldType = 104 ;
		U10:MemoryOrder = &quot;XY &quot; ;
		U10:description = &quot;U at 10 M&quot; ;
		U10:units = &quot;&quot; ;
		U10:stagger = &quot;&quot; ;
	float V10(Time, south_north, west_east) ;
		V10:FieldType = 104 ;
		V10:MemoryOrder = &quot;XY &quot; ;
		V10:description = &quot;V at 10 M&quot; ;
		V10:units = &quot;&quot; ;
		V10:stagger = &quot;&quot; ;
// global attributes:
		:TITLE = &quot; OUTPUT FROM WRF V3.3 MODEL&quot; ;
		:START_DATE = &quot;2012-06-26_00:00:00&quot; ;
		:SIMULATION_START_DATE = &quot;2012-06-26_00:00:00&quot; ;
		:WEST-EAST_GRID_DIMENSION = 160 ;
		:SOUTH-NORTH_GRID_DIMENSION = 260 ;
		:BOTTOM-TOP_GRID_DIMENSION = 28 ;
		:GRIDTYPE = &quot;E&quot; ;
		:DIFF_OPT = 1 ;
		:KM_OPT = 1 ;
		:DAMP_OPT = 1 ;
		:DAMPCOEF = 0.2f ;
		:KHDIF = 0.f ;
		:KVDIF = 0.f ;
		:MP_PHYSICS = 5 ;
		:RA_LW_PHYSICS = 99 ;
		:RA_SW_PHYSICS = 99 ;
		:SF_SFCLAY_PHYSICS = 2 ;
		:SF_SURFACE_PHYSICS = 2 ;
		:BL_PBL_PHYSICS = 2 ;
		:CU_PHYSICS = 2 ;
		:SURFACE_INPUT_SOURCE = 1 ;
		:SST_UPDATE = 0 ;
		:SF_URBAN_PHYSICS = 0 ;
		:FEEDBACK = 1 ;
		:SMOOTH_OPTION = 2 ;
		:SWRAD_SCAT = 1.f ;
		:W_DAMPING = 0 ;
		:DFI_OPT = 0 ;
		:SHCU_PHYSICS = 0 ;
		:WEST-EAST_PATCH_START_UNSTAG = 1 ;
		:WEST-EAST_PATCH_END_UNSTAG = 159 ;
		:WEST-EAST_PATCH_START_STAG = 1 ;
		:WEST-EAST_PATCH_END_STAG = 160 ;
		:SOUTH-NORTH_PATCH_START_UNSTAG = 1 ;
		:SOUTH-NORTH_PATCH_END_UNSTAG = 259 ;
		:SOUTH-NORTH_PATCH_START_STAG = 1 ;
		:SOUTH-NORTH_PATCH_END_STAG = 260 ;
		:BOTTOM-TOP_PATCH_START_UNSTAG = 1 ;
		:BOTTOM-TOP_PATCH_END_UNSTAG = 27 ;
		:BOTTOM-TOP_PATCH_START_STAG = 1 ;
		:BOTTOM-TOP_PATCH_END_STAG = 28 ;
		:DX = 0.09629f ;
		:DY = 0.096011f ;
		:DT = 30.f ;
		:CEN_LAT = 24.25f ;
		:CEN_LON = -89.45f ;
		:TRUELAT1 = 1.e+20f ;
		:TRUELAT2 = 1.e+20f ;
		:MOAD_CEN_LAT = 0.f ;
		:STAND_LON = 1.e+20f ;
		:GMT = 0.f ;
		:JULYR = 2012 ;
		:JULDAY = 178 ;
		:MAP_PROJ = 203 ;
		:MMINLU = &quot;USGS&quot; ;
		:NUM_LAND_CAT = 24 ;
		:ISWATER = 16 ;
		:ISLAKE = -1 ;
		:ISICE = 24 ;
		:ISURBAN = 1 ;
		:ISOILWATER = 14 ;
		:I_PARENT_START = 0 ;
		:J_PARENT_START = 0 ;
}

On Thu, 2012-07-12 at 09:12 +0200, Hein Zelle wrote:
&gt; Dear Arturo,
&gt; 
&gt; &gt; I have to work with an WRF output, basically I have to regrid the U10 and
&gt; &gt; V10 variables to 0.2 degrees and trim the region to get a smaller one
&gt; &gt; (97.85W:80.85W and 18.05N:30.45). Both U1o and V10 will be used in WAM. Any
&gt; &gt; idea will appreciated.
&gt; 
&gt; It's not easy to do this with Ferret.  What projection do you use?
&gt; I used MATLAB initially, later a custom C++ program to achieve this.
&gt; Steps to take:
&gt; 
&gt; - using XLONG and XLAT variables, regrid data fields to a new target
&gt;   grid (regular in lon/lat).
&gt; 
&gt; - Rotate U10 and V10 (using SINALPHA, COSALPHA) to point northward.
&gt; 
&gt; Step 2 is easy (multiplication,addition) in ferret, step 1 is much
&gt; harder.  You could try using the function scat2gridgauss_xy, but I
&gt; haven't succeeded so far (but then, I haven't tried very hard).  
&gt; 
&gt; Kind regards,
&gt;      Hein Zelle
&gt; 
&gt; 

-- 
Arturo Avila Rosas
Ingenier&#xED;a de Software
Instituto Mexicano del Petr&#xF3;leo
T. 91.75.73.99



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00333" href="msg00333.html">[ferret_users] Regridding a WRF output using ferret</a></strong>
<ul><li><em>From:</em> Arturo Avila Rosas</li></ul></li>
<li><strong><a name="00334" href="msg00334.html">Re: [ferret_users] Regridding a WRF output using ferret</a></strong>
<ul><li><em>From:</em> Hein Zelle</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00334.html">Re: [ferret_users] Regridding a WRF output using ferret</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00335.html">[ferret_users] low_pass_filter</a></strong>
</li>

</UL>
<center>[<a href="msg00334.html">Thread Prev</a>][<a href="msg00335.html">Thread Next</a>][<A HREF="threads.html#00337">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
