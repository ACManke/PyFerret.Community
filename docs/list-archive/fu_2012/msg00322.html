<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Help needed for creating multiple subplots using loop -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Fri, 6 Jul 2012 09:25:49 &#45;0700 -->
<!--X-Message-Id: 4FF71184.7040501@noaa.gov -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: CA+PNMcfHvSSZfxYmoCGonOLJF4vSbHHm5CK=nRVsNKtr6RKo8A@mail.gmail.com -->
<!--X-Reference: CAKiwd6sBndXFE52wy=vXLevRJsJz6yB4gHQuKtN9M16tFU5AJw@mail.gmail.com -->
<!--X-Reference: CA+PNMcdXxUfUaVh1r6onop3pVMs9fMdLQttUBqP1k_LMn&#45;u_cw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Help needed for creating multiple subplots using loop</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00320.html">Thread Prev</a>][<a href="msg00317.html">Thread Next</a>][<A HREF="threads.html#00322">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Help needed for creating multiple subplots using loop</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Help needed for creating multiple subplots using loop</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 06 Jul 2012 09:25:40 -0700</li>
<li>In-reply-to: &lt;<a href="msg00320.html">CA+PNMcdXxUfUaVh1r6onop3pVMs9fMdLQttUBqP1k_LMn-u_cw@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CA+PNMcfHvSSZfxYmoCGonOLJF4vSbHHm5CK=nRVsNKtr6RKo8A@mail.gmail.com&gt; &lt;CAKiwd6sBndXFE52wy=vXLevRJsJz6yB4gHQuKtN9M16tFU5AJw@mail.gmail.com&gt; &lt;<a href="msg00320.html">CA+PNMcdXxUfUaVh1r6onop3pVMs9fMdLQttUBqP1k_LMn-u_cw@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20120614 Thunderbird/13.0.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi Sudev,<br>
    small_view.jnl is a script that's part of the Ferret distribution.
    It was added a couple of years ago so if you are running an older
    installation of Ferret you might not have it.&nbsp; I've attached a copy;
    just put it in a directory that is pointed to by your FER_GO
    environment variable, such as<br>
    <br>
    $FER_DIR/jnls/contrib/<br>
    <br>
    Ansley<br>
    <br>
    <br>
    <div class="moz-cite-prefix">On 7/5/2012 11:28 PM, Sudev Das M P
      wrote:<br>
    </div>
    <blockquote
cite=""
      type="cite">Dear Paulo &amp; Otacilio,<br>
      <br>
      Thank you very much for both of your reply.<br>
      <br>
      &nbsp;Otacilio, when I tried to use your script "multi_view_demo.jnl"
      for creating multiple view ports, I am getting the following error
      message.<br>
--------------------------------------------------------------------------------------------------<br>
      go small_view 10,6,0.12,0.11,0.008,0.08,0.1,0.006, VS<br>
      **TMAP ERR: non-existent or not on line<br>
      small_view (.jnl)<br>
      go small_view 10,6,0.12,0.11,0.008,0.08,0.1,0.006, VS<br>
      Command file, command group, or REPEAT execution aborted<br>
---------------------------------------------------------------------------------------------------<br>
      I would highly appreciate if you could tell me what should I do to
      fix the above error message. Do I need to have any other
      supporting files to run your script? If so, from where can I get
      those files?<br>
      <br>
      Please give me a reply.<br>
      <br>
      Thanks,<br>
      <div> Sudev<br>
      </div>
      <div><br>
      </div>
      <div class="gmail_quote">On Thu, Jul 5, 2012 at 10:21 PM, Otacilio
        Leandro <span dir="ltr">&lt;<a rel="nofollow" moz-do-not-send="true"
            href="mailto:otaciliomneto@xxxxxxxxx" target="_blank">otaciliomneto@xxxxxxxxx</a>&gt;</span>
        wrote:<br>
        <blockquote class="gmail_quote" style="margin:0 0 0
          .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi Sudev,
          <div><br>
          </div>
          <div>There's a script called multi_view.jnl (attached just in
            case) that make the viewport definitions automatic.</div>
          <div><br>
          </div>
          <div>On my script i've made one matrix 5x5.</div>
          <div><br>
          </div>
          <div>It requires to set view like VS11, VS12, VS13, .... ,
            VSab.</div>
          <div><br>
          </div>
          <div>To do that i first define the indices&nbsp;</div>
          <div><br>
          </div>
          <div>let indice_a = {1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 3, 3, 3, 3,
            3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5}</div>
          <div>
            <div>let indice_b = {1, 2, 3, 4, 5, 1, 2, 3, 4, 5, 1, 2, 3,
              4, 5, 1, 2, 3, 4, 5, 1, 2, 3, 4, 5}</div>
            <div><br>
            </div>
            <div>and inside the loop, i done:</div>
            <div><br>
            </div>
            <div>
              <div><span style="white-space:pre-wrap"> </span>let a =
                indice_a[i=`m`] ;\</div>
              <div><span style="white-space:pre-wrap"> </span>let b =
                indice_b[i=`m`] ;\</div>
            </div>
            <div><br>
            </div>
            <div>set view VS`a``b` ;</div>
            <div><br>
            </div>
            <div>fill ....</div>
            <div><br>
            </div>
            <div>I'm sending as attached the script, the figure it made
              and the multi_view script.</div>
            <div><br>
            </div>
            <div>Hope it helps</div>
            <div>
              <div class="h5">
                <div><br>
                </div>
                <br>
                <div class="gmail_quote">2012/7/4 Sudev Das M P <span
                    dir="ltr">&lt;<a rel="nofollow" moz-do-not-send="true"
                      href="mailto:devdas.pnr@xxxxxxxxx" target="_blank">devdas.pnr@xxxxxxxxx</a>&gt;</span><br>
                  <blockquote class="gmail_quote" style="margin:0 0 0
                    .8ex;border-left:1px #ccc solid;padding-left:1ex">
                    Dear All,<br>
                    <br>
                    I need some help to create multiple sub-plots in a
                    single page.<br>
                    I have a netcdf file containing 12 months ocean
                    temperature data. My<br>
                    objective is to get 12 sub-plots of all the 12
                    months in a single<br>
                    page.<br>
                    <br>
                    a) After loading the data file,I defined the X and Y
                    limits of the<br>
                    required 12 sub-plots in the following way.<br>
&nbsp;!*******************************************************************************<br>
                    ! Defining the x &amp; y limits of view ports for 12
                    subplots.<br>
!*******************************************************************************<br>
                    define
                    view/axes/xlimits=0.06,0.34/ylimits=0.765,.965 v11<br>
                    define
                    view/axes/xlimits=0.37,0.65/ylimits=0.765,.965 v12<br>
                    define
                    view/axes/xlimits=0.68,0.96/ylimits=0.765,.965 v13<br>
                    define
                    view/axes/xlimits=0.06,0.34/ylimits=0.535,.735 v21<br>
                    define
                    view/axes/xlimits=0.37,0.65/ylimits=0.535,.735 v22<br>
                    define
                    view/axes/xlimits=0.68,0.96/ylimits=0.535,.735 v23<br>
                    define
                    view/axes/xlimits=0.06,0.34/ylimits=0.305,.505 v31<br>
                    define
                    view/axes/xlimits=0.37,0.65/ylimits=0.305,.505 v32<br>
                    define
                    view/axes/xlimits=0.68,0.96/ylimits=0.305,.505 v33<br>
                    define
                    view/axes/xlimits=0.06,0.34/ylimits=0.075,.275 v41<br>
                    define
                    view/axes/xlimits=0.37,0.65/ylimits=0.075,.275 v42<br>
                    define
                    view/axes/xlimits=0.68,0.96/ylimits=0.075,.275 v43<br>
                    <br>
                    b) After that the 12 sub-plots are created in the
                    following way.<br>
                    <br>
                    set view v11;
                    contour/line/fill/lev=($t_levels)/k=1/L=1/nokey/nolab
                    temp<br>
                    set view v12;
                    contour/line/fill/lev=($t_levels)/k=1/L=2/nokey/nolab
                    temp<br>
                    <br>
                    etc.....<br>
                    <br>
                    set view v43;
                    contour/line/fill/lev=($t_levels)/k=1/L=12/nokey/nolab
                    temp<br>
                    <br>
                    c) Right now, in my script, for each sub-plot I am
                    defining the view<br>
                    port separately through v11 to v43 (i.e.12 times as
                    shown above) and<br>
                    also for getting each subplot the same command line
                    is repeated (12<br>
                    times) just by changing the time axis L from 1 to
                    12.<br>
                    By doing this way, obviously the script is very
                    lengthy. I would like<br>
                    to know any simple way of defining the view port and
                    then getting the<br>
                    plot through Ferret looping command. I am not
                    familiar with any such<br>
                    command. Hence if anybody knows a better way, please
                    help me with<br>
                    this.<br>
                    <br>
                    Thanks,<br>
                    Sudev.<br>
                  </blockquote>
                </div>
                <br>
                <br clear="all">
                <div><br>
                </div>
              </div>
            </div>
            <span class="HOEnZb"><font color="#888888">-- <br>
                Otacilio Leandro de Menezes Neto<br>
                Instituto Nacional de Pesquisas Espaciais<br>
                Doutorando em Meteorologia<br>
                Contato: (12) 3186-9537 / (12) 8194-1455<br>
                Email alternativo: <a rel="nofollow" moz-do-not-send="true"
                  href="mailto:otacilio.neto@xxxxxxxxxxxxx"
                  target="_blank">otacilio.neto@xxxxxxxxxxxxx</a><br>
                <br>
              </font></span></div>
        </blockquote>
      </div>
      <br>
    </blockquote>
    <br>
    <br>
  

</font></td></tr></table><pre>\ cancel mode verify
!
! Called by multi_view_demo.jnl
!
! Description : GO file to make desired number of viewports with desired 
!                 size/position for portrait/landscape mode.
!
! Notes   1   : Please note that the version of Ferret should be 5.6 or 
!                 later one which supports /AXES qualifier to 
!                 &quot;define view&quot; command and /RANGE qualifier to &quot;REPEAT&quot;
!                 command.
! 
!         2   : Works well in portrait/landscape mode. Since /AXES qualifier is
!                 used with &quot;DEFINE VIEW&quot; command, Ferret may show some peculiar
!                 behaviour sometimes (<a  rel="nofollow" href="http://ferret.pmel.noaa.gov/Ferret/">http://ferret.pmel.noaa.gov/Ferret/</a>
!                 Mail_Archives/fu_2006/msg00080.html). 
!
!         3   : If the defined viewport is very small, /SIGDIG qualifier
!                 to the CONTOUR command may not be effective. In this case
!                 please use the fourth argument to /LEVELS qualifier to get
!                 proper numeric labels for contours.
!
!                    /LEVELS=(lo, hi, delta, ndigits)  &amp; the usage is 
!
!                    ndigits = -1 for integer format
!                            = -3 to omit numerical labels 
!                            = 1/2/ for valid precision/significant digits
!
!         4   : To define two set of viewports of similar features 
!                 (position &amp; size), call multi_view two times with 
!                 different values for 9th argument (but exactly same 
!                 values for arguments 1-8).  
!
!         5   : Internal variables to this GO file does have a prefix &quot;mv_&quot;.
!
!
! Default   1 : Just &quot;go multi_view&quot; (ie without any arguments) will 
! Behaviour       define 15 viewports in 5 rows and 3 columns with 
!                 names v11, v12,...v53
!
!           2 : There is no mandatory arguments for this go file ; all
!                 arguments are optional.
!
!                                $1       $2      $3      $4       $5 
! USAGE       :  go multi_view [rows],[columns],[xsize],[xstart],[xgap],
!                                      [ysize],[ystart],[ygap],[prefix]
!                                         $6      $7       $8      $9 
! Example  1: 6 viewports of similar size  
!                 use coads_climatology
!                 set reg/l=1/x=30:120/y=-30:30
!                 set window/aspect=1.3
!                 go multi_view 5, 3, 0.25, 0.1, 0.03, 0.15, 0.10, 0.02 
!                 set view v11 ; ppl axlabp  1,-1 ; fill/nolab/line sst
!                 set view v12 ; ppl axlabp  1, 0 ; fill/nolab/line sst
!                 set view v13 ; ppl axlabp  1, 1 ; fill/nolab/line sst
!                 set view v21 ; ppl axlabp -1,-1 ; fill/nolab/line sst
!                 set view v22 ; ppl axlabp -1, 0 ; fill/nolab/line sst
!                 set view v23 ; ppl axlabp -1, 1 ; fill/nolab/line sst
!
! Example 2: 2 viewports of similar size (tune xstart &amp; ystart to position it)
!                 use coads_climatology
!                 set reg/l=1/x=30:120/y=-30:30
!                 set window/aspect=1.3
!                 go multi_view 2, 1, 0.25, 0.25, 0.03, 0.15, 0.60, 0.02 
!                 set view v11 ; ppl axlabp  1,-1 ; fill/nolab/line sst
!                 set view v21 ; ppl axlabp -1,-1 ; fill/nolab/line sst
! 
!------------------------------------------------------------------------------
!
!                                               !-------|-------|-------|
! Written By    : Jaison Kurian                 !  v11  |  v12  |  v13  |
! Contact       : jaison@xxxxxxxxxxxxxxxxxx     !-------|-------|-------|
!                 jaisonkurian@xxxxxxxxx        !  v21  |  v22  |  v23  |
! Version       : multi_view                    !-------|-------|-------|
! Date          : 27-FEB-2006                   !  v31  |  v32  |  v33  |
! Comments      : None                          !-------|-------|-------|
! Modifications : None                          !  v41  |  v42  |  v43  |
!                                               !-------|-------|-------|
!                                               !  v51  |  v52  |  v53  |
!                                               !-------|-------|-------|
!                                               
!
!-------------------------------------------------------------------------------

! define internal variables

    define symbol mv_r  = $1&quot;5&quot;      ! number of rows
    define symbol mv_c  = $2&quot;3&quot;      ! number of columns
    define symbol mv_xs = $3&quot;0.25&quot;   ! X size
    define symbol mv_xb = $4&quot;0.10&quot;   ! X beginning
    define symbol mv_xg = $5&quot;0.03&quot;   ! X gap 
    define symbol mv_ys = $6&quot;0.15&quot;   ! Y size 
    define symbol mv_yb = $7&quot;0.10&quot;   ! Y beginning
    define symbol mv_yg = $8&quot;0.02&quot;   ! Y gap
    define symbol prefx = $9&quot;v&quot;      ! Prefix for the viewport name

! Issue a warning message if request values doesnot fit in

    let mv_xh = `($mv_xb)+($mv_c)*($mv_xs)+(($mv_c)-1)*($mv_xg)`  ! X high
    let mv_yh = `($mv_yb)+($mv_r)*($mv_ys)+(($mv_r)-1)*($mv_yg)`  ! Y high

    IF `($mv_r) LT 1` THEN  ! minimum number of rows is 1
          SAY ; SAY &quot; ERROR (small_view) : Number of rows should be &gt; 0&quot; ; SAY
          EXIT
    ENDIF 
    IF `($mv_c) LT 1` THEN  ! minimum number of rows is 1
          SAY ; SAY &quot; ERROR (small_view) : Number of columns should be &gt; 0&quot; ; SAY
          EXIT
    ENDIF 

    IF `($mv_xb) GT 0.9 OR ($mv_xb) LT 0` THEN   ! upper/lower bound for xstart 
          SAY ; SAY &quot; ERROR (small_view) : X_Start should be between 0.0 and 0.9&quot; ; SAY
          EXIT
    ENDIF
    IF `($mv_yb) GT 0.9 OR ($mv_yb) LT 0` THEN   ! upper/lower bound for ystart 
          SAY ; SAY &quot; ERROR (small_view) : Y_Start should be between 0.0 and 0.9&quot; ; SAY
          EXIT
    ENDIF
    IF `mv_xh GT 1.0` THEN 
          SAY 
          SAY &quot; ERROR (small_view) : Exceeded Max Xsize --&gt; &quot;
          SAY &quot;       Reduce Number of Columns or Xsize/Xstart/Xgap....&quot;
          SAY ; EXIT
    ENDIF
    IF `mv_yh GT 1.0` THEN 
          SAY 
          SAY &quot; ERROR (small_view) : Exceeded Max Ysize --&gt; &quot;
          SAY &quot;       Reduce Number of  Rows or Ysize/Ystart/Ygap....&quot;
          SAY ; EXIT
    ENDIF

! IF arguments are valid, define the viewports

    REPEAT/RANGE=1:`($mv_r)`:1/NAME=mv_ro ( ;\
       let mv_ylo = ($mv_yb) + (($mv_r)-`mv_ro`)*($mv_yg) + (($mv_r)-`mv_ro`)*($mv_ys)     ;\
       let mv_yhi = ($mv_yb) + (($mv_r)-`mv_ro`)*($mv_yg) + (($mv_r)-(`mv_ro`-1))*($mv_ys) ;\
       REPEAT/RANGE=1:`($mv_c)`:1/NAME=mv_co (  ;\
          let mv_xlo = ($mv_xb) + (`mv_co`-1)*($mv_xg) + (`mv_co`-1)*($mv_xs) ;\
          let mv_xhi = ($mv_xb) + (`mv_co`-1)*($mv_xg) + `mv_co`*($mv_xs)     ;\
          define view/axes/xlim=`mv_xlo`:`mv_xhi`/ylim=`mv_ylo`:`mv_yhi` ($prefx)`mv_ro``mv_co` ;\
       ) ;\
    )


    set mode/last verify
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00315" href="msg00315.html">[ferret_users] Help needed for creating multiple subplots using loop</a></strong>
<ul><li><em>From:</em> Sudev Das M P</li></ul></li>
<li><strong><a name="00320" href="msg00320.html">Re: [ferret_users] Help needed for creating multiple subplots using loop</a></strong>
<ul><li><em>From:</em> Sudev Das M P</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00320.html">Re: [ferret_users] Help needed for creating multiple subplots using loop</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00317.html">[ferret_users] Re: Interpolation of meridians and paralells</a></strong>
</li>

</UL>
<center>[<a href="msg00320.html">Thread Prev</a>][<a href="msg00317.html">Thread Next</a>][<A HREF="threads.html#00322">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
