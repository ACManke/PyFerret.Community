<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Error to save spectrum and phase of FFT in period unit -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Fri, 3 Aug 2012 09:40:54 &#45;0700 -->
<!--X-Message-Id: 501BFF0A.3010301@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CACKeJXJocyRRqXWg33oki6+0Fu_rHg+m&#45;EJpND&#45;b_WCoDiVKCg@mail.gmail.com -->
<!--X-Reference: 501AD6B7.7000209@noaa.gov -->
<!--X-Reference: CACKeJXKH03SAo_zB0UpAiGy7sDbej+6oz+0bAsdxceVDiu05ig@mail.gmail.com -->
<!--X-Reference: 501B1BDA.5010807@noaa.gov -->
<!--X-Reference: CACKeJXJOz36QMFU_a6cqg7S9QHP6k9=YKB=dObZG__c+7FbXVg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Error to save spectrum and phase of FFT in period unit</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00370.html">Thread Prev</a>][<a href="msg00374.html">Thread Next</a>][<A HREF="threads.html#00373">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Error to save spectrum and phase of FFT in period unit</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>antonio avio &lt;<a href="mailto:antonioavio@DOMAIN.HIDDEN">antonioavio@xxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Error to save spectrum and phase of FFT in period unit</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 03 Aug 2012 09:40:42 -0700</li>
<li>Cc: Ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;CACKeJXJOz36QMFU_a6cqg7S9QHP6k9=YKB=dObZG__c+7FbXVg@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00365.html">CACKeJXJocyRRqXWg33oki6+0Fu_rHg+m-EJpND-b_WCoDiVKCg@mail.gmail.com</a>&gt; &lt;<a href="msg00367.html">501AD6B7.7000209@noaa.gov</a>&gt; &lt;<a href="msg00368.html">CACKeJXKH03SAo_zB0UpAiGy7sDbej+6oz+0bAsdxceVDiu05ig@mail.gmail.com</a>&gt; &lt;<a href="msg00369.html">501B1BDA.5010807@noaa.gov</a>&gt; &lt;CACKeJXJOz36QMFU_a6cqg7S9QHP6k9=YKB=dObZG__c+7FbXVg@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20120713 Thunderbird/14.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi Antonio,<br>
    I'd like to suggest you work on learning some basic Ferret syntax,
    so that you can figure this stuff out yourself.&nbsp; Try,<br>
    <blockquote>yes? go tutorial<br>
    </blockquote>
    and read what's on the screen as the script runs. Next, you can get
    a good start on understanding the syntax if you read the first
    chapter of the Users Guide on our Documentation pages.
    <a rel="nofollow" class="moz-txt-link-freetext" href="http://ferret.pmel.noaa.gov/Ferret/documentation">http://ferret.pmel.noaa.gov/Ferret/documentation</a><br>
    <br>
    Now, look up the LIST command to see what the error message is
    talking about. There is a /CLOBBER qualifier which is explained
    there.<br>
    <br>
    When you have a script and you want to debug what's happening in it,
    what I would do is to run it as is, and at different points in the
    script, put in some LIST commands, to list numbers to the screen in
    your ferret session:<br>
    <blockquote> PLOT/VS/LINE/HLIMITS=0:32:2/TITLE="Amplitude
      Spectrum"/SET_UP per[l=1:`FFT_nf`], fft_uwnd
      <div>&nbsp; ...</div>
      <div>&nbsp;PPL PLOT</div>
      list/L=1:5 per, fft_uwnd<br>
      pause
      <br>
      <br>
      ! now list all the data<br>
      list per, fft_uwnd<br>
      pause<br>
    </blockquote>
    <br>
    I'm not sure how of the variable fft_uwnd was defined, or why the
    author of your original script has listed the variables to plot as
    per[l=1:`FFT_nf`], fft_uwnd, with a range of L given just on the
    variable "per" on the command line.&nbsp; If the plot is correct, then
    saving the variables store the same numbers to the file.<br>
    <br>
    Ansley<br>
    <br>
    <div class="moz-cite-prefix">On 8/2/2012 5:59 PM, antonio avio
      wrote:<br>
    </div>
    <blockquote
cite=""
      type="cite">Hi,
      <div><br>
      </div>
      <div>Thanks for the correction but it still not working correctly,
        If I use your first suggestion, the compilation</div>
      <div>works well but the results are wrong. The axis still in
        frequency unit and the values are not change (the same as</div>
      <div>in fft frequency unit). As i mentioned before, I'd like
        to&nbsp;save the fft and phase from spectral analysis which have
        period unit in x axis.</div>
      <div><br>
      </div>
      <div>But if i use the second suggestion,</div>
      <div>i got this error:</div>
      <div><br>
      </div>
      <div>
        <div><b>let AOUT = fft_uwnd</b></div>
        <div><b>save/file=<a rel="nofollow" moz-do-not-send="true"
              href="http://fft_period.nc">fft_period.nc</a>
            per[l=1:`FFT_nf`], AOUT</b></div>
        <div><b>&nbsp;!-&gt; LIST/FORMAT=CDF/file=<a rel="nofollow" moz-do-not-send="true"
              href="http://fft_period.nc">fft_period.nc</a>
            per[l=1:378], AOUT</b></div>
        <div><b>&nbsp;**ERROR: invalid command: /CLOBBER not specified and
            file exists: <a rel="nofollow" moz-do-not-send="true"
              href="http://fft_period.nc">fft_period.nc</a></b></div>
        <div><b>LIST/FORMAT=CDF/file=<a rel="nofollow" moz-do-not-send="true"
              href="http://fft_period.nc">fft_period.nc</a>
            per[l=1:378], AOUT</b></div>
        <div><b>Command file, command group, or REPEAT execution aborted</b></div>
        <div><br>
        </div>
        <div>Thanks a lot,</div>
        <div>Antonio</div>
        <div><br>
        </div>
        <div><br>
        </div>
        <br>
        <div class="gmail_quote">On Fri, Aug 3, 2012 at 2:31 AM, Ansley
          Manke <span dir="ltr">&lt;<a rel="nofollow" moz-do-not-send="true"
              href="mailto:ansley.b.manke@xxxxxxxx" target="_blank">ansley.b.manke@xxxxxxxx</a>&gt;</span>
          wrote:<br>
          <blockquote class="gmail_quote" style="margin:0 0 0
            .8ex;border-left:1px #ccc solid;padding-left:1ex">
            <div bgcolor="#FFFFFF" text="#000000"> Hi -<br>
              My apologies. I made an editing error like I think you had
              done, originally!&nbsp; <br>
              <br>
              You have commands which define the FFT variables, but the
              script you had is making a plot so it lists pairs of
              variables to plot.&nbsp; It has defined variables including
              "per", "fft_uwnd", and "FFT_uwndfftp"<br>
              <br>
              So all you need is<br>
              <blockquote>
                <div>!Save fft period unit</div>
                <div>save/file=<a rel="nofollow" moz-do-not-send="true"
                    href="http://fft_period.nc" target="_blank">fft_period.nc</a>
                  per[l=1:`FFT_nf`], fft_uwnd</div>
                <div class="im">
                  <div><br>
                  </div>
                  <div>!Save phase in period unit</div>
                </div>
                <div>save/file=<a rel="nofollow" moz-do-not-send="true"
                    href="http://phase_period.nc" target="_blank">phase_period.nc</a>
                  per[l=1:`FFT_nf`], FFT_uwndfftp</div>
              </blockquote>
              Or if you want to rename variables you could do this, but
              watch out about variable names, there is already a
              variable called A in the script, so if you do a "LET A = "
              definition, you'd redefine that existing variable and ruin
              the calculation.<br>
              <blockquote>
                <div>!Save fft period unit<br>
                  let AOUT = fft_uwnd<br>
                </div>
                <div>save/file=<a rel="nofollow" moz-do-not-send="true"
                    href="http://fft_period.nc" target="_blank">fft_period.nc</a>
                  per[l=1:`FFT_nf`], AOUT </div>
                <div><br>
                </div>
                <div>
                  <div class="im">!Save phase in period unit<br>
                  </div>
                  let BOUT = FFT_uwndfftp</div>
                <div>save/file=<a rel="nofollow" moz-do-not-send="true"
                    href="http://phase_period.nc" target="_blank">phase_period.nc</a>
                  per[l=1:`FFT_nf`], BOUT</div>
              </blockquote>
              <div>
                <div class="h5">
                  <div> </div>
                  <br>
                  <br>
                  <br>
                  <div>On 8/2/2012 3:16 PM, antonio avio wrote:<br>
                  </div>
                  <blockquote type="cite">Hallo,
                    <div><br>
                      <div>Thanks Ansley for the reply,</div>
                      <div>The main goal is to save the fft and phase
                        from spectral analysis which have period unit in
                        x axis.</div>
                      <div><br>
                      </div>
                      <div>Yes, I also did the same thing, but i still
                        got the error message,</div>
                      <div>After compiling i got this error:</div>
                      <div><br>
                      </div>
                      <div>
                        <div><b>**ERROR: command syntax: per[l=1:378],
                            fft_uwnd</b></div>
                        <div><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Definition contains multiple
                            expressions</b></div>
                        <div><b>DEFINE VARIABLE A = per[l=1:378],
                            fft_uwnd</b></div>
                        <div><b>Command file, command group, or REPEAT
                            execution aborted</b></div>
                      </div>
                      <div><b><br>
                        </b></div>
                      <div>Thanks for the helps,</div>
                      <div>Antonio</div>
                      <div><br>
                      </div>
                      <div><br>
                        <br>
                        <div class="gmail_quote">On Thu, Aug 2, 2012 at
                          9:36 PM, Ansley Manke <span dir="ltr">&lt;<a rel="nofollow"
                              moz-do-not-send="true"
                              href="mailto:ansley.b.manke@xxxxxxxx"
                              target="_blank">ansley.b.manke@xxxxxxxx</a>&gt;</span>
                          wrote:<br>
                          <blockquote class="gmail_quote"
                            style="margin:0 0 0 .8ex;border-left:1px
                            #ccc solid;padding-left:1ex">
                            <div bgcolor="#FFFFFF" text="#000000"> Hi<br>
                              You are using "SET_UP per" as if it's a
                              variable name.&nbsp; The error message is
                              telling you that variable names in Ferret
                              cannot have a space in them.<br>
                              <br>
                              Do you mean to say this?<br>
                              <div><br>
                              </div>
                              <div>
                                <div>
                                  <div><b>!Save fft in period unit</b></div>
                                </div>
                                <div><b>let A = per[l=1:`FFT_nf`],
                                    fft_uwnd</b></div>
                              </div>
                              <div>
                                <div> <br>
                                  <br>
                                  <div>On 8/2/2012 10:58 AM, antonio
                                    avio wrote:<br>
                                  </div>
                                  <blockquote type="cite">Hallo,
                                    <div>I wonder why I got this error
                                      when i wanted to save the results
                                      of FFT analysis (period unit not
                                      frequency) in different nc files:</div>
                                    <div><br>
                                    </div>
                                    <div>
                                      <div><b>!Save fft in period unit</b></div>
                                      <div><b>let A = SET_UP
                                          per[l=1:`FFT_nf`], fft_uwnd</b></div>
                                      <div><b>&nbsp;!-&gt; DEFINE VARIABLE A
                                          = SET_UP per[l=1:378],
                                          fft_uwnd</b></div>
                                      <div><b>&nbsp;**ERROR: command syntax:
                                          SET_UP per[l=1:378], fft_uwnd</b></div>
                                      <div><b>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SET_UP before
                                          per[l=1:378] is illegal</b></div>
                                      <div><b>DEFINE VARIABLE A = SET_UP
                                          per[l=1:378], fft_uwnd</b></div>
                                      <div><b>Command file, command
                                          group, or REPEAT execution
                                          aborted</b></div>
                                    </div>
                                    <div><br>
                                    </div>
                                    <div>Here is my command:</div>
                                    <div><br>
                                    </div>
                                    <div>[SNIP]</div>
                                    <div>
                                      <div>!converting to Period</div>
                                      <div>! Get the frequency increment
                                        used in the FFT.</div>
                                      <div>&nbsp; &nbsp; &nbsp; LET FFT_nf =
                                        `fft_uwnd,return=lend`</div>
                                      <div>&nbsp; &nbsp; &nbsp; LET FFT_nyquist = 0.5</div>
                                      <div>&nbsp; &nbsp; &nbsp; LET FFT_freq1 =
                                        FFT_nyquist/ FFT_nf</div>
                                      <div><br>
                                      </div>
                                      <div>! Define a frequency axis.</div>
                                      <div>&nbsp; &nbsp; &nbsp; DEFINE
                                        AXIS/T=`FFT_freq1`:`FFT_nyquist`:`FFT_freq1`
                                        FAXIS</div>
                                      <div>&nbsp; &nbsp; &nbsp; DEFINE GRID/T=FAXIS
                                        gfftfreq</div>
                                      <div>&nbsp; &nbsp; &nbsp; LET a = T[g=gfftfreq]</div>
                                      <div><br>
                                      </div>
                                      <div>! Define the period from the
                                        frequency axis.</div>
                                      <div>&nbsp; &nbsp; &nbsp; LET per = 1./a</div>
                                      <div><br>
                                      </div>
                                      <div>! Plot period vs FFT
                                        Amplitudes showing the first 24
                                        months where most of the energy
                                        is.</div>
                                      <div>! The PPL commands clean up
                                        the appearance of the plot.</div>
                                      <div><br>
                                      </div>
                                      <div>&nbsp;SET VIEW ur</div>
                                      <div>&nbsp; &nbsp; &nbsp;
                                        PLOT/VS/LINE/HLIMITS=0:32:2/TITLE="Amplitude
                                        Spectrum"/SET_UP
                                        per[l=1:`FFT_nf`], fft_uwnd</div>
                                      <div> &nbsp; &nbsp; &nbsp; PPL XFOR (I2)</div>
                                      <div>&nbsp; &nbsp; &nbsp; PPL XLAB Period,
                                        months/cycle</div>
                                      <div>&nbsp; &nbsp; &nbsp; PPL YLAB&nbsp;</div>
                                      <div>&nbsp; &nbsp; &nbsp; PPL PLOT</div>
                                      <div>!****************************************************************************************************</div>
                                      <div>! Compute and plot the phase
                                        using fftp.</div>
                                      <div><br>
                                      </div>
                                      <div>&nbsp; &nbsp; &nbsp; LET FFT_uwndfftp =
                                        fftp(fft_u[l=1:757])</div>
                                      <div>&nbsp; &nbsp; &nbsp; SET VARIABLE/TITLE="FFT
                                        Phase"/UNITS="deg" FFT_uwndfftp</div>
                                      <div><br>
                                      </div>
                                      <div>&nbsp; &nbsp; &nbsp; SET VIEW ll</div>
                                      <div>&nbsp; &nbsp; &nbsp; PLOT FFT_uwndfftp</div>
                                      <div><br>
                                      </div>
                                      <div>&nbsp; &nbsp; &nbsp; SET VIEW lr</div>
                                      <div>&nbsp; &nbsp; &nbsp;
                                        PLOT/VS/LINE/HLIMITS=0:32:2/TITLE="FFT
                                        Phase"/SET_UP
                                        per[l=1:`FFT_nf`],FFT_uwndfftp</div>
                                      <div>&nbsp; &nbsp; &nbsp; PPL XFOR (I2)</div>
                                      <div>&nbsp; &nbsp; &nbsp; PPL XLAB Period,
                                        months/cycle</div>
                                      <div>&nbsp; &nbsp; &nbsp; PPL YLAB Deg</div>
                                      <div>&nbsp; &nbsp; &nbsp; PPL PLOT</div>
                                      <div><br>
                                      </div>
                                      <div><b>!Save fft period unit</b></div>
                                      <div><b>let A = SET_UP
                                          per[l=1:`FFT_nf`], fft_uwnd</b></div>
                                      <div><b>save/file=<a rel="nofollow"
                                            moz-do-not-send="true"
                                            href="http://fft_period.nc"
                                            target="_blank">fft_period.nc</a>
                                          A</b></div>
                                      <div><b><br>
                                        </b></div>
                                      <div><b>!Save phase in period unit</b></div>
                                      <div><b>let B = SET_UP
                                          per[l=1:`FFT_nf`],
                                          FFT_uwndfftp</b></div>
                                      <div><b>save/file=<a rel="nofollow"
                                            moz-do-not-send="true"
                                            href="http://phase_period.nc"
                                            target="_blank">phase_period.nc</a>
                                          B&nbsp;</b></div>
                                    </div>
                                    <div><b><br>
                                      </b></div>
                                    <div>!**********************************************************************************</div>
                                    <div>Thanks for your help.</div>
                                    <div><br>
                                    </div>
                                    <div>Antonio.</div>
                                  </blockquote>
                                  <br>
                                </div>
                              </div>
                            </div>
                          </blockquote>
                        </div>
                        <br>
                      </div>
                    </div>
                  </blockquote>
                  <br>
                </div>
              </div>
            </div>
          </blockquote>
        </div>
        <br>
      </div>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00365" href="msg00365.html">[ferret_users] Error to save spectrum and phase of FFT in period unit</a></strong>
<ul><li><em>From:</em> antonio avio</li></ul></li>
<li><strong><a name="00367" href="msg00367.html">Re: [ferret_users] Error to save spectrum and phase of FFT in period unit</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00368" href="msg00368.html">Re: [ferret_users] Error to save spectrum and phase of FFT in period unit</a></strong>
<ul><li><em>From:</em> antonio avio</li></ul></li>
<li><strong><a name="00369" href="msg00369.html">Re: [ferret_users] Error to save spectrum and phase of FFT in period unit</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00370" href="msg00370.html">Re: [ferret_users] Error to save spectrum and phase of FFT in period unit</a></strong>
<ul><li><em>From:</em> antonio avio</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00370.html">Re: [ferret_users] Error to save spectrum and phase of FFT in period unit</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00374.html">Re: [ferret_users] Error to save spectrum and phase of FFT in period unit</a></strong>
</li>

</UL>
<center>[<a href="msg00370.html">Thread Prev</a>][<a href="msg00374.html">Thread Next</a>][<A HREF="threads.html#00373">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
