<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] stippled to an extended area -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 26 Mar 2012 12:08:07 &#45;0700 -->
<!--X-Message-Id: 4F70BE92.7060504@noaa.gov -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: AB21E984&#45;FE3F&#45;4DAF&#45;90E3&#45;F01AF5CCD747@uvic.ca -->
<!--X-Reference: 20120319080256.GA4873@giotto.bmtargoss.org -->
<!--X-Reference: 1332343899.8596.214.camel@oo -->
<!--X-Reference: 4F6A0021.7040705@noaa.gov -->
<!--X-Reference: 4F6A5980.2000600@email.arizona.edu -->
<!--X-Reference: 4F6B5249.3070206@noaa.gov -->
<!--X-Reference: B1624CB3&#45;E5AF&#45;4F6F&#45;9471&#45;A5118276A4E6@noaa.gov -->
<!--X-Reference: 4F70A69B.4080506@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] stippled to an extended area</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00113.html">Thread Prev</a>][<a href="msg00157.html">Thread Next</a>][<A HREF="threads.html#00114">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] stippled to an extended area</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ferret users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] stippled to an extended area</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 26 Mar 2012 12:08:02 -0700</li>
<li>In-reply-to: &lt;<a href="msg00113.html">4F70A69B.4080506@noaa.gov</a>&gt;</li>
<li>References: &lt;<a href="msg00092.html">AB21E984-FE3F-4DAF-90E3-F01AF5CCD747@uvic.ca</a>&gt; &lt;<a href="msg00097.html">20120319080256.GA4873@giotto.bmtargoss.org</a>&gt; &lt;1332343899.8596.214.camel@oo&gt; &lt;<a href="msg00108.html">4F6A0021.7040705@noaa.gov</a>&gt; &lt;4F6A5980.2000600@email.arizona.edu&gt; &lt;<a href="msg00110.html">4F6B5249.3070206@noaa.gov</a>&gt; &lt;<a href="msg00112.html">B1624CB3-E5AF-4F6F-9471-A5118276A4E6@noaa.gov</a>&gt; &lt;<a href="msg00113.html">4F70A69B.4080506@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20120312 Thunderbird/11.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi all,
</pre><tt>Paul wrote back asking about the mp_land.jnl and mp_land_detail.jnl 
</tt><tt>scripts.  Those scripts didn't have the extra commands added to them to 
</tt><tt>do modulo replications.  The corrected versions are attached, and will 
</tt><tt>be part of the next Ferret release.
</tt><pre style="margin: 0em;">

Ansley

On 3/26/2012 10:25 AM, Ansley Manke wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Paul,
</pre><tt>The &quot;go land&quot; and land_detail scripts do use plot/vs, but they add the 
</tt><tt>necessary commands to plot the extra modulo replications that would be 
</tt><tt>needed to overlay on a plot from -180 to 180 (or other typical plots.)
</tt><pre style="margin: 0em;">

</pre><tt>Give it a try: plot whatever range you like, even more than one wrap 
</tt><tt>around the earth:
</tt><pre style="margin: 0em;">

yes? use etopo20
yes? shade/x=-270:540 rose
yes? go land

Ansley

On 3/23/2012 8:42 AM, Paul Young wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Ansley,

</pre><tt>Just to clarify, is your statement also true for adding country 
</tt><tt>outlines? I guess that uses plot/vs, and I seem to remember having 
</tt><tt>problems with getting all the countries included when my map ran 
</tt><tt>180W:180E....
</tt><pre style="margin: 0em;">

Thanks,

Paul



On Mar 22, 2012, at 10:24 AM, Ansley Manke wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Kelin
</pre><tt>(I am adding a cc to the Users List - you must have forgotten to 
</tt><tt>send your question to the list address as well).
</tt><pre style="margin: 0em;">

</pre><tt>To ask for the PLOT/VS command to go beyond the x-values in the x 
</tt><tt>variable, you need to add or subtract 360 from the x variable, 
</tt><tt>depending on which direction it needs to be extended:
</tt><pre style="margin: 0em;">

shade field[x=40e:400e]
plot/over/nolab/vs/symbol=dot/color=black stiple_a,stiple_b
plot/over/nolab/vs/symbol=dot/color=black stiple_a+360,stiple_b
plot/over/nolab/vs/symbol=dot/color=black stiple_a-360,stiple_b

</pre><tt>The modulo x axis of your variable &quot;field&quot; causes Ferret to 
</tt><tt>automatically do a similar operation when it does the SHADE command, 
</tt><tt>but PLOT/VS doesn't apply a modulo operation to the x values it plots.
</tt><pre style="margin: 0em;">

Ansley

On 3/21/2012 3:43 PM, Kelin Zhuang wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Dear Ansley and forum,
</pre><tt>I have a question to ask: How to extend stippled mark? For example, 
</tt><tt>if I plot in a ferret default sense,
</tt><pre style="margin: 0em;">
shade field
plot/over/nolab/vs/symbol=dot/color=black stiple_a,stiple_b
</pre><tt>then I got a normal stippling in the whole region but if I extend 
</tt><tt>the display to, say, x=40e:400e, then
</tt><pre style="margin: 0em;">
shade field[x=40e:400e]
</pre><tt>plot/over/nolab/vs/hlimits=40e:400e:1/symbol=dot/color=black 
</tt><tt>stiple_a,stiple_b
</tt><tt>then I couldn't get what I want to get, i.e. no stippling west of 
</tt><tt>180E in the figure. No stippling in the Indian.
</tt><pre style="margin: 0em;">
Would you kindly help me? I attached the netcdf and two figures.
Best,
Kelin
</pre></blockquote></blockquote></blockquote></blockquote><pre>\cancel mode verify	
! ... now overlaying coastal outline ...

! Description: Plot outlines of continents, countries, and/or states

!		        arg 1	      arg 2	   arg 3        arg 4
! Usage:   GO mp_land [continent_pen] [&quot;basemap&quot;] [country_pen] [state_pen]

! pens 	may be &quot;0&quot;(background), &quot;1&quot;(foreground), &quot;thick&quot;(same as pen 7),
!	&quot;black&quot;, &quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, or 2-18.
! arg 2 may be &quot;basemap&quot;, &quot;overlay&quot;, &quot;fast&quot; (fast, 20e:20e overlay) or omitted

!	Note 1: A pen color of &quot;black&quot; will actually pen number 1
!		-- normally white if the window background is black
!	Note 2: An &quot;N&quot; for the continent pen means no continents
!		-- use this for the special case of geo-political
!		   overlay without continents.

! Example:
!   GO mp_land red        	  - overlay continents using red pen (2)
!   GO mp_land  10           - overlay continents using pen number 10
!   GO mp_land 1 basemap     - basemap of continents outline in foreground color
!   GO mp_land 1 fast        - overlay continents in region 20e to 380, only
!   GO mp_land 1 &quot; &quot; red     - overlay continents with countries in red
!   GO mp_land thick basemap black black - continents, countries, and states
!   GO mp_land N &quot; &quot; 1 1     - overlay: no continents; yes political boundaries

! Notes:
!  1) If a pen value is given for the country_pen or state_pen then the
!	corresponding geopolitical boundaries will be drawn - else
!	they will be omitted
!  2) use  GO line_samples    to view the first 6 pen numbers
!       Higher pen numbers cycle with thicker lines (max 18)
!  3) For more control over basemaps use &quot;GO basemap&quot;

! test argument before performing any actions
query/ignore $1%1|black|red|green|blue|thick|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|N|&lt;GO mp_land [pen or &quot;N&quot;] [&quot;basemap&quot;] [pen] [pen] with pen = 0(back), 1(fore), thick, 2-18 or a color%
query/ignore $2%default|basemap|overlay|fast|&lt;argument 2 can be &quot;basemap&quot;, &quot;overlay&quot;, or &quot;fast&quot;%
query/ignore $3%1|black|red|green|blue|thick|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|N|&lt;GO mp_land [pen or &quot;N&quot;] [&quot;basemap&quot;] [pen] [pen] with pen = 0(back), 1(fore), thick, 2-18 or a color%
query/ignore $4%1|black|red|green|blue|thick|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|N|&lt;GO mp_land [pen or &quot;N&quot;] [&quot;basemap&quot;] [pen] [pen] with pen = 0(back), 1(fore), thick, 2-18 or a color%

! introduce the outline data set
set data/save
set grid/save

let/quiet mp_x = x
let/quiet mp_xmin = `mp_x[i=@min]`
let/quiet mp_xmax = `mp_x[i=@max]`
let/quiet mp_y = y
let/quiet mp_ymin = `mp_y[j=@min]`
let/quiet mp_ymax = `mp_y[j=@max]`
let/quiet mp_std_parallel_north = mp_ymax
let/quiet mp_std_parallel_south = mp_ymin

!
! This test will keep the central meridians defined by &quot;from space&quot; views
!
let/quiet mp_test = `mp_central_meridian` - `(mp_x[i=@max] + mp_x[i=@min])/2`
if `mp_test eq 0` then
   let/quiet mp_central_meridian = `(mp_x[i=@max] + mp_x[i=@min])/2`
endif
let/quiet mp_test = `mp_standard_parallel` - `(mp_y[j=@max] + mp_y[j=@min])/2`
if `mp_test eq 0` then
   let/quiet mp_standard_parallel = `(mp_y[j=@max] + mp_y[j=@min])/2`
endif
cancel variable mp_test


use geo_borders

! Initialize
let landi_subx = 0
let landi_addx = 0
let landi_datxmin = continent_lon[x=@min]
let landi_datxmax = continent_lon[x=@max]

let landi_basemap = $2&quot;0|basemap&gt;1|*&gt;0&quot;
IF `landi_basemap EQ 0` THEN

   IF `mp_xmin LT landi_datxmin` then let landi_subx = `landi_subx - 360`
   IF `mp_xmax GT landi_datxmax` then let landi_addx = `landi_addx + 360`

ENDIF
 

! always do the continents
set grid CONTINENT_LON
let/quiet mp_lambda = if (CONTINENT_LON ge mp_xmin and CONTINENT_LON le mp_xmax and CONTINENT_LAT ge mp_ymin and CONTINENT_LAT le mp_ymax) then (CONTINENT_LON * deg2rad)
let/quiet mp_phi = if (CONTINENT_LON ge mp_xmin and CONTINENT_LON le mp_xmax and CONTINENT_LAT ge mp_ymin and CONTINENT_LAT le mp_ymax) then (CONTINENT_LAT * deg2rad)
let/quiet masked_x_page = mp_mask * x_page
let/quiet masked_y_page = mp_mask * y_page
$1&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:22585/overlay|basemap&gt;i=4886:13712|fast&gt;i=4886:13712/overly|*&gt;i=1:22585/overlay&quot; masked_x_page, masked_y_page

! select line style and plot
ppl pen 1 $1&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;

! set up axis formatting in case it is a basemap  !!! incorrect for map projection plots!
! ppl xfor (I7,''LONE'')
! ppl yfor (I7,''LAT'')

! draw it - as an overlay or as a basemap
$1&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;


! Draw any lines outside 0 to 360
IF ($1&quot;0|*&gt;1&quot;) THEN

IF `landi_addx NE 0` THEN 
  set grid continent_lon
  let/quiet mp_lambda = if ((continent_lon+landi_addx) ge mp_xmin and (continent_lon+landi_addx) le mp_xmax and \
   continent_lat ge mp_ymin and continent_lat le mp_ymax) then ((continent_lon+landi_addx) * deg2rad)
  let/quiet mp_phi = if ((continent_lon+landi_addx) ge mp_xmin and (continent_lon+landi_addx) le mp_xmax and \
   continent_lat ge mp_ymin and continent_lat le mp_ymax) then (continent_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $1&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $1&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $1&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF
IF `landi_subx NE 0` THEN 
  set grid continent_lon
  let/quiet mp_lambda = if ((continent_lon+landi_subx) ge mp_xmin and (continent_lon+landi_subx) le mp_xmax and \
   continent_lat ge mp_ymin and continent_lat le mp_ymax) then ((continent_lon+landi_subx) * deg2rad)
  let/quiet mp_phi = if ((continent_lon+landi_subx) ge mp_xmin and (continent_lon+landi_subx) le mp_xmax and \
   continent_lat ge mp_ymin and continent_lat le mp_ymax) then (continent_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $1&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $1&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $1&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF

ENDIF  ! lines outside 0 to 360

! **** now the optional country borders
set grid COUNTRY_LON
let/quiet mp_lambda = if (COUNTRY_LON ge mp_xmin and COUNTRY_LON le mp_xmax and COUNTRY_LAT ge mp_ymin and COUNTRY_LAT le mp_ymax) then (COUNTRY_LON * deg2rad)
let/quiet mp_phi = if (COUNTRY_LON ge mp_xmin and COUNTRY_LON le mp_xmax and COUNTRY_LAT ge mp_ymin and COUNTRY_LAT le mp_ymax) then (COUNTRY_LAT * deg2rad)
let/quiet masked_x_page = mp_mask * x_page
let/quiet masked_y_page = mp_mask * y_page
$3&quot;query/ignore|*&gt;plot/set/vs/nolab/line=1/x=1:91083/overlay&quot; masked_x_page, masked_y_page

! select line style and plot
ppl pen 1 $3&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|&quot;

! draw it - as an overlay or as a basemap
$3&quot;query/ignore|*&gt;ppl plot/overlay&quot;

! Draw any lines outside 0 to 360
IF ($3&quot;0|*&gt;1&quot;) THEN

IF `landi_addx NE 0` THEN 
  set grid COUNTRY_LON
  let/quiet mp_lambda = if ((country_lon+landi_addx) ge mp_xmin and (country_lon+landi_addx) le mp_xmax and \
   country_lat ge mp_ymin and country_lat le mp_ymax) then ((country_lon+landi_addx) * deg2rad)
  let/quiet mp_phi = if ((country_lon+landi_addx) ge mp_xmin and (country_lon+landi_addx) le mp_xmax and \
   country_lat ge mp_ymin and country_lat le mp_ymax) then (country_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $3&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $3&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $3&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF
IF `landi_subx NE 0` THEN 
  set grid COUNTRY_LON
  let/quiet mp_lambda = if ((country_lon+landi_subx) ge mp_xmin and (country_lon+landi_subx) le mp_xmax and \
   country_lat ge mp_ymin and country_lat le mp_ymax) then ((country_lon+landi_subx) * deg2rad)
  let/quiet mp_phi = if ((country_lon+landi_subx) ge mp_xmin and (country_lon+landi_subx) le mp_xmax and \
   country_lat ge mp_ymin and country_lat le mp_ymax) then (country_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $3&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $3&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $3&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF

ENDIF  ! lines outside 0 to 360

! **** now the optional state borders
set grid STATE_LON
let/quiet mp_lambda = if (STATE_LON ge mp_xmin and STATE_LON le mp_xmax and STATE_LAT ge mp_ymin and STATE_LAT le mp_ymax) then (STATE_LON * deg2rad)
let/quiet mp_phi = if (STATE_LON ge mp_xmin and STATE_LON le mp_xmax and STATE_LAT ge mp_ymin and STATE_LAT le mp_ymax) then (STATE_LAT * deg2rad)
let/quiet masked_x_page = mp_mask * x_page
let/quiet masked_y_page = mp_mask * y_page
$4&quot;query/ignore|*&gt;plot/set/vs/nolab/line=1/x=1:7034/overlay&quot; masked_x_page, masked_y_page

! select line style and plot
ppl pen 1 $4&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|&quot;

! draw it - as an overlay or as a basemap
$4&quot;query/ignore|*&gt;ppl plot/overlay&quot;


! Draw any lines outside 0 to 360
IF ($4&quot;0|*&gt;1&quot;) THEN

IF `landi_addx NE 0` THEN 
  set grid state_LON
  let/quiet mp_lambda = if ((state_lon+landi_addx) ge mp_xmin and (state_lon+landi_addx) le mp_xmax and \
   state_lat ge mp_ymin and state_lat le mp_ymax) then ((state_lon+landi_addx) * deg2rad)
  let/quiet mp_phi = if ((state_lon+landi_addx) ge mp_xmin and (state_lon+landi_addx) le mp_xmax and \
   state_lat ge mp_ymin and state_lat le mp_ymax) then (state_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $4&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $4&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $4&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF
IF `landi_subx NE 0` THEN 
  set grid state_LON
  let/quiet mp_lambda = if ((state_lon+landi_subx) ge mp_xmin and (state_lon+landi_subx) le mp_xmax and \
   state_lat ge mp_ymin and state_lat le mp_ymax) then ((state_lon+landi_subx) * deg2rad)
  let/quiet mp_phi = if ((state_lon+landi_subx) ge mp_xmin and (state_lon+landi_subx) le mp_xmax and \
   state_lat ge mp_ymin and state_lat le mp_ymax) then (state_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $4&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $4&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $4&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF

ENDIF  ! lines outside 0 to 360

cancel data geo_borders

set grid/restore
set data/restore
let/quiet mp_x = x
let/quiet mp_y = y
let/quiet mp_test = `mp_central_meridian` - `(mp_x[i=@max] + mp_x[i=@min])/2`
if `mp_test eq 0` then
   let/quiet mp_central_meridian = (mp_x[i=@max] + mp_x[i=@min])/2
endif
let/quiet mp_test = `mp_standard_parallel` - `(mp_y[j=@max] + mp_y[j=@min])/2`
if `mp_test eq 0` then
   let/quiet mp_standard_parallel = (mp_y[j=@max] + mp_y[j=@min])/2
endif
cancel variable mp_test
let/quiet mp_std_parallel_north = mp_y[j=@max]
let/quiet mp_std_parallel_south = mp_y[j=@min]
let/quiet mp_lambda = mp_x * deg2rad
let/quiet mp_phi = mp_y * deg2rad

set mode/last verify
</pre><pre>\cancel mode verify	
! overlaying coastal outline using detailed geo_borders_intermed data.

! Description: Plot outlines of continents, countries, and/or states

! usage:   go mp_land_detail arg1 [arg2] [arg3] [arg4] [arg5] [arg6] [arg7]
!
!    arg1  continent_pen  
!    arg2 &quot;basemap&quot; &quot;overlay&quot;, or omitted for overlay
!    arg3 country_pen	Pen for optional national boundaries 
!    arg4 state_pen	Pen for optional state boundaries (Western hemisphere)
!    arg5 rivers_pen	Pen for largest rivers
!    arg6 more_rivers	Pen for additional rivers 
!    arg7 marine boundaries  Pen for marine boundaries in South Pacific, Bering Strait
!
! pens 	may be &quot;0&quot;(background), &quot;1&quot;(foreground), &quot;thick&quot;(same as pen 7),
!	&quot;black&quot;, &quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, or 2-18.
! arg 2 may be &quot;basemap&quot;, &quot;overlay&quot;, &quot;fast&quot; (fast, 20e:20e overlay) or omitted

!	Note 1: A pen color of &quot;black&quot; will actually pen number 1
!		-- normally white if the window background is black
!	Note 2: An &quot;N&quot; for the continent pen means no continents
!		-- use this for the special case of geo-political
!		   overlay without continents.
! Example calls:
!   GO mp_land_detail red	     - overlay continents using red pen (2)
!   GO mp_land_detail  10           - overlay continents using pen number 10
!   GO mp_land_detail 1 basemap     - basemap of continents outline in foreground color
!   GO mp_land_detail 1 &quot; &quot; red     - overlay continents with countries in red
!   GO mp_land_detail thick basemap black black - continents, countries, and states
!   GO mp_land_detail thick &quot; &quot; red green blue lightblue purple - continents, countries, states, 
!                                                 all rivers, and marine boundaries
!   GO mp_land_detail N &quot; &quot; 1 1     - overlay: no continents; yes political boundaries
! 
! Example:
!   USE coads_climatology
!   SET REGION/X=0:360/Y=-90:90/L=1
!   GO mp_orthographic 210 45
!   SET GRID sst
!   GO mp_aspect
!   LET masked_sst = sst * mp_mask
!   FILL/TITLE=&quot;View From Space&quot;/NOAXES masked_sst, x_page, y_page
!   GO mp_fland
!   GO mp_land_detail thick overlay red green blue lightblue purple
!
! Notes:
!  1) This script is SLOW! It computes the map projection for all the 
!       boundary data, even when a small subset is being plotted.
!  2) If a pen value is given for the country_pen or state_pen then the
!	corresponding geopolitical boundaries will be drawn - else
!	they will be omitted
!  3) use  GO line_samples    to view the first 6 pen numbers
!       Higher pen numbers cycle with thicker lines (max 18)
!  3) For more control over basemaps use &quot;GO basemap&quot;

! test argument before performing any actions

query/ignore $1%1|black|red|green|blue|lightblue|purple|white|thick|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|N|&lt;go land_detail [pen or &quot;N&quot;] [&quot;basemap&quot;] [pen] [pen] with pen = 0(back), 1(fore), thick, 2-18 or a color%
query/ignore $2%default|basemap|overlay|&lt;argument 2 can be &quot;basemap&quot;, &quot;overlay&quot;%
query/ignore $3%1|black|red|green|blue|lightblue|purple|white|thick|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|N|&lt;go land_detail [pen or &quot;N&quot;] [&quot;basemap&quot;] [pen] [pen] with pen = 0(back), 1(fore), thick, 2-18 or a color%
query/ignore $4%1|black|red|green|blue|lightblue|purple|white|thick|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|N|&lt;go land_detail [pen or &quot;N&quot;] [&quot;basemap&quot;] [pen] [pen] with pen = 0(back), 1(fore), thick, 2-18 or a color%
query/ignore $5%1|black|red|green|blue|lightblue|purple|white|thick|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|N|&lt;go land_detail [pen or &quot;N&quot;] [&quot;basemap&quot;] [pen] [pen] with pen = 0(back), 1(fore), thick, 2-18 or a color%
query/ignore $6%1|black|red|green|blue|lightblue|purple|white|thick|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|N|&lt;go land_detail [pen or &quot;N&quot;] [&quot;basemap&quot;] [pen] [pen] with pen = 0(back), 1(fore), thick, 2-18 or a color%
query/ignore $7%1|black|red|green|blue|lightblue|purple|white|thick|0|1|2|3|4|5|6|7|8|9|10|11|12|13|14|15|16|17|18|19|N|&lt;go land_detail [pen or &quot;N&quot;] [&quot;basemap&quot;] [pen] [pen] with pen = 0(back), 1(fore), thick, 2-18 or a color%

! introduce the outline data set
set data/save
set grid/save

let/quiet mp_x = x
let/quiet mp_xmin = `mp_x[i=@min]`
let/quiet mp_xmax = `mp_x[i=@max]`
let/quiet mp_y = y
let/quiet mp_ymin = `mp_y[j=@min]`
let/quiet mp_ymax = `mp_y[j=@max]`
let/quiet mp_std_parallel_north = mp_ymax
let/quiet mp_std_parallel_south = mp_ymin

! This test will keep the central meridians defined by &quot;from space&quot; views
!
let/quiet mp_test = `mp_central_meridian` - `(mp_x[i=@max] + mp_x[i=@min])/2`
if `mp_test eq 0` then
   let/quiet mp_central_meridian = `(mp_x[i=@max] + mp_x[i=@min])/2`
endif
let/quiet mp_test = `mp_standard_parallel` - `(mp_y[j=@max] + mp_y[j=@min])/2`
if `mp_test eq 0` then
   let/quiet mp_standard_parallel = `(mp_y[j=@max] + mp_y[j=@min])/2`
endif
cancel variable mp_test

define region/default save
cancel region

use geo_borders_intermed


! Initialize
let landi_subx = 0
let landi_addx = 0
let landi_datxmin = continent_lon[x=@min]
let landi_datxmax = continent_lon[x=@max]

let landi_basemap = $2&quot;0|basemap&gt;1|*&gt;0&quot;
IF `landi_basemap EQ 0` THEN

   IF `mp_xmin LT landi_datxmin` then let landi_subx = `landi_subx - 360`
   IF `mp_xmax GT landi_datxmax` then let landi_addx = `landi_addx + 360`

ENDIF


! always do the continents
set grid continent_lon
let/quiet mp_lambda = if (continent_lon ge mp_xmin and continent_lon le mp_xmax and continent_lat ge mp_ymin and continent_lat le mp_ymax) then (continent_lon * deg2rad)
let/quiet mp_phi = if (continent_lon ge mp_xmin and continent_lon le mp_xmax and continent_lat ge mp_ymin and continent_lat le mp_ymax) then (continent_lat * deg2rad)
let/quiet masked_x_page = mp_mask * x_page
let/quiet masked_y_page = mp_mask * y_page

$1&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page

! select line style and plot
ppl pen 1 $1&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;

! draw it - as an overlay or as a basemap

$1&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;


! Draw any lines outside 0 to 360
IF ($1&quot;0|*&gt;1&quot;) THEN

IF `landi_addx NE 0` THEN 
  set grid continent_lon
  let/quiet mp_lambda = if ((continent_lon+landi_addx) ge mp_xmin and (continent_lon+landi_addx) le mp_xmax and \
   continent_lat ge mp_ymin and continent_lat le mp_ymax) then ((continent_lon+landi_addx) * deg2rad)
  let/quiet mp_phi = if ((continent_lon+landi_addx) ge mp_xmin and (continent_lon+landi_addx) le mp_xmax and \
   continent_lat ge mp_ymin and continent_lat le mp_ymax) then (continent_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $1&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $1&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $1&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF
IF `landi_subx NE 0` THEN 
  set grid continent_lon
  let/quiet mp_lambda = if ((continent_lon+landi_subx) ge mp_xmin and (continent_lon+landi_subx) le mp_xmax and \
   continent_lat ge mp_ymin and continent_lat le mp_ymax) then ((continent_lon+landi_subx) * deg2rad)
  let/quiet mp_phi = if ((continent_lon+landi_subx) ge mp_xmin and (continent_lon+landi_subx) le mp_xmax and \
   continent_lat ge mp_ymin and continent_lat le mp_ymax) then (continent_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $1&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $1&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $1&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF

ENDIF  ! lines outside 0 to 360


! **** now the optional country borders
set grid COUNTRY_LON
let/quiet mp_lambda = if (COUNTRY_LON ge mp_xmin and COUNTRY_LON le mp_xmax and COUNTRY_LAT ge mp_ymin and COUNTRY_LAT le mp_ymax) then (COUNTRY_LON * deg2rad)
let/quiet mp_phi = if (COUNTRY_LON ge mp_xmin and COUNTRY_LON le mp_xmax and COUNTRY_LAT ge mp_ymin and COUNTRY_LAT le mp_ymax) then (COUNTRY_LAT * deg2rad)
let/quiet masked_x_page = mp_mask * x_page
let/quiet masked_y_page = mp_mask * y_page
$3&quot;query/ignore|*&gt;plot/set/vs/nolab/line=1/overlay&quot; masked_x_page, masked_y_page

! select line style and plot
ppl pen 1 $3&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|&quot;

! draw it - as an overlay or as a basemap
$3&quot;query/ignore|*&gt;ppl plot/overlay&quot;


! Draw any lines outside 0 to 360
IF ($3&quot;0|*&gt;1&quot;) THEN

IF `landi_addx NE 0` THEN 
  set grid COUNTRY_LON
  let/quiet mp_lambda = if ((country_lon+landi_addx) ge mp_xmin and (country_lon+landi_addx) le mp_xmax and \
   country_lat ge mp_ymin and country_lat le mp_ymax) then ((country_lon+landi_addx) * deg2rad)
  let/quiet mp_phi = if ((country_lon+landi_addx) ge mp_xmin and (country_lon+landi_addx) le mp_xmax and \
   country_lat ge mp_ymin and country_lat le mp_ymax) then (country_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $3&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $3&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $3&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF
IF `landi_subx NE 0` THEN 
  set grid COUNTRY_LON
  let/quiet mp_lambda = if ((country_lon+landi_subx) ge mp_xmin and (country_lon+landi_subx) le mp_xmax and \
   country_lat ge mp_ymin and country_lat le mp_ymax) then ((country_lon+landi_subx) * deg2rad)
  let/quiet mp_phi = if ((country_lon+landi_subx) ge mp_xmin and (country_lon+landi_subx) le mp_xmax and \
   country_lat ge mp_ymin and country_lat le mp_ymax) then (country_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $3&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $3&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $3&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF

ENDIF  ! lines outside 0 to 360



! **** now the optional state borders
set grid STATE_LON
let/quiet mp_lambda = if (STATE_LON ge mp_xmin and STATE_LON le mp_xmax and STATE_LAT ge mp_ymin and STATE_LAT le mp_ymax) then (STATE_LON * deg2rad)
let/quiet mp_phi = if (STATE_LON ge mp_xmin and STATE_LON le mp_xmax and STATE_LAT ge mp_ymin and STATE_LAT le mp_ymax) then (STATE_LAT * deg2rad)
let/quiet masked_x_page = mp_mask * x_page
let/quiet masked_y_page = mp_mask * y_page
$4&quot;query/ignore|*&gt;plot/set/vs/nolab/line=1/overlay&quot; masked_x_page, masked_y_page

! select line style and plot
ppl pen 1 $4&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|&quot;

! draw it - as an overlay
$4&quot;query/ignore|*&gt;ppl plot/overlay&quot;


! Draw any lines outside 0 to 360
IF ($4&quot;0|*&gt;1&quot;) THEN

IF `landi_addx NE 0` THEN 
  set grid state_LON
  let/quiet mp_lambda = if ((state_lon+landi_addx) ge mp_xmin and (state_lon+landi_addx) le mp_xmax and \
   state_lat ge mp_ymin and state_lat le mp_ymax) then ((state_lon+landi_addx) * deg2rad)
  let/quiet mp_phi = if ((state_lon+landi_addx) ge mp_xmin and (state_lon+landi_addx) le mp_xmax and \
   state_lat ge mp_ymin and state_lat le mp_ymax) then (state_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $4&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $4&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $4&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF
IF `landi_subx NE 0` THEN 
  set grid state_LON
  let/quiet mp_lambda = if ((state_lon+landi_subx) ge mp_xmin and (state_lon+landi_subx) le mp_xmax and \
   state_lat ge mp_ymin and state_lat le mp_ymax) then ((state_lon+landi_subx) * deg2rad)
  let/quiet mp_phi = if ((state_lon+landi_subx) ge mp_xmin and (state_lon+landi_subx) le mp_xmax and \
   state_lat ge mp_ymin and state_lat le mp_ymax) then (state_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $4&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $4&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $4&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF

ENDIF  ! lines outside 0 to 360

! **** now the optional rivers (secondary ones first)
set grid RIVER1_2_LON
let/quiet mp_lambda = if (RIVER1_2_LON ge mp_xmin and RIVER1_2_LON le mp_xmax and RIVER1_2_LAT ge mp_ymin and RIVER1_2_LAT le mp_ymax) then (RIVER1_2_LON * deg2rad)
let/quiet mp_phi = if (RIVER1_2_LON ge mp_xmin and RIVER1_2_LON le mp_xmax and RIVER1_2_LAT ge mp_ymin and RIVER1_2_LAT le mp_ymax) then (RIVER1_2_LAT * deg2rad)
let/quiet masked_x_page = mp_mask * x_page
let/quiet masked_y_page = mp_mask * y_page
$6&quot;query/ignore|*&gt;plot/set/vs/nolab/line=1/overlay&quot; masked_x_page, masked_y_page

! select line style and plot
ppl pen 1 $6&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|&quot;

! draw it - as an overlay or as a basemap
$6&quot;query/ignore|*&gt;ppl plot/overlay&quot;


! Draw any lines outside 0 to 360
IF ($6&quot;0|*&gt;1&quot;) THEN

IF `landi_addx NE 0` THEN 
  set grid RIVER1_2_LON
  let/quiet mp_lambda = if ((RIVER1_2_lon+landi_addx) ge mp_xmin and (RIVER1_2_lon+landi_addx) le mp_xmax and \
   RIVER1_2_lat ge mp_ymin and RIVER1_2_lat le mp_ymax) then ((RIVER1_2_lon+landi_addx) * deg2rad)
  let/quiet mp_phi = if ((RIVER1_2_lon+landi_addx) ge mp_xmin and (RIVER1_2_lon+landi_addx) le mp_xmax and \
   RIVER1_2_lat ge mp_ymin and RIVER1_2_lat le mp_ymax) then (RIVER1_2_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $6&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $6&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $6&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF
IF `landi_subx NE 0` THEN 
  set grid RIVER1_2_LON
  let/quiet mp_lambda = if ((RIVER1_2_lon+landi_subx) ge mp_xmin and (RIVER1_2_lon+landi_subx) le mp_xmax and \
   RIVER1_2_lat ge mp_ymin and RIVER1_2_lat le mp_ymax) then ((RIVER1_2_lon+landi_subx) * deg2rad)
  let/quiet mp_phi = if ((RIVER1_2_lon+landi_subx) ge mp_xmin and (RIVER1_2_lon+landi_subx) le mp_xmax and \
   RIVER1_2_lat ge mp_ymin and RIVER1_2_lat le mp_ymax) then (RIVER1_2_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $6&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $6&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $6&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF

ENDIF  ! lines outside 0 to 360

! **** now the optional rivers (primary ones second)
set grid RIVER1_LON
let/quiet mp_lambda = if (RIVER1_LON ge mp_xmin and RIVER1_LON le mp_xmax and RIVER1_LAT ge mp_ymin and RIVER1_LAT le mp_ymax) then (RIVER1_LON * deg2rad)
let/quiet mp_phi = if (RIVER1_LON ge mp_xmin and RIVER1_LON le mp_xmax and RIVER1_LAT ge mp_ymin and RIVER1_LAT le mp_ymax) then (RIVER1_LAT * deg2rad)
let/quiet masked_x_page = mp_mask * x_page
let/quiet masked_y_page = mp_mask * y_page
$5&quot;query/ignore|*&gt;plot/set/vs/nolab/line=1/overlay&quot; masked_x_page, masked_y_page

! select line style and plot
ppl pen 1 $5&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|&quot;

! draw it - as an overlay or as a basemap
$5&quot;query/ignore|*&gt;ppl plot/overlay&quot;



! Draw any lines outside 0 to 360
IF ($5&quot;0|*&gt;1&quot;) THEN

IF `landi_addx NE 0` THEN 
  set grid RIVER1_LON
  let/quiet mp_lambda = if ((RIVER1_lon+landi_addx) ge mp_xmin and (RIVER1_lon+landi_addx) le mp_xmax and \
   RIVER1_lat ge mp_ymin and RIVER1_lat le mp_ymax) then ((RIVER1_lon+landi_addx) * deg2rad)
  let/quiet mp_phi = if ((RIVER1_lon+landi_addx) ge mp_xmin and (RIVER1_lon+landi_addx) le mp_xmax and \
   RIVER1_lat ge mp_ymin and RIVER1_lat le mp_ymax) then (RIVER1_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $5&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $5&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $5&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF
IF `landi_subx NE 0` THEN 
  set grid RIVER1_LON
  let/quiet mp_lambda = if ((RIVER1_lon+landi_subx) ge mp_xmin and (RIVER1_lon+landi_subx) le mp_xmax and \
   RIVER1_lat ge mp_ymin and RIVER1_lat le mp_ymax) then ((RIVER1_lon+landi_subx) * deg2rad)
  let/quiet mp_phi = if ((RIVER1_lon+landi_subx) ge mp_xmin and (RIVER1_lon+landi_subx) le mp_xmax and \
   RIVER1_lat ge mp_ymin and RIVER1_lat le mp_ymax) then (RIVER1_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $5&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $5&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $5&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF

ENDIF  ! lines outside 0 to 360

! **** now the optional marine boundaries
set grid MARINE_LON
let/quiet mp_lambda = if (MARINE_LON ge mp_xmin and MARINE_LON le mp_xmax and MARINE_LAT ge mp_ymin and MARINE_LAT le mp_ymax) then (MARINE_LON * deg2rad)
let/quiet mp_phi = if (MARINE_LON ge mp_xmin and MARINE_LON le mp_xmax and MARINE_LAT ge mp_ymin and MARINE_LAT le mp_ymax) then (MARINE_LAT * deg2rad)
let/quiet masked_x_page = mp_mask * x_page
let/quiet masked_y_page = mp_mask * y_page
$7&quot;query/ignore|*&gt;plot/set/vs/nolab/line=1/overlay&quot; masked_x_page, masked_y_page

! select line style and plot
ppl pen 1 $7&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|&quot;

! draw it - as an overlay or as a basemap
$7&quot;query/ignore|*&gt;ppl plot/overlay&quot;


! Draw any lines outside 0 to 360
IF ($7&quot;0|*&gt;1&quot;) THEN

IF `landi_addx NE 0` THEN 
  set grid MARINE_LON
  let/quiet mp_lambda = if ((MARINE_lon+landi_addx) ge mp_xmin and (MARINE_lon+landi_addx) le mp_xmax and \
   MARINE_lat ge mp_ymin and MARINE_lat le mp_ymax) then ((MARINE_lon+landi_addx) * deg2rad)
  let/quiet mp_phi = if ((MARINE_lon+landi_addx) ge mp_xmin and (MARINE_lon+landi_addx) le mp_xmax and \
   MARINE_lat ge mp_ymin and MARINE_lat le mp_ymax) then (MARINE_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $7&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $7&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $7&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF
IF `landi_subx NE 0` THEN 
  set grid MARINE_LON
  let/quiet mp_lambda = if ((MARINE_lon+landi_subx) ge mp_xmin and (MARINE_lon+landi_subx) le mp_xmax and \
   MARINE_lat ge mp_ymin and MARINE_lat le mp_ymax) then ((MARINE_lon+landi_subx) * deg2rad)
  let/quiet mp_phi = if ((MARINE_lon+landi_subx) ge mp_xmin and (MARINE_lon+landi_subx) le mp_xmax and \
   MARINE_lat ge mp_ymin and MARINE_lat le mp_ymax) then (MARINE_lat * deg2rad)
  let/quiet masked_x_page = mp_mask * x_page
  let/quiet masked_y_page = mp_mask * y_page
  $7&quot;plot|N&gt;QUERY/IGNORE stuff |*&gt;plot&quot;/set/vs/nolab/noax/line=1/$2&quot;i=1:200826/overlay|basemap&gt;i=1:200826/overly|*&gt;i=1:200826/overlay&quot; masked_x_page, masked_y_page
  ppl pen 1 $7&quot;1|black&gt;1|red&gt;2|green&gt;3|blue&gt;4|lightblue&gt;5|purple&gt;6|white&gt;19|thick&gt;7|0&gt;0|1&gt;1|2&gt;2|3&gt;3|4&gt;4|5&gt;5|6&gt;6|7&gt;7|8&gt;8|9&gt;9|10&gt;10|11&gt;11|12&gt;12|13&gt;13|14&gt;14|15&gt;15|16&gt;16|17&gt;17|18&gt;18|N&gt;1|&quot;
  $7&quot;ppl plot|N&gt;QUERY/IGNORE stuff |*&gt;ppl plot&quot;$2&quot;/overlay|basemap&gt; |*&gt;/overlay&quot;
ENDIF

ENDIF  ! lines outside 0 to 360

cancel data geo_borders_intermed


set grid/restore
set data/restore
let/quiet mp_x = x
let/quiet mp_y = y
let/quiet mp_test = `mp_central_meridian` - `(mp_x[i=@max] + mp_x[i=@min])/2`
if `mp_test eq 0` then
   let/quiet mp_central_meridian = (mp_x[i=@max] + mp_x[i=@min])/2
endif
let/quiet mp_test = `mp_standard_parallel` - `(mp_y[j=@max] + mp_y[j=@min])/2`
if `mp_test eq 0` then
   let/quiet mp_standard_parallel = (mp_y[j=@max] + mp_y[j=@min])/2
endif
cancel variable mp_test
let/quiet mp_std_parallel_north = mp_y[j=@max]
let/quiet mp_std_parallel_south = mp_y[j=@min]
let/quiet mp_lambda = mp_x * deg2rad
let/quiet mp_phi = mp_y * deg2rad

set region save
set mode/last verify

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00092" href="msg00092.html">[ferret_users] Statistics / student-t distribution</a></strong>
<ul><li><em>From:</em> Neil Swart</li></ul></li>
<li><strong><a name="00097" href="msg00097.html">Re: [ferret_users] Statistics / student-t distribution</a></strong>
<ul><li><em>From:</em> Hein Zelle</li></ul></li>
<li><strong><a name="00107" href="msg00107.html">Re: [ferret_users] Statistics / student-t distribution</a></strong>
<ul><li><em>From:</em> Paulo B. Oliveira</li></ul></li>
<li><strong><a name="00108" href="msg00108.html">Re: [ferret_users] Statistics / student-t distribution</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00110" href="msg00110.html">Re: [ferret_users] stippled to an extended area</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00112" href="msg00112.html">Re: [ferret_users] stippled to an extended area</a></strong>
<ul><li><em>From:</em> Paul Young</li></ul></li>
<li><strong><a name="00113" href="msg00113.html">Re: [ferret_users] stippled to an extended area</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00113.html">Re: [ferret_users] stippled to an extended area</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00157.html">[ferret_users] inconsistent dynamic regridding</a></strong>
</li>

</UL>
<center>[<a href="msg00113.html">Thread Prev</a>][<a href="msg00157.html">Thread Next</a>][<A HREF="threads.html#00114">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
