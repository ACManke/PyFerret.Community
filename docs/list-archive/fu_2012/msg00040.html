<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Possible bug in Ferret 6.7 vs 6.64 -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 14 Feb 2012 09:31:26 &#45;0800 -->
<!--X-Message-Id: 4F3A9AB1.8010909@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: E66DD06C&#45;7E64&#45;46A2&#45;A1C8&#45;45514FB79C03@ucar.edu -->
<!--X-Reference: 20120209080034.GB13114@giotto.bmtargoss.org -->
<!--X-Reference: 4F33F058.5070407@noaa.gov -->
<!--X-Reference: 4F33FB47.5000801@noaa.gov -->
<!--X-Reference: 20120214081608.GA20502@giotto.bmtargoss.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Possible bug in Ferret 6.7 vs 6.64</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00034.html">Thread Prev</a>][<a href="msg00050.html">Thread Next</a>][<A HREF="threads.html#00040">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Possible bug in Ferret 6.7 vs 6.64</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Hein Zelle &lt;<a href="mailto:hein.zelle@DOMAIN.HIDDEN">hein.zelle@xxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Possible bug in Ferret 6.7 vs 6.64</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 14 Feb 2012 09:32:33 -0800</li>
<li>Cc: Ferret users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00034.html">20120214081608.GA20502@giotto.bmtargoss.org</a>&gt;</li>
<li>References: &lt;<a href="msg00021.html">E66DD06C-7E64-46A2-A1C8-45514FB79C03@ucar.edu</a>&gt; &lt;<a href="msg00027.html">20120209080034.GB13114@giotto.bmtargoss.org</a>&gt; &lt;<a href="msg00029.html">4F33F058.5070407@noaa.gov</a>&gt; &lt;<a href="msg00030.html">4F33FB47.5000801@noaa.gov</a>&gt; &lt;<a href="msg00034.html">20120214081608.GA20502@giotto.bmtargoss.org</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:9.0) Gecko/20111222 Thunderbird/9.0.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi-<br>
    Sending this also to the Users List - further thoughts on a better
    solution for this issue:<br>
    <br>
    On 2/14/2012 12:16 AM, Hein Zelle wrote:
    <blockquote cite=""
      type="cite">
      <pre wrap="">Hi Ansley Manke,

</pre>
      <blockquote type="cite">
        <pre wrap="">Hi all,
Gary has had a chance to test a beta version of Ferret which
includes some further work on this issue of creating the grids for
variables, and he's able to read the datset successfully in Ferret.
This will be included in the next Ferret release, and will keep us
going until the extra-dimensional Ferret is ready to go.
</pre>
      </blockquote>
      <pre wrap="">
Given our previous problems with WRF output files (problem introduced
in 6.7.1, fixed in 6.7.2)  I'd very much like to test this beta
version before it's released.

Kind regards,

     Hein

</pre>
    </blockquote>
    <br>
    I'm working on a somewhat better solution.&nbsp; What's done in the beta
    executable is to relax the requirement (introduced in 6.7) that
    dimensions have the same direction in all grids in a dataset.&nbsp; This
    means that for these datasets having the lat_vertices and
    lon_vertices variables with dimensions&nbsp; (j,i,v),&nbsp; things look like
    this:<br>
    <br>
    <b>version 6.64:</b><br>
    <br>
    <pre wrap="">yes? show dat
     currently SET data sets:
    1&gt; ./thkcello_fx_CCSM4_lgm_r0i0p0.nc  (default)
 name     title                             I         J         K         L
 LAT      latitude coordinate              1:320     1:384     ...       ...
 LON      longitude coordinate             1:320     1:384     ...       ...
 LAT_VERTICES
                                           1:4       1:320     1:384     ...
 LON_VERTICES
                                           1:4       1:320     1:384     ...
 THKCELLO Ocean Model Cell Thickness       1:320     1:384     1:60      ...
 

</pre>
    <b>version 6.72</b>:<br>
    <tt><br>
    </tt>
    <pre wrap="">yes? show dat
     currently SET data sets:
    1&gt; ./thkcello_fx_CCSM4_lgm_r0i0p0.nc  (default)</pre>
    <tt> name&nbsp;&nbsp;&nbsp;&nbsp; title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      K&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; L<br>
      &nbsp;LAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; latitude coordinate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      1:384&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;LON&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; longitude coordinate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      1:384&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;LAT_VERTICES<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      1:384&nbsp;&nbsp;&nbsp;&nbsp; 1:320<br>
      &nbsp;LON_VERTICES<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      1:384&nbsp;&nbsp;&nbsp;&nbsp; 1:320<br>
      &nbsp;THKCELLO Ocean Model Cell Thickness&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      1:384&nbsp;&nbsp;&nbsp;&nbsp; 1:60</tt><br>
    &nbsp;<br>
    <b>version 6.724: (back to the way it looked in v6.64)</b><br>
    <br>
    <tt>yes? sh dat<br>
      &nbsp;&nbsp;&nbsp;&nbsp; currently SET data sets:<br>
      &nbsp;&nbsp;&nbsp; 1&gt; ./thkcello_fx_CCSM4_lgm_r0i0p0.nc&nbsp; (default)<br>
      &nbsp;name&nbsp;&nbsp;&nbsp;&nbsp; title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      K&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; L<br>
      &nbsp;LAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; latitude coordinate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:384&nbsp;&nbsp;&nbsp;&nbsp;
      ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;LON&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; longitude coordinate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:384&nbsp;&nbsp;&nbsp;&nbsp;
      ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;LAT_VERTICES<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp;
      1:384&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;LON_VERTICES<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp;
      1:384&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;THKCELLO Ocean Model Cell Thickness&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:384&nbsp;&nbsp;&nbsp;&nbsp;
      1:60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</tt><br>
    <br>
    <br>
    Which means that we can use the data field, but to make use of
    lon_vertices and lat_vertices, we'd have to work around those grids
    in Ferret scripts.&nbsp; We have an idea to define a permuted grid for
    the variables that have the extra dimension beyond the x dimension,
    so that for the next official release, Ferret should create grids
    that will look like this, with the "v" dimension along an abstract Z
    axis.<br>
    <br>
    <b>version 6.73 (yet to come)<br>
      <br>
    </b><tt>yes? sh dat<br>
      &nbsp;&nbsp;&nbsp;&nbsp; currently SET data sets:<br>
      &nbsp;&nbsp;&nbsp; 1&gt; ./thkcello_fx_CCSM4_lgm_r0i0p0.nc&nbsp; (default)<br>
      &nbsp;name&nbsp;&nbsp;&nbsp;&nbsp; title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      K&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; L<br>
      &nbsp;LAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; latitude coordinate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:384&nbsp;&nbsp;&nbsp;&nbsp;
      ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;LON&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; longitude coordinate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:384&nbsp;&nbsp;&nbsp;&nbsp;
      ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;LAT_VERTICES<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:384&nbsp;&nbsp;&nbsp;&nbsp;
      1:4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;LON_VERTICES<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:384&nbsp;&nbsp;&nbsp;&nbsp;
      1:4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
      &nbsp;THKCELLO Ocean Model Cell Thickness&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:320&nbsp;&nbsp;&nbsp;&nbsp; 1:384&nbsp;&nbsp;&nbsp;&nbsp;
      1:60&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...</tt><br>
    <br>
    <blockquote cite=""
      type="cite">
      <pre wrap="">
</pre>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00050" href="msg00050.html">[ferret_users] slow work with netcdf4 files</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00021" href="msg00021.html">[ferret_users] Possible bug in Ferret 6.7 vs 6.64</a></strong>
<ul><li><em>From:</em> Gary Strand</li></ul></li>
<li><strong><a name="00027" href="msg00027.html">Re: [ferret_users] Possible bug in Ferret 6.7 vs 6.64</a></strong>
<ul><li><em>From:</em> Hein Zelle</li></ul></li>
<li><strong><a name="00029" href="msg00029.html">Re: [ferret_users] Possible bug in Ferret 6.7 vs 6.64</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00030" href="msg00030.html">Re: [ferret_users] Possible bug in Ferret 6.7 vs 6.64</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00034" href="msg00034.html">Re: [ferret_users] Possible bug in Ferret 6.7 vs 6.64</a></strong>
<ul><li><em>From:</em> Hein Zelle</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00034.html">Re: [ferret_users] Possible bug in Ferret 6.7 vs 6.64</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00050.html">[ferret_users] slow work with netcdf4 files</a></strong>
</li>

</UL>
<center>[<a href="msg00034.html">Thread Prev</a>][<a href="msg00050.html">Thread Next</a>][<A HREF="threads.html#00040">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
