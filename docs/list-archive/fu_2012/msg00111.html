<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] active and break of monsoon -->
<!--X-From-R13: wntnqvfu xneznpuneln <w_xneznpunelnNlnubb.pbz> -->
<!--X-Date: Fri, 23 Mar 2012 07:26:33 &#45;0700 -->
<!--X-Message-Id: 1332439547.3464.YahooMailNeo@web31904.mail.mud.yahoo.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 1331564826.90295.YahooMailNeo@web31910.mail.mud.yahoo.com -->
<!--X-Reference: 4F5E83FA.4060503@noaa.gov -->
<!--X-Reference: 1331733403.97360.YahooMailNeo@web31901.mail.mud.yahoo.com -->
<!--X-Reference: 1331917455.45373.YahooMailNeo@web31910.mail.mud.yahoo.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] active and break of monsoon</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00091.html">Thread Prev</a>][<a href="msg00083.html">Thread Next</a>][<A HREF="threads.html#00111">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] active and break of monsoon</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>users Group Ferret &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] active and break of monsoon</strong></li>
<li><strong>From</strong>: <strong>jagadish karmacharya &lt;<a href="mailto:j_karmacharya@DOMAIN.HIDDEN">j_karmacharya@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 22 Mar 2012 11:05:47 -0700 (PDT)</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=yahoo.com; s=s1024; t=1332439547; bh=MhFVVOZ2YwS4G/IVkRqFqkJwpQRDGzgkEWVPKJeN0hk=; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=m48Q6JNYLvXiCX+8FXBWKsYPqv34U9CrVbLKP6vp5ZiLQp+3zVUfsAwi4DqJgXG+1inKTliO2QKAhKa7rrA/3pd15eQ7vh077nn4o34GmFfJFr/HSUcS4JXqiVYSjhK5syMv6sHrBxvtGl1z1Gr8lESb3x0+N6nT0fiVUlf+hNA=</li>
<li>Domainkey-signature: a=rsa-sha1; q=dns; c=nofws;  s=s1024; d=yahoo.com; h=X-YMail-OSG:Received:X-Mailer:References:Message-ID:Date:From:Reply-To:Subject:To:In-Reply-To:MIME-Version:Content-Type; b=aQE2oCDMf+PSVF5dCOKhyuiKfP3IocqVKjewn24lSpIgYtOla7/4rURLDYU27A/GlKir0JdaBDnW2ulDurWIN+V/H0oB+dwqTCZHtSn1RWk2vgiBNdWgZXBAbRrpSXtMcArgMj2aFF69pvfK0rHvjtjddVBwbpmwEJUjmBsae5g=;</li>
<li>In-reply-to: &lt;<a href="msg00091.html">1331917455.45373.YahooMailNeo@web31910.mail.mud.yahoo.com</a>&gt;</li>
<li>References: &lt;<a href="msg00081.html">1331564826.90295.YahooMailNeo@web31910.mail.mud.yahoo.com</a>&gt; &lt;<a href="msg00082.html">4F5E83FA.4060503@noaa.gov</a>&gt; &lt;<a href="msg00087.html">1331733403.97360.YahooMailNeo@web31901.mail.mud.yahoo.com</a>&gt; &lt;<a href="msg00091.html">1331917455.45373.YahooMailNeo@web31910.mail.mud.yahoo.com</a>&gt;</li>
<li>Reply-to: jagadish karmacharya &lt;<a href="mailto:j_karmacharya@DOMAIN.HIDDEN">j_karmacharya@xxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div style="color:#000; background-color:#fff; font-family:arial, helvetica, sans-serif;font-size:10pt"><div><span>Hi,</span></div><div><span><br></span></div><div><span>I have finally figured out a better way; only there is a minor caveat that the first valid date is written at the end of list.<br></span></div><div><span><br></span></div><div>let atvdays = SORTL(var)&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp; <span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span
 class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp;&nbsp; </span>! where var =1 for active days and undefined on other days <br>let atvdate = DAYS1900TOYMDHMS(DAYS1900(1989,12,31)+atvdays) <span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span>! in my case, 1st time step of var was 1 jan 1990<br>let atvlen = atvdays[l=@NGD] <span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span
 class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp;&nbsp; </span><span class="tab">&nbsp;&nbsp; ! since I want to save only valid/true dates</span><br>list/nohead/l=1:`atvlen`/file=dates.txt atvdate[k=1:3]<br><br>Actually, day number (since 1 jan 1900 ) may be easier to work with if I want to creat composite from days/dates listed in a file as illustrated in <br>

<div style="margin: 0in; font-family: Calibri; font-size: 8pt;"><a rel="nofollow" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2009/msg00114.html"><br></a></div><div style="margin:0in;font-family:Calibri;font-size:8.0pt">

</div><div class="MsoNormal"><a rel="nofollow" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2009/msg00114.html">

</a></div><div class="MsoNormal"><a rel="nofollow" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2009/msg00114.html">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2009/msg00114.html</a></div>




<br>Jagadish<br>
</div><div><br><blockquote style="border-left: 2px solid rgb(16, 16, 255); margin-left: 5px; margin-top: 5px; padding-left: 5px;">  <div style="font-family: arial, helvetica, sans-serif; font-size: 10pt;"> <div style="font-family: times new roman, new york, times, serif; font-size: 12pt;"> <div dir="ltr"> <font face="Arial" size="2"> <hr size="1">  <b><span style="font-weight:bold;">From:</span></b> jagadish karmacharya &lt;j_karmacharya@xxxxxxxxx&gt;<br> <b><span style="font-weight: bold;">To:</span></b> users Group Ferret &lt;oar.pmel.ferret_users@xxxxxxxx&gt; <br> <b><span style="font-weight: bold;">Sent:</span></b> Friday, March 16, 2012 5:04 PM<br> <b><span style="font-weight: bold;">Subject:</span></b> Re: [ferret_users] active and break of monsoon<br> </font> </div> <br>
<div id="yiv1241758819"><div><div style="color:#000;background-color:#fff;font-family:arial, helvetica, sans-serif;font-size:10pt;"><div><span>Hi,</span></div><div><br><span></span></div><div><span>I listed the "mask" in text file. and soted the valid data with spread sheet. Not an elegant solution but still doestn't the job</span></div><div>&nbsp;</div><div>Jagadish</div><div><br><blockquote style="border-left:2px solid rgb(16, 16, 255);margin-left:5px;margin-top:5px;padding-left:5px;">  <div style="font-family:arial, helvetica, sans-serif;font-size:10pt;"> <div style="font-family:times new roman, new york, times, serif;font-size:12pt;"> <div dir="ltr"> <font face="Arial" size="2"> <hr size="1">  <b><span style="font-weight:bold;">From:</span></b> jagadish karmacharya &lt;j_karmacharya@xxxxxxxxx&gt;<br> <b><span style="font-weight:bold;">To:</span></b> Ansley Manke &lt;ansley.b.manke@xxxxxxxx&gt;
 <br><b><span style="font-weight:bold;">Cc:</span></b>
 users Group Ferret &lt;oar.pmel.ferret_users@xxxxxxxx&gt;; Ryo Furue &lt;furue@xxxxxxxxxx&gt; <br> <b><span style="font-weight:bold;">Sent:</span></b> Wednesday, March 14, 2012 1:56 PM<br> <b><span style="font-weight:bold;">Subject:</span></b> Re: [ferret_users] active and break of monsoon<br> </font> </div> <br>
<div id="yiv1241758819"><div><div style="color:#000;background-color:#fff;font-family:arial, helvetica, sans-serif;font-size:10pt;"><div><span>Hi Ansley,</span></div><div><br></div><div>With the help of Roy, I now have desired mask which is similar to below.</div><div><br></div><div>let mask1 = if p[l=@shf:-2] gt 1 AND p[l=@shf:-1]&nbsp; gt 1 AND p gt 1 then 1 else 0<br><br> let mask2 = if p[l=@shf:-1] gt 1 AND p gt 1 AND p[l=@shf:1] gt 1 then 1 else 0<br>&nbsp;<br> let mask3 = if p &gt; gt AND p[l=@shf:1] gt 1 AND p[l=@shf:2] gt 1 then 1 else 0<br><br> let mask = if mask1 + mask2 + mask3 &gt; 0 then 1<br><span></span></div><div><br><span></span></div><div><span>Also, the method described in FAQ work fine for masking selected months.</span></div><div><br><span></span></div><div><span>Now, I want to save just valid data /time steps; how can I do that? </span><span>compressL places all valid data at
 the begining and the undefined data points then after but the time is in
 abstract axis so its not preserving the date of valid data points. I could not figure out other way.&nbsp; </span></div><div>&nbsp;</div><div>Many thanks,</div><div><br></div><div>Jagadish</div><div><br><blockquote style="border-left:2px solid rgb(16, 16, 255);margin-left:5px;margin-top:5px;padding-left:5px;">  <div style="font-family:arial, helvetica, sans-serif;font-size:10pt;"> <div style="font-family:times new roman, new york, times, serif;font-size:12pt;"> <div dir="ltr"> <font face="Arial" size="2"> <hr size="1">  <b><span style="font-weight:bold;">From:</span></b> Ansley Manke &lt;ansley.b.manke@xxxxxxxx&gt;<br> <b><span style="font-weight:bold;">To:</span></b> jagadish karmacharya &lt;j_karmacharya@xxxxxxxxx&gt; <br><b><span style="font-weight:bold;">Cc:</span></b> users Group Ferret &lt;oar.pmel.ferret_users@xxxxxxxx&gt; <br> <b><span style="font-weight:bold;">Sent:</span></b> Monday, March 12, 2012 11:17 PM<br> <b><span
 style="font-weight:bold;">Subject:</span></b> Re: [ferret_users] active and break of monsoon<br> </font> </div> <br>
<div id="yiv1241758819">
  

    
  
  <div>
    Hi Jagadish,<br>
    There is a useful FAQ about creating a seasonal mask, which I think
    may be what you need.&nbsp; <br>
    <a rel="nofollow" rel="nofollow" class="yiv1241758819moz-txt-link-freetext" target="_blank" href="http://ferret.pmel.noaa.gov/Ferret/faq/creating-seasonal-masks">http://ferret.pmel.noaa.gov/Ferret/faq/creating-seasonal-masks</a><br>
    <br>
    Ansley<br>
    <br>
    On 3/12/2012 8:07 AM, jagadish karmacharya wrote:
    <blockquote type="cite">
      <div style="color:#000;background-color:#fff;font-family:arial, helvetica, sans-serif;font-size:10pt;">
        <div id="yiv1241758819">
          <div>
            <div style="color:#000;background-color:#fff;font-family:arial, helvetica, sans-serif;font-size:10pt;">
              <div id="yiv1241758819yui_3_2_0_19_133148066306048"><span id="yiv1241758819yui_3_2_0_19_133148066306059">Hi,</span><span></span></div>
              <div id="yiv1241758819yui_3_2_0_19_133148066306062"><br>
                <span id="yiv1241758819yui_3_2_0_19_133148066306059"></span></div>
              <div id="yiv1241758819yui_3_2_0_19_133148066306063"><span id="yiv1241758819yui_3_2_0_19_133148066306059">I have a
                  multiyear daily time series of precipitation data and
                  I am strugling to create composite of active (and
                  break) monsoon period.</span></div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060678"><span id="yiv1241758819yui_3_2_0_19_133148066306059"><br>
                </span></div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060679"><span id="yiv1241758819yui_3_2_0_19_133148066306059">I think
                  what I need is </span><span id="yiv1241758819yui_3_2_0_19_133148066306059">a mask
                  along the time axis that is b</span><span id="yiv1241758819yui_3_2_0_19_133148066306059">ased on
                  a criteria (say area averaged precipitation &gt;1 for
                  3 or more successive days). I can then apply the mask
                  to create active phase composites for precipitation
                  and other variables. Let me illustrate with an
                  example: say daily area average precip are:</span></div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060204"><br>
                <span id="yiv1241758819yui_3_2_0_19_133148066306059"></span></div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060205">01-JUL-2007:&nbsp;
                0.2.<br>
                02-JUL-2007:&nbsp; 0.8<br>
                03-JUL-2007:&nbsp; 1.2<br>
                04-JUL-2007:&nbsp; 2.1<br>
                05-JUL-2007:&nbsp; 2.0<br>
                06-JUL-2007:&nbsp; 1.5<br>
                07-JUL-2007:&nbsp; 1.1<br>
                08-JUL-2007:&nbsp; 0.4<br>
                09-JUL-2007:&nbsp; 0.1<br>
                10-JUL-2007:&nbsp; 0.6</div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060260"><br>
              </div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060261">From
                above definition definition: the active phase is from 3
                - 7 Jul and what I want is a mask with 1 on those dates
                and undefined for other dates. <br>
              </div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060704"><br>
              </div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060705">Other
                wish list are: to plot active days; get a list of just
                the valid days and finally save the mask for later use
                on other variables.</div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060331"><br>
              </div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060332">This
                is how far I have gone: For above example, I am able to
                creat a mask with 1's from 3-5 Jul but not able to
                extend it to 7 Jul.</div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060514"><br>
              </div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060515">let
                atv=if precip GT 1 AND precip[l=@SHF:1] GT 1 AND
                precip[l=@SHF:2] GT 1 then 1</div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060530"><br>
              </div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060531">list
                atv</div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060532"><br>
              </div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060533">01-JUL-2007:&nbsp;
                .....<br>
                02-JUL-2007:&nbsp; .....</div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060548">03-JUL-2007:&nbsp;
                1.0<br>
                04-JUL-2007:&nbsp; 1.0<br>
                05-JUL-2007:&nbsp; 1.0<br>
                06-JUL-2007:&nbsp; ....<br>
                07-JUL-2007:&nbsp; ....<br>
                08-JUL-2007:&nbsp; ....<br>
                09-JUL-2007:&nbsp; ....<br>
                10-JUL-2007:&nbsp; .....</div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060503"><br>
              </div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060567"> What
                do I modify if active period is to be valid only between
                1 jul to 31 August <br>
                <span id="yiv1241758819yui_3_2_0_19_133148066306059"></span></div>
              <div id="yiv1241758819yui_3_2_0_19_1331480663060288"><span id="yiv1241758819yui_3_2_0_19_133148066306059"><br>
                </span></div>
              <div id="yiv1241758819yui_3_2_0_19_133148066306051">Many
                thanks in advance. <br>
                <br>
              </div>
              <div>Jagadish</div>
            </div>
          </div>
        </div>
      </div>
    </blockquote>
  </div>

</div><br><br> </div> </div> </blockquote></div>   </div></div></div><br><br> </div> </div> </blockquote></div>   </div></div></div><br><br> </div> </div> </blockquote></div>   </div>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00081" href="msg00081.html">[ferret_users] active and break of monsoon</a></strong>
<ul><li><em>From:</em> jagadish karmacharya</li></ul></li>
<li><strong><a name="00082" href="msg00082.html">Re: [ferret_users] active and break of monsoon</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00087" href="msg00087.html">Re: [ferret_users] active and break of monsoon</a></strong>
<ul><li><em>From:</em> jagadish karmacharya</li></ul></li>
<li><strong><a name="00091" href="msg00091.html">Re: [ferret_users] active and break of monsoon</a></strong>
<ul><li><em>From:</em> jagadish karmacharya</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00091.html">Re: [ferret_users] active and break of monsoon</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00083.html">[ferret_users] wave climatology</a></strong>
</li>

</UL>
<center>[<a href="msg00091.html">Thread Prev</a>][<a href="msg00083.html">Thread Next</a>][<A HREF="threads.html#00111">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
