<!-- MHonArc v2.5.13 -->
<!--X-Subject: [ferret_users] another simple FORTRAN read question -->
<!--X-From-R13: Pbo Fbznf <gbznfNhpne.rqh> -->
<!--X-Date: Tue, 18 Jul 2006 09:06:49 &#45;0700 -->
<!--X-Message-Id: Pine.LNX.4.63.0607180954210.10803@mineral.cgd.ucar.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>[ferret_users] another simple FORTRAN read question</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00485.html">Thread Prev</a>][<a href="msg00489.html">Thread Next</a>][<A HREF="threads.html#00488">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] another simple FORTRAN read question</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] another simple FORTRAN read question</strong></li>
<li><strong>From</strong>: <strong>Bob Tomas &lt;<a href="mailto:tomas@DOMAIN.HIDDEN">tomas@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 18 Jul 2006 10:06:47 -0600 (MDT)</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Hi all,<br>
<br>
I've been struggling to figure this out but am not getting it so 
if someone can help I will be very thankful.<br>
<br>
This time I am reading using stream format because I am writing<br>
out using direct access, but I am using NCL not FORTRAN<br>
<br>
I am writing out a record using NCL:<br>
<br>
	fbindirwrite(dir_name + file_out_div,dummy)<br>
<br>
<br>
where dummy(10,32,64).  fbindirwrite is the NCL way to write<br>
out a file using FORTRAN direct access:  From the NCL web<br>
page:<br>
<br>
<br>
	fbindirwrite: Writes binary records to a file in manner<br>
        analogous to fortran's &quot;access=direct&quot;.<br>
<br>
<br>
Now, I want to read the data into ferret to get a quick look, so<br>
I wrote the following simple script to define a grid and plot the data:<br>
<br>
<br>
	DEFINE AXIS/x=1:32:1 x32<br>
	DEFINE AXIS/y=1:64:1 y64<br>
	DEFINE AXIS/z=1000:100:100 z10<br>
	define grid/x=x32/y=y64/z=z10 gridxyz<br>
	FILE/VAR=vor,wg/GRID=gridxyz/FORMAT=stream/type=r4 vor.CNTLen-08.basicstate.nc.t21.dat<br>
	show data<br>
	contour vor[k=5]*1.e5<br>
<br>
When I run it, it tells me the data doesn't fit the grid:<br>
<br>
<br>
	DEFINE AXIS/x=1:32:1 x32<br>
	DEFINE AXIS/y=1:64:1 y64<br>
	DEFINE AXIS/z=1000:100:100 z10<br>
	define grid/x=x32/y=y64/z=z10 gridxyz<br>
	FILE/VAR=vor,wg/GRID=gridxyz/FORMAT=stream/type=r4 vor.CNTLen-08.basicstate.nc.t21.dat<br>
	show data<br>
	     currently SET data sets:<br>
	    1&gt; ./vor.CNTLen-08.basicstate.nc.t21.dat  (default)<br>
	 name     title                             I         J         K         L<br>
	 VOR      VOR                              1:32      1:64      1:10      ...<br>
	 WG       WG                               1:32      1:64      1:10      ...<br>
<br>
	contour vor[k=5]*1.e5<br>
	 **ERROR: Size of file ./vor.CNTLen-08.basicstate.nc.t21.dat doesn't match size specified by variables/grid<br>
	contour vor[k=5]*1.e5<br>
	Command file, command group, or REPEAT execution aborted<br>
<br>
But it looks to me like the data should fit the grid.  Maybe I am &quot;not seeing it&quot;?  Maybe the NCL write<br>
doen't work with the FERRET read?  I don't know how to take the next step to diagnose whats going on<br>
so any help in this direction is useful.<br>
<br>
Thanks<br>
<br>
Bob<br>
<br>
<br>
--<br>
-------------------------------------------------------------<br>
Robert A. Tomas<br>
National Center for Atmospheric Research<br>
Climate and Global Dynamics Division - Paleoclimatology<br>
1850 Table Mesa Drive<br>
Boulder, CO 80305-3000<br>
e-mail: tomas@ucar.edu  tel: 303-497-1342  fax:  303-497-1348<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00485.html">[ferret_users] how to calculate v*T(strfcn)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00489.html">[ferret_users] zaxreplace and integrals</a></strong>
</li>

</UL>
<center>[<a href="msg00485.html">Thread Prev</a>][<a href="msg00489.html">Thread Next</a>][<A HREF="threads.html#00488">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
