<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: [ferret_users] Missing vector arrows -->
<!--X-From-R13: "Ivyyvnz E. Yrffyre" <Ivyyvnz.E.YrffyreNabnn.tbi> -->
<!--X-Date: Wed, 15 Nov 2006 11:00:11 &#45;0800 -->
<!--X-Message-Id: F839C835&#45;9916&#45;4075&#45;8B3E&#45;9DF5542E1808@noaa.gov -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 455B3E63.7020408@rsmas.miami.edu -->
<!--X-Reference: 455B56F8.9070900@noaa.gov -->
<!--X-Derived: bin00004.bin -->
<!--X-Derived: bin00005.bin -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: [ferret_users] Missing vector arrows</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00723.html">Thread Prev</a>][<a href="msg00725.html">Thread Next</a>][<A HREF="threads.html#00724">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Missing vector arrows</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:Ansley.B.Manke@DOMAIN.HIDDEN">Ansley.B.Manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Missing vector arrows</strong></li>
<li><strong>From</strong>: <strong>&quot;William S. Kessler&quot; &lt;<a href="mailto:William.S.Kessler@DOMAIN.HIDDEN">William.S.Kessler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 15 Nov 2006 11:00:06 -0800</li>
<li>Cc: &quot;William S. Kessler&quot; &lt;<a href="mailto:William.S.Kessler@DOMAIN.HIDDEN">William.S.Kessler@xxxxxxxx</a>&gt;,       Jerome Fiechter &lt;<a href="mailto:jfiechter@DOMAIN.HIDDEN">jfiechter@xxxxxxxxxxxxxxx</a>&gt;,       <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="msg00723.html">455B56F8.9070900@noaa.gov</a>&gt;</li>
<li>References: &lt;<a href="msg00722.html">455B3E63.7020408@rsmas.miami.edu</a>&gt; &lt;<a href="msg00723.html">455B56F8.9070900@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
I have revised Ned Cokelet's poly_vector script that some people  
might like better (attached file polyvectors_scaled_arrows_5.jnl). A  
major difference is that the original script leaves the arrowheads  
the same length and just reduces the length of the vector tail for  
small magnitudes, which can result in hard-to-read triangular  
&quot;vectors&quot;; my revision scales the AREA of the entire vector, keeping  
the shape the same. The operation of the script is identical.<br>
<br>
Another version (polyvectors_scaled_arrows_5.jnl) operates similarly  
except that it makes the vector tails just a line. This is something  
like the scattered_vectors script except, um, except, (not sure what  
the functional difference is, but it has the same operation as  
polyvectors_scaled_arrows_5.jnl, so you can switch between them on  
the fly).<br>
<br>
Either version can be color-filled by some other quantity on the same  
grid or &quot;transparent&quot; on top of the background field.<br>
<br>
For example of the output of these scripts, see:<br>
<br>
version 5 for thick vectors:<br>
<a  href="http://www.pmel.noaa.gov/people/kessler/noumea/ORCA/orca-transport-">http://www.pmel.noaa.gov/people/kessler/noumea/ORCA/orca-transport-</a> 
harm-varellipse-plotvec-5c5-2060-fig-aaa.gif<br>
<a  href="http://www.pmel.noaa.gov/people/kessler/noumea/gliders/">http://www.pmel.noaa.gov/people/kessler/noumea/gliders/</a> 
mw9304_adcp_vectors1.gif<br>
<br>
version 6 for line vectors:<br>
<a  href="http://www.pmel.noaa.gov/people/kessler/noumea/gliders/">http://www.pmel.noaa.gov/people/kessler/noumea/gliders/</a> 
mw9304_adcp_vectors1b.gif<br>
<br>
If anyone improves these scripts or finds errors please post it to  
the list or let me know what you did.<br>
<br>
Billy K<br>
<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
William S. Kessler<br>
NOAA / Pacific Marine Environmental Laboratory<br>
7600 Sand Point Way NE<br>
Seattle WA 98115 USA<br>
<br>
william.s.kessler@noaa.gov<br>
Tel: 206-526-6221<br>
Fax: 206-526-6744<br>
Home page: <a  href="http://www.pmel.noaa.gov/people/kessler/">http://www.pmel.noaa.gov/people/kessler/</a><br>
<br>
<br>
<p><strong>Attachment:
<a href="bin00004.bin" ><tt>poly_vectors_scaled_arrows_5.jnl</tt></a></strong><br>
<em>Description:</em> Binary data</p>
<pre>
</pre>
<p><strong>Attachment:
<a href="bin00005.bin" ><tt>poly_vectors_scaled_arrows_6.jnl</tt></a></strong><br>
<em>Description:</em> Binary data</p>
<pre>
On Nov 15, 2006, at 10:05 AM, Ansley Manke wrote:

</pre>
<blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">Hi Jerome,<br>
It looks like the algorithm for drawing the arrow part of the  
vectors breaks down, making the arrow lie along the vector &quot;shaft&quot;  
for some vectors. Why it seems to happen for some of the vectors in  
your plots is not clear. We'll have to take another look at that.<br>
<br>
One workaround for you might be the polygon vector scripts, which  
are available for both rectilinear and curvilinear data. If you  
like the look of these, they use an entirely different method of  
drawing, and should not have the trouble you're seeing.  They also  
have the advantage of the option to color the vectors according to  
some variable field if one wishes. Try running the script<br>
yes? go poly_vector_demo<br>
and see if you like the look. The demo uses a map projection to  
create curvilinear data, but you can use the poly_vectors.jnl  
script directly to plot curvilinear data; the script wants inputs  
containing the x and y coordinates of the vector tails in 2  
dimensions which is exactly what we have in a curvilinear data set.<br>
    ! say we have data with uwnd, vwnd, and curvilinear<br>
    ! coordinate variables lon_array and lat_array<br>
<br>
yes? use curvilinear_dat.nc<br>
<br>
    ! make a vector plot as the &quot;underlay&quot; for the polygon command<br>
    ! This sets up the plot scaling<br>
yes? vector/nokey uwnd, vwnd, lon_array, lat_array<br>
<br>
yes? go poly_vectors.jnl lon_array lat_array uwnd vwnd 5 &quot;arrow&quot;<br>
<br>
   ! These lines are written by the poly_vectors.jnl script:<br>
*** POLY_VECTORS: Issue commands such as follow to plot the vectors  
***<br>
*** POLYGON/OVER/NOLABEL/KEY/NOAXES/LINE PLT_X_ARROW, PLT_Y_ARROW,  
MY_VALUES[J=1:27118] ***<br>
*** SET REGION SAVE ***<br>
<br>
   ! Create a constant variable to color the plots with a single color<br>
yes? let my_values = 1 + 0*ysequence(uwnd)<br>
<br>
yes? poly/pal=blue/over/nolab/key/noax/line  PLT_X_ARROW,  
PLT_Y_ARROW, my_values<br>
Note that the polygon vector plots don't automatically skip some  
vectors for plot readability; the polygon script discusses sub- 
sampling if needed.<br>
<br>
<br>
<br>
Jerome Fiechter wrote:<br>
<blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">Hello Ferreters,<br>
<br>
I just ran into a problem plotting vectors on a curvilinear grid  
where some, but not all, arrows at the end of the vectors are  
missing. Has anybody seen this before or knows how to fix it? Any  
help would be appreciated.<br>
<br>
Thank you,<br>
<br>
Jerome<br>
<br>
<br>
<br>
&lt;mime-attachment.gif&gt;<br>
</blockquote>
-- ~&gt; ~&gt; ~&gt; ~&gt; ~&gt; ~&gt; ~&gt; ~&gt; ~&gt; ~&gt; ~&gt; Ansley Manke, NOAA/PMEL  
ansley.b.manke@noaa.gov 7600 Sand Point Way NE, Seattle WA Phone  
206-526-6246, FAX 206-526-6744<br>
</blockquote><pre>

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00722" href="msg00722.html">[ferret_users] Missing vector arrows</a></strong>
<ul><li><em>From:</em> Jerome Fiechter</li></ul></li>
<li><strong><a name="00723" href="msg00723.html">Re: [ferret_users] Missing vector arrows</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00723.html">Re: [ferret_users] Missing vector arrows</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00725.html">[ferret_users] Fancy line/label colors</a></strong>
</li>

</UL>
<center>[<a href="msg00723.html">Thread Prev</a>][<a href="msg00725.html">Thread Next</a>][<A HREF="threads.html#00724">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
