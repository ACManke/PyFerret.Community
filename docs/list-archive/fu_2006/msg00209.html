<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: [ferret_users] Why does ferret fail to support swapping integraland differential? -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Fri, 24 Mar 2006 11:19:39 &#45;0800 -->
<!--X-Message-Id: 4424464B.4040303@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: ed1da454416e.416eed1da454@wiscmail.wisc.edu -->
<!--X-Reference: 441AF9C3.9050005@noaa.gov -->
<!--X-Reference: eec2acb47e8e.7e8eeec2acb4@wiscmail.wisc.edu -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: [ferret_users] Why does ferret fail to support swapping integraland differential?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00185.html">Thread Prev</a>][<a href="msg00174.html">Thread Next</a>][<A HREF="threads.html#00209">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Why does ferret fail to support swapping integraland differential?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>FENG HE &lt;<a href="mailto:fenghe@DOMAIN.HIDDEN">fenghe@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Why does ferret fail to support swapping integraland differential?</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 24 Mar 2006 11:19:39 -0800</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="msg00178.html">eec2acb47e8e.7e8eeec2acb4@wiscmail.wisc.edu</a>&gt;</li>
<li>References: &lt;<a href="msg00171.html">ed1da454416e.416eed1da454@wiscmail.wisc.edu</a>&gt;&lt;<a href="msg00177.html">441AF9C3.9050005@noaa.gov</a>&gt; &lt;<a href="msg00178.html">eec2acb47e8e.7e8eeec2acb4@wiscmail.wisc.edu</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
<li>User-agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">



Hi Feng,<br>
You could redefine your coordinate axes so their units are not
longitude and latitude, for the purposes of this calculation.&nbsp; Then the
order of the integral and derivitive can be interchanged and you should
get the result you want.<br>
<br>
Ansley<br>
<br>
FENG HE wrote:
<blockquote cite=""
 type="cite">
  <pre wrap="">Hi Ansley 
Thank you for your reply. 
Right now, I understand the curvature of earth gives the difficulty for
this problem. 

I would like to know what is the right way to calculate the
streamfunction using Kessler's script
(<a class="moz-txt-link-freetext" href="">http://ferret.pmel.noaa.gov/Ferret/Mail_Archives/fu_2002/msg00155.html</a>)
Mathematically, the solution (Psi = Int{y0:y}u dy - Int{x_0:x}v(x,y_0)
dx) is perfect, but in Ferret, because it could not support swapping
integral and differential, I could not reproduce v using -d(Psi)/dx
Best regards

Feng He 
Center for Climate Research
Atmospheric and Oceanic Sciences
University of Wisconsin - Madison

----- Original Message -----
From: Ansley Manke <a class="moz-txt-link-rfc2396E" href="">&lt;Ansley.B.Manke@noaa.gov&gt;</a>
Date: Friday, March 17, 2006 10:02 am
Subject: Re: [ferret_users] Why does ferret fail to support swapping
integral and differential?
To: FENG HE <a class="moz-txt-link-rfc2396E" href="">&lt;fenghe@wisc.edu&gt;</a>
Cc: <a class="moz-txt-link-abbreviated" href="">oar.pmel.ferret_users@noaa.gov</a>

  </pre>
  <blockquote type="cite">
    <pre wrap="">Hi Feng,
Thank you for sending a clear example.

This turns out to be because derivatives and integrals on fields in 
latitude and longitude are done in units of meters on the earth, 
rather 
than degrees latitude and longitude. The fact that degrees of 
longitude 
are not a constant length over the earth means that the 
computations are 
not linear. Try this case, where the numbers may be easier to 
interpret.
  yes? use coads_climatology
  yes? set reg/x=1:3/y=51:55/L=1

  yes? let uu_ddb = uu[x=@ddb]
  yes? let uu_ddb_iin = uu_ddb[y=@iin]
  yes? let uu_iin = uu[y=@iin]
  yes? let uu_iin_ddb = uu_iin[x=@ddb]

   ! Define a function with simple integer values

  yes? let uu = x[gx=uwnd] + y[gy=uwnd]
  yes? list uu

   ! Set the axes so they are NOT in units of degrees
   ! longitude and latitude.

  yes? set axis/units=" " coadsx
  yes? set axis/units=" " coadsy

   ! The results are as you would expect.

  yes? list uu_ddb
  yes? list uu_iin
  yes? list uu_ddb_iin
  yes? list uu_iin_ddb



    </pre>
  </blockquote>
  <pre wrap=""><!---->
  </pre>
</blockquote>


</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00171" href="msg00171.html">[ferret_users] Why does ferret fail to support swapping integral and differential?</a></strong>
<ul><li><em>From:</em> FENG HE</li></ul></li>
<li><strong><a name="00177" href="msg00177.html">Re: [ferret_users] Why does ferret fail to support swapping integraland differential?</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00178" href="msg00178.html">Re: [ferret_users] Why does ferret fail to support swapping integraland differential?</a></strong>
<ul><li><em>From:</em> FENG HE</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00185.html">Re: [ferret_users] how to fill using ASCII data</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00174.html">[ferret_users] 3 bad/missing values</a></strong>
</li>

</UL>
<center>[<a href="msg00185.html">Thread Prev</a>][<a href="msg00174.html">Thread Next</a>][<A HREF="threads.html#00209">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
