<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: [ferret_users] How can I produce a time series of JJA averages (orother intervals) from a monthly time series? -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Wed, 20 Sep 2006 10:58:29 &#45;0700 -->
<!--X-Message-Id: 45118143.10603@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: F83C6ACE124F3E4D83B3A90C9CA0922D2E5085@exwa3&#45;per.nexus.csiro.au -->
<!--X-Reference: Pine.LNX.4.58.0609202149590.5020@caos.iisc.ernet.in -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: [ferret_users] How can I produce a time series of JJA averages (orother intervals) from a monthly time series?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00601.html">Thread Prev</a>][<a href="msg00603.html">Thread Next</a>][<A HREF="threads.html#00602">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] How can I produce a time series of JJA averages (orother intervals) from a monthly time series?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Jaison Kurian &lt;<a href="mailto:jaison@DOMAIN.HIDDEN">jaison@xxxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] How can I produce a time series of JJA averages (orother intervals) from a monthly time series?</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 20 Sep 2006 10:58:27 -0700</li>
<li>Cc: <a href="mailto:Yun.Li@DOMAIN.HIDDEN">Yun.Li@xxxxxxxx</a>, <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="msg00601.html">Pine.LNX.4.58.0609202149590.5020@caos.iisc.ernet.in</a>&gt;</li>
<li>References: &lt;<a href="msg00600.html">F83C6ACE124F3E4D83B3A90C9CA0922D2E5085@exwa3-per.nexus.csiro.au</a>&gt;&lt;<a href="msg00601.html">Pine.LNX.4.58.0609202149590.5020@caos.iisc.ernet.in</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
<li>User-agent: Thunderbird 1.5.0.7 (Windows/20060909)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Hi All,<br>
Jaison's exactly right, but in Ferret v6.0 we can control what 
attributes are written to netcdf files -- to remove an attribute that 
would otherwise be written, just issue a CANCEL ATTRIBUTE/OUTPUT command<br>
<br>
  yes? cancel attribute/output  my_var.attributename<br>
<br>
To see all the attributes that a variable has<br>
<br>
  yes? sho attribute/all my_var<br>
<br>
or to see the &quot;output&quot; flags<br>
<br>
  yes? show attribute/all/output my_var<br>
<br>
Ansley<br>
<br>
<br>
<br>
Jaison Kurian wrote:<br>
<blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">Hi Yun,<br>
        Recent versions of Ferret write two attributes for a variable<br>
(when saved to a NetCDF file) called &quot;long_name&quot; and &quot;long_name_mod&quot;<br>
and the extra title you complainted comes from the NetCDF attribute<br>
&quot;long_name_mod&quot;. This information is usefull sometimes and there is 
no need to worry about this. If you want to remove it from the default<br>
plot title, then define a new variable and assign the title you want.<br>
Or if you want to remove it from the NetCDF file, you have to use some<br>
NetCDF editing tools....or write it first to an intermediate file, read<br>
it back and assign a new variable name and title to it, then save to the<br>
final destination file. As far as i know, nothing can be done while<br>
saving data in NetCDF format from Ferret.<br>
<br>
Also please have a look at these mails in the archive:<br>
<br>
<a  href="http://ferret.wrc.noaa.gov/Ferret/Mail_Archives/fu_2004/msg00018.html">http://ferret.wrc.noaa.gov/Ferret/Mail_Archives/fu_2004/msg00018.html</a><br>
<a  href="http://www.ferret.noaa.gov/Ferret/Mail_Archives/fu_2004/msg00667.html">http://www.ferret.noaa.gov/Ferret/Mail_Archives/fu_2004/msg00667.html</a><br>
<br>
Hope this helps,<br>
<br>
Jaison<br>
<br>
On Wed, 20 Sep 2006 Yun.Li@csiro.au wrote:<br>
<br>
  
<br><blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">Hi Jaison,<br>
<br>
 
<br>
Thanks for your help. The example is very useful. I have obtained a<br>
solution to my problem following the lines of the example. 
<br>
 
<br>
A minor question is why the extra item &quot;(X=18.8E:18.8E(378.8),<br>
Y=91.3S:91.3N)&quot; appears in the title of new variable UWND_JJA (see<br>
following lines). 
<br>
 
<br>
yes? use uwnd_jja_mean.nc<br>
<br>
yes? show data<br>
<br>
     currently SET data sets:<br>
<br>
    1&gt; .\uwnd_jja_mean.nc  (default)<br>
<br>
 name     title                             I         J         K<br>
L<br>
<br>
 UWND_JJA JJA Seasonal Mean UWND           1:144     1:73      ...<br>
1:11<br>
<br>
       (X=18.8E:18.8E(378.8), Y=91.3S:91.3N)<br>
<br>
 
<br>
 
<br>
This extra item &quot;(X=18.8E:18.8E(378.8), Y=91.3S:91.3N)&quot; also appeared in<br>
my SLP_JJA case. How can I remove it?<br>
<br>
 
<br>
Best regards,<br>
<br>
 
<br>
Yun<br>
<br>
 
<br>
-----Original Message-----<br>
From: Jaison Kurian [<a  href="mailto:jaison@caos.iisc.ernet.in">mailto:jaison@caos.iisc.ernet.in</a>] 
Sent: Wednesday, 20 September 2006 4:16 PM<br>
To: Li, Yun (CMIS, Floreat)<br>
Cc: Ansley.B.Manke@noaa.gov; oar.pmel.ferret_users@noaa.gov<br>
Subject: RE: [ferret_users] How can I produce a time series of JJA<br>
averages (or other intervals) from a monthly time series?<br>
<br>
 
<br>
Hi Yun,<br>
<br>
        Here is an example using monthly_navy_winds dataset.<br>
<br>
Also see these two mails, which deals with somewhat similar<br>
<br>
questions :<br>
<br>
 
<br>
<a  href="http://ferret.pmel.noaa.gov/Ferret/Mail_Archives/fu_2004/msg00575.html">http://ferret.pmel.noaa.gov/Ferret/Mail_Archives/fu_2004/msg00575.html</a><br>
<br>
<a  href="http://www.ferret.noaa.gov/Ferret/Mail_Archives/fu_2005/msg00018.html">http://www.ferret.noaa.gov/Ferret/Mail_Archives/fu_2005/msg00018.html</a><br>
<br>
 
<br>
Hope this helps...<br>
<br>
 
<br>
Jaison<br>
<br>
 
<br>
 
<br>
!-------Example : JJA seasonal mean from monthly data-----------<br>
<br>
!<br>
<br>
\ cancel mode verify<br>
<br>
! Drawbacks : Data should start at January of a year. Otherwise<br>
<br>
!             &quot;yr_months&quot; variable should be modified accordingly. 
<br>
!<br>
<br>
! monthly navy winds : 16-JAN-1982 to 17-DEC-1992<br>
<br>
!-----------------------------------------------------------<br>
<br>
 
<br>
     use monthly_navy_winds<br>
<br>
 
<br>
     ! create a mask such that only JJA is valid and all other months<br>
<br>
     !    are set to missing value<br>
<br>
 
<br>
     let L_indx    = L[GT=uwnd]<br>
<br>
     let yr_months = L_indx- 12*INT((L_indx-1)/12) 
<br>
     list yr_months<br>
<br>
 
<br>
     ! JJA --&gt;  L is 6-8<br>
<br>
 
<br>
     let mask_other_months = IF yr_months GT 5 AND yr_months LT 9 THEN 1<br>
<br>
     list yr_months, mask_other_months<br>
<br>
 
<br>
     ! Apply the mask<br>
<br>
 
<br>
     let uwnd_masked = uwnd[d=1] * mask_other_months<br>
<br>
     list/x=60/y=10 uwnd_masked 
<br>
 
<br>
     ! Club the JJA values together<br>
<br>
 
<br>
     let uwnd_compr  = COMPRESSL(uwnd_masked)<br>
<br>
     list/x=60/y=10 uwnd_compr<br>
<br>
 
<br>
     ! 1982-1992 --&gt; 11 years --&gt; 11*3=33 data points<br>
<br>
     ! we need to average this data points in pairs of 3 to find the<br>
<br>
     !  seasonal mean. Easy way is to use two abstract axes, one<br>
<br>
     !  with 33 points (ranging from 1-33) and another one with<br>
<br>
     !  11 points (ranging from 2-32) and regrid using @AVE.<br>
<br>
 
<br>
     define axis/t=1:33:1 t33<br>
<br>
     let uwnd_jja_all = uwnd_compr[gt=t33@ASN] 
<br>
     list/x=60/y=10 uwnd_jja_all<br>
<br>
 
<br>
     define axis/t=2:32:3 t11  ! for the exact seasonal mean<br>
<br>
     let uwnd_jja_av  = uwnd_jja_all[gt=t11@AVE]<br>
<br>
 
<br>
     ! now assign a proper yearly time axis defined over 1982-1992<br>
<br>
     !  here we dont need any interpolation but the grid change<br>
<br>
     !  ..so use @ASN regridding<br>
<br>
 
<br>
     define axis/t=1982:1992:1/units=years tyear<br>
<br>
     let uwnd_jja  = uwnd_jja_av[gt=tyear@ASN]<br>
<br>
     list/x=60/y=10 uwnd_jja ! 6.36 7.99 7.12  8.51 9.46 9.32<br>
<br>
     set var/title=&quot;JJA Seasonal Mean UWND&quot;/units=&quot;m/s&quot; uwnd_jja<br>
<br>
     
<br>
     ! save to a NetCDF file for future use<br>
<br>
 
<br>
     ! sp rm -f uwnd_jja_mean.nc<br>
<br>
     ! save/file=uwnd_jja_mean.nc/APPEND uwnd_jja<br>
<br>
 
<br>
!-------------end of example-------------------------------------<br>
<br>
 
<br>
 
<br>
On Wed, 20 Sep 2006 Yun.Li@csiro.au wrote:<br>
<br>
 
<br>
    
<br><blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">Hi Ansley,<br>
      
 
      
I am trying to do &quot;Leaving only JJA SLP data&quot; from a monthly NCEP SLP<br>
      
data &quot;slp.mon.mean.nc&quot;. I have looked at<br>
      
<a  href="http://ferret.pmel.noaa.gov/Ferret/FAQ/analysis/seasonal_masking.html">http://ferret.pmel.noaa.gov/Ferret/FAQ/analysis/seasonal_masking.html</a>.<br>
      
But I could not get a solution because of my poor ferret skills.<br>
      
</blockquote>Could<br>
<br>
    
<br><blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">you please give me a help here?<br>
      
 
      
Thanks,<br>
      
 
      
 
      
Yun<br>
      
 
      
 
      
 
      
  _____  
      
From: Ansley Manke [<a  href="mailto:Ansley.B.Manke@noaa.gov">mailto:Ansley.B.Manke@noaa.gov</a>] 
      
Sent: Wednesday, 20 September 2006 3:02 AM<br>
      
To: Li, Yun (CMIS, Floreat)<br>
      
Cc: oar.pmel.ferret_users@noaa.gov<br>
      
Subject: Re: [ferret_users] How can I produce a time series of JJA<br>
      
averages (or other intervals) from a monthly time series?<br>
      
 
      
Hi Yun,<br>
      
Here are a couple of FAQ's for you to look at - if one of these is the<br>
      
kind of thing you want to do. If you need help applying the ideas,<br>
      
please write back to the users list.<br>
      
This FAQ makes a &quot;seasonal mask&quot; to pick out data from part of each<br>
      
year.  It does the problem with units of time in days; but if you're<br>
      
starting with monthly data you could do a similar thing with months,<br>
      
with JJA being months 6,7,8.  You could combine this with the COMPRESS<br>
      
functions to remove the missing data and leave only the JJA data.<br>
      
<a  href="http://ferret.pmel.noaa.gov/Ferret/FAQ/analysis/seasonal_masking.html">http://ferret.pmel.noaa.gov/Ferret/FAQ/analysis/seasonal_masking.html</a><br>
      
Or, did you have in mind a climatology, averaging all of the JJA data<br>
      
for all years, and returning just one point?  In that case, see<br>
      
&quot;climatology, creating&quot; in the Users Guide, and this FAQ for more<br>
      
examples<br>
      
<a  href="http://ferret.pmel.noaa.gov/Ferret/FAQ/analysis/climatologies.html">http://ferret.pmel.noaa.gov/Ferret/FAQ/analysis/climatologies.html</a><br>
      
Ansley<br>
      
Yun.Li@csiro.au wrote: 
      
Dear Ferreters,<br>
      
 
      
I am trying to produce a seasonal time series (such as JJA time<br>
      
</blockquote>series)<br>
<br>
    
<br><blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">from a monthly time series. 
      
 
      
There is an example from the Ferret FAQ on &quot;How can I produce a time<br>
      
series of annual averages (or other intervals) from a monthly time<br>
      
series?&quot;<br>
      
 
      
</blockquote><a  href="http://ferret.wrc.noaa.gov/Ferret/FAQ/analysis/annual_from_monthly.html">http://ferret.wrc.noaa.gov/Ferret/FAQ/analysis/annual_from_monthly.html</a><br>
<br>
    
<br><blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em"> 
      
I would be most grateful if you can let me know how to produce a<br>
      
seasonal averaged time series (such as June-July-August average time<br>
      
series) from a monthly time series by modifying the code used to<br>
      
</blockquote>produce<br>
<br>
    
<br><blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">annual time series in the above web page, that is,<br>
      
 
      
     yes?  SET DATA monthly_navy_winds<br>
      
     yes?  DEFINE AXIS/EDGES/T0=1-jan-1900/UNITS=days tann82_92 =<br>
      
DAYS1900(X[i=1982:1993:1],1,1)<br>
      
     yes?  PLOT/X=180/Y=0 uwnd<br>
      
     yes?  PLOT/X=180/Y=0/over uwnd[gt=tann82_92@ave]     ! the above<br>
      
plot 
      
 
      
 
      
 
      
Thanks, 
      
 
      
Yun Li<br>
      
CSIRO, Australia<br>
      
</blockquote>    
</blockquote></blockquote>
--<br>
<br>
~&gt;   ~&gt;   ~&gt;   ~&gt;   ~&gt;   ~&gt;   ~&gt;   ~&gt;   ~&gt;   ~&gt;   ~&gt; 
<br>
Ansley Manke, NOAA/PMEL   ansley.b.manke@noaa.gov<br>
7600 Sand Point Way NE, Seattle WA<br>
Phone 206-526-6246,  FAX 206-526-6744<br>
<br>
<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00600" href="msg00600.html">RE: [ferret_users] How can I produce a time series of JJA averages (orother intervals) from a monthly time series?</a></strong>
<ul><li><em>From:</em> Yun.Li</li></ul></li>
<li><strong><a name="00601" href="msg00601.html">RE: [ferret_users] How can I produce a time series of JJA averages (orother intervals) from a monthly time series?</a></strong>
<ul><li><em>From:</em> Jaison Kurian</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00601.html">RE: [ferret_users] How can I produce a time series of JJA averages (orother intervals) from a monthly time series?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00603.html">Re: [ferret_users] How can I produce a time series of JJA averages (orother intervals) from a monthly time series?</a></strong>
</li>

</UL>
<center>[<a href="msg00601.html">Thread Prev</a>][<a href="msg00603.html">Thread Next</a>][<A HREF="threads.html#00602">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
