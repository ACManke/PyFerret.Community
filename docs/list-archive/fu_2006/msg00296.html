<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: [ferret_users] precision issue ? -->
<!--X-From-R13: Dlb Thehr <shehrNunjnvv.rqh> -->
<!--X-Date: Mon, 1 May 2006 16:12:28 &#45;0700 -->
<!--X-Message-Id: 20060501.131218.74750634.furue@hawaii.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 445682D0.40806@ucsd.edu -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: [ferret_users] precision issue ?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00295.html">Thread Prev</a>][<a href="msg00297.html">Thread Next</a>][<A HREF="threads.html#00296">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] precision issue ?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] precision issue ?</strong></li>
<li><strong>From</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 01 May 2006 13:12:18 -1000 (HST)</li>
<li>In-reply-to: &lt;<a href="msg00294.html">445682D0.40806@ucsd.edu</a>&gt;</li>
<li>References: &lt;<a href="msg00294.html">445682D0.40806@ucsd.edu</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Alexa,

| yes? list UTEDDYC[k=1,j=500,i=205]*UTEDDYA[k=1,j=500,i=205]
|             
|          -1.458E+09
| yes? list VTEDDYC[k=1,j=500,i=205]*VTEDDYA[k=1,j=500,i=205]
|             
|           1.458E+09
| yes? list 
|  UTEDDYC[k=1,j=500,i=205]*UTEDDYA[k=1,j=500,i=205]
| +VTEDDYC[k=1,j=500,i=205]*VTEDDYA[k=1,j=500,i=205]
|             
|          -128.0
| 
| so listing the terms individually, they should add up to zero.
| Is this a consequence of ferret operating in single precision ?

I think so.  But, what is your goal?  Do you think that this
precision is not enough for your purpose?

Let's look at the *relative* error:

      128/1.458E9 ~= 8.8E-8 &lt; 1E-7

A single precision variable has 7 significant digits or so.
So, your result is excellent considering how many siginificant
digits you have. 

| This makes me not trust my ferret calculations any more..

It shouldn't.  If your calculation requires more precision,
you need to use another programming language to process your
data before bringing it to Ferret.  But, if you are only
concerned that there might be something wrong with Ferret,
you don't need to worry.

Ryo
---------------------------
P.S.  It's interesting that the error was -128.
I guess it was because the difference between the
two big numbers was in the least signinicant
binary digit (bit).  That would give you
1.000...0 x 10^n = 2^n.  (The left-hand side
is in binary and the right hand-side is in decimal.)
</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00294" href="msg00294.html">[ferret_users] precision issue ?</a></strong>
<ul><li><em>From:</em> Alexa Griesel</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00295.html">Re: [ferret_users] precision issue ?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00297.html">Re: [ferret_users] precision issue ?</a></strong>
</li>

</UL>
<center>[<a href="msg00295.html">Thread Prev</a>][<a href="msg00297.html">Thread Next</a>][<A HREF="threads.html#00296">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
