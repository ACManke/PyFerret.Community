<!-- MHonArc v2.5.4 -->
<!--X-Subject: Re: Building External Functions on an IRIX64 system -->
<!--X-From-R13: Egrir Vnaxva <unaxvaNczry.abnn.tbi> -->
<!--X-Date: Wed, 26 Sep 2001 10:14:58 &#45;0700 (PDT) -->
<!--X-Message-Id: 3BB20BBD.C888600F@pmel.noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 3BB208AD.68526126@whoi.edu -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Building External Functions on an IRIX64 system</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00520.html">Thread Prev</a>][<a href="msg00522.html">Thread Next</a>][<A HREF="threads.html#00521">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Building External Functions on an IRIX64 system</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Cyndy Chandler &lt;<A HREF="mailto:cchandler@DOMAIN.HIDDEN">cchandler@xxxxxxxx</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: Building External Functions on an IRIX64 system</strong></li>
<li><strong>From</strong>: <strong>Steve Hankin &lt;<A HREF="mailto:hankin@DOMAIN.HIDDEN">hankin@xxxxxxxxxxxxx</A>&gt;</strong></li>
<li>Date: Wed, 26 Sep 2001 10:09:17 -0700</li>
<li>Cc: <A HREF="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxx</A>, &quot;Kevin O'Brien&quot; &lt;<A HREF="mailto:kobrien@DOMAIN.HIDDEN">kobrien@xxxxxxxxxxxxx</A>&gt;</li>
<li>References: &lt;<a href="msg00520.html">3BB208AD.68526126@whoi.edu</a>&gt;</li>
<li>Sender: <A HREF="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxxxxxxxx</A></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hi Cyndy,

It turns out that the complex and differing programming interfaces to the
run time libraries that accompany each compiler pretty much require that
external functions be compiled (and linked) with the same compiler that was
used to build Ferret. The first thing that I would suggest is to try your
external function build using f77 instead of f90.

If that doesn't do the trick the folks at GFDL have recently relinked Ferret
with f90 on Irix for just this purpose. You can contact Kevin O'Brien
(kobrien@pmel.noaa.gov) for further information.

    - steve

==============

Cyndy Chandler wrote:

&gt; Help!
&gt; I'm trying to build some Ferret external functions on an SGI system.
&gt;
&gt; % uname -a
&gt; IRIX64 synthesis 6.5 01101245 IP27
&gt; % ferret
&gt;         NOAA/PMEL TMAP
&gt;         Program FERRET
&gt;         Version 5.22 - 08/23/00
&gt;         26-Sep-01 12:52
&gt;
&gt; I'm trying this just to compile one of the Fortran modules:
&gt;        f90 -O -o scat2ddups.o scat2ddups.F
&gt;
&gt; and getting:
&gt; ld32: WARNING 85: definition of __q_sign in
&gt; /usr/lib32/mips4/libfortran.so preempts that definition in
&gt; /usr/lib32/mips4/libftn.so.
&gt; ld32: WARNING 85: definition of s_cat in /usr/lib32/mips4/libfortran.so
&gt; preempts that definition in /usr/lib32/mips4/libftn.so.
&gt; ld32: WARNING 85: definition of b_pad in /usr/lib32/mips4/libfortran.so
&gt; preempts that definition in /usr/lib32/mips4/libftn.so.
&gt; ld32: WARNING 85: definition of s_cmp in /usr/lib32/mips4/libfortran.so
&gt; preempts that definition in /usr/lib32/mips4/libftn.so.
&gt; ld32: WARNING 85: definition of s_copy in /usr/lib32/mips4/libfortran.so
&gt; preempts that definition in /usr/lib32/mips4/libftn.so.
&gt; ld32: Bus error.  Removing output file...
&gt; ld32: INFO 152: Output file removed because of error.
&gt; f90 INTERNAL ERROR:  /usr/lib32/cmplrs/ld32 returned non-zero status 1
&gt; *** Error code 1 (bu21)
&gt;
&gt; I figure the WARNINGS are OK, but
&gt; ld32: Bus error.   ???
&gt;
&gt; I've tried various combinations of ENVar settings, including:
&gt; #    CC='/usr/bin/cc -64'
&gt; #    CPPFLAGS=-DNDEBUG
&gt; #    CFLAGS=-O
&gt; #    FC='/usr/bin/f90 -64'
&gt; #    FFLAGS=-O
&gt; #    F90='/usr/bin/f90 -64'
&gt; #    CXX='/usr/bin/CC -64'
&gt; #    CXXFLAGS=-O
&gt;
&gt; Can anyone help me with this?
&gt; Perhaps if someone had a
&gt; $FERRET_STUFF/ext_func/src/ef_utility/platform_specific_flags.mk.irix64
&gt; type of definition file?  The iris4d version didn't work on my system.
&gt;
&gt; Thank you,
&gt; Cyndy

--
Steve Hankin
NOAA/PMEL, 7600 Sand Point Way NE, Seattle, WA 98115-0070
ph. (206) 526-6080 -- FAX (206) 526-6744



</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00520" href="msg00520.html">Building External Functions on an IRIX64 system</a></strong>
<ul><li><em>From:</em> Cyndy Chandler</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00520.html">Building External Functions on an IRIX64 system</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00522.html">polymarks on 1-D time series?</a></strong>
</li>

</UL>
<center>[<a href="msg00520.html">Thread Prev</a>][<a href="msg00522.html">Thread Next</a>][<A HREF="threads.html#00521">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
