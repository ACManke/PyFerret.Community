<!-- MHonArc v2.6.16 -->
<!--X-Subject: [ferret_users] [Fwd: Reading NetcDF attributes with higher precision with ferret] -->
<!--X-From-R13: Xnpdhrf Eghz <wnpdhrf.fghzNpyf.se> -->
<!--X-Date: Wed, 19 Dec 2007 00:36:56 &#45;0800 -->
<!--X-Message-Id: 4768D824.20203@cls.fr -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[ferret_users] [Fwd: Reading NetcDF attributes with higher precision with ferret]</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00712.html">Thread Prev</a>][<a href="msg00714.html">Thread Next</a>][<A HREF="threads.html#00713">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] [Fwd: Reading NetcDF attributes with higher precision with ferret]</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] [Fwd: Reading NetcDF attributes with higher precision with ferret]</strong></li>
<li><strong>From</strong>: <strong>Jacques Stum &lt;<a href="mailto:jacques.stum@DOMAIN.HIDDEN">jacques.stum@xxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 19 Dec 2007 09:36:52 +0100</li>
<li>Cc: Jacques Stum &lt;<a href="mailto:jstum@DOMAIN.HIDDEN">jstum@xxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Thunderbird 2.0.0.0 (Windows/20070326)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hello Ferret users,

</pre><tt>I resolved my precision problem I mentioned in a previous mail (see 
</tt><tt>hereafter in the forwarded message):
</tt><pre style="margin: 0em;">
The solution is :

</pre><tt>shade/levels=(`sc*125,P=10`,`sc*125,P=10`,1)/title=&quot;cloud mask&quot; 
</tt><tt>&quot;chlorophyll_concentration&quot;
</tt><pre style="margin: 0em;">

</pre><tt>specifying P=10 within the grave accents tells to ferret to consider a 
</tt><tt>precison of 10 digits when calculating sc*125 (sc read from NetCdf 
</tt><tt>attribute scale_factor = 1/84)
</tt><pre style="margin: 0em;">

Regards,

Jacques

--
</pre><tt>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
</tt><tt>JACQUES STUM                                  	     ~~	  E-mail	 :  jstum@xxxxxx	
</tt><pre style="margin: 0em;">
Collecte Localisation Satellite,
8-10 rue Herm&#xE8;s,                                 	     ~~	  Phone   :  33 5 61 39 48 12
Parc Technologique du Canal,
31526 Ramonville Saint-Agne, France	     ~~    	  Fax	 :  33 5 61 39 37 82
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

</pre><blockquote><small>---&nbsp;<i>Begin&nbsp;Message</i>&nbsp;---</small>
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Reading NetcDF attributes with higher precision with ferret</strong></li>
<li><strong>From</strong>: <strong>Jacques Stum &lt;<a href="mailto:jacques.stum@DOMAIN.HIDDEN">jacques.stum@xxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 13 Dec 2007 18:23:07 +0100</li>
<li>Cc: Jacques Stum &lt;<a href="mailto:jstum@DOMAIN.HIDDEN">jstum@xxxxxx</a>&gt;</li>
<li>User-agent: Thunderbird 2.0.0.0 (Windows/20070326)</li>
</ul>
<pre style="margin: 0em;">
Hello Ferret users,

</pre><tt>I have a precision problem to plot a particular value of my variable 
</tt><tt>&quot;chlorophyll_concentration&quot; with ferret :
</tt><tt>I read this variable from a NetCDF file, which contains a lat-lon grid 
</tt><tt>of 84*log(chlorophyll_concentration) stored on a byte.
</tt><pre style="margin: 0em;">

This is the result of &quot;show data&quot; :

</pre><tt>name     title                                        I              
</tt><tt>J         K         L
</tt><pre style="margin: 0em;">
CHLOROPHYLL_CONCENTRATION
         log(chlorophyll-a in mg/m3)      1:2627    1:2100    ...       ...


I have set _FillValue=127 in the NetCDF file
</pre><tt>I have also set two additional &quot;out of range&quot; values  :126 to describe a 
</tt><tt>land mask, and 125 to describe the cloud mask
</tt><tt>A scale factor = 1/84 is set in the NetCDF file, so ferret displays the 
</tt><tt>log of chlorophyll.
</tt><pre style="margin: 0em;">

! reading the scale factor
LET sc = chlorophyll_concentration.scale_factor
</pre><tt>list sc outputs at the screen 0.0190 (instead of 0.011904762 which is 
</tt><tt>the more exact value of 1/84)
</tt><pre style="margin: 0em;">

</pre><tt>shade/levels=(`sc*126`,`sc*126`,1)/title=&quot;land mask&quot; 
</tt><tt>&quot;chlorophyll_concentration&quot; gives a correct result : (maybe because 
</tt><tt>sc*126 = 1.50000000)
</tt><tt>The land mask value appear in pink, with only one pink colour on the 
</tt><tt>palette, with lower boundary = 1.5 and upper boundary = 1.5
</tt><pre style="margin: 0em;">

</pre><tt>shade/levels=(`sc*125`,`sc*125`,1)/title=&quot;cloud mask&quot; 
</tt><tt>&quot;chlorophyll_concentration&quot; does not work (no cloud values displayed), 
</tt><tt>maybe because sc*125 = 1.4888095238 ?
</tt><tt>The palette on the right is with only one pink colour on the palette, 
</tt><tt>with lower boundary = 1.49 and upper boundary = 1.49
</tt><pre style="margin: 0em;">


Of course, I have checked that values = 125 are present in my variable !

</pre><tt>Is there a way to improve the precision of the scale factor read with 
</tt><tt>ferret, or doing with other means ?
</tt><pre style="margin: 0em;">

Thank you for your help

Jacques



--
</pre><tt>~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~  
</tt><tt>JACQUES STUM                                  	     ~~	  E-mail	 :  jstum@xxxxxx	
</tt><pre style="margin: 0em;">
Collecte Localisation Satellite,
8-10 rue Herm&#xE8;s,                                 	     ~~	  Phone   :  33 5 61 39 48 12
Parc Technologique du Canal,
31526 Ramonville Saint-Agne, France	     ~~    	  Fax	 :  33 5 61 39 37 82
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


</pre><br><small>---&nbsp;<i>End Message</i>&nbsp;---</small></blockquote>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00712.html">[ferret_users] Ocean vertical velocity calculation in z-coordinate</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00714.html">[ferret_users] Analysis on Irregular Regions</a></strong>
</li>

</UL>
<center>[<a href="msg00712.html">Thread Prev</a>][<a href="msg00714.html">Thread Next</a>][<A HREF="threads.html#00713">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
