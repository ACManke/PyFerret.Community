<!-- MHonArc v2.6.16 -->
<!--X-Subject: RE: [ferret_users] integration along density axis -->
<!--X-From-R13: Xnpyla Pebja <wnpyla.oebjaNlnyr.rqh> -->
<!--X-Date: Wed, 5 Dec 2007 17:01:15 &#45;0800 -->
<!--X-Message-Id: 000801c837a3$77f019c0$6401a8c0@geology.yale.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 208849.5502.qm@web53703.mail.re2.yahoo.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RE: [ferret_users] integration along density axis</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00670.html">Thread Prev</a>][<a href="msg00672.html">Thread Next</a>][<A HREF="threads.html#00671">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [ferret_users] integration along density axis</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;'yangxing zheng'&quot; &lt;<a href="mailto:yangxingz@DOMAIN.HIDDEN">yangxingz@xxxxxxxxx</a>&gt;, <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>RE: [ferret_users] integration along density axis</strong></li>
<li><strong>From</strong>: <strong>Jaclyn Brown &lt;<a href="mailto:jaclyn.brown@DOMAIN.HIDDEN">jaclyn.brown@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 05 Dec 2007 20:01:00 -0500</li>
<li>In-reply-to: &lt;<a href="mailto:208849.5502.qm@DOMAIN.HIDDEN">208849.5502.qm@xxxxxxxxxxxxxxxxxxxxxxxxxxx</a>&gt;</li>
<li>Organization: Yale University</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>Thread-index: Acg3oqaju0SPcalpTheIGC0OpHPthwAAF+ag</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi,
I did something similar by using @iin. 
Firstly, do an indefinite integral from the surface downwards. Then convert
to sigma coordinates using zaxreplace as you describe. Now the value at
z=1027 is the integral down to 1027 and the value at 1028 is the integral
down to 1028. To find the integral between the two - simply subtract the
value at 1027 from the value at 1028.
Jaci Brown

-----Original Message-----
From: owner-ferret_users@xxxxxxxx [<a  rel="nofollow" href="mailto:owner-ferret_users@xxxxxxxx">mailto:owner-ferret_users@xxxxxxxx</a>] On
Behalf Of yangxing zheng
Sent: Wednesday, December 05, 2007 6:55 PM
To: ferret_users@xxxxxxxx
Subject: [ferret_users] integration along density axis

Hi,

    I have a question about integration between
density surfaces. For instance, if I want to calculate
the volume flux of ocean water between density
surfaces (i.e., 1027 and 1028), I may have to convert
the data in z (depth, meters) coordinate to the data
in sigma coordinate by using function ZAXREPLACE, then
get the data in sigma coordinate, then do integration
between density surface 1027 and 1028, however, the
resulting calculation bring a unit other than m^3/s.
The script for the above calculation follows:

    set data dataset.cdf
    
    let sigma = rho_un(salt[d=1],temp[d=1],0) - 1000
    define axis/z=21:29:0.05 axden

    let vonsigma = zaxreplace(v[d=1],sigma,z[gz=axden]
    
    set region/x=110w:20w/y=50n/l=1
    let volume_flux = vonsigma[x=@din,z=28:29@din]  !
Apparently the unit is not m^3/s but kilogram/(m*s)

    However, I want the unit of volume flux to be
ordinary, i.e., m^3/s, how can I do this?


    Other people may suggest to use density mask
method, like
    let v_new = if sigma ge 28 and sigma le 29 then v
else (0-(1e+34))
   let volume_flux = v_new[x=@din,z=@din]

    However, we do not know the error based on the
mask method for the grid datasets.

    Thank you for your attention and look forward to
hearing from you.

    Yangxing
    


 
____________________________________________________________________________
________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.
<a  rel="nofollow" href="http://tools.search.yahoo.com/newsearch/category.php?category=shopping">http://tools.search.yahoo.com/newsearch/category.php?category=shopping</a>



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00670" href="msg00670.html">[ferret_users] integration along density axis</a></strong>
<ul><li><em>From:</em> yangxing zheng</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00670.html">[ferret_users] integration along density axis</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00672.html">[ferret_users] How to create mc file for non-successive data in time</a></strong>
</li>

</UL>
<center>[<a href="msg00670.html">Thread Prev</a>][<a href="msg00672.html">Thread Next</a>][<A HREF="threads.html#00671">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
