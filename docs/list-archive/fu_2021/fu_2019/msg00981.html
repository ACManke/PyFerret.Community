<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [EXTERNAL] [ferret_users] minimum range for @DIN ? -->
<!--X-From-R13: Jvnblh Pnv <konv1Nhapp.rqh> -->
<!--X-Date: Thu, 22 Jul 2021 15:35:15 &#45;0700 -->
<!--X-Message-Id: CAKE4FWp&#45;EyT_tzNwTVbxOz+1YpNKO9Kj2mfkmps49WKzuq4Gnw@mail.gmail.com -->
<!--X-Content-Type: multipart/related -->
<!--X-Reference: CAEwQpaLJEzvabe=7h=NRgSjJ1&#45;Pgb=JxRDq4YXY70NBYLQus1g@mail.gmail.com -->
<!--X-Reference: CAKE4FWp+gb+XdFBkxgLuE5ZJsQWsEWw1yrbckHVgv3Mz4DcJyw@mail.gmail.com -->
<!--X-Reference: CAEwQpa+hssedHNFfPuAcR0ZHej7WW9Pb8TKKDhdhh+gfCXENtQ@mail.gmail.com -->
<!--X-Derived: png7JLruMsQ0_.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00980.html">Thread Prev</a>][<a href="msg00982.html">Thread Next</a>][<A HREF="threads.html#00981">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</strong></li>
<li><strong>From</strong>: <strong>Xiaoyu Bai &lt;<a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 22 Jul 2021 18:34:29 -0400</li>
<li>Arc-authentication-results: i=4; mx.google.com;       dkim=pass header.i=@uncc.edu header.s=google header.b=g8I+LSDI;       arc=pass (i=2 dkim=pass dkdomain=uncc.edu);       spf=pass (google.com: domain of <a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a> designates 209.85.222.198 as permitted sender) smtp.mailfrom=<a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a></li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@uncc.edu header.s=google header.b=g8I+LSDI;       arc=pass (i=2 dkim=pass dkdomain=uncc.edu);       spf=pass (google.com: domain of <a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a> designates 209.85.222.198 as permitted sender) smtp.mailfrom=<a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@uncc.edu header.s=google header.b=g8I+LSDI;       arc=pass (i=1 spf=pass spfdomain=uncc.edu dkim=pass dkdomain=uncc.edu dmarc=pass fromdomain=uncc.edu);       spf=softfail (google.com: domain of transitioning <a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a> does not designate 65.153.203.168 as permitted sender) smtp.mailfrom=<a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@uncc.edu header.s=google header.b=g8I+LSDI;       spf=pass (google.com: domain of <a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:xbai1@DOMAIN.HIDDEN">xbai1@xxxxxxxx</a>;       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=uncc.edu</li>
<li>Arc-message-signature: i=4; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:sender:dkim-signature;        bh=npar6jTmxjVxD9uTRCrL4akI6Oc8CbHuxiQrhA23leY=;        b=VcwDMeEbDLgEmmqOiAMIbEDlEbmrhs2xf74Zn57mpNWTlB7w8xlGropnvMwCOevEHD         R0Rsbg4j944KtiVsFSKA4J6XKMyKN1cA55cT1S+g1d3yajY3+k/HsEYWussKY4DvZUqX         uR+ung/SJztAu2mWbq3thKJ7ZzdpQ415rm8fIZVOUQwvET9lu3ZAVAxeD9OoBnLLmKS8         afwdvVR1g0xx/DajRjoBd4MJQH6RWPG8g2CypKomb+xbfx7XHbxQ1yvPqWvaO6UMg5K6         8f6I7f3UuM4+E93+g72/A0cTq8mXmQrtnDBMsA0IInm16+8kq4hHJy5P5GtVoxopLY6f         W+Wg==</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:cc:to:subject:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=npar6jTmxjVxD9uTRCrL4akI6Oc8CbHuxiQrhA23leY=;        b=Hx2n/pJTtEqv06L89dxgHhn+vqU15DDQ2UaYsco2oUeOymAxwSXOoN5d6qn5IwztFX         fLUCPudBnu73X7TDv6f8FLY8fnGk9y7/DnAL/ZE4Ia4c5YacKRAtIzAU0cNMe7WHkYTL         d2iU7XJ1G771aSRf1KAy5FW5vnyMCd4rL2wrNSyEO7turp+KdFFkTYacCGuvIAsCZ+sP         iMuo8Dy6VJa3b7gZGoC2h4HRW2FjPTj0s4dWMroT8B3Zxu+VQDyPUUqV9Y4Xas6o5HvJ         0QmeH03/IzN9b+NtUyxjhmIbcGMnS+IZUPCzYGCBlGqYdQ5eKy4hrXZF3Gs63WqeRFUT         qD4g==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=npar6jTmxjVxD9uTRCrL4akI6Oc8CbHuxiQrhA23leY=;        b=WoFiJEIIEHHD4w6SZPHMeqyBDhNaWx9/+LPncXFK3KWwof09jYNcv2CyJpt4OKbzmv         T3m1lRhtCXHFxPl4XC1vWrf6cHfa8SuAAuBGSWNkZvsVqJxoJ2fg2MFyG/fXqWj1Nmyp         L9b3gQOq48vOft3cxk5ncY3nbcGts23yZbi04fukRnirmLlQ7R6i47aSIRTvY6AUcbyj         P5p4DZFz5Ln2xOWYxrXfokNoWfOEfcabRBCd+cIm/vggbLvhIKuuMpthPY/eMBsOUiKH         2sR2jerSRBpW5VVdYSg4VFbBvioKvPBavwNxtgPl+uLufs5SMxfSTmwuE8WQ+nc2tR7L         xrqg==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:in-reply-to:references         :mime-version:dkim-signature;        bh=npar6jTmxjVxD9uTRCrL4akI6Oc8CbHuxiQrhA23leY=;        b=twkAVs0L5q4cLX5WDTF1XsDObV6mzdVu1EBfxKY97DJ82VWOhfToeFXZlqx7C71Hui         63TRBzmGePTzqpxIRk9O7elNRY/uEu6qblVKhErq6gTAkm94dT6BW3uWVRkl/yKvgCDI         KkOlvHVa+OvSiMu+DQsvEr+jtC9JHmC6LoWiJhsMVhwS1GMrid8dXczQd6Q4GJoMP+oa         AvL5JN+34+9JhhUW7P5zikx0pWghGO/UJvO/p35iq+d/fwL1Cl3tLTv2jsttsUP3cMuH         ytaJY4wA2xgXCd6ham2GxN3+e5omjUVwpAHENCaeLo9Twzk3va/4ZRwF33qCMMrEQJEl         2KZA==</li>
<li>Arc-seal: i=4; a=rsa-sha256; t=1626993314; cv=pass;        d=google.com; s=arc-20160816;        b=FBwo1tIynChD4RmB5bMoSHKm/ssjpI44d1HLVPvtb8yUq4qCjmzFHDphH+b//0x3a2         7hk5Tev6kCrrDdwPtfzB5F7ihekRfgF3/bQj/2FKFH6z6WceLZ+ZfiwqHR0sP2AhgNES         JXfnGXWbG4FFFsFP2kJdw2U6uCK1PC5RhOe7XQ4a4J4M4VfPia9f+klbmlUzukgWH8BX         1oJJCsaCddvzcWRhqqXs7nmdPQ2xCvYQGxbDgbQJQhOurdhiP8DZ/SitkTgY6lzRclxp         30/NEcDgowHqTxXGD4x1U9vyLyxbD61zpJEZBYSwUQu2F1LRZ7KdRfOi8CPzZCWX0S4H         kIHA==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1626993313; cv=pass;        d=google.com; s=arc-20160816;        b=oW4kKxAkW4HTtKxcBi6/8TVUEaDcDWnwvpTo7sDoVf5rZWIsRE/THrhd3nmmnUK4CL         S2jBk5xWy3TAZwEgKzPTHQf+TIVa208DX78fShRhZcdsrpWTuFrvwB7lIx+p9AUCFRdD         QJyrCIX/xybCWLh8UDMJFeVqfcCiPiBl6N0DqCt4uRyGbDIFibFe+8ZWyd1jjytVUeux         usT4nLZNBcxFc8xXoBQCjpKwl4C2gBe9l7c7tXi9HvndKTWtB2vgz/4ACftUnv1Na9LS         R50UsFa7Sn5llWgqywcMJ6gdnBWpYP7FobCioRwJFPk5V7Mg36YItPrTy77uGW5yXzDU         JsSw==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1626993309; cv=pass;        d=google.com; s=arc-20160816;        b=Hadu+Z+WjZ9pmIIlFXgQQwP9RkhU4XvVfVkXQfI9+zRlW8O5Fp/4VKh0aIkQ7rFcm3         lq31xtSwA0wQ7vYgszsa/8zELIfs6qTalH1p2KYF0zE+N2MPEIfNTEZFVYh38X0qYI4p         13Ubq+JiMoUXyjCS4d0SSD6nHEIW5V0ih9djtkIasM3jcGBp3ECu1GVNd+Tt+junPeK0         3gZe6pq/rYYZmEOMYqTlDuHIzibzNKUOwYofeTLjSlvXkeIUre15uHyIpIDpmgbnDi8L         KwiQMx54UHRVCd89tmU+QhJoxte3GUj7BCRrTXkfdEG+9Rlaj1NLkQ5SIz6sLlXv/sz+         Tf4g==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1626993307; cv=none;        d=google.com; s=arc-20160816;        b=k1t9Hv27c1fE+7Ibt5eCm3HW0zy15C7hLrWgiLOxpvR+tE2HNnzFfJw6yYaJoyseUp         7xX87qXGXN/18RQTtcXYuqQBJ8BLkxLd83XHwCsvWY6EhvNSUIEO3xYp7Qr8c3PdKbRB         r5mToF0CCQxqzLb1vdlKE4Yu28nu57ymN1bQwI37cYwkrTEpK16ZjDHUgmwWJxCwtige         l0aRECb2NvFs1sM4Em1jF/rPAFiRweMPIQ1jn8pBa8JsgBWPVW/mljuMVTf2NSiCLU/s         kRul8XkRx8qkFILgzl8W/4ogqwTCtDhL0JeYqwjdCHu2Hgbt7w3HzGvL8bFy8h5Bwb/u         DjMA==</li>
<li>Cc: ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:mime-version:references:in-reply-to:from:date:subject:to:cc         :message-id:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive;        bh=npar6jTmxjVxD9uTRCrL4akI6Oc8CbHuxiQrhA23leY=;        b=cLmKCXkCHaPF6O7pRbBAdiLq/IuvNLRogs4gkcM8VGJmPsJGwPILY5v4oac7M4Ccw3         ggmL0qPC2iqyMNK0VxStrh4+jY0lhH+YgTDNfQ0C+gM0aGMuuTVQ1Q7eihLQhTbADVwZ         TfgV8Klh2Xtyy/fjLpqabFXjW9cEKna9ZzFoKRPWBKcbd5GfsYQLVyU7XlE671/D9Mf2         MLqI2bEECots99Ovcs/kzbPXi+QhCz0Ig5sKb1RSLo1EGUTYHzZ/Tq+w9kPvCzQKr7lL         s4DF0BTZUrVhnojI0VFV5ozfRg8plioxcQzErsurlzRIV1T8wU2/jhNc/TkZLU06ay5O         IlWg==</li>
<li>In-reply-to: &lt;<a href="msg00980.html">CAEwQpa+hssedHNFfPuAcR0ZHej7WW9Pb8TKKDhdhh+gfCXENtQ@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAEwQpaLJEzvabe=7h=NRgSjJ1-Pgb=JxRDq4YXY70NBYLQus1g@mail.gmail.com&gt; &lt;<a href="msg00979.html">CAKE4FWp+gb+XdFBkxgLuE5ZJsQWsEWw1yrbckHVgv3Mz4DcJyw@mail.gmail.com</a>&gt; &lt;<a href="msg00980.html">CAEwQpa+hssedHNFfPuAcR0ZHej7WW9Pb8TKKDhdhh+gfCXENtQ@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr">I see! By the way, do you know how to fix the&#xA0;@DIN cannot be applied correctly after you subtract your data from&#xA0;@AVE?&#xA0;<br><div><br></div><div>I need to calculate the mass transported by Hadley cells. So my v-wind must be zero when integrating through the whole column. Usually, it can be solved by subtracting the average value of v-wind. During my process of&#xA0;subtracting the average&#xA0;values, I found if you subtract the average value, pyferret does NOT treat your new values as &quot;spatial data&quot; (I don&#39;t know how to describe&#xA0;it). For example,&#xA0;</div><div><br></div><div><font face="monospace">set data coads_climatology</font></div><div><font face="monospace">let test=SST[L=8]&#xA0; &#xA0; &#xA0; &#xA0; ! just a random month<br></font></div><div><font face="monospace">let mean=test[I=@AVE,J=@AVE]<br></font></div><div><font face="monospace">list mean<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;VARIABLE : TEST[I=@AVE,J=@AVE]<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;FILENAME : coads_climatology.cdf<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;FILEPATH : /home/xbai1/miniconda2/envs/FERRET/share/fer_dsets/data/<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LONGITUDE: 20E to 20E(380)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE : 90S to 90N<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;TIME &#xA0; &#xA0; : 16-AUG 07:23<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 21.16</font><br></div><div><br></div><div>which means the average value is 21.16 Celsius. Then I do:</div><div><br></div><div><font face="monospace">let comp1=test-mean<br></font></div><div><font face="monospace">let comp2=test-21.16<br></font></div><div><font face="monospace">let bad_din=comp1[I=@DIN,J=@DIN]<br></font></div><div><font face="monospace">let good_din=comp2[I=@DIN,J=@DIN]<br></font></div><div><font face="monospace">list bad_din, good_din<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;DATA SET: /home/xbai1/miniconda2/envs/FERRET/share/fer_dsets/data/coads_climatology.cdf<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LONGITUDE: 20E to 20E(380)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE: 90S to 90N<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;TIME: 16-AUG 07:23<br>&#xA0;Column &#xA0;1: BAD_DIN is COMP1[I=@DIN,J=@DIN]<br>&#xA0;Column &#xA0;2: GOOD_DIN is COMP2[I=@DIN,J=@DIN]<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;BAD_DIN &#xA0; GOOD_DIN<br>I / *: &#xA0; &#xA0; <span style="background-color:rgb(0,255,0)">-91.65</span> <span style="background-color:rgb(0,255,255)">-2.954E+11</span></font><br></div><div><br></div><div>To me, the E+11 value makes more sense considering we are integrating over a large area. Earlier, we thought this problem was a bug in Show Grid and it was fixed. (<a rel="nofollow" href="https://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2019/msg00495.html">https://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2019/msg00495.html</a>). However, this problem was not solved after the show grid bug was fixed:</div><div><br></div><div>&#xA0;<font face="monospace">show grid comp1, comp2<br>&#xA0; &#xA0; GRID GSQ1<br>&#xA0;name &#xA0; &#xA0; &#xA0; axis &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;# pts &#xA0; start &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;end &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; subset<br>&#xA0;COADSX &#xA0; &#xA0;LONGITUDE &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;180mr &#xA0; 21E &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;19E(379) &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;full<br>&#xA0;COADSY &#xA0; &#xA0;LATITUDE &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;90 r &#xA0; 89S &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;89N &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; full<br>&#xA0;normal &#xA0; &#xA0;Z<br>&#xA0;TIME &#xA0; &#xA0; &#xA0;TIME &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;12mr &#xA0; 16-JAN 06:00 &#xA0; &#xA0; &#xA0; &#xA0; 16-DEC 01:20 &#xA0; &#xA0; &#xA0; &#xA0;1 pt<br>&#xA0; &#xA0; GRID GSQ1<br>&#xA0;name &#xA0; &#xA0; &#xA0; axis &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;# pts &#xA0; start &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;end &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; subset<br>&#xA0;COADSX &#xA0; &#xA0;LONGITUDE &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;180mr &#xA0; 21E &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;19E(379) &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;full<br>&#xA0;COADSY &#xA0; &#xA0;LATITUDE &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;90 r &#xA0; 89S &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;89N &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; full<br>&#xA0;normal &#xA0; &#xA0;Z<br>&#xA0;TIME &#xA0; &#xA0; &#xA0;TIME &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;12mr &#xA0; 16-JAN 06:00 &#xA0; &#xA0; &#xA0; &#xA0; 16-DEC 01:20 &#xA0; &#xA0; &#xA0; &#xA0;1 pt</font><br></div><div><br></div><div>Looks like to me, the new value after subtracting&#xA0;@AVE was treated like pure numeric values. But it&#39;s not&#xA0;@SUM type of calculation.&#xA0;</div><div><br></div><div><font face="monospace">list comp1[I=@SUM,J=@SUM], comp2[I=@SUM,J=@SUM]<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;DATA SET: /home/xbai1/miniconda2/envs/FERRET/share/fer_dsets/data/coads_climatology.cdf<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LONGITUDE: 20E to 20E(380) (XY summed)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE: 90S to 90N (XY summed)<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;TIME: 16-AUG 07:23<br>&#xA0;Column &#xA0;1: COMP1 is TEST-MEAN<br>&#xA0;Column &#xA0;2: COMP2 is TEST-21.16<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;COMP1 &#xA0; COMP2<br>I / *: &#xA0; &#xA0;-17139. -17147.</font><br></div><div><br></div><div>I am puzzled by this issue.</div><div><br></div><div>Thank you very much and stay healthy,</div><div><br></div><div>Xiaoyu</div><div>&#xA0;</div><div><br></div><div>&#xA0;&#xA0;</div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Tue, Jul 20, 2021 at 11:06 PM Ryo Furue &lt;<a rel="nofollow" href="mailto:furue@xxxxxxxxxx">furue@xxxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr"><div>Hi Xiayu,</div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Wed, Jul 21, 2021 at 6:42 AM Xiaoyu Bai &lt;<a rel="nofollow" href="mailto:xbai1@xxxxxxxx" target="_blank">xbai1@xxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr">I usually use at least two grids. My understanding is that&#xA0;@DDN [<font color="#ff0000">@DIN</font>] needs to apply a weight, most of the time is the cosine effect. If there is only one grid, pyferret will possibly only consider the one grid&#39;s value only.</div></blockquote><div><br></div><div>Yes, but the point is that the weight is continuous.&#xA0; Suppose that our SST is defined at lat = 1&#xB0;, 3&#xB0;, 5&#xB0;, . . . at an interval of 2&#xB0; .&#xA0; Then,</div><div><br></div><div>SST[y=0:yhi@DIN]</div><div><br></div><div>is a continuous function of yhi.&#xA0; Below is a figure showing this function (when SST is uniformly 1). The horizontal axis of the plot is yhi.&#xA0; If you increase yhi slightly, the integral increases slightly because Ferret adjusts the weight.</div><div><br></div><div>The problem is that Ferret seems to stop adjusting the weight when yhi &lt; 2&#xB0; as the figure shows.&#xA0; In particular, one would expect that SST[y=<font color="#ff0000">0:0</font>@DIN] is zero.</div><div><br></div><div>This can be a source of error when you use Ferret programmatically&#xA0;to calculate integrals.&#xA0; For example, I can imagine a calculation like this</div><div><br></div><div>repeat/range=1:`iend`/name=ii (</div><div>&#xA0; &#xA0;let yhi = curvey[i=`ii`]<br></div><div>&#xA0; &#xA0;let xx = xvals[i=`ii`]</div><div>&#xA0; &#xA0;list/append/nohead/file=integral.txt/format=(G0,1X,G0) xx, SST[i=`ii`, y=0:`yhi`@DIN]<br></div><div>)</div><div><br></div><div>to calculate the integral of SST from the equator to a curve&#xA0; (x, curvey(x) ) as a function of x.</div><div><br></div><div>Regards,</div><div><br></div><div>Ryo</div><div><br></div><div>-------------------------------------------------</div><div>! --- script to generate the data for the plot below ---</div>set data coads_climatology &#xA0;! grid spacing is 2&#xB0;<br><div>let _ones_ = 1 + 0*y[gy=SST]</div><div>repeat/range=0:40/name=yy (let yhi=`yy/4`; let val = ones[y=0:`yhi`@DIN]; say/quiet `yhi` `val`)<br></div><div><br></div><img src="png7JLruMsQ0_.png" alt="ferret-din.png" width="472" height="283"><br><div>&#xA0;</div><div><br></div><div><br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex"><div dir="ltr">&#xA0;&#xA0;<div><br></div><div>Stay healthy,</div><div><br></div><div>Xiaoyu</div></div><br><div class="gmail_quote"><div dir="ltr" class="gmail_attr">On Thu, Jul 15, 2021 at 10:02 PM Ryo Furue &lt;<a rel="nofollow" href="mailto:furue@xxxxxxxxxx" target="_blank">furue@xxxxxxxxxx</a>&gt; wrote:<br></div><blockquote class="gmail_quote" style="margin:0px 0px 0px 0.8ex;border-left:1px solid rgb(204,204,204);padding-left:1ex">[<strong><font color="red">Caution</font></strong>: Email from External Sender. Do not click or open links or attachments unless you know this sender.]<br><span>&#xA0;</span><div dir="ltr">Dear Ferreters,<div><br></div><div>Does @DIN have a minimum range?&#xA0; It seems that it stops shrinking when the integration range shrinks below the gridsize.</div><div><br></div><div>For a test, I define a variable which is always one and print the values of the integration over y=0:ylim, where ylim = 0, 0.5, 1, 1.5, . . . .</div><div><br></div><div><font face="monospace">set data coads_climatology&#xA0; ! grid spacing is 2&#xB0;<br>let _ones_ = 1 + 0*y[gy=SST]<br></font></div><div><font face="monospace">repeat/range=0:8/name=yy (let val = ones[y=0:`yy/2`@DIN]; say `val`)<br></font></div><div><br></div><div>I find that the value of the integral is constant when ylim &lt;=&#xA0;dely and then it starts to linearly grow after that.</div><div><br></div><div>Perhaps this isn&#39;t intended?</div><div><br></div><div>Best regards,</div><div><br></div><div>Ryo</div></div>
</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr"><div dir="ltr">Xiaoyu</div></div>
</blockquote></div></div>
</blockquote></div><br clear="all"><div><br></div>-- <br><div dir="ltr" class="gmail_signature"><div dir="ltr">Xiaoyu</div></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00982" href="msg00982.html">Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00974" href="msg00974.html">[ferret_users] minimum range for @DIN ?</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00979" href="msg00979.html">Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</a></strong>
<ul><li><em>From:</em> Xiaoyu Bai</li></ul></li>
<li><strong><a name="00980" href="msg00980.html">Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00980.html">Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00982.html">Re: [EXTERNAL] [ferret_users] minimum range for @DIN ?</a></strong>
</li>

</UL>
<center>[<a href="msg00980.html">Thread Prev</a>][<a href="msg00982.html">Thread Next</a>][<A HREF="threads.html#00981">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
