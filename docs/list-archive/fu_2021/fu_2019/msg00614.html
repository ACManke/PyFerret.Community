<!-- MHonArc v2.6.18 -->
<!--X-Subject: [ferret_users] Problems with netcdf output and zaxreplace -->
<!--X-From-R13: Uvbetvb Uenssvab <t.tenssvabNgvz.vg> -->
<!--X-Date: Thu, 16 Apr 2020 07:19:46 &#45;0700 -->
<!--X-Message-Id: 171835bf252.g.graffino@tim.it -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Derived: cdfs5bzdRrcKv.cdf -->
<!--X-Derived: binWwHxM_Oc98.bin -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[ferret_users] Problems with netcdf output and zaxreplace</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00609.html">Thread Prev</a>][<a href="msg00615.html">Thread Next</a>][<A HREF="threads.html#00614">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] Problems with netcdf output and zaxreplace</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] Problems with netcdf output and zaxreplace</strong></li>
<li><strong>From</strong>: <strong>Giorgio Graffino &lt;<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 16 Apr 2020 16:19:33 +0200 (CEST)</li>
<li>Arc-authentication-results: i=3; mx.google.com;       arc=pass (i=2);       spf=softfail (google.com: domain of transitioning <a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a> does not designate 209.85.222.199 as permitted sender) smtp.mailfrom=<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       arc=pass (i=1 spf=pass spfdomain=tim.it);       spf=softfail (google.com: domain of transitioning <a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a> does not designate 65.153.203.174 as permitted sender) smtp.mailfrom=<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       spf=pass (google.com: domain of <a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a> designates 82.57.200.119 as permitted sender) smtp.mailfrom=<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a></li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:mime-version:subject:to:reply-to:from:date;        bh=Z+qoorL3olTcXHtT2Emg0QOY34/mU30Sx1KO9Uz09Ww=;        b=tlkMnQ21S9sL/DrP+qjc4X9uIHAPGOUYaeumX1CVzvXd7vU95YEB+QyMaf7lhb875h         ir7ZuX98P2p/Vnj7ytkTiRaSALA5r0mlGh44Q2OKaGjEcc0kgG2GfIAdCM1T0hKW/Ufc         GqmI3WFFlthq9dEQW9FLReTgdkb5XT4+6Uurp/hJjtVueBi9+QBbtby2+M/+tIhRD/ZT         u4T6cIWwqzmIaEBMwZqYax8pVOefXCILwyEBAtYiuG60Pce7TyhAmn/kTkaRer8OFF2y         tQlftQOY14fs79YfCWhO9N7SvXzPowj9lMHCetZ7JSZa37i52TUvk/AquMUMFGNkrhJU         B2Lw==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=mime-version:subject:to:reply-to:from:date:message-id;        bh=Z+qoorL3olTcXHtT2Emg0QOY34/mU30Sx1KO9Uz09Ww=;        b=h8qpnImNX67R8LWBpCJ8c9xY1oeZWSE/QHOTWKBFo2a7MY7W+Luo4TIFCgzCixuA7I         1G0hD2AVQokNvpQgVGzdoERuBiBd9lIi81Nuq2GX1izMcbxT4LK4gyb0+c/ZXm1sQaF3         lTCtbuVK6Kam0DxtSlyR+Ya2GM4CcE2kccjdEI58ZqZhr8nePjmrUuJtbu/2LcRYQ60k         fExCARrZLAuLYvzK4PtTlfnMvSxaSp9xyS/qsdee5nBh70mz3Xons5cET/NBj3OkzhHE         MKUmhh3ukdUXLiwFa5jSGh0GyukFevEr15yndJCeVgIT8Oh+L0gcA3U4dQXD2U1mEffr         hFtw==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=mime-version:subject:to:reply-to:from:date:message-id;        bh=Z+qoorL3olTcXHtT2Emg0QOY34/mU30Sx1KO9Uz09Ww=;        b=FpK+creRsjXgLdpr/uAjdx3do4Pvrx0/+ryGHoAUS2u9odNPzGyWWOepYXqvC0CBM3         jBwLW37mrx2DBydLoI3RoSCne+OfstDJJqzI7ekK9aiphdcG7uFXoXRAr07IU9KO8YBu         rEeC0pjByr10SM68ocPCE9aJoYwRWaaDPV7LJswOg3GtoCLT7LRWiU61a97g4UDYqbkT         Va6pHqjhGMLtmcsayJeyBDopHh/mR9OZAsM/fciBltWSe0nejeDhAJ3DmOkigVuuKsou         lOus6RGjyPxpJ68nLeerM5sUJepCum0B6e2pizD3x2F9XvBA2j7qx+qVs3CCis0yB93t         /m1Q==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1587046784; cv=pass;        d=google.com; s=arc-20160816;        b=pCNElOjQ/aAJ++IhMWXwdZcTFaCLAaHB7L/SCcXZV2f+lykmZLh/u2NqbmhbH04YSd         DQrZUSvAYpNIpzZ9CMPcJ1eW+Sa6iDp/1OEhQ5mfJghG6JH8TcgHNex+Ge3D3uVeH1Hg         rAwtUu02/ShGg4pySiD34eSNIuo3APG86Lvk6yRTi5bYFJX8FcGdQkF8M9U/dJ1DVloO         CaqS+ufPNfj1tsoL/dHmri/l6yIRJFMjdP+J4P7tkpui+B3R6HryN+nf5j8nWRodYwT0         OVqnZaQa/ST3weC8gIenLWUcPtg7OyPdvEx6Zqe+EF4y/3/9r7/v58ubB5OXEvLw5ozl         Zqvg==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1587046777; cv=pass;        d=google.com; s=arc-20160816;        b=yfH15qlSCRJaWvtDRsEbxCJSAxYwcsDGQW8VJ2AsQ9LxQV9P9MA8VWmhp/aCIXLK7I         4ZnSoo5c1f+QZRrpTYlDFWRtusGII7GZz2vyoEbC/tib8nU+M/r4vZuJB2oAHgXmvMo1         CwPHUUJa+xNdpjNR84hdrW8ZVY7SyJuoQb+cMxRhZDGuEz25FQuocXuFuXwz5IX+IVBV         PqirKMBJVXJ3K1NJrV1Jtrc38id79hACxWJoY5OVfXrzxRLVShi+Y1zntNOLhUM+BL0P         qDkr+tUhTLZCMpKA3i+qfieFyfdC7OZi+reBb6wCCVx9wB82RXdJqR+a/0jefg7GwN2a         QI0w==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1587046775; cv=none;        d=google.com; s=arc-20160816;        b=hGE6SQ6Xv0sVyKTgorLi9c1sPrOMg8WkwlJtp7HCDZHQ9czwVduP8qSxqa5Xm/5PEC         tjGOTwGebcRd0hQZmtM7FO+jbvjKg5U+MoCU0zTRkMWlJs58GomccbNYvkq/2+PCuRQL         HsTzuiEGUk8ZNg7htyvBe8ZxOcAgdW/RlR4jlbN6LTzRmAUVBCan/UBxJjiaP80c3XWO         J4tljLG4wzbDDWgmxMaW8u+/byonC7a6Xr33RG60N1VzSpQYilHfZ/37FXKlmVumCg0k         WRbzTSUSNB384WvZ5qJfgtLH6wpz2CNMkyzLm6W9B5up5jhHX4gfBBce5hVjuojUl9J+         IleQ==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:date:from:reply-to:to:subject:mime-version:message-id         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=Z+qoorL3olTcXHtT2Emg0QOY34/mU30Sx1KO9Uz09Ww=;        b=qgYPiQg6BALq+M/R0pcx4bMCo1Rw6lQSMO8LUYU44Lwwn5Bn9NDrQAneV4mfiwwcGZ         h+UI6PidM54siTRLvRwwb7Xpg8dOcwRZRHWMxygvetZ40Xydz8pW/Ximb16w/aJNuqpR         4TvkUl7koxT8rtZoBqsQRpuwgAblSwY6Ci/Z8UZDs20OFJr1b3Y+6SoSbC371v6l4b63         0jGNek4XDSq2unp9R3JnNbwVeJY11ck6uFb9Nb5olYA1XWsO5tiPUlA2gYxYnLeuT3Hn         c5hyUcOZNX/jfkROELPQkSekAmENE16P3W6PRkg6he7kTEzWlEQDWSkItEFUyjkp99YH         cZGw==</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>Reply-to: Giorgio Graffino &lt;<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div>Dear Ferreters,</div><div>hope you can help me with this. <br></div><div><br></div><div>I'm using Ferret (v6.842) on a cluster machine. My purpose is to regrid the meridional mass transport (time depth lat lon) into density space (time density lat lon) to compute the transport between some density layers. I'm writing a script based on this (https://github.com/NOAA-PMEL/Ferret/blob/master/jnls/examples/depth_to_density_demo.jnl), which is using zaxreplace. I also found something about auxiliary regridding (https://ferret.pmel.noaa.gov/Ferret/faq/depth-axis-to-density-axis), but it requires a newer version of Ferret.</div><div><br></div><div>I'm using the script on several CMIP6 models, and saving the resulting time series as netcdf files for further analysis. I'm including as attachments the script and one of the output files, not the input files being too big. I'm facing two problems, and I can't find anything useful on the archives.</div><div><br></div><div>1) First problem: for most models Ferret isn't producing any useful output files, because of error messages like this one:<br></div><div><br></div><div>TMAP ERR: error in line definition<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; file coords dont match variable coords on axis LAT153_153</div><div><br></div><div>As a result, I'm left with empty files. The point is that no LAT153_153 should exist, the variable being a time series. There is nothing special about 153, since other models produce different errors (LAT122_122, LAT124_124, LAT156_156, and so on). What is even more puzzling is that the computed variables are alright, because I can plot them with Ferret. I'm just not able to attach them as netcdf variables, and the resulting file is empty. Why is Ferret defining such axis for a time series?<br></div><div><br></div><div>2) Second problem: for other models Ferret is complaining about the axis transformation. The error in this case is:</div><div><br></div><div>**ERROR: regridding: only @ASN regridding between calendar and<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; non-calendar axes: DENS</div><div><br></div><div>No variable is produced after using zaxreplace. I'm puzzled here because I'm defining a vertical axis, and I don't understand why calendars should matter. Is it a problem with zaxreplace? In case, could you provide me the relevant code?</div><div><br></div><div>Thanks in advance.</div><div><br></div><div>Giorgio<br></div><div><br></div><div><br></div><p><strong>Attachment:
<a href="cdfs5bzdRrcKv.cdf" ><tt>STC_rho_historical_EC-Earth3_pacific.nc</tt></a></strong><br>
<em>Description:</em> Cdf file</p>
<p><strong>Attachment:
<a href="binWwHxM_Oc98.bin" ><tt>generate_STC_rho_CMIP6.jnl</tt></a></strong><br>
<em>Description:</em> Binary data</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00616" href="msg00616.html">Re: [ferret_users] Problems with netcdf output and zaxreplace</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
<li><strong><a name="00615" href="msg00615.html">Re: [ferret_users] Problems with netcdf output and zaxreplace</a></strong>
<ul><li><em>From:</em> William Kessler</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00609.html">[ferret_users] PyFerret on Windows?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00615.html">Re: [ferret_users] Problems with netcdf output and zaxreplace</a></strong>
</li>

</UL>
<center>[<a href="msg00609.html">Thread Prev</a>][<a href="msg00615.html">Thread Next</a>][<A HREF="threads.html#00614">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
