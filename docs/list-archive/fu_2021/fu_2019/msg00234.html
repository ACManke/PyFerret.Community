<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure -->
<!--X-From-R13: Bngevpx Pebpxznaa <cngevpx.oebpxznaaNyfpr.vcfy.se> -->
<!--X-Date: Mon, 17 Jun 2019 03:05:01 &#45;0700 -->
<!--X-Message-Id: 1357552384.186794.1560765888865.JavaMail.zimbra@lsce.ipsl.fr -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 3936110.315755.1560540688301.JavaMail.zimbra@lsce.ipsl.fr -->
<!--X-Reference: 6b388665&#45;563a&#45;dbcf&#45;0ccc&#45;c40f184cc3d7@noaa.gov -->
<!--X-Derived: bin7pM7hKH7Y9.bin -->
<!--X-Derived: binHfhwWwCD0G.bin -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00233.html">Thread Prev</a>][<a href="msg00235.html">Thread Next</a>][<A HREF="threads.html#00234">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</strong></li>
<li><strong>From</strong>: <strong>Patrick Brockmann &lt;<a href="mailto:patrick.brockmann@DOMAIN.HIDDEN">patrick.brockmann@xxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 17 Jun 2019 12:04:48 +0200 (CEST)</li>
<li>Arc-authentication-results: i=3; mx.google.com;       arc=pass (i=2);       spf=softfail (google.com: domain of transitioning <a href="mailto:patrick.brockmann@DOMAIN.HIDDEN">patrick.brockmann@xxxxxxxxxxxx</a> does not designate 52.222.5.176 as permitted sender) smtp.mailfrom=<a href="mailto:patrick.brockmann@DOMAIN.HIDDEN">patrick.brockmann@xxxxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       arc=pass (i=1 spf=pass spfdomain=lsce.ipsl.fr);       spf=softfail (google.com: domain of transitioning <a href="mailto:patrick.brockmann@DOMAIN.HIDDEN">patrick.brockmann@xxxxxxxxxxxx</a> does not designate 65.153.203.175 as permitted sender) smtp.mailfrom=<a href="mailto:patrick.brockmann@DOMAIN.HIDDEN">patrick.brockmann@xxxxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       spf=pass (google.com: domain of <a href="mailto:patrick.brockmann@DOMAIN.HIDDEN">patrick.brockmann@xxxxxxxxxxxx</a> designates 194.254.241.33 as permitted sender) smtp.mailfrom=<a href="mailto:patrick.brockmann@DOMAIN.HIDDEN">patrick.brockmann@xxxxxxxxxxxx</a></li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:thread-index:thread-topic:mime-version:subject         :references:in-reply-to:cc:to:from:date;        bh=M25zVArbSwrvECYjU4YylJ8rfCB8zsxRuk6nW+JG6Xs=;        b=O54Hm5UpUpL9IIpCsIzCgptANMyuoL/39KRAZwqGE8jwCcj3IEFgX2gxQEdUODwN2H         aZfibDXo4FSE5qus8+9dTEAmWqRjc4HzI5Svc1sZhbeUS7JS3I0V4B2BtSbNF1+7xbvt         ym9OVEwP1836GcORr/M+5elAcwB2gQjX4imL+6Z6qdxbo/uMRq3ZQw6SaSw0Anj+zEkn         oxp8blgWAYoG72x4JLrnaSb1TQgG7AKH0JASqRxWsbtbooeJwiSO6uAvbDCSs/1HTFGa         ws7VHe7PCGLfqS9piOGmQFmDPhSOfVc+owBZzKRy8xdiLsfDo4V+rjMToRuFNVeVhcpw         GHZw==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=thread-index:thread-topic:mime-version:subject:references         :in-reply-to:message-id:cc:to:from:date;        bh=M25zVArbSwrvECYjU4YylJ8rfCB8zsxRuk6nW+JG6Xs=;        b=RTVDJWSu8a8IX5coXoy8WcJVW6RZOjLsaoMLITEje4chhF4oPpoUpXbqWtkeXeUdgp         T2BNTzCWxtxvUr+yAtT0DCYUbY6SD1KmKjgTjGGLf9e+0NDFkgwu5M0ARzVqqpl7gW5z         5zTz57wboLrOAgcbDA7iIpZE3Kmiru64v0qx499hZy9+E6OmHR5ocRI8EDLgEaU5lm4d         q3AGzilPXANzXsUmW8gGltpPBgPnA4L6WkNxHl++ka+47t5AJGC0hN+AA/jRM/m0kZoP         13s2tpbCt/PwjFDyZOUxkBcdV7fsb4TqIH76x16yj35g0XMDlV0u+LmGHBwpDk2ouh76         jR8A==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=thread-index:thread-topic:mime-version:subject:references         :in-reply-to:message-id:cc:to:from:date;        bh=M25zVArbSwrvECYjU4YylJ8rfCB8zsxRuk6nW+JG6Xs=;        b=AEFjsIaUBIC+T0YL6HuHI67K/m8U/DvrembQ0cjb64MeJed9DEK6siNQn8JxR2PIL0         ftycQmJETl4dXuiKuVWW8zDsvTAkm4Sad2HxLtVczI9ZFKCcptjo8NzjHOzPrSrmsSKh         VYEV9pog3qQM15FUaT+qW5siSEy/EMty9d5aW6dkKxmBXQZe3wmfi7r9ndUUZ+vuqnAo         T4Rar/ny641UtNif3DPvsIxpEnkuS7eEeT0nXuLOH1wDOqEOuU2B2zFgFlwvMnTvBGdt         3FYs/7VOCrglPZvnLIuAA5q60i+QHlbUWD+WDSRn4pXxaoOQLVgRGtAm1HlY+0+MkWk8         yi6A==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1560765899; cv=pass;        d=google.com; s=arc-20160816;        b=mjE6KbzVAIwk2IM6/x6c0vqmbflGq9Z73uYlVuZpHB6XWIVmiZOXyQk8iCSP8RxtKY         z8JOLLKL/uivJ3lNTTSsuKgBH5ombPM6yV9We4MRdbwW0Wx5o1lzBf4zP86AcIZ1JwNV         /GUJOEvBfrPCgGLDbBeKw3xOa2y7KcQCZewPSu/wvVboMgQ4Vl9YFu61C2r0ONB6/Jow         SfxxShJvFg0n9tP732F3JpnudnqRJU3ls6xRV7NY+N47m63NIdVNtduuN2J/GaLDfX9F         xUVi8AEiKRLu6Z+zaM3fG4QbKdb03NjDmQq4dC/cZbTio3oa4d+Qulkx6NcQEBU+JfyI         S+eg==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1560765893; cv=pass;        d=google.com; s=arc-20160816;        b=j1rJ7ltWP1qpYTClGmp07EmapsAruUVy8ZcmNo3nKJsut02qZDIPhTY2jpofXq8Et4         HKtf3bb7gMwWQRqfkkAiplvSmvZzNgfOu1kxaT6ujk/RP++6ZQzYilI1lcAd/q+UOs90         EJSCGN29GNofIL0xZMRqRsXLCDt6AGN/mb5yISYhPS7S/KwmQjPLqiP2aDL3zpgaBnP9         QNwm5QJz+V91JFs9ycfbpnAxUTRrY+JROKvzufglSxZ9n2olcOw9NYv7/nmEAACr+Frx         l3pbjlc9hOsM0yV9zcytmxxFsAwQM9jMZ2rOWmVPnyZztsTAXFwWnKjiouDi/++ID2Ne         1qdw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1560765891; cv=none;        d=google.com; s=arc-20160816;        b=T7mzQ6cIE+xzYYaaOUxyysagybF0mP+q0gs/bNy23zikNhJrhkMFMtd4zM5L4zZcza         NYqtGXbfKtdFfiiQXrxCjO0S9kJ2/LoycTDeDQR91YBeMij2Da4nVjEZts2Xb0cpnPn3         iQqymjMwGTOdKVD17DbiGjq5f5fDQBDBoOWNmbTB3gDteIf+WP9AWtSz0Ru4bzZ1vIVz         5Lr26AtlgstSV18WB8YG+izUrLMA7D6Fh+Foq0QEwCepwhW18iQKaNVgcvxev4P94g0Y         7tJKz8Y4438Wcr0msfzg7ElwEh06h8K9FlZcFKbInLc5k7cL2tIcNmwj15ODM1i9To0d         NlBg==</li>
<li>Cc: ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:date:from:to:cc:in-reply-to:references:subject:mime-version         :thread-topic:thread-index:message-id:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=M25zVArbSwrvECYjU4YylJ8rfCB8zsxRuk6nW+JG6Xs=;        b=VPm/OQwxoMKjDUCkOkGUODlRqcwCgQbyqUnmaqfa1ZwZDVbjge0Wb+ePUoiaeI2buq         IKJ5to592L965vlOSWj/44+MPrb0jjodRWBerY7ssvgR/XG4CtiDQWBW8Vf0/iV/PO2K         822Z64W1JdF5lQiWuL7Cl0553pf0hHeM/r0JX/3FuxxPCUpWe+/HRIoDK68H1Lb+KAeA         9UJAJvs6ffzFuz++T3B89vsl86FpP2xVoUcQemaUTuCmxjRgisf7V/wFM9aw34OJQSOR         ffgzosR8QTr7Sk5cfkcPc8OHbCpUkZpPkE0eKFL0Xa7PHQPJUO9NFYL3enYVCUzaxkgr         Jojw==</li>
<li>In-reply-to: &lt;<a href="msg00233.html">6b388665-563a-dbcf-0ccc-c40f184cc3d7@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00232.html">3936110.315755.1560540688301.JavaMail.zimbra@lsce.ipsl.fr</a>&gt; &lt;<a href="msg00233.html">6b388665-563a-dbcf-0ccc-c40f184cc3d7@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>Thread-index: RQu3F7WoOfjK4xxqO/qmcz07agxk9A==</li>
<li>Thread-topic: precision problem on a difference between a same variable read from 2 files with the same structure</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div style="font-family: arial, helvetica, sans-serif; font-size: 12pt; color: #000000"><div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Hi,</span><br></div><div><br data-mce-bogus="1"></div><div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Thank you Ansley for taking into account this report bug. </span></div><div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;"><br data-mce-bogus="1"></span></div><div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">This is a quite annoying problem when you want to </span><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">make comparisons.</span><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;"></span><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;"></span></div><div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">When all file structures are the same and files are</span><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;"> the sames too but you still<br data-mce-bogus="1"></span></div><div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">get differences, that is embarrassing. <br data-mce-bogus="1"></span></div><div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Also I would put it at a very high priority if you mind.</span><br data-mce-bogus="1"></div><div><br data-mce-bogus="1"></div><div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Here is the simplest test script I can achieve:</span><br data-mce-bogus="1"></div><div><br data-mce-bogus="1"></div><div><span style="font-size: 12pt; background-color: rgb(153, 153, 153);" data-mce-style="font-size: 12pt; background-color: #999999;">$ more s1.cdl</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">netcdf f1 {</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">dimensions:</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lat = 1;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lon = 1;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nvert = 2 ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lev = 6 ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">variables:</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double lon(lon) ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double bounds_lon(lon, nvert) ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double lat(lat) ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double bounds_lat(lat, nvert) ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double lev(lev) ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lev:axis = "Z" ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double q(lev) ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">data:</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;lon = 35 ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;bounds_lon = 33, 37; </span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;lat = 87 ;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;bounds_lat = 85, 89;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;lev = 1000, 900, 800, 700, 600, 500;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp;q = 1, 2, 3, 4, 5, 6;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">}</span><br><br><span style="font-size: 12pt; background-color: rgb(153, 153, 153);" data-mce-style="font-size: 12pt; background-color: #999999;">$ ncgen -o s1.nc s1.cdl ; ncgen -o s2.nc s1.cdl</span><br><br><span style="font-size: 12pt; background-color: rgb(153, 153, 153);" data-mce-style="font-size: 12pt; background-color: #999999;">$ ferret -script bug1.jnl</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">use s1.nc</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">           *** NOTE: Axis coordinates are decreasing-ordered. Reversing ordering for axis lev</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">use s2.nc</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">           *** NOTE: Axis coordinates are decreasing-ordered. Reversing ordering for axis lev</span><br> <br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">list q[k=1,d=2]-q[k=1,d=1]</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">             VARIABLE : Q[K=1,D=s2]-Q[K=1,D=s1]</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">             Z        : 500</span><br><span style="font-size: 12pt; background-color: rgb(255, 102, 0);" data-mce-style="font-size: 12pt; background-color: #ff6600;">         -5.000</span><br> <br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">list q[k=6,d=2]-q[k=1,d=1]</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">             VARIABLE : Q[K=6,D=s2]-Q[K=1,D=s1]</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">             Z        : 1000</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">          0.0000</span><br><br><span style="font-size: 12pt; background-color: rgb(204, 255, 204);" data-mce-style="font-size: 12pt; background-color: #ccffcc;">---&gt; the first difference should be 0 since the 2 input files are strictly the same.</span><br><span style="font-size: 12pt; background-color: rgb(204, 255, 204);" data-mce-style="font-size: 12pt; background-color: #ccffcc;">---&gt; this bug occurs when there is an axis coordinates with a decreasing-order</span></div><div><span style="font-size: 12pt; background-color: rgb(204, 255, 204);" data-mce-style="font-size: 12pt; background-color: #ccffcc;"> and also presence of boundaries on X and Y </span><span style="font-size: 12pt; background-color: rgb(204, 255, 204);" data-mce-style="font-size: 12pt; background-color: #ccffcc;">(don't know why this last is related).</span><br><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Best regards</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Patrick</span><br data-mce-bogus="1"><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">--</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Data Analysis and Visualization Engineer / Project Manager</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">LSCE/IPSL, CEA-CNRS-UVSQ laboratory</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">LSCE - Climate and Environment Sciences Laboratory</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">IPSL - Institut Pierre Simon Laplace</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">--</span><br><br><br></div><hr id="zwchr" data-marker="__DIVIDER__"><div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;"><b>De: </b>"Ansley C. Manke" &lt;ansley.b.manke@xxxxxxxx&gt;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;"><b>&#xC0;: </b>"ferret users" &lt;ferret_users@xxxxxxxx&gt;</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;"><b>Envoy&#xE9;: </b>Samedi 15 Juin 2019 02:07:14</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;"><b>Objet: </b>Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</span><br><br><br><br></div><div data-marker="__QUOTED_TEXT__"><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Hi Patrick,</span>
    <span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Yes, when the second file having the same name as an axis already
      in use by another file in the session, Ferret checks whether the
      axes are the same and if so, uses it in both grids.&nbsp; I think you
      must be correct that this is the cause of the difference you're
      seeing.</span>
    <span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">I think you are correct that this also has to do with the
      reversing of the axis coordinates and that for some reason this is
      done differently in the two cases.</span>
    <span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">I'll look further into this.&nbsp; Thank you for sending a detailed
      example.</span>
    <span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Ansley</span><br>
    
    <br>
    
    <br>
    
    <span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">On 6/14/2019 12:31 PM, Patrick
      Brockmann wrote:</span><br>
    
    
      
      <div style="font-family: arial, helvetica, sans-serif; font-size:
        12pt; color: #000000">
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Hi ferreters,</span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">I encountered a problem when I compare a variable</span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">read from 2 different files with exactly the same structure
          (same axis in particular).</span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">The difference calculated with ferret has the following
          range:&nbsp;</span></div>
        <div>
          <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp; &nbsp;Minimum value: -2.1516798E-11</span></div>
          <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">&nbsp; &nbsp;Maximum value: 2.15167981E-11</span></div>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">but the difference calculated with ncdiff&nbsp;<span style="color: rgb(0, 0, 0); font-family: arial, helvetica, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;" data-mce-style="color: #000000; font-family: arial, helvetica, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;"><span style="color: rgb(0, 0, 0); font-family: arial, helvetica, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;" data-mce-style="color: #000000; font-family: arial, helvetica, sans-serif; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">has&nbsp;&nbsp;the
              following range:&nbsp;</span></span></span></div>
        <div><span style="text-align: start; text-indent: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important; font-size: 12pt;" data-mce-style="text-align: start; text-indent: 0px; background-color: #ffffff; text-decoration-style: initial; text-decoration-color: initial; float: none; display: inline !important; font-size: 12pt;">
            <div style="">&nbsp; &nbsp;Minimum value: -2.79521E-20</div>
            <div style="">&nbsp; &nbsp;Maximum value: 2.87991E-20</div>
          </span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">--&gt; I was expecting the same order of magnitude with
          ferret than with ncdiff.</span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">More strange, if I change the name of a coordinate axis of
          one of the input file</span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">then the difference calculated with ferret and ncdiff have
          the same order</span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">of magnitude. </span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">--&gt; I suspect that the variable read from the 2nd file
          uses a downward axis</span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">set from the read of the 1st file.</span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Attached the minimized problem with 3 small nc files and 2
          test scripts.</span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Please try:</span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">$ ferret -script test1.jnl</span></div>
        <div><span style="color: rgb(0, 0, 0); font-family: arial, helvetica, sans-serif; font-size: 12pt; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;" data-mce-style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 12pt; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: #ffffff; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">$ ferret
            -script test2.jnl</span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Tested with ferret 7.44 and 7.50</span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Any help welcome.</span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Regards</span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">Patrick</span></div>
        <div><br>
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">--</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">
          Data Analysis and Visualization Engineer / Project Manager</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">
          LSCE/IPSL, CEA-CNRS-UVSQ laboratory</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">
          LSCE - Climate and Environment Sciences Laboratory</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">
          IPSL - Institut Pierre Simon Laplace</span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">
          --</span></div>
      </div>
    
    <span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">-- </span><br><span style="font-size: 12pt;" data-mce-style="font-size: 12pt;">
      <i>Ansley Manke<br>
        NOAA/PMEL Science Data Integration Group<br>
        7600 Sand Point Way NE<br>
        206-526-6246</i></span><br></div></div><p><strong>Attachment:
<a href="bin7pM7hKH7Y9.bin" ><tt>bug1.jnl</tt></a></strong><br>
<em>Description:</em> Binary data</p>
<p><strong>Attachment:
<a href="binHfhwWwCD0G.bin" ><tt>s1.cdl</tt></a></strong><br>
<em>Description:</em> Binary data</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00235" href="msg00235.html">Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00232" href="msg00232.html">[ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</a></strong>
<ul><li><em>From:</em> Patrick Brockmann</li></ul></li>
<li><strong><a name="00233" href="msg00233.html">Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00233.html">Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00235.html">Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</a></strong>
</li>

</UL>
<center>[<a href="msg00233.html">Thread Prev</a>][<a href="msg00235.html">Thread Next</a>][<A HREF="threads.html#00234">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
