<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Problems with netcdf output and zaxreplace -->
<!--X-From-R13: Uvbetvb Uenssvab <t.tenssvabNgvz.vg> -->
<!--X-Date: Thu, 4 Jun 2020 08:23:01 &#45;0700 -->
<!--X-Message-Id: 1727fed6cc0.g.graffino@tim.it -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Problems with netcdf output and zaxreplace</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00717.html">Thread Prev</a>][<a href="msg00719.html">Thread Next</a>][<A HREF="threads.html#00718">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Problems with netcdf output and zaxreplace</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Problems with netcdf output and zaxreplace</strong></li>
<li><strong>From</strong>: <strong>Giorgio Graffino &lt;<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 4 Jun 2020 17:22:45 +0200 (CEST)</li>
<li>Arc-authentication-results: i=3; mx.google.com;       arc=pass (i=2);       spf=softfail (google.com: domain of transitioning <a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a> does not designate 209.85.160.200 as permitted sender) smtp.mailfrom=<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a></li>
<li>Arc-authentication-results: i=2; mx.google.com;       arc=pass (i=1 spf=pass spfdomain=tim.it);       spf=softfail (google.com: domain of transitioning <a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a> does not designate 65.153.203.170 as permitted sender) smtp.mailfrom=<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       spf=pass (google.com: domain of <a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a> designates 82.57.200.118 as permitted sender) smtp.mailfrom=<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a></li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=message-id:mime-version:cc:subject:to:reply-to:from:date;        bh=ZUkUMAYLND9DV55qDXdvcg5eqpfPXcxPGDs2PRAWPSo=;        b=L3kfki/Ql2gDJXG4EhC5mL9j/Wq3BgaL8XwqgFXhcrItZJROoNtriFnTTmi19hci4n         qwTKUvdPpg4q9szVZA1MHKengiDKqtKuZCC4nC8VvvPBMJ1II3lcVkcWDn+Jg4Ytsw6P         D64paKkiXWKnR9Ru1c60KhRPQbX+BcutGlAkjO+dId5O72LdWSDKU9s+KFn/UvPdbwwp         848dPL/cY9oQQUAgg4+Hz79eV2ng2PsTbHWZmD44ba1t17HA7YvNUMEEp5PHNoA3hkgQ         XBnLv6bYd76tJG95fcDZhBCxKg+Ezj8UuCJcbrlWA7CHr1ZBKJrQXPqHeOFsSY9e8upy         smdg==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=mime-version:cc:subject:to:reply-to:from:date:message-id;        bh=ZUkUMAYLND9DV55qDXdvcg5eqpfPXcxPGDs2PRAWPSo=;        b=Ukp1j+kJvr//q/ydds0Fkbcp0Ezby17VepLPlmVsJVP61JUkZcloNDsEFVrH642Aux         oXGtgRksI75zqA5OW1n/M/dsIag3+JQk0NnEYSt037iT675QPdwnRvNfaJ5N59N8adZh         jqCQu+Qqi/bXZGjUsBJ9TJLFfLjWRGygcTPG8hTxdK1sdwnOIUm20doInyKEDivmWX4e         5b548pc2uti9sLNDvCVnhNeaEq+8eoZ05X2BwUhbK1S5gWd8zk9XqJ4hzeRdlfyn7bqS         8tBldM5qoVQPw2JZzRwthQtCh3pt/6ZpIose3peahdZvSJzEQdH4u8zBhasTuzUa9XTz         7dmg==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=mime-version:cc:subject:to:reply-to:from:date:message-id;        bh=ZUkUMAYLND9DV55qDXdvcg5eqpfPXcxPGDs2PRAWPSo=;        b=aQddkFP3xpXXgNy7hmKx4tSXS0jYOEQYzBW1Kuw8nez0PRPHyefngJ5toeqJx9kJ1S         OZqXvhefsTBQBKEBkh6wo0Q3ldjqjbYNGIiAycRsV2/vd8a5HlYJ6fop7+/XOZ+QUDS5         VUKQQIsVFqbyl116LvAZiYukBAfbGBuSrvshY0PhfRG3GbvPFnSgpd3/N0JEtWyl53YD         4wogFKPP5iLdZEEVnxOGfEOt3efx5JmBNQ1yOhhSpM1ECTvlM0Yy8sg969RzhavUYz4l         3Dx2vKQ+TDHc+qLaHEg00v+zaQ+v+iUnDezQ/6TIELE0w3msd0SwdjRP8VEQbxcOE27O         il9g==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1591284179; cv=pass;        d=google.com; s=arc-20160816;        b=Nr4OqFRl4/KAj7tjcsfcOH3byEb01LLf44LdnXUH8emzWPV4yw3eWIietCP45isvNy         O+DViKe+Or3eGO+jO1QPldi2KEUS7jPliPfalfI/bSUjjyvm0fkknxLLhN6Xaa1uVjsl         r2umfklTQTZ1GrickjjH0coyMv6uGhIUhxpL8wMiMmBlWSHMIhjcYeo3p/rxx6OcZrCL         h8DRvgIU/Kb4+3ByB68/CynYhL568UEpR12X7opyS25JmplWbrjHFTxOhFRb36PF0Kul         UbVNOkjdJMAJHWuyO9IOJmGAEAWSSqJECV4rCI3sD2FRTlN/l5FuIp+vXQqF1OwmQj6X         iQGA==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1591284170; cv=pass;        d=google.com; s=arc-20160816;        b=VEkdUSUF1C5gju+c0ylEGX4hnD2OOdyn2rtbYsPsTcoTrE4Lamak+6u8VWQDRy6mok         7jfsz+EolePucD21Lmlr+7HbPc3W1Re5IQ05mdklYJmc0uYCDjecZnLpakNMSs1l9JaF         9kj3GbpVaLEDmqwwV2amuXWanK8INRb3dtmCcH9HRsVouqx+9G4tyu+n8PlkiMNZg3hI         Ht9piWMRT66dU3k623LJIfVElg+b9iR23aJyPHmNoaTT4NFCM/XZcyciVi+62g4dfu8P         K3nYwjH6OWdEr876uQKQRDTBu/d1vmmaOfdcKhWPYXUPHWhVTawWqTNfTLPPOEU72jrp         WdyQ==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1591284167; cv=none;        d=google.com; s=arc-20160816;        b=jMZYo8B3OQwGlo1lxKRlJyf3lwtq0nj/EtmHQlWum7CUWX9SRkEg/DLXKmWWHlfA9H         8+rj7UOPQPtCNpKL5TXZvgfjolWAY2nghzMA7QmOAMBpYtJY8J6pKf6siJmuVX+KQ8oe         LmRJo3gxYZQpqAMZ1YpPXFkE9qYBMyoWvI3C1IRnON1CWZVNsRhJRllGmJpKRA/NnAxD         ur0SRpNnDZQRLJ+Mt121g8BoaL9lpDVnvQpS8891dUsTb0QPS4g6F3U1S1/7FRCkUSBH         R+/6VcJaU9zZ282rm+DCMUxWWHpZYGGM2lxSD2255y1sQ5SjyZHf+mwWT1zB4Qmhc8B5         x+3Q==</li>
<li>Cc: &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=sender:date:from:reply-to:to:subject:cc:mime-version:message-id         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=ZUkUMAYLND9DV55qDXdvcg5eqpfPXcxPGDs2PRAWPSo=;        b=XFiWzVs9Nh93QCF1ns0BfJHQYBr5dlp+ycJu6nOPjHf5+dBx3kT/fkDk5I9CyN8Gtg         X33cuvsMs0GvELbUO6EkqiLFNlv7K2ysvAnVjwstzfYSXAD6YdjIfRpSIlXi8+5bGZ3n         hx1VIo6bDoVYsw71Deexx5DgGGwYbdnx+m3e51GWn3DNoBGLOguQCVSBgDAt3+5NupvJ         wClZszQgfQtEnrQWkcWHnDC/fhHS396UMX47sPGpPHgPnOfKTS7hpzhLVTDzbk03eZFS         /6oEklHM9X6posTjBtGyiTmkw0nmJW3aZxd4YjnaXv3zpZMDrR0xijAzVHw+GJ2jj9Sy         4w8g==</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>Reply-to: Giorgio Graffino &lt;<a href="mailto:g.graffino@DOMAIN.HIDDEN">g.graffino@xxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">Thanks Ansley for your suggestions.</span></font><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><br></div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">Unfortunately I'm running Ferret on a cluster, because data are too big to be saved on my local computer, so I don't know whether I miht install a newer version of Ferret by myself. I'll ask to my cluster support. Meanwhile, I tried to increase the amount of allocated&nbsp;memory and removed all subsetting, but the process got killed by the system.</div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><br></div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">Sorry, the script I sent also included other operations. I'm resuming here the most relevant lines:</div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><br></div><div style=""><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">!----- MERIDIONAL TRANSPORT ON DENSITY ------------</span></font></div><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">define axis/z=1020:1030:0.5/unit="density"/depth dens_lev&nbsp;</span></font></div><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">let ty_trans_pacific_rho = zaxreplace(ty_trans_pacific,dens[g=ty_trans],z[gz=dens_lev])</span></font></div><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;"><br></span></font></div><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">!--- COMPUTE TIME AVERAGE ON 25 SIGMA LEVEL -------</span></font></div><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">let ty_trans_pacific_rho_time = ty_trans_pacific_rho[l=@ave]</span></font></div><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">let ty_trans_pacific_rho_lats = ty_trans_pacific_rho_time[y=35n:35s]</span></font></div><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">let ty_trans_pacific_rho_lons = ty_trans_pacific_rho_lats[x=110e:70w]</span></font></div><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">let ty_trans_pacific_rho_1025 = ty_trans_pacific_rho_lons[z=1025]</span></font></div></div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><br></div><div style=""><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">!---------- RESHAPE OUTPUT FIELDS -----------------</div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">let/title="Meridional transport (Sv) on the 1025 kg/m3 isopycnal surface" stc_trans_rho_1025 = reshape(ty_trans_pacific_rho_1025,x[gx=ty_trans]+y[gy=ty_trans])</div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><br></div><div style=""><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">!------------ OUTPUT FILE -------------------------</span></font></div><div style=""><font face="tahoma, arial, helvetica, sans-serif"><span style="font-size: 12px;">save/file=STC_sigma_1PctTo2X_($model)_pacific.nc/clobber stc_trans_rho_1025</span></font></div></div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><br></div></div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">The error can't be related to append, because I'm saving only one variable into that file.&nbsp; Other variables are saved into another file, but I have no problem with that.</div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;"><br></div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">Cheers,</div><div style="font-family: tahoma, arial, helvetica, sans-serif; font-size: 12px;">Giorgio<br>
<blockquote>
  ----Messaggio originale----
 <br>Da: ansley.b.manke@xxxxxxxx
 <br>Data: 4-giu-2020 3.11
 <br>A: &lt;ferret_users@xxxxxxxx&gt;
 <br>Ogg: Re: [ferret_users] Problems with netcdf output and zaxreplace
 <br>
 <br>Hi Giorgio,
 <br>When you can, try to update to a newer version of pyferret or ferret. 
 <br>Starting with Ferret v7.2 
 <br>&lt;https://ferret.pmel.noaa.gov/Ferret/documentation/release_notes/version-7-2-release-notes&gt;, 
 <br>there is much better memory management.&nbsp; With your version of Ferret you 
 <br>can try "set memory/size="&nbsp; to give it a larger&nbsp; working memory buffer.
 <br>
 <br>For the errors you're seeing when trying to append to a file, the thing 
 <br>to know is that the grid of the variable you are appending needs to 
 <br>match what is in the file, except for time when appending in the time 
 <br>direction.&nbsp; I can't quite see what is happening with the different grids 
 <br>and datasets in your script. What I would do to see what is happening, 
 <br>is at the point in your script where the error occurs, instead write 
 <br>that variable to a second file, and then compare the new file with the 
 <br>one you were trying to append to.&nbsp; The error message is saying that the 
 <br>latitude coordinates don't match.
 <br>
 <br>Ansley
 <br>
 <br>On 6/3/2020 10:51 AM, Giorgio Graffino wrote:
 <br>&gt; Thanks Ashley about those useful tips.
 <br>&gt;
 <br>&gt; I'm now adapting my zaxreplace script for other applications (see 
 <br>&gt; attached), but I have again issues on saving the output. I think the 
 <br>&gt; problem is that the grid is too large for some models, and Ferret 
 <br>&gt; complains by saying
 <br>&gt;
 <br>&gt; **ERROR: request exceeds memory setting: A negative number of words 
 <br>&gt; were requested.
 <br>&gt; *** NOTE: The current grid is most likely too large
 <br>&gt;
 <br>&gt; So I'm subsetting the variable to select only the region I need, and 
 <br>&gt; the computation works. But when I'm saving the generated field into 
 <br>&gt; netcdf at line 52, Ferret comes out with the good ol' error
 <br>&gt;
 <br>&gt; **TMAP ERR: error in line definition
 <br>&gt; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file coords dont match variable coords on axis LAT77_203
 <br>&gt;
 <br>&gt; It doesn't change whether I'm using RESHAPE or not. I also tried to 
 <br>&gt; adapt my RESHAPE call according to what I read here 
 <br>&gt; (https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS), 
 <br>&gt; but with no luck. Can you please help me again about this?
 <br>&gt;
 <br>&gt; Cheers,
 <br>&gt; Giorgio
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; ----Messaggio originale----
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Da: ansley.b.manke@xxxxxxxx
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Data: 20-mag-2020 18.52
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; A: "Giorgio Graffino"&lt;g.graffino@xxxxxx&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Cc: &lt;ferret_users@xxxxxxxx&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Ogg: Re: [ferret_users] Problems with netcdf output and zaxreplace
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Hi,
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; You could pass into the script the number of models
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &gt; ferret -script scriptname.jnl 7
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; The script then does a repeat loop that would start like this.
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; let nmodel = ($1)
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; repeat/range=1:($1)/name=r (\
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; use /home/data/model`r`.nc;\
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; ...
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; There are details on the grave-accent evaluation
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &lt;https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/EMBEDDED-XPRESSIONS#_VPINDEXENTRY_562&gt;that
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; give you some flexibility.&nbsp; For instance if the models are named
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; model01.nc, model02.nc, ...&nbsp; use the "precision" specifier to ask
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; for the value to be replaced with zero-filled numbers, here 2-digits.
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; let nmodel = ($1)
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; repeat/range=1:`nmodel`/name=r (\
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; use /home/data/model`r,p=z2`.nc;
 <br>&gt;
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Or, you could use a unix foreach loop and write your script to
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; operate on just one model if that makes sense for what you are
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; doing. Here I've made a script myscript.jnl with:
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; ! myscript.jnl
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; echo ($1)
 <br>&gt;
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; This is csh, other shells will have other syntax.
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; /home/users/ansley&gt; set flist = 'model_run_7.nc
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; ocean_model_run5.nc 
 <a rel="nofollow" href="http://address/climate.nc'">http://address/climate.nc'</a>
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; /home/users/ansley&gt; foreach fname ($flist)
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; foreach? ferret -script myscript.jnl $fname
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; foreach? end
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; model_run_7.nc
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; ocean_model_run5.nc
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 
 <a rel="nofollow" href="http://address/data/climate.nc">http://address/data/climate.nc</a>
 <br>&gt;
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; On 5/18/2020 10:47 AM, Giorgio Graffino wrote:
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; Hi Ashley,
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; thanks for your suggestion.
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; I preferred to implement the other method because it involved a
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; single Ferret call, but I haven't thought about passing all
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; variables in that way. You are suggesting something like
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; ferret -script scriptname.jnl model1 model2 model3
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; which would be great to have, but I should find a way to loop
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; across all models from inside the jnl script. Now my jnl script
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; includes
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; define symbol model = ($01)
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; to read the argument, because I'm parsing only one argument at a
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; time. How can I loop over all models from inside the jnl script?
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; Cheers,
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp; Giorgio
 <br>&gt;&gt;
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ----Messaggio originale----
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Da: ansley.b.manke@xxxxxxxx
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Data: 12-mag-2020 19.55
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A: &lt;ferret_users@xxxxxxxx&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ogg: Re: [ferret_users] Problems with netcdf output and
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; zaxreplace
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hi Giorgio,
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Another method for sending Ferret/PyFerret a set of commands
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; is to use the -script option on startup.
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &gt; pyferret -script my_script.jnl&nbsp; [arguments]
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This is generally more flexible than piping commands.&nbsp; The
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; startup option -batch for Ferret or -nodisplay for PyFerret
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; are also useful when you don't want to have graphics windows
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; display.&nbsp; Note that -script must appear last among command
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; line switches so that the script arguments will be parsed
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; correctly.
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Unix command-line switches
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/introduction/GETTING-STARTED#_VPID_8&gt;
 <br>&gt;&gt;
 <br>&gt;&gt;
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; On 5/9/2020 3:19 AM, Giorgio Graffino wrote:
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hi Ryo,
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; thanks to your "quote" suggestion I could successfully run
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; my bash script.
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cheers,
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Giorgio
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ----Messaggio originale----
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Da: furue@xxxxxxxxxx
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Data: 28-apr-2020 14.28
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; A: "Giorgio Graffino" &lt;g.graffino@xxxxxx&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cc: "Ferret" &lt;ferret_users@xxxxxxxx&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ogg: Re: [ferret_users] Problems with netcdf output and
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; zaxreplace
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hi Giorgio,
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; On Tue, Apr 28, 2020 at 7:09 PM Giorgio Graffino &lt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; g.graffino@xxxxxx &lt;invalidurl.gif&gt;&gt; wrote:
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; !-&gt; REPEAT: I=1
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; **ERROR: command syntax: II = ???
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; define symbol ii
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Compare this line with the one in the original shell
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; script:
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ferret &lt;&lt; STOP
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . . .
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; define symbol ii `i`
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . . .
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STOP
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Where did `i`&nbsp; go?
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; In the shell script as well as in the ferret script, the
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; backquote construct is evaluated.&nbsp; In the above shell
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; script, the shell tries to run a command named "i".&nbsp; It
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fails and is replaced with an empty string. I
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; suppose&nbsp;you saw this error message on your screen
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . . . i: command not found
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; To prevent the shell from interpreting the backquote
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; construct, you "quote" the here-document by
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ferret &lt;&lt;'STOP'
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; . . .
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STOP
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ryo
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; --------------------
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; To see what's going on, run this kind of test shell script
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo date
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo `date`
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo "abc `date` def"
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; echo 'abc `date` def'
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cat &lt;&lt;EOF
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; date
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `date`
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EOF
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cat &lt;&lt;'EOF'
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; date
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; `date`
 <br>&gt;&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EOF
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -- 
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ansley Manke
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Science Data Integration Group
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; NOAA Pacific Marine Environmental Laboratory
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 7600 Sand Point Way NE
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Seattle WA 98115
 <br>&gt;&gt;
 <br>&gt;&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I am currently teleworking and am available Tue-Wed-Thu.
 <br>&gt;&gt;
 <br>&gt;&gt;
 <br>&gt;&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; -- 
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Ansley Manke
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Science Data Integration Group
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; NOAA Pacific Marine Environmental Laboratory
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; 7600 Sand Point Way NE
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; Seattle WA 98115
 <br>&gt;
 <br>&gt;&nbsp;&nbsp;&nbsp;&nbsp; I am currently teleworking and am available Tue-Wed-Thu.
 <br>&gt;
 <br>&gt;
 <br>&gt;
 <br>
 <br>-- 
 <br>Ansley Manke
 <br>Science Data Integration Group
 <br>NOAA Pacific Marine Environmental Laboratory
 <br>7600 Sand Point Way NE
 <br>Seattle WA 98115
 <br>
 <br>I am currently teleworking and am available Tue-Wed-Thu.
 <br>
 <br>
 <br>
</blockquote>
<br></div>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00719" href="msg00719.html">Re: [ferret_users] Problems with netcdf output and zaxreplace</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00717.html">Re: [ferret_users] Problems with netcdf output and zaxreplace</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00719.html">Re: [ferret_users] Problems with netcdf output and zaxreplace</a></strong>
</li>

</UL>
<center>[<a href="msg00717.html">Thread Prev</a>][<a href="msg00719.html">Thread Next</a>][<A HREF="threads.html#00718">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
