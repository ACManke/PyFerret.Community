<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Memory error -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Thu, 23 Jan 2020 14:21:25 &#45;0800 -->
<!--X-Message-Id: b47db628&#45;d587&#45;1c6a&#45;dcf7&#45;b005707f98dd@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 3a342462d87fd2d4ad97646b867377de@iiserkol.ac.in -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Memory error</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00496.html">Thread Prev</a>][<a href="msg00512.html">Thread Next</a>][<A HREF="threads.html#00499">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Memory error</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Memory error</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 23 Jan 2020 14:21:20 -0800</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=jNXRZceC;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=jNXRZceC;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:dkim-signature;        bh=e1qwPDqDi3qfGZ5F8Vn9EhM0NGZZfxog121invVVH7A=;        b=e/KMdeRlXvmzxI2/J4slf9d49qggirKhxWCB4ci4AlgqyAhFB0P0yEFeqPUmROpO3f         OuUZKriSqbyoU+isOKp/fMPSY3dK8S1EA4uHtddaOCJqgu1QHZBjn4PvHTiBIxZK8cUq         iH/q1HOR6tLv7tSu4GVGC7J4I6HBOqNTqLyR/Nc68xJAl7ITxKcK2IT117FuTrG2DOiE         5PNLuEHOPeg6nyp0/xGXrYmI+jOJokr6s9wubrtK2QYV0drapsuY4sZKjnVLtbDuFit+         h4kULiYJsGP6gZr2nhpz/GaJ4RTschj704ui4nNF3Dgaq+7RSGZpO342x98rsiE7aYOE         f/5Q==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:dkim-signature;        bh=e1qwPDqDi3qfGZ5F8Vn9EhM0NGZZfxog121invVVH7A=;        b=qmX1MW8jbcFcft6GYvk/MQETokhvuIbxOaUPAWyslt+TcbzHLp2/kEHP6qZXtlFk6x         ReBAQv7SYvequt1zyhXEAblxqDSXUSJoGgJgssTg/+Tc5d+2PBg5+ryhDnMRpqhZUEqE         lKeJUiEqBCUFL766oiGbpgCUbpUj7ePBspl7oJWvSBncw3HNY0TEUTwSZc40+MAMBg/l         cOv9n/QzfXsyC+eLo5+liwVgOH7ti0z0sN7M2DvGaxxSHW6AZ/TR6BNDOZ+jWROWXPeQ         HrxMfzztImz/grkxRZRuSgaWfR5wv53jc3DL4kl8rFXWkWLRBvl300bCETq2n3kT1LiF         IIfw==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1579818084; cv=pass;        d=google.com; s=arc-20160816;        b=FCwT7poNQT+whIyJUssS9jDL9GmkZTr0wY7ukUlIOXrhpFY7qGVg+GBDuZDqKZGsyt         NpqMIsvf2UStdXjTUJ9XVXVm7oINwn19bJNJItgRXylrrku46lnX2Uyx554mnFOY/r8a         /QhIvLLYMjUxr69r7oYPNbaM5ZSjajC2C4dicWW1WLvaaKWHWj3p2BGbAfs0LZLrSbGY         GydbwmKmbFP6X859vnFQDbCSbdmFE5LHi054jMXiqZNMAHz4tIPoOW9FPdZnsHax6yFq         8UEBOvIV5PkgrrMME2WgBt0clmCx42x/uTG4AUunVm9TN7PeUqtkP3mCpS4mNXEAtkao         NZgw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1579818083; cv=none;        d=google.com; s=arc-20160816;        b=izKtT6l7rbCc7y0tBFGO1UmJBxP7SYp/6W0yWKAmb01h7AOo1PK8fk+Z4LKPYePf54         1qiXX2+P1WYjY4mBv52IdVsrx9ks/YhkEKf+sI8RBP9o6Ub9wQLxzbwa+DFJp8mbxapE         nA6i5g+rxbN3Azu2fY7G79NAAxp2qE2zun+SmhzlZnkqC8T9mhDlESCiVpSjLeTajJ6H         3RIqPI3el+SaBb8V/Yq621D77Zm2pXx4XoOO48AeHtAz21GMrRO8Oyg4F1WujIZDfra1         jXWOaGQR4o3FEti+pGwSvILMflOD7VEuHgaPyIoKZVPahZXAXTF+IPYjn3vso1tpkwk3         hv3g==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-language:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=e1qwPDqDi3qfGZ5F8Vn9EhM0NGZZfxog121invVVH7A=;        b=lpEXGvagZoswnKAlp43i+uUADYbpz6G8aLZwzK58Mbl5THz++rqbuV4IM6EgXjm6r9         R3WhtiUoIh0NHMqqw6F1sXZJqY/rfJu95qaBSVuk+qvWD1CtbYcvpEVDMFAma4UZosSL         deNbtzBu7TPzZHrsTM5FOUXJIXVM8k2pZyPLuCQJF0laWbzrFi/BO4grDuTcY/izdCnK         G/1AWw37wcriuNRoy450KzJp3sKMcZZ8CrHlWpYk/ljHkfj7ef+WGqXUW2zYD+V0YA6k         oTGSIch6i9mOx9A8P+nmLy+CfoZ16KqEvT4d6OqyMbjmrEqxrKs+He0EJVzfU7GzSyiT         KKtg==</li>
<li>In-reply-to: &lt;<a href="msg00496.html">3a342462d87fd2d4ad97646b867377de@iiserkol.ac.in</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00496.html">3a342462d87fd2d4ad97646b867377de@iiserkol.ac.in</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101 Thunderbird/68.3.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->

  
  
    <p>Hi Asiya,</p>
    <p>First I'd like to say that in the most recent versions of Ferret,
      SET MEMORY does not allocate memory from the system but only sets
      an upper limit on the amount it will use as needed.&#xA0; This
      discussion is for versions previous to v7.2.&#xA0; The current
      documentation for SET MEMORY is here, with the discussion at the
      bottom of the page for earlier versions.<br>
    </p>
    <p><a rel="nofollow" class="moz-txt-link-freetext" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/computing-environment/MEMORY-USE">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/computing-environment/MEMORY-USE</a></p>
    <p><br>
    </p>
    <p>In Ferret v7, the SET MEMORY/SIZE= causes Ferret to ask the
      system to allocate that numer of mega-words (storage locations) of
      memory, so SET MEM/SIZE=1400 asks for over 11 Gb of memory.&#xA0; When
      you tried tried "SET MEMORY/SIZE=1400"&#xA0; did you see an error
      message?&#xA0; In v7, it might report <br>
    </p>
    <blockquote>
      <p>&#xA0;Cached data cleared from memory<br>
        Unable to allocate 1400.0 Mwords of memory.<br>
        Restoring previous memory of 25.6 Mwords.<br>
      </p>
    </blockquote>
    <p><br>
    </p>
    <p>To get an idea of the&#xA0; amount of memory you might need, look at
      the subset of the grid that your definitions use. The _expression_ <b>sst_0001[x=120:180@ave,y=-16:6@ave]</b>
      needs to read data&#xA0; 60*22*165.&#xA0; It's in megawords, so,<br>
    </p>
    <p>yes? list 60*22*165/1000<br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : 60*22*165/1000<br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 217.8<br>
    </p>
    <p>So just for that _expression_ you'd need to have the SET
      MEMORY/SIZE setting larger than 218.&#xA0; Ferret will store
      intermediate results and re-use some of the memory, but there are
      a number of calculations done to evaluate variable&#xA0; "correl", so
      probably more memory is needed.&#xA0; Try SET MEMORY/SIZE=300, or maybe
      500<br>
    </p>
    <br>
    <div class="moz-cite-prefix">On 1/22/2020 11:52 PM, abs15ms027
      wrote:<br>
    </div>
    <blockquote type="cite"
      cite="">
      <br>
      Hello,
      <br>
      <br>
      I am repeatedly getting an error while using some of the data sets
      in Ferret. Error is as follows:
      <br>
      <br>
      Command file, command group, or REPEAT execution aborted
      <br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; *** NOTE: You can use SET MEMORY/SIZE=xxx to increase
      memory.
      <br>
      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; *** NOTE: The "Memory use" section of the FERRET Users
      Guide has further tips.
      <br>
      <br>
      I tried SET MEMORY/SIZE=1400 and SET MEMORY/SIZE=5e12, but still,
      I am getting the same error.
      <br>
      <br>
      My script looks as follows.
      <br>
      <br>
      use abs_era_data.nc
      <br>
      set mode metafile
      <br>
      let
ab=(sst_0001[x=120:180@ave,y=-16:6@ave]+sst_0001[x=-150:-180@ave,y=-16:6@ave])/2<br>
      let p=ab
      <br>
      let q=sp_0001[g=sst_0001]
      <br>
      <br>
      go variance
      <br>
      let ad=(correl)*(39/(1-(correl)^2))^0.5
      <br>
      let sign=if abs(ad) ge 2.02269092 then correl
      <br>
      <br>
      <br>
      fill/x=-70:100/y=0:55/pal=blue_orange/nolab correl #getting error
      at this lin
      <br>
      contour/x=-40:90/y=12:60/ov/nolab sign
      <br>
      go box 8,-13,41,52
      <br>
      go box 69.5,75,29,35.5
      <br>
      go land thick
      <br>
      <br>
      LABEL ,,-1,0,.16 "Longtitude"
      <br>
      LABEL ,,-1,90,.16 "Latitude"
      <br>
      <br>
      <br>
      label/nouser 4.5,6.5,0,0,0.1 "@TRcorrelation of SST over
      equitorial Pacific with Surface pressure"
      <br>
      cancel mode metafile
      <br>
      sp Fprint -o slp_sst_ipwp_correl_qq.ps metafile.plt
      <br>
      <br>
      <br>
      Ferret version I am using is FERRET v7 (opt)
      <br>
      <br>
      The data set used is ERA 5 single-level data and includes these
      variables:-
      <br>
      <br>
      &#xA0;name&#xA0;&#xA0;&#xA0;&#xA0; title&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; I&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; J K&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;
      L&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0; M&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; N
      <br>
      &#xA0;SST_0001 Sea surface temperature&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:1440&#xA0;&#xA0;&#xA0; 1:721
      ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
      <br>
      &#xA0;SP_0001&#xA0; Surface pressure&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:1440&#xA0;&#xA0;&#xA0; 1:721
      ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
      <br>
      &#xA0;TP_0001&#xA0; Total precipitation&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:1440&#xA0;&#xA0;&#xA0; 1:721
      ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
      <br>
      &#xA0;SST_0005 Sea surface temperature&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:1440&#xA0;&#xA0;&#xA0; 1:721
      ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
      <br>
      &#xA0;SP_0005&#xA0; Surface pressure&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:1440&#xA0;&#xA0;&#xA0; 1:721
      ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
      <br>
      &#xA0;TP_0005&#xA0; Total precipitation&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:1440&#xA0;&#xA0;&#xA0; 1:721
      ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164
      <br>
      <br>
      It would be of great help if you could provide me with a solution
      to this problem.
      <br>
      <br>
      Thanking you in anticipation
      <br>
      Asiya
      <br>
      <br>
      <br>
      <br>
    </blockquote>
  


<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00496" href="msg00496.html">[ferret_users] Memory error</a></strong>
<ul><li><em>From:</em> abs15ms027</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00496.html">[ferret_users] Memory error</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00512.html">Re: [ferret_users] Memory error</a></strong>
</li>

</UL>
<center>[<a href="msg00496.html">Thread Prev</a>][<a href="msg00512.html">Thread Next</a>][<A HREF="threads.html#00499">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
