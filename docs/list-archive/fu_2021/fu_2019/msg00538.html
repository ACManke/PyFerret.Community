<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] string composition -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Wed, 19 Feb 2020 09:43:27 &#45;0800 -->
<!--X-Message-Id: d9a0458a&#45;e910&#45;62d2&#45;1533&#45;70fdc5ed598d@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20200219101500.25fafd97@gfi063209.klientdrift.uib.no -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] string composition</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00537.html">Thread Prev</a>][<a href="msg00539.html">Thread Next</a>][<A HREF="threads.html#00538">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] string composition</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>, Marco van Hulten &lt;<a href="mailto:Marco.Hulten@DOMAIN.HIDDEN">Marco.Hulten@xxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] string composition</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 19 Feb 2020 09:43:23 -0800</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=dx99MFTD;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=dx99MFTD;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :dkim-signature;        bh=8rR+Nfnd0l3n8LyuO57VVRQSOl6CK5Y4r4toQQUz4YA=;        b=uWY8iO7S8W8r76gIGHlEYYQbNV8p0wsi2lKU/EmsI9pkXAPDgwhSpjwX/AgiLyLk/b         Q5s/ATMZVA486DTJnOBtugouumf8NQSXUBjpxwH4BK1/+QQG5zjHb5qWZymKOFub0wO+         7VI9AZs2A8DmvsFgwwwd82Mc3j5ugTfUsC4CZxr9Ln6SNml+oAGFHJyCrvXMMb6zz3pu         GQe4LxVJxBK2wXIIrTnTfBUIv6QrVR3MHKzE81pPePePlGKpV8bNteVTrDqJkgTrc+Qx         sECUmyz9fxNGP4kjXWIubctUTPcBpE4e9WCgub2uhrbzcqztQ69L6htvXzLwRgqd1TB5         8ecg==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :dkim-signature;        bh=8rR+Nfnd0l3n8LyuO57VVRQSOl6CK5Y4r4toQQUz4YA=;        b=optaeFdCX4liw3mFwivFZm1ve4Mzuf57JBBDi7fYl0JfjS/YZVGYiRy2bfx14Gj5Zr         aqq7nOV72hXSPdk1JEm/r35ly0ouh6pQE0h2TDeCa2miwODXB4IeSbsYfnrosgsXymIa         lJrtv/TFLfcHG5gnpM+DSilcGXVB9FHVIIrEyr/0lnRxcS/b/lqvCnI30k2WpzFETKPP         EDhZeG6HZfCSuYLDSLa90OjReldJuwzIbCMDnMVbVA1Q+HmSxzrtkKyIKQb+jgmn8MJD         9q3Dv3016vpMOKXmD1bMUyMTS93vxiaPDs15Eg0PjWgA2oclQ9Luapcxrj+QONfzltKt         9z0g==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1582134206; cv=pass;        d=google.com; s=arc-20160816;        b=a68Nub4o6Wh1GFPonhX4qKAj5O2vOnY6U28Y241wt4Fb6r9yLmV4qZm0JThtt0sLLo         IH4Q5PK0ZLW2rRhNNA5mxH38QlUHHgwZ227cQPLPYUOYNoQTcVfBbhKLYnZRQTisQ4zU         WZ+fo9PJSWZf3/ifEFtddUHIJcpK9TQVCIAoxkIYuNvqc/tLrZp+h0P/A0jICnqij4U0         Tl77XWMqyfLCAPFLntDRPfk+GL+zWB5q2L2LpRD8uW5gf3p2gpv4tZ2Q42dl+DXu3Ic8         ftk4xYAyYLow0bcSvRxcCx07JJ3fE9ieaPr/XiFBQlLyZHdN4poS/+LjP8QNJdyY5SY7         AEng==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1582134205; cv=none;        d=google.com; s=arc-20160816;        b=SMbAdF814zZvDZAEmivPDE0hTfIWPAP7jGd0mHnZmUfxD+lrvKQPFIbXR5t4py5Q88         OTxgtG3YVmVEOuFHB7GuBPaL1nVSXdueoCQAeFlRhhCQjACrUKyAh8FRdpumNTJLVQ01         p+N4+/ptkHOxJIBXFFEvr9rs0Zfy30E6OdFeZ2XI5HCjPHhD9W+1v6gTSCD6rDdVxzGq         D1DFUZTCh0ZeUuJQVW/X03D0/xFfvUM5vhMPtnawYtifBCCpdj2WQLrktV/PPdAe380j         TMULTrmN8oSUxXs/XEnidtUs5jPxGlvn9J9KH8vtxU6P3SIGAL9L/8uhuuRdvbfNDcPo         nSPA==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-transfer-encoding:content-language         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=8rR+Nfnd0l3n8LyuO57VVRQSOl6CK5Y4r4toQQUz4YA=;        b=Rt7uCFGd9qryda5+D+Yhn9tphRuuk7rYHwf1DT42sIIaxImanCfPDIZbMGp5SR9jR+         xukK7bteW7qVm5uzki0dqsOR10t4ZeUyk967Fl9xhuPSGUFv33bMxqLbXPnBpplJ86Hd         ttiog/AYJAnpRx5QJhrcePd/mVe6+CXib1FEc6YpFngxW5m90q9HzNCBh9/gYIvnFHIn         qpWuuU9xY3nKdGCkRXNawhRtohyIYfLG6qAoZVVpSl/iHxB1xX8BTBbarclGdg5H14Qo         C6o3VdVANZhoqyEhPK7ZZOXqfrla58m3QQ088Uq8IJ/4wfDRQAzEPQZ6OPiQr+CwGkUZ         HSlw==</li>
<li>In-reply-to: &lt;<a href="msg00537.html">20200219101500.25fafd97@gfi063209.klientdrift.uib.no</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00537.html">20200219101500.25fafd97@gfi063209.klientdrift.uib.no</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101 Thunderbird/68.5.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>I agree this seems like a bug, and I'll have a look at this. Addition of 
</tt><tt>strings is one way to work with them, but for combining two strings, the 
</tt><tt>STRCAT function is the most reliable:
</tt><pre style="margin: 0em;">


yes? list/nohead strcat(v1.units, v2.units)
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;m/smmol C m-3&quot;

A variation on your last command could be this, creating a single string.

yes? list/nohead &quot;`v1.units` + `v2.units`&quot;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &quot;m/s + mmol C m-3&quot;


On 2/19/2020 1:15 AM, Marco van Hulten wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Ferreters&#x2014;

When I was composing unit strings from a product of variables, I found
an unexpected behaviour:

yes? let/units=&quot;m/s&quot; v1 = 1.1
yes? let/units=&quot;mmol C m-3&quot; v2 = 2.2
yes? list/nohead v1.units + &quot;XYZ&quot;
         &quot;m/sXYZ&quot;
yes? list/nohead v1.units + v2.units
         &quot;m/sm/s&quot;
yes? list/nohead &quot;`v1.units`&quot; + &quot;`v2.units`&quot;
         &quot;m/smmol C m-3&quot;

I expected that the result of the panultimate command would be the same
as that of the last command.

(The last command can be used as a solution or workaround to this issue.)

&#x2014;Marco

</pre></blockquote>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00539" href="msg00539.html">Re: [ferret_users] string composition</a></strong>
<ul><li><em>From:</em> Andrew Wittenberg - NOAA Federal</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00537" href="msg00537.html">[ferret_users] string composition</a></strong>
<ul><li><em>From:</em> Marco van Hulten</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00537.html">[ferret_users] string composition</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00539.html">Re: [ferret_users] string composition</a></strong>
</li>

</UL>
<center>[<a href="msg00537.html">Thread Prev</a>][<a href="msg00539.html">Thread Next</a>][<A HREF="threads.html#00538">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
