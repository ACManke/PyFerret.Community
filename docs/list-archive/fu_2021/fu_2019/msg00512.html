<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Memory error -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 4 Feb 2020 13:55:08 &#45;0800 -->
<!--X-Message-Id: a4910e59&#45;adf1&#45;2a93&#45;5f42&#45;f365e3059ad2@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 3a342462d87fd2d4ad97646b867377de@iiserkol.ac.in -->
<!--X-Reference: b47db628&#45;d587&#45;1c6a&#45;dcf7&#45;b005707f98dd@noaa.gov -->
<!--X-Reference: 58e6f72569b7a789c90987fc265303eb@iiserkol.ac.in -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Memory error</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00499.html">Thread Prev</a>][<a href="msg00497.html">Thread Next</a>][<A HREF="threads.html#00512">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Memory error</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Memory error</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 4 Feb 2020 13:55:06 -0800</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=W6jHwlg8;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=W6jHwlg8;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :dkim-signature;        bh=pEq9D+Nxh25hi1etBvfapaS/+P5FDYJEA5+YDKNEZlI=;        b=vAt0I7wy04GCM/4qg0UJCy00Y5D5sY6tMr/CfikEsOKEutg5kZ9bDTZcoNIqqbCaL2         BaSuFl7FftxbUUd5bNLTRlpR/uoDk16jZ2eNt57lFrAIE1eve097k2AGQ+ag31+H3A+C         Rnrr1AJjfCi55Y0UdTteK6h6By9uyjk0CjISMuBtD7+xr/D9lx9MoaVChntVkn7KdcXJ         ls0bhi6g6k4vq6kM5p5XjAw5PZu9QTVcmQbmP7CTf/Zr3wg/YDuuahlW64EeuLo/JHYg         Li2M99J3iADiLP325Q6srAoLHqlBM0NE3zbr58wOJ7r/Uj3Sd8ti2afjkPmNwKJsxwRy         Q5AQ==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:content-transfer-encoding:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :dkim-signature;        bh=pEq9D+Nxh25hi1etBvfapaS/+P5FDYJEA5+YDKNEZlI=;        b=NMTwu+8y2iBYB7e2bOJAOHSPFfiXx3mlln9oI/ETVOdf5zfR6JMNXmituaakc9CKTl         JRVI44dZQkDNN3cS8jvRN16fvACFrbly72Yc4ip0kR8IKJ1c149QXavlsSpVOACiHHCy         VtucabXVomld1VGAqGMfqpgDvjG0EtFlXZtSx7RZzHORqiTiqBUfC3/Wnhm50f4nwTNN         1w6lhfscKh1L8kUVBsQEGNw2pEq35V7DRZ9ZfPpj/FTXpa97XGm0fCgifPf+4LqPLY3I         PnmNE3l/QwOHSl3glsqHPS1E1BF1Rua5sbnOo0aoYJNflBRCAT9/BWRhg49RUn1gfhdv         HkZw==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1580853308; cv=pass;        d=google.com; s=arc-20160816;        b=b8bhEIfBOsIW/KtPeyNHgHYAPzDDWgjO3hcZUH4wmN6lnRo/2Rajk5DDOmLOs1cj+1         e38QVhLO8G5br5poQlGGypYL48dgJSKcJdmtxGI/Ak0egQHM5UrJlTsOHr3Cc/EPFJhh         y1BBbL2Iae+wAhYg/VtzVAnazV9TdYH/XyBbHPNV90VDsxEh9Ea+LP45u6j3ZTqdPuEZ         GIkTv37k5PsfpZp4P/JZmvD9+TnhJ8MQgzkc9ZDHH4IpFT2h9qGofj9ySyYP1Iy5p654         8LMw3b+5nfs8nyfwK7Ffdlo9m2hUX4t47yD9wq5JWXuPZgFphwkCCpV8Oej4EEA657mu         xTVw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1580853306; cv=none;        d=google.com; s=arc-20160816;        b=IUii1nZOqA659ptGFptI6YsNSe4RQN9Rfn97CIVlimu1+jitGsJ7yhJRfzDMFnk0TW         UdoamMKUOP2NPCNMhc3fuOdRDbT8B0ra+M7gorNCmWY97lN9RTjemTtboPgVUXjFJTkt         RwDBgGDBMcaS9zVJEj29mz83dJ4YixEtsIWSmfkPB0g42fxfv28SSMv3tXeQRSWWc/Ik         M6yd3foJT7lg98fVxExmppV/wNebGeKsOjPf73NKWPcT7PnMOWxiAqjbyYeRJAaO44lp         6BNoPchHimXSKJylb1KSlOhJtfVd06lF2YfuVrpAqKrj3Ut7kHPn0WuBXu45KPSSQjm/         a1HQ==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-transfer-encoding:content-language         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=pEq9D+Nxh25hi1etBvfapaS/+P5FDYJEA5+YDKNEZlI=;        b=IMVKx86iQteG0qGkLtCaYk7TEQCLwzK2TzyB+IB6Znyx+qAmpC8E6++MPTQ4Zj+26y         JIcfCjLOhcCGsmS89aL3bJqUEmA/Bp0k+6pBJqvMFB+LRwdgEEVBy8wHNgtsn/i/THIH         5RwJrS+iSASoTFnNptPlToKonwlXGlzPDvD7A4V+xQj9p3bL7ZJcYyKtP+EMZRDUVDRW         6ePDyQ2nEI+Zy6IMR0JsY7DIRAxop3O2yUAZ6ljylLdw1X/yYWiBJOnTNoe1JsdVP5F2         ASqMhFYSgVz5t0LIarouuUTJi+cRFnc78Os20y+WEqhy6hrHTOz582Zfdiece3nYkGc7         zZPg==</li>
<li>In-reply-to: &lt;58e6f72569b7a789c90987fc265303eb@iiserkol.ac.in&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00496.html">3a342462d87fd2d4ad97646b867377de@iiserkol.ac.in</a>&gt; &lt;<a href="msg00499.html">b47db628-d587-1c6a-dcf7-b005707f98dd@noaa.gov</a>&gt; &lt;58e6f72569b7a789c90987fc265303eb@iiserkol.ac.in&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:68.0) Gecko/20100101 Thunderbird/68.4.2</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<tt>(replying to the Ferret List -- questions about Ferret scripting are 
</tt><tt>asked there)
</tt><pre style="margin: 0em;">

Try it with a smaller value for set memory/size= setting, perhaps /size=50.

For information about memory use, please see this discussion:

<a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/computing-environment/MEMORY-USE">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/computing-environment/MEMORY-USE</a>

</pre><tt>Note that you would only see the error message &quot;Unable to allocate xxx 
</tt><tt>Mwords of memory&quot; under older versions of Ferret.&#xA0; If you are running an 
</tt><tt>older Ferret, scroll down to the bottom of that documentation page.
</tt><pre style="margin: 0em;">

On 2/4/2020 3:28 AM, abs15ms027 wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hello,

I tried set memory/size=600

But&#xA0; again I got this error:

&#xA0;Cached data cleared from memory
Unable to allocate 600.0 Mwords of memory.
Restoring previous memory of 25.6 Mwords.

This is the error I get while running the scipt:

fill/x=-70:100/y=0:55/pal=blue_orange/nolab/set correl
&#xA0;**ERROR: request exceeds memory setting: 21 Mwords were requested.
CONTOUR/FILL/x=-70:100/y=0:55/pal=blue_orange/nolab/set correl
Command file, command group, or REPEAT execution aborted
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; *** NOTE: You can use SET MEMORY/SIZE=xxx to increase memory.
</pre><tt>&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; *** NOTE: The &quot;Memory use&quot; section of the FERRET Users 
</tt><tt>Guide has further tips.
</tt><pre style="margin: 0em;">


Is it somehow related to the internal memory of the device&#xA0; I am using?

Thanking you in anticipation
Asiya


On Thu, 23 Jan 2020 14:21:20 -0800, Ansley C. Manke wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Asiya,

First I'd like to say that in the most recent versions of Ferret, SET
MEMORY does not allocate memory from the system but only sets an upper
limit on the amount it will use as needed.&#xA0; This discussion is for
versions previous to v7.2.&#xA0; The current documentation for SET MEMORY
is here, with the discussion at the bottom of the page for earlier
versions.


</pre><tt><a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/computing-environment/MEMORY-USE">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/computing-environment/MEMORY-USE</a> 
</tt><tt>
</tt><pre style="margin: 0em;">
[1]

In Ferret v7, the SET MEMORY/SIZE= causes Ferret to ask the system to
allocate that numer of mega-words (storage locations) of memory, so
SET MEM/SIZE=1400 asks for over 11 Gb of memory.&#xA0; When you tried
tried &quot;SET MEMORY/SIZE=1400&quot;&#xA0; did you see an error message?&#xA0; In v7,
it might report

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
&#xA0;Cached data cleared from memory
Unable to allocate 1400.0 Mwords of memory.
Restoring previous memory of 25.6 Mwords.
</pre></blockquote><pre style="margin: 0em;">

To get an idea of the&#xA0; amount of memory you might need, look at the
subset of the grid that your definitions use. The expression
SST_0001[X=120:180@AVE,Y=-16:6@AVE] needs to read data 60*22*165.
It's in megawords, so,

yes? list 60*22*165/1000
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : 60*22*165/1000
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 217.8

So just for that expression you'd need to have the SET MEMORY/SIZE
setting larger than 218.&#xA0; Ferret will store intermediate results and
re-use some of the memory, but there are a number of calculations done
to evaluate variable&#xA0; &quot;correl&quot;, so probably more memory is needed.
Try SET MEMORY/SIZE=300, or maybe 500

On 1/22/2020 11:52 PM, abs15ms027 wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hello,

I am repeatedly getting an error while using some of the data sets
in Ferret. Error is as follows:

Command file, command group, or REPEAT execution aborted
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; *** NOTE: You can use SET MEMORY/SIZE=xxx to
increase memory.
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; *** NOTE: The &quot;Memory use&quot; section of the
FERRET Users Guide has further tips.

I tried SET MEMORY/SIZE=1400 and SET MEMORY/SIZE=5e12, but still, I
am getting the same error.

My script looks as follows.

use abs_era_data.nc
set mode metafile
let

</pre></blockquote><pre style="margin: 0em;">

</pre><tt>ab=(sst_0001[x=120:180@ave,y=-16:6@ave]+sst_0001[x=-150:-180@ave,y=-16:6@ave])/2 
</tt><tt>
</tt><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
let p=ab
let q=sp_0001[g=sst_0001]

go variance
let ad=(correl)*(39/(1-(correl)^2))^0.5
let sign=if abs(ad) ge 2.02269092 then correl

fill/x=-70:100/y=0:55/pal=blue_orange/nolab correl #getting error
at this lin
contour/x=-40:90/y=12:60/ov/nolab sign
go box 8,-13,41,52
go box 69.5,75,29,35.5
go land thick

LABEL ,,-1,0,.16 &quot;Longtitude&quot;
LABEL ,,-1,90,.16 &quot;Latitude&quot;

label/nouser 4.5,6.5,0,0,0.1 &quot;@TRcorrelation of SST over equitorial
Pacific with Surface pressure&quot;
cancel mode metafile
sp Fprint -o slp_sst_ipwp_correl_qq.ps metafile.plt

Ferret version I am using is FERRET v7 (opt)

The data set used is ERA 5 single-level data and includes these
variables:-

&#xA0;name
title
I&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; J K&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; L&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; &#xA0; M
N
&#xA0;SST_0001 Sea surface temperature&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:1440
1:721 ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
&#xA0;SP_0001&#xA0; Surface pressure
1:1440&#xA0;&#xA0;&#xA0; 1:721 ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
&#xA0;TP_0001&#xA0; Total precipitation
1:1440&#xA0;&#xA0;&#xA0; 1:721 ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
&#xA0;SST_0005 Sea surface temperature&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:1440
1:721 ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
&#xA0;SP_0005&#xA0; Surface pressure
1:1440&#xA0;&#xA0;&#xA0; 1:721 ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164&#xA0;&#xA0;&#xA0;&#xA0; ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ...
&#xA0;TP_0005&#xA0; Total precipitation
1:1440&#xA0;&#xA0;&#xA0; 1:721 ...&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1:164

It would be of great help if you could provide me with a solution
to this problem.

Thanking you in anticipation
Asiya
</pre></blockquote><pre style="margin: 0em;">


Links:
------
[1]

</pre><tt><a  rel="nofollow" href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/computing-environment/MEMORY-USE">https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/computing-environment/MEMORY-USE</a> 
</tt><tt>
</tt></blockquote><pre style="margin: 0em;">

</pre></blockquote>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00496" href="msg00496.html">[ferret_users] Memory error</a></strong>
<ul><li><em>From:</em> abs15ms027</li></ul></li>
<li><strong><a name="00499" href="msg00499.html">Re: [ferret_users] Memory error</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00499.html">Re: [ferret_users] Memory error</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00497.html">[ferret_users] Python externat function with several arguments with different shapes.</a></strong>
</li>

</UL>
<center>[<a href="msg00499.html">Thread Prev</a>][<a href="msg00497.html">Thread Next</a>][<A HREF="threads.html#00512">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
