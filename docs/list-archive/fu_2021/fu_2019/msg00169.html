<!-- MHonArc v2.6.18 -->
<!--X-Subject: [ferret_users] Bug report: listings multiple variables to ascii file -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Thu, 16 May 2019 16:58:12 &#45;0700 -->
<!--X-Message-Id: 5fece81a&#45;32c9&#45;5e0a&#45;f498&#45;850eafb65b93@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAJerFNGrU9E5_CktS6ZG9Y+kNvQNv3R&#45;miRhKOvO54nPHwmLMg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[ferret_users] Bug report: listings multiple variables to ascii file</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00168.html">Thread Prev</a>][<a href="msg00170.html">Thread Next</a>][<A HREF="threads.html#00169">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] Bug report: listings multiple variables to ascii file</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] Bug report: listings multiple variables to ascii file</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 16 May 2019 16:58:09 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=SSUg7x1V;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=SSUg7x1V;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:dkim-signature;        bh=G98cle2zyt31UoDaBiLpAmJfV8v6N87o4mAgti9GPno=;        b=wASw4WPnQGL7NCCecU+I4IKgwYKWSFlFkjlvWXNv+GTj3zDdr299Ci1jcC4bQ174Iv         rSWgEYJzwwOAuso3j0eoDBa7GG0+Obe/oiE0by8q1HDq29dDhl8pUXaoB1YYT0bq9PsB         WpcQH9rO2GmPA3aaCSAnbTSBaYsUSZtz1ybXkszGFbxlhgzQd/vbOWkFkjWTtHiZjPtV         wQXx2cczjIk64y/gY63YX3rlptUrL2hFi8FLUE4W6yUivL+4n1IFio3Hdj6G4MEHgwFF         0uNh+6JucjluRMnwDlYwiCdTjcu9NAkwcLqGBtILWr9Rfl6a07o3xM4Bp3B4FfWGL0uU         nj7Q==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:dkim-signature;        bh=G98cle2zyt31UoDaBiLpAmJfV8v6N87o4mAgti9GPno=;        b=h/pusmbdbs+1vXypYTqnGDbMORB+J4mya9m8iB+PyBou31OyKsnFGU4+6cXT/mkUKJ         Ngo0Qy6RKAUasngEkQfIlBBRdAx+2mzBz5ocNCjl7gXEbwS+16WxO/XHgqtL4sETqzKn         01NZall8cvewJdMG4H0tfZdaNRCm3cZkRAWoMSIvuK4wFt8REjVAKBMaxjOJ7V4VhBLC         JxrGs48SOXp3pp1dbKlUHyFPCBcJYqKXbY6PdByl4efXQsNOpj5vKBiSnYng+7ouA9HX         /ZDTjU/ufIu0eAfcoqCLV0w6ZPAWr4rkUiDBMNuKR9DyAw+LbHT4KJ7XLKrz5/QnNh0G         AK+g==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1558051092; cv=pass;        d=google.com; s=arc-20160816;        b=TS/xXRGg4xKixD7xvEDcnG6MQdPRZsyWxAM9pE8vTFydIu7RfV7sOBdoDO0xh2Wwwk         vUoy5BM9lFNDJ+LOHQYR7sJQT+/31wBcOjxUhWfPXrRqAIM7OfARmxOMLQwB0WY2ekWu         aIGv6G9f1S/QDNup5Qus3JvQZ4PLLXSe0ZO9J8tYQXgjqVwLvZ+mt36s/6dTHPDhjySp         BM/zFukd3aRWILhImvQIhLJqDxA4TSHZsOw7rnXAiSvfpzce7Xpu2Djo7SHM2MvjO5iv         6PS3sfifiTusvDBAbdOMjNAFNyBsBXqRPEObmiRLwbzktXwDLAUfnT56y3lp8Op+U5JU         NaWw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1558051091; cv=none;        d=google.com; s=arc-20160816;        b=IfQR4d4O6zCw4X6l/qTJJtK3ArSLYco0EHbFtR988ZiFA/H/LBTyCqGuQSc9P59cKI         34S2filmo43W5pF+Ggtizb8HJ2cKurZjbGExZDsMtJcHF3WCvgkUQ3Uw/9qjZSwmYOC4         WbMskFI+LD7Obuit2JajODMbMLtKi4/SAD1nU9xEnfbGN9YmHNNFhr8JcKnX5xV9J9L8         wA2rjge9KTGSvoK1Za059+rW3YLDTk/WquntOXJKHAyGHjl4tpiVOy/NwceiBK8nbv1i         QIKBCsfEOBzQkqKmmXuDwiIIZbwIdNXpCnt0yrGxVnNgToxR2u6V7PlctBRBcm/lql+a         SS0w==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-language:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=G98cle2zyt31UoDaBiLpAmJfV8v6N87o4mAgti9GPno=;        b=dEEQuqmA0TvtiuQ4NCwMQuHOjvmKuTRhQSe1picjyMBBZDfGclJqtYOvjWdPMZ6z4W         lt+++HdTLqonKfgqk5Y3Q/lDJrVMm7el3TgV9Xyzh1RW+5OwbTsaN6rVw1WDxFR1m5gr         lwWH4VMZf7He7sNeng4I9qksX1R0ag+AcQGOJmWjgvykUcMG4yVuBxBZTcfA4mhB1l9h         WINOB2mSGOluFhwx61/yCNn/5KmcWLrtPbb939CKIhW+ld/vrVlaqCCHhTdaJ5nREPp/         1kVAGSOeeH2Md0ZZ+0exsTxx0n9WZTOieXVL2sJ0AyKRVKD3I6ZaouLXIpmDOaTrSctm         14SA==</li>
<li>In-reply-to: &lt;<a href="msg00168.html">CAJerFNGrU9E5_CktS6ZG9Y+kNvQNv3R-miRhKOvO54nPHwmLMg@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00168.html">CAJerFNGrU9E5_CktS6ZG9Y+kNvQNv3R-miRhKOvO54nPHwmLMg@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101 Thunderbird/60.6.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <p>Hi all,</p>
    <p>We've discovered a Ferret/PyFerret bug which, though I hope it's
      not too common a case, can result in incorrect data being listed
      to the screen or to ascii (text) files.&#xA0; It does not affect netCDf
      output.&#xA0; So this applies to the simple LIST command, or
      LIST/FORMAT=comma, LIST/FORMAT=tab but not SAVE.&#xA0; This is not a
      new bug; it's been present for quite a few years.<br>
    </p>
    <p>We've identified the cause of this and the bug will be fixed in
      an upcoming release, but we thought we'd let you know about it and
      ways that it can be worked around in current releases using
      command syntax.<br>
    </p>
    <p>First a bit of explanation. In Ferret, variables that are being
      combined in expressions or in output listings must have "<b><a rel="nofollow"
          moz-do-not-send="true"
href="https://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS#_VPINDEXENTRY_300">conformable</a></b>"
      grids, that is grids that share their coordinates and can be
      automatically combined by Ferret.&#xA0; If a variable has just an X
      axis, then it can be combined with a multi-dimensional variable
      that has the same X coordinates.&#xA0; This lets you do something like
      subtract a time average from a variable, even though the variable
      is in XYT and the average of course is in XY, as in&#xA0; "LET anomaly
      = temperature - temperature[T=@AVE]"<tt> <br>
      </tt></p>
    <p><tt></tt><br>
    </p>
    <p>The bug came up in a listing of a data variable, say sst on an XY
      grid, along with the coordinates, so something like this:<br>
    </p>
    <p><b><tt>yes? list/format=(F8.2)/file=mydata.dat&#xA0; y[gy=sst],
          x[gx=sst], sst</tt></b></p>
    <p>The coordinates y[gy=sst], x[gx=sst] are of course simple 1-D&#xA0;
      lists in Y and X.&#xA0; They will be automatically replicated in a
      listing like this, so if this is a simple test variable<br>
    </p>
    <p><tt><b>yes? list testvar<br>
          &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : example<br>
          &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SUBSET&#xA0;&#xA0; : 2 by 3 points (X-Y)<br>
          &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 2&#xA0;&#xA0;&#xA0; <br>
          &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 2<br>
          &#xA0;1&#xA0;&#xA0; / 1:&#xA0; 100.0&#xA0; 200.0<br>
          &#xA0;2&#xA0;&#xA0; / 2:&#xA0; 300.0&#xA0; 400.0<br>
          &#xA0;3&#xA0;&#xA0; / 3:&#xA0; 500.0&#xA0; 600.0<br>
        </b></tt><tt><b><br>
        </b></tt>and it's listed in comma-delimited form, along with its
      coordinates, the first two columns will be the x's then the y's
      and finally the variable.&#xA0; This listing with x varying fastest, is
      correct.<br>
    </p>
    <p><b><tt>yes? list/form=comma/norow x[gx=testvar], y[gy=testvar],
          testvar<br>
          &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; X: 0.5 to 2.5<br>
          &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Y: 0.5 to 3.5<br>
          &#xA0;Column&#xA0; 1: X is X (axis XAXIS)&#xA0;&#xA0; BAD FLAG : -1.E+34<br>
          &#xA0;Column&#xA0; 2: Y is Y (axis YAXIS)&#xA0;&#xA0; BAD FLAG : -1.E+34<br>
          &#xA0;Column&#xA0; 3: TESTVAR is example&#xA0;&#xA0;&#xA0; BAD FLAG : -1.E+34<br>
          X,Y,TESTVAR<br>
          &#xA0;---- J:1 Y:&#xA0;&#xA0; 1<br>
          1,1,100&#xA0; <br>
          2,1,200&#xA0; <br>
          &#xA0;---- J:2 Y:&#xA0;&#xA0; 2<br>
          1,2,300&#xA0; <br>
          2,2,400&#xA0; <br>
          &#xA0;---- J:3 Y:&#xA0;&#xA0; 3<br>
          1,3,500&#xA0; <br>
          2,3,600&#xA0; <br>
          &#xA0;<br>
        </tt></b><b><tt>&#xA0;</tt></b><br>
    </p>
    <p>The bug is seen if the Y coordinates are first in the list of
      variables to write.&#xA0; This puts the listing into a state where Y is
      varying fastest, but the 2-D variable isn't permuted so it's just
      listed in such a way that it no longer matches the coordinates
      listed.</p>
    <p><b><tt><font color="#990000"><font color="#000000"><font
                color="#990000">&#xA0;<font color="#000000">yes?
                  list/form=comma/norow y[gy=testvar], x[gx=testvar],
                  testvar<br>
                  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Y: 0.5 to 3.5<br>
                  &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; X: 0.5 to 2.5<br>
                  &#xA0;Column&#xA0; 1: Y is Y (axis YAXIS)&#xA0;&#xA0; BAD FLAG : -1.E+34<br>
                  &#xA0;Column&#xA0; 2: X is X (axis XAXIS)&#xA0;&#xA0; BAD FLAG : -1.E+34<br>
                  &#xA0;Column&#xA0; 3: TESTVAR is example&#xA0;&#xA0;&#xA0; BAD FLAG : -1.E+34<br>
                  Y,X,TESTVAR</font><br>
                &#xA0;---- I:1 X:&#xA0;&#xA0; 1<br>
                1,1,100&#xA0; <br>
                2,1,200&#xA0; <br>
                3,1,300&#xA0; <br>
                &#xA0;---- I:2 X:&#xA0;&#xA0; 2<br>
                1,2,400&#xA0; <br>
                2,2,500&#xA0; <br>
                3,2,600 </font></font>&#xA0; <br>
          </font></tt></b><br>
      One solution is to put a permutation in the list command.&#xA0; Either
      of these forms would give a correct listing; varying fastest in y
      or varying fastest in x,</p>
    <p><tt>yes? list</tt><tt><b>/order=yx</b></tt><tt>/form=comma/norow
        y[gy=testvar], x[gx=testvar], testvar</tt><tt><br>
      </tt><tt>yes? list</tt><tt><b>/order=xy</b></tt><tt>/form=comma/norow
        y[gy=testvar], x[gx=testvar], testvar</tt></p>
    <p>Or, it's often nice to write data out in a cleaner listing,
      without those extra lines labeling the I/X or J/Y information.&#xA0;
      Expand the coordinates explicitly into 2-D variables, and then
      turn them along with the data variable into simple lists with
      XSEQUENCE.&#xA0; <b>These listings will be correct</b> using any
      version of Ferret/PyFerret.&#xA0; <br>
    </p>
    <p><tt><b>yes? let xvar = x[gx=testvar] + 0*y[gy=testvar]</b></tt><tt><b><br>
        </b></tt><tt><b>yes? let yvar = 0*x[gx=testvar] + y[gy=testvar]</b></tt><tt><b><br>
        </b></tt><tt><b>yes? list yvar, xvar, testvar</b></tt></p>
    <tt><b>
      </b></tt>
    <p><tt><b>yes? let/title="Longitude" xlon= xsequence(xvar)</b></tt><tt><b><br>
        </b></tt><tt><b>yes? let/title="Latitude" ylat = xsequence(yvar)</b></tt><tt><b><br>
        </b></tt><tt><b>yes? let/title="Example data" values =
          xsequence(testvar)</b></tt></p>
    <p><tt><b>yes? list/format=comma/norow xlon,&#xA0; ylat, values<br>
        </b></tt></p>
    <p><tt><b>yes? ! list out to a file<br>
          yes? list/format=comma/clobber/file=yxdat.txt </b></tt><tt><b>xlon,&#xA0;
          ylat, values</b></tt><br>
      <br>
    </p>
    <p><br>
    </p>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00168" href="msg00168.html">[ferret_users] roated EOF analysis</a></strong>
<ul><li><em>From:</em> chinnu sachi</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00168.html">[ferret_users] roated EOF analysis</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00170.html">[ferret_users] running trend</a></strong>
</li>

</UL>
<center>[<a href="msg00168.html">Thread Prev</a>][<a href="msg00170.html">Thread Next</a>][<A HREF="threads.html#00169">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
