<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 17 Jun 2019 10:53:55 &#45;0700 -->
<!--X-Message-Id: 5bb75429&#45;570e&#45;c7bd&#45;963f&#45;c4896e6f6f59@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 3936110.315755.1560540688301.JavaMail.zimbra@lsce.ipsl.fr -->
<!--X-Reference: 6b388665&#45;563a&#45;dbcf&#45;0ccc&#45;c40f184cc3d7@noaa.gov -->
<!--X-Reference: 1357552384.186794.1560765888865.JavaMail.zimbra@lsce.ipsl.fr -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00234.html">Thread Prev</a>][<a href="msg00236.html">Thread Next</a>][<A HREF="threads.html#00235">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Patrick Brockmann &lt;<a href="mailto:patrick.brockmann@DOMAIN.HIDDEN">patrick.brockmann@xxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 17 Jun 2019 10:11:41 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=pHgAIMzd;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa.gov header.s=google header.b=pHgAIMzd;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>;       dmarc=pass (p=REJECT sp=NONE dis=NONE) header.from=noaa.gov</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:cc:to:subject:dkim-signature;        bh=AuASH9gUu0MI7OOC3vVgptRMy0a0ltWpuCrv0Fb0hUM=;        b=BafWENjwrcMPfEBTzzUnjVCMn6HKkySqkncpFxBLnN1UvIccnSO7g2p1GretEO6Ta5         xSPR7lusliewUGvEVn1/f56IGf8v3JmtpqX3J/FCE67cz551+vwncZBbPnmyrdpIIFXv         dFhyTUilCpVPIn9fYeJe5vIhEHUhoMvYLXp5MD4RENm3Fnao/i5smxrKp+IfieykAjZ+         0cWshgm/B9WNivrl+a7b7unSwCI5NUMXl2i5/bmHyX2qhqxzeEm2jNUPa9rv/Ng/Kgoa         gyawwRsqMBTJcvINA1ci5ioQ2XwkwtCnLWKcqy+GAcVbw9OvTD3HFE8gLHWiWer8Be9w         lsZg==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:cc:to:subject:dkim-signature;        bh=AuASH9gUu0MI7OOC3vVgptRMy0a0ltWpuCrv0Fb0hUM=;        b=AHvk9YdZJtJZvaWFxZYT3z7aj0c0lkfiZrlHB01pW9SHrZNMWTnR4cWgAMF8ZjlkVL         HrFzv/35U79uIZfva9/gL4Q7vvE341pYdvGERURl5c/BYcXyVpP0rSJFYydKaorT9/Dl         MrAwBqxMiv01dsCztp1SsoSNvRN20wp1KifOzgs8n3UrMRCFWBzlGDj/lpjtbSp3hAtJ         mupptxCZUK7Smgsn3inTZvuCD1p3xVtx77YQLys3BqHEeoxh+op4eKe+BJN0kQXivzEX         MW/z/QOhFH6QZK4XiSLkFVb1e2qYSq6U+CZ8zSP0h00roWHtEbHe0gBw/O8bVWCUjonL         lSSQ==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1560794034; cv=pass;        d=google.com; s=arc-20160816;        b=EmZJgSvMzgP8yxEFObaM70tUaNEAUhlvNKV47joy+n/sMe6J8WyV8SQxNL+cqpO5Y3         JgfpcAE+bH8yuTYTgBrwy4PYQiYQfC2gyhsEenKydGUnmWP4MwHExIMegQPvOGiaIJdS         yltObHcZ7wn0U3CHhsVu6XSJpsrPu8VLtWVfQRv1dvtZJcW76qlz4Dvn8YgHkN47+J5h         KJGJlBTO5hWMhWYyKFzDZgaIFxFMhPpuCzgGPRy2jE335hEAOHXPlO8w/J3p0gNIf67P         Cr7zLVOvbaEW6oX/oqPfK7Ajla4bYvP7Pmkm3StZV7/BJ2f4pYuYlwlgdePm8tR9QdbO         syTw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1560791498; cv=none;        d=google.com; s=arc-20160816;        b=wULx1vbExIg2SIaS+fJcd0Cj9s9vitJ0NLHg/wqKQtpAQbg1mcaXBAB47lLrWSnHZw         CQKb5tjZZOv4QIKqHMK7il1XeBGvDsnqc7k+LemsR1FGkFX0VLImVftRqj4g0H4OcNQ5         rqnvTmsr3gFIaRHkOSVEWL8vdVr+nsI59ctJzranEIcyYbhiISnTRA8wIAPrt8IPfqQ4         jiZSz9ybJIwjLFk0tFC1iZUAoPcgsgYGThmqUdcDKBQV7XbhoqRIELqxzaUTj6kZg0Kg         yvS6B3UTgeBFm/zVxPK+uJUWFw4WKPVswHwslNQ9p+/qZhWUdus+qafUgARIY9hsdWZu         +fqg==</li>
<li>Cc: ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa.gov; s=google;        h=subject:to:cc:references:from:message-id:date:user-agent         :mime-version:in-reply-to:content-language:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=AuASH9gUu0MI7OOC3vVgptRMy0a0ltWpuCrv0Fb0hUM=;        b=awM4H1DiCZe6gjF+U9XrW5tTwr/TRf9PWzLlnK7sKdMndqBnOX5vKxK2La9ZQTK/0e         PglLA6+uesuGHlEKJUfkcUPfccssBjUa5KawW071jWMKfDfM2noZFOddJOzq6dgoYImE         jbzHOPMzxN1isSCifkoGexcAoqEnLbujHj/pugB+q8QWFFUdSiPhk61SJdtMdM25Yv4L         +OLqaAHa2TDN1uA+MtEBCA3u/dW9AgkIlQB4AfK4DBExGmH1S1Ly/1Bhy2X9cR2FIuc9         DFiHCNAtaweXkuztLVBZH7xNdivv+JtWaU+Ru+br/n2dVELEHP4dz3dUqYsM32j7zdKj         wqsQ==</li>
<li>In-reply-to: &lt;<a href="msg00234.html">1357552384.186794.1560765888865.JavaMail.zimbra@lsce.ipsl.fr</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00232.html">3936110.315755.1560540688301.JavaMail.zimbra@lsce.ipsl.fr</a>&gt; &lt;<a href="msg00233.html">6b388665-563a-dbcf-0ccc-c40f184cc3d7@noaa.gov</a>&gt; &lt;<a href="msg00234.html">1357552384.186794.1560765888865.JavaMail.zimbra@lsce.ipsl.fr</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:60.0) Gecko/20100101 Thunderbird/60.7.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <p>Hi,</p>
    <p>Thank you for the example. I had tried to make simpler examples
      as well, but had not succeeded.&#xA0; The presence of bounds on the XY
      axes does seem to be necessary for this to happen, so I'm glad you
      noticed that.</p>
    <p>This bug appears with Ferret v6.85, so that will help me find
      it.&#xA0; I can see a difference using "mode diagnostic". With Ferret
      v6.84, it reports "doing reversing" for Q from dataset 1 and
      dataset 2.&#xA0; I've made a ticket and included you.<br>
    </p>
    <p><a rel="nofollow" class="moz-txt-link-freetext" href="https://github.com/NOAA-PMEL/Ferret/issues/1941">https://github.com/NOAA-PMEL/Ferret/issues/1941</a></p>
    <p>-Ansley<br>
    </p>
    <div class="moz-cite-prefix">On 6/17/2019 3:04 AM, Patrick Brockmann
      wrote:<br>
    </div>
    <blockquote type="cite"
      cite="">
      
      <div style="font-family: arial, helvetica, sans-serif; font-size:
        12pt; color: #000000">
        <div><span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">Hi,</span><br>
        </div>
        <div><br data-mce-bogus="1">
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">Thank you Ansley for taking into account this report
            bug. </span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"><br data-mce-bogus="1">
          </span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">This is a quite annoying problem when you want to </span><span
            style="font-size: 12pt;" data-mce-style="font-size: 12pt;">make
            comparisons.</span><span style="font-size: 12pt;"
            data-mce-style="font-size: 12pt;"></span><span
            style="font-size: 12pt;" data-mce-style="font-size: 12pt;"></span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">When all file structures are the same and files are</span><span
            style="font-size: 12pt;" data-mce-style="font-size: 12pt;">
            the sames too but you still<br data-mce-bogus="1">
          </span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">get differences, that is embarrassing. <br
              data-mce-bogus="1">
          </span></div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">Also I would put it at a very high priority if you
            mind.</span><br data-mce-bogus="1">
        </div>
        <div><br data-mce-bogus="1">
        </div>
        <div><span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">Here is the simplest test script I can achieve:</span><br
            data-mce-bogus="1">
        </div>
        <div><br data-mce-bogus="1">
        </div>
        <div><span style="font-size: 12pt; background-color: rgb(153,
            153, 153);" data-mce-style="font-size: 12pt;
            background-color: #999999;">$ more s1.cdl</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">netcdf f1 {</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">dimensions:</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; lat = 1;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; lon = 1;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; nvert = 2 ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; lev = 6 ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">variables:</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; double lon(lon) ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; double bounds_lon(lon, nvert) ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; double lat(lat) ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; double bounds_lat(lat, nvert) ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; double lev(lev) ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; lev:axis = "Z" ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; double q(lev) ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">data:</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;lon = 35 ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;bounds_lon = 33, 37; </span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;lat = 87 ;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;bounds_lat = 85, 89;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;lev = 1000, 900, 800, 700, 600, 500;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">&#xA0;q = 1, 2, 3, 4, 5, 6;</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">}</span><br>
          <br>
          <span style="font-size: 12pt; background-color: rgb(153, 153,
            153);" data-mce-style="font-size: 12pt; background-color:
            #999999;">$ ncgen -o s1.nc s1.cdl ; ncgen -o s2.nc s1.cdl</span><br>
          <br>
          <span style="font-size: 12pt; background-color: rgb(153, 153,
            153);" data-mce-style="font-size: 12pt; background-color:
            #999999;">$ ferret -script bug1.jnl</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">use s1.nc</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"> *** NOTE: Axis coordinates are decreasing-ordered.
            Reversing ordering for axis lev</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">use s2.nc</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"> *** NOTE: Axis coordinates are decreasing-ordered.
            Reversing ordering for axis lev</span><br>
          <br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">list q[k=1,d=2]-q[k=1,d=1]</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"> VARIABLE : Q[K=1,D=s2]-Q[K=1,D=s1]</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"> Z : 500</span><br>
          <span style="font-size: 12pt; background-color: rgb(255, 102,
            0);" data-mce-style="font-size: 12pt; background-color:
            #ff6600;"> -5.000</span><br>
          <br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">list q[k=6,d=2]-q[k=1,d=1]</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"> VARIABLE : Q[K=6,D=s2]-Q[K=1,D=s1]</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"> Z : 1000</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"> 0.0000</span><br>
          <br>
          <span style="font-size: 12pt; background-color: rgb(204, 255,
            204);" data-mce-style="font-size: 12pt; background-color:
            #ccffcc;">---&gt; the first difference should be 0 since the
            2 input files are strictly the same.</span><br>
          <span style="font-size: 12pt; background-color: rgb(204, 255,
            204);" data-mce-style="font-size: 12pt; background-color:
            #ccffcc;">---&gt; this bug occurs when there is an axis
            coordinates with a decreasing-order</span></div>
        <div><span style="font-size: 12pt; background-color: rgb(204,
            255, 204);" data-mce-style="font-size: 12pt;
            background-color: #ccffcc;"> and also presence of boundaries
            on X and Y </span><span style="font-size: 12pt;
            background-color: rgb(204, 255, 204);"
            data-mce-style="font-size: 12pt; background-color: #ccffcc;">(don't
            know why this last is related).</span><br>
          <br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">Best regards</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">Patrick</span><br data-mce-bogus="1">
          <br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">--</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">Data Analysis and Visualization Engineer / Project
            Manager</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">LSCE/IPSL, CEA-CNRS-UVSQ laboratory</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">LSCE - Climate and Environment Sciences Laboratory</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">IPSL - Institut Pierre Simon Laplace</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">--</span><br>
          <br>
          <br>
        </div>
        <hr id="zwchr" data-marker="__DIVIDER__">
        <div><span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"><b>De: </b>"Ansley C. Manke"
            <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:ansley.b.manke@xxxxxxxx">&lt;ansley.b.manke@xxxxxxxx&gt;</a></span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"><b>&#xC0;: </b>"ferret users"
            <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:ferret_users@xxxxxxxx">&lt;ferret_users@xxxxxxxx&gt;</a></span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"><b>Envoy&#xE9;: </b>Samedi 15 Juin 2019 02:07:14</span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"><b>Objet: </b>Re: [ferret_users] precision problem
            on a difference between a same variable read from 2 files
            with the same structure</span><br>
          <br>
          <br>
          <br>
        </div>
        <div data-marker="__QUOTED_TEXT__"><span style="font-size:
            12pt;" data-mce-style="font-size: 12pt;">Hi Patrick,</span>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">Yes, when the second file having the same name as an
            axis already in use by another file in the session, Ferret
            checks whether the axes are the same and if so, uses it in
            both grids.&#xA0; I think you must be correct that this is the
            cause of the difference you're seeing.</span> <span
            style="font-size: 12pt;" data-mce-style="font-size: 12pt;">I
            think you are correct that this also has to do with the
            reversing of the axis coordinates and that for some reason
            this is done differently in the two cases.</span> <span
            style="font-size: 12pt;" data-mce-style="font-size: 12pt;">I'll
            look further into this.&#xA0; Thank you for sending a detailed
            example.</span> <span style="font-size: 12pt;"
            data-mce-style="font-size: 12pt;">Ansley</span><br>
          <br>
          <br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">On 6/14/2019 12:31 PM, Patrick Brockmann wrote:</span><br>
          <div style="font-family: arial, helvetica, sans-serif;
            font-size: 12pt; color: #000000">
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">Hi ferreters,</span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">I encountered a
                problem when I compare a variable</span></div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">read from 2 different
                files with exactly the same structure (same axis in
                particular).</span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">The difference
                calculated with ferret has the following range:&#xA0;</span></div>
            <div>
              <div><span style="font-size: 12pt;"
                  data-mce-style="font-size: 12pt;">&#xA0; &#xA0;Minimum value:
                  -2.1516798E-11</span></div>
              <div><span style="font-size: 12pt;"
                  data-mce-style="font-size: 12pt;">&#xA0; &#xA0;Maximum value:
                  2.15167981E-11</span></div>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">but the difference
                calculated with ncdiff&#xA0;<span style="color: rgb(0, 0, 0);
                  font-family: arial, helvetica, sans-serif; font-style:
                  normal; font-variant-ligatures: normal;
                  font-variant-caps: normal; font-weight: 400;
                  letter-spacing: normal; text-align: start;
                  text-indent: 0px; text-transform: none; white-space:
                  normal; word-spacing: 0px; -webkit-text-stroke-width:
                  0px; background-color: rgb(255, 255, 255);
                  text-decoration-style: initial; text-decoration-color:
                  initial; display: inline !important; float: none;"
                  data-mce-style="color: #000000; font-family: arial,
                  helvetica, sans-serif; font-style: normal;
                  font-variant-ligatures: normal; font-variant-caps:
                  normal; font-weight: 400; letter-spacing: normal;
                  text-align: start; text-indent: 0px; text-transform:
                  none; white-space: normal; word-spacing: 0px;
                  -webkit-text-stroke-width: 0px; background-color:
                  #ffffff; text-decoration-style: initial;
                  text-decoration-color: initial; display: inline
                  !important; float: none;"><span style="color: rgb(0,
                    0, 0); font-family: arial, helvetica, sans-serif;
                    font-style: normal; font-variant-ligatures: normal;
                    font-variant-caps: normal; font-weight: 400;
                    letter-spacing: normal; text-align: start;
                    text-indent: 0px; text-transform: none; white-space:
                    normal; word-spacing: 0px;
                    -webkit-text-stroke-width: 0px; background-color:
                    rgb(255, 255, 255); text-decoration-style: initial;
                    text-decoration-color: initial; display: inline
                    !important; float: none;" data-mce-style="color:
                    #000000; font-family: arial, helvetica, sans-serif;
                    font-style: normal; font-variant-ligatures: normal;
                    font-variant-caps: normal; font-weight: 400;
                    letter-spacing: normal; text-align: start;
                    text-indent: 0px; text-transform: none; white-space:
                    normal; word-spacing: 0px;
                    -webkit-text-stroke-width: 0px; background-color:
                    #ffffff; text-decoration-style: initial;
                    text-decoration-color: initial; display: inline
                    !important; float: none;">has&#xA0;&#xA0;the following range:&#xA0;</span></span></span></div>
            <div><span style="text-align: start; text-indent: 0px;
                background-color: rgb(255, 255, 255);
                text-decoration-style: initial; text-decoration-color:
                initial; float: none; display: inline !important;
                font-size: 12pt;" data-mce-style="text-align: start;
                text-indent: 0px; background-color: #ffffff;
                text-decoration-style: initial; text-decoration-color:
                initial; float: none; display: inline !important;
                font-size: 12pt;">
                <div style="">&#xA0; &#xA0;Minimum value: -2.79521E-20</div>
                <div style="">&#xA0; &#xA0;Maximum value: 2.87991E-20</div>
              </span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">--&gt; I was expecting
                the same order of magnitude with ferret than with
                ncdiff.</span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">More strange, if I
                change the name of a coordinate axis of one of the input
                file</span></div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">then the difference
                calculated with ferret and ncdiff have the same order</span></div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">of magnitude. </span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">--&gt; I suspect that
                the variable read from the 2nd file uses a downward axis</span></div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">set from the read of
                the 1st file.</span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">Attached the minimized
                problem with 3 small nc files and 2 test scripts.</span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">Please try:</span></div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">$ ferret -script
                test1.jnl</span></div>
            <div><span style="color: rgb(0, 0, 0); font-family: arial,
                helvetica, sans-serif; font-size: 12pt; font-style:
                normal; font-variant-ligatures: normal;
                font-variant-caps: normal; font-weight: 400;
                letter-spacing: normal; text-align: start; text-indent:
                0px; text-transform: none; white-space: normal;
                word-spacing: 0px; -webkit-text-stroke-width: 0px;
                background-color: rgb(255, 255, 255);
                text-decoration-style: initial; text-decoration-color:
                initial; display: inline !important; float: none;"
                data-mce-style="color: #000000; font-family: arial,
                helvetica, sans-serif; font-size: 12pt; font-style:
                normal; font-variant-ligatures: normal;
                font-variant-caps: normal; font-weight: 400;
                letter-spacing: normal; text-align: start; text-indent:
                0px; text-transform: none; white-space: normal;
                word-spacing: 0px; -webkit-text-stroke-width: 0px;
                background-color: #ffffff; text-decoration-style:
                initial; text-decoration-color: initial; display: inline
                !important; float: none;">$ ferret -script test2.jnl</span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">Tested with ferret
                7.44 and 7.50</span></div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">Any help welcome.</span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">Regards</span></div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">Patrick</span></div>
            <div><br>
            </div>
            <div><span style="font-size: 12pt;"
                data-mce-style="font-size: 12pt;">--</span><br>
              <span style="font-size: 12pt;" data-mce-style="font-size:
                12pt;"> Data Analysis and Visualization Engineer /
                Project Manager</span><br>
              <span style="font-size: 12pt;" data-mce-style="font-size:
                12pt;"> LSCE/IPSL, CEA-CNRS-UVSQ laboratory</span><br>
              <span style="font-size: 12pt;" data-mce-style="font-size:
                12pt;"> LSCE - Climate and Environment Sciences
                Laboratory</span><br>
              <span style="font-size: 12pt;" data-mce-style="font-size:
                12pt;"> IPSL - Institut Pierre Simon Laplace</span><br>
              <span style="font-size: 12pt;" data-mce-style="font-size:
                12pt;"> --</span></div>
          </div>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;">-- </span><br>
          <span style="font-size: 12pt;" data-mce-style="font-size:
            12pt;"> <i>Ansley Manke<br>
              NOAA/PMEL Science Data Integration Group<br>
              7600 Sand Point Way NE<br>
              206-526-6246</i></span><br>
        </div>
      </div>
    </blockquote>
    <div class="moz-signature">-- <br>
      <i>Ansley Manke<br>
        NOAA/PMEL Science Data Integration Group<br>
        7600 Sand Point Way NE<br>
        206-526-6246</i></div>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00232" href="msg00232.html">[ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</a></strong>
<ul><li><em>From:</em> Patrick Brockmann</li></ul></li>
<li><strong><a name="00233" href="msg00233.html">Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
<li><strong><a name="00234" href="msg00234.html">Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</a></strong>
<ul><li><em>From:</em> Patrick Brockmann</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00234.html">Re: [ferret_users] precision problem on a difference between a same variable read from 2 files with the same structure</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00236.html">[ferret_users] difference in trend computation from CDO and from ferret</a></strong>
</li>

</UL>
<center>[<a href="msg00234.html">Thread Prev</a>][<a href="msg00236.html">Thread Next</a>][<A HREF="threads.html#00235">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
