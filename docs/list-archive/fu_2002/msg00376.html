<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: how to make simple legends -->
<!--X-From-R13: Pvyyl Yrffyre <xrffyreNczry.abnn.tbi> -->
<!--X-Date: Mon, 29 Jul 2002 07:32:23 &#45;0700 (PDT) -->
<!--X-Message-Id: 200207291432.g6TEWMv09927@pontus.pmel.noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: how to make simple legends</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00375.html">Thread Prev</a>][<a href="msg00379.html">Thread Next</a>][<A HREF="threads.html#00376">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: how to make simple legends</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxx</a>, <a href="mailto:kv_ramesh@DOMAIN.HIDDEN">kv_ramesh@xxxxxxxxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: how to make simple legends</strong></li>
<li><strong>From</strong>: <strong>Billy Kessler &lt;<a href="mailto:kessler@DOMAIN.HIDDEN">kessler@xxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 29 Jul 2002 07:32:22 -0700 (PDT)</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Here are scripts that make legend lines. There are two versions,
the second for negative axes (especially depth). They are not 
exactly bulletproof, but usually work.

Make your plot with the UNLABEL qualifier, then call these scripts
for each line individually. They place the legend lines anywhere
you want. 

I wrote these a long time ago, and if someone could improve on
them please post them to the group. I have no doubt that a more
elegant solution is possible.

Billy K
----------------------------------------------------------------

1. legline.go (basic script for ordinary situations):

\can mode verify
! make a legend line and its label
! arg1=x-value of line starting point (user units)
! arg2=length of line (user units)
! arg3=y-value of line
! arg4=line type (number 1-19)
! arg5=text character height
! arg6=label text (in double-quotes for multiple words)
! only gets label position right for positive-up axes

define symbol xend `$1+$2`
define symbol txstart `($xend)+$2/10`
ppl %range ($ppl$ymin1) ($ppl$ymax1) 10		! get axis range user units
define symbol drop `$5/2`			! half char hgt in inches
define symbol txypos `($3)-(($drop))*((($ppl$range_high))-(($ppl$range_low)))/($ppl$ylen)`
! set pen for a dummy line number (not to interfere)
ppl pen,77,$4
ppl aline 77 $1 $3 ($xend) $3 
label ($txstart) ($txypos) -1 0 $5 $6
set mode/last verify

----------------------------------------------------------------

2. legline-negaxis.go (for a negative axis (especially depth)):

\can mode verify
! for negative axis (e.g.depth), reverse low/high in definition of txypos
! make a legend line and its label
! arg1=x-value of line starting point (user units)
! arg2=length of line (user units)
! arg3=y-value of line
! arg4=line type (number 1-19)
! arg5=text character height
! arg6=label text (in double-quotes for multiple words)

define symbol xend `$1+$2`
define symbol txstart `($xend)+$2/10`
ppl %range ($ppl$ymin1) ($ppl$ymax1) 10		! get axis range user units
define symbol drop `$5/2`			! half char hgt in inches
define symbol txypos `($3)-(($drop))*((($ppl$range_low))-(($ppl$range_high)))/($ppl$ylen)`
! set pen for a dummy line number (not to interfere)
ppl pen,77,$4
ppl aline 77 $1 $3 ($xend) $3 
label ($txstart) ($txypos) -1 0 $5 $6
set mode/last verify

----------------------------------------------------------------

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00375.html">how to make simple legends</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00379.html">Problem with &quot;scale_factor&quot;</a></strong>
</li>

</UL>
<center>[<a href="msg00375.html">Thread Prev</a>][<a href="msg00379.html">Thread Next</a>][<A HREF="threads.html#00376">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
