<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: malfunction of samplexy -->
<!--X-From-R13: Oafyrl [naxr <nafyrlNczry.abnn.tbi> -->
<!--X-Date: Thu, 14 Feb 2002 14:01:17 &#45;0800 (PST) -->
<!--X-Message-Id: 3C6C33EB.B6172FD2@pmel.noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 3C6BF805.EFA79DEA@io&#45;warnemuende.de -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: malfunction of samplexy</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00084.html">Thread Prev</a>][<a href="msg00086.html">Thread Next</a>][<A HREF="threads.html#00085">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: malfunction of samplexy</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Torsten Seifert &lt;<a href="mailto:torsten.seifert@DOMAIN.HIDDEN">torsten.seifert@xxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: malfunction of samplexy</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley@DOMAIN.HIDDEN">ansley@xxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 14 Feb 2002 14:02:20 -0800</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxx</a></li>
<li>References: &lt;<a href="msg00084.html">3C6BF805.EFA79DEA@io-warnemuende.de</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->


Hello Torsten,
<br>The SAMPLEXY function returns all missing values for your
<br>example in the upcoming release of version 5.4 of Ferret, which
<br>I believe is the correct behavior.&nbsp; I see the inconsistency you
are
<br>pointing out when running Ferret version 5.22
<p>The SAMPLEXY function finds the gridpoints immediately surrounding
<br>the requested (x,y) pair and uses those four points to interpolate
in
<br>two dimentsions to that location.&nbsp; If any of the data at those
surrounding
<br>grid locations is missing, the result returned is missing.&nbsp; This
is regardless
<br>of whether the requested points are beyond the end of a modulo axis.
<p>As always, if you would like to write a function with different behavior,
<br>you are welcome to modify the code from the existing function.&nbsp;
It is
<br>available on the External Functions webpage, at
<br><a href="">http://ferret.pmel.noaa.gov/Ferret/External_Functions/internal_EF_code_contents.html</a>
<br>and any such function would be welcome as a contributed function.
<p>Ansley Manke
<p>Torsten Seifert wrote:
<blockquote TYPE=CITE>Dear Ferreteers
<p>by applying samplexy to a regional snapshot of model output I got some
strange results for sample points outside of the axis limits of the sample
field. Please try the attached journal file.
<p>It seems that only good points are filled with interpolated values.
Initialisation of the full output buffer with blanks before interpolation
should be sufficient. Then one will get blanks for outlying co-ordinates.
<br>It would be nice if the author (Ansley Manke) could manage to correct
samplexy.F soon.
<p>Best regards
<p>Torsten Seifert
<pre>--&nbsp;
Dr. Torsten Seifert
Institut fuer Ostseeforschung Warnemuende (IOW) an der Universitaet Rostock
D-18119 Rostock, Seestrasse 15, Germany
Phone +49-381-5197-118 Fax +49-381-5197-4812</pre>
&nbsp;
<pre WRAP>
<hr WIDTH="90%" SIZE=4>!! this example shows the malfunction of samplexy occuring for (xpts,ypts)&nbsp;
!! lying outside of the axis limits of the array to sample from&nbsp;
!! direct listing with x+360 gives correct data (applying the modulo x)

!! I would expect samplexy to return missings for unvalid (xpts,ypts)
!! this could be achieved by initialising the return buffer with missings
!! in samplexy.F (interpolation runs obviously only for good (xpts,ypts) there)

!! torsten.seifert@io-warnemuende.de

SET DATA coads_climatology
SHOW DATA coads_climatology

let xv={30, 390}
let yv={60, 60}

let sst_xy=samplexy(sst,xv,yv)

list sst_xy
list sst[x=30,y=60], sst[x=390,y=60]

</pre>
</blockquote>

<p>--
<br>Ansley Manke&nbsp; Pacific Marine Environmental Laboratory&nbsp; Seattle
WA&nbsp; (206)526-6246
<br>&nbsp;

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00084" href="msg00084.html">malfunction of samplexy</a></strong>
<ul><li><em>From:</em> Torsten Seifert</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00084.html">malfunction of samplexy</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00086.html">external functions under Win32</a></strong>
</li>

</UL>
<center>[<a href="msg00084.html">Thread Prev</a>][<a href="msg00086.html">Thread Next</a>][<A HREF="threads.html#00085">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
