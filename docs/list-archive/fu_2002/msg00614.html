<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: Using @Ave function for irr. data files -->
<!--X-From-R13: [vpx Ecvyynar <fcvyynarNczry.abnn.tbi> -->
<!--X-Date: Wed, 4 Dec 2002 09:17:22 &#45;0800 (PST) -->
<!--X-Message-Id: Pine.GSO.4.33.0212040850490.27937&#45;100000@heron.pmel.noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 3DEE2E1B.7DCF541D@ariel.met.tamu.edu -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Using @Ave function for irr. data files</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00611.html">Thread Prev</a>][<a href="msg00616.html">Thread Next</a>][<A HREF="threads.html#00614">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Using @Ave function for irr. data files</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Steve Cocks &lt;<a href="mailto:scocks@DOMAIN.HIDDEN">scocks@xxxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: Using @Ave function for irr. data files</strong></li>
<li><strong>From</strong>: <strong>Mick Spillane &lt;<a href="mailto:spillane@DOMAIN.HIDDEN">spillane@xxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 04 Dec 2002 09:17:19 -0800 (PST)</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="msg00611.html">3DEE2E1B.7DCF541D@ariel.met.tamu.edu</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Steve,
	This sounds like an issue that came up before.  For evenly
spaced data @ave is just like a simple average - add the values and
divide by the number of points.  But for unevenly spaced points, what
one wants is the weighted average, the weighting being the length of
axis to which each value applies.  In the absence of other information
ferret assigns the boundaries/edges of the boxes to the midpoints
between the data locations.  If one wants the simple average in the
case of unevenly spaced data the ratio v[l=@sum]/v[l=@ngd] will
supply it.
Heres a demo
	let v=tsequence({1,4,6,5}) ! evenly spaced
	list v[l=@ave]             ! gives 4.000 as expected
! now locate those same values on an uneven time axis
	let tax=tsequence({2,5,8,10})
	def axis/t/from_data/name=taxis tax
	def grid/t=taxis grd
	let vt=v[g=grd,gt=@asn]
	list vt[l=@ave]            ! gives 3.810 as expected since
	show grid/t grd            ! shows the box widths are
                                   ! 3,3,2.5,2 respectively.
	list vt[l=@sum]/vt[l=@ngd] ! still gives 4.000

Mick

|____spillane@pmel.noaa.gov____|
|__Room 2070 Bldg#3 NOAA/PMEL__|
|____Phone_:_(206)526-6780_____|



</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00611" href="msg00611.html">Using @Ave function for irr. data files</a></strong>
<ul><li><em>From:</em> Steve Cocks</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00611.html">Using @Ave function for irr. data files</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00616.html">axis value in DODS served netCDF files</a></strong>
</li>

</UL>
<center>[<a href="msg00611.html">Thread Prev</a>][<a href="msg00616.html">Thread Next</a>][<A HREF="threads.html#00614">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
