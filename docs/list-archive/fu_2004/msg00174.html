<!-- MHonArc v2.5.13 -->
<!--X-Subject: Distribution of annual data across months -->
<!--X-From-R13: Pneel Pnxre <oonxreNF@Q.ADU> -->
<!--X-Date: Tue, 16 Mar 2004 10:38:25 &#45;0800 -->
<!--X-Message-Id: MHEOJEBLPHDBKECLDPHPAEIHCIAA.bbaker@tnc.org -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Distribution of annual data across months</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00173.html">Thread Prev</a>][<a href="msg00177.html">Thread Next</a>][<A HREF="threads.html#00174">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Distribution of annual data across months</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Distribution of annual data across months</strong></li>
<li><strong>From</strong>: <strong>Barry Baker &lt;<a href="mailto:bbaker@DOMAIN.HIDDEN">bbaker@xxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 16 Mar 2004 11:37:24 -0700</li>
<li>Importance: Normal</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->



<DIV><FONT face=Arial size=2><SPAN class=963332018-16032004>Hello 
Ferreters,</SPAN></FONT></DIV>
<DIV><FONT face=Arial size=2><SPAN 
class=963332018-16032004></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=Arial size=2><SPAN class=963332018-16032004>At Ansley's request 
I am sending this out to the list.&nbsp; The problem started out simply as a 
request with a do loop and thanks to Ansley and Jaison I have made some progress 
but still need a little more help.</SPAN></FONT></DIV>
<DIV><FONT face=Arial size=2><SPAN 
class=963332018-16032004></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT face=Arial size=2><SPAN class=963332018-16032004>Here's the 
situation.</SPAN></FONT></DIV>
<DIV><FONT face=Arial size=2><SPAN 
class=963332018-16032004></SPAN></FONT>&nbsp;</DIV>
<DIV><FONT><SPAN class=963332018-16032004>
<DIV><SPAN class=403165406-16032004><FONT face=Arial color=#0000ff 
size=2>I&nbsp;am trying to manipulate&nbsp;two files, one has annual data for 
100 years (ann_var).&nbsp; The other has monthly data for 1 year (norm_var which 
is created from the NC file I read in).&nbsp; I want to distribute the 100 
annual values over 12 months such that the value for each month in&nbsp;a year 
is the same as the annual value (a total of twelve hundred values).&nbsp; For 
the second file I want to distribute the monthly values over the 100 
years&nbsp;such that the value for January in year one is the same as January in 
year 100.&nbsp;&nbsp; </FONT></SPAN></DIV>
<DIV><SPAN class=403165406-16032004><FONT face=Arial color=#0000ff 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial color=#0000ff size=2>As you can see in the JNL below I was able to 
calculate the second step by using a climatological_axes.&nbsp; But what am not 
able to figure out is how to do the first step, distributing the annual data 
over the 1200 points such that every month in a year contains the annual 
value.</FONT></SPAN></SPAN></DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial color=#0000ff size=2></FONT></SPAN></SPAN>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial color=#0000ff size=2>Thanks for your help with this.&nbsp; I'll post 
the solution to the listserve once we get it figured out.&nbsp; ..By the way, 
we've explored using a nested do loop but I cannot get it to work 
correctly</FONT></SPAN></SPAN></DIV>
<DIV><SPAN class=403165406-16032004><SPAN 
class=963332018-16032004></SPAN></SPAN><SPAN class=403165406-16032004><SPAN 
class=963332018-16032004></SPAN></SPAN><SPAN class=403165406-16032004><SPAN 
class=963332018-16032004><FONT face=Arial color=#0000ff 
size=2></FONT></SPAN></SPAN>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial color=#0000ff size=2>Many thanks,</FONT></SPAN></SPAN></DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial color=#0000ff size=2>Barry</FONT></SPAN></SPAN></DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial color=#0000ff size=2></FONT></SPAN></SPAN>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>!--------Baker JNL 
------------------------------------------------------</FONT></SPAN></SPAN></DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>-- HadCM3 A2M<BR>!- Define Magnitude of Warming for Model and 
Scenario (scenario.txt)<BR>let tmpGW = 3.938</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>! Define lat and lon 
axis<BR>!----------------------------<BR>&nbsp;define 
axis/x=-179.75:179.75:0.5/units=degrees lon<BR>&nbsp;define 
axis/y=-89.75:89.75:0.5/units=degrees lat</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>! Define 3 time 
axes<BR>!----------------------------<BR>&nbsp;define 
axis/t="15-jan-2080:12:00":"15-dec-2080:12:00"/np=12 t12<BR>&nbsp;define 
axis/t="15-jun-2001:12:00":"15-jun-2100:12:00"/np=100 t100<BR>&nbsp;define 
axis/t="15-jan-2001:12:00":"15-dec-2100:12:00"/np=1200 
t1200</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>set axis/modulo t12<BR>set axis/modulo t100<BR>set axis/modulo 
t1200</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>! Define 1D grid and read ascii file containing simulated 
(*.ann file)<BR>!&nbsp; annual global mean temperatures 2001 - 2100&nbsp; 
(1,100)<BR>!-----------------------------<BR>&nbsp;define axis/t="15-jun-2001 
12:00":"15-jun-2100 12:00"/np=100/units=year tax<BR>&nbsp;define grid/t=t100 
a2_ann<BR>&nbsp;file/grid=a2_ann/var=tann&nbsp; 
"/mnt/hgfs/climdata/tyn_sc_2.01/anal_03_09_04/a2.txt"</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>! Define 
Grids<BR>!----------------------------<BR>&nbsp;define grid/x=lon/y=lat/t=t12 
gt12<BR>&nbsp;define grid/x=lon/y=lat/t=t100 gt100<BR>&nbsp;define 
grid/x=lon/y=lat/t=t1200 gt1200</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>! Convert 1D grid to 3D grid of Annual Global 
Warming<BR>!----------------------------<BR>&nbsp;let zero = 0*x[gx=lon] + 
0*y[gy=lat] + 0*t[gt=t100]<BR>&nbsp;let ann_var = zero + 
tann[d=1,gt=t100@asn]</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>! Read in netcdf file containing monthly 2080 anomaly 
(720,360,12)<BR>!-----------------------------<BR>&nbsp;use&nbsp; 
"/mnt/hgfs/climdata/tyn_sc_2.01/anal_03_09_04/hd.had3.a2m.2080s.pre.nc"</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>set axis/modulo time</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>use climatological_axes<BR>cancel data 
climatological_axes</FONT></SPAN></SPAN></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2>let test = pre[d=2,gt=month_reg@mod]<BR>let test1 =&nbsp; 
0*x[gx=lon] + 0*y[gy=lat] + 0*t[gt=t1200]<BR><FONT 
color=#ff0000>let&nbsp;norm_var = test1 + 
test[gt=t1200@asn]<BR></FONT></FONT></SPAN></SPAN><FONT face=Arial 
size=2></FONT></DIV>
<DIV><SPAN class=403165406-16032004><SPAN class=963332018-16032004><FONT 
face=Arial size=2></FONT></SPAN></SPAN>&nbsp;</DIV></SPAN></FONT></DIV>
<DIV>
<DIV>
<DIV><BR>&nbsp;</DIV>
<DIV>
<HR align=left noShade SIZE=1>

<TABLE  cellSpacing=0 cellPadding=0 
  border=0><TBODY>
  <TR>
    <TD ><FONT 
      face="Verdana, Arial, Helvetica, sans-serif" size=2><STRONG>Barry B. 
      Baker, Ph.D.</STRONG><BR><EM>Climate Change 
      Modeler<BR><BR></EM>bbaker@tnc.org<BR>(303) 541-0322 (Phone) <BR>(303) 
      449-4328 (Fax)<BR></FONT><A 
      href="">nature.org\tncscience\scientists\misc\baker.html</A><FONT 
      face="Verdana, Arial, Helvetica, sans-serif" size=2> </FONT><FONT 
      face="Verdana, Arial, Helvetica, sans-serif" color=#339933 
      size=2><STRONG></STRONG></FONT></TD>
    <TD vAlign=top>&nbsp; <IMG height=105 
      src="" width=1>&nbsp; </TD>
    <TD vAlign=top noWrap><FONT face="Verdana, Arial, Helvetica, sans-serif" 
      color=#339933 size=2><STRONG>The Nature 
      Conservancy</STRONG><BR><STRONG>Global Climate Change 
      Initiative</STRONG></FONT><BR><FONT 
      face="Verdana, Arial, Helvetica, sans-serif" size=2><BR>2424 Spruce 
      Street<BR>Suite 100<BR>Boulder, CO 80302<BR></FONT><SPAN 
      ></SPAN><A 
      href="">nature.org</A><BR></TD>
    <TD>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
    <TD  vAlign=top><SPAN 
      ><A 
      href=""><IMG 
       
      alt="" 
      src=""></A></SPAN><BR><SPAN 
      ></SPAN><SPAN 
      ></SPAN><BR></TD></TR>
  <TR align=middle>
    <TD  colSpan=5><BIG><FONT 
      face="Book Antiqua"><FONT size=2><BIG><EM>"A reverence for uncertainty is 
      one of the unrecognized implications of systems thinking" Peter 
      Senge</EM></BIG></FONT></FONT></BIG></TD></TR></TBODY></TABLE></DIV></DIV></DIV>
<DIV><FONT face=Arial size=2></FONT>&nbsp;</DIV>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00178" href="msg00178.html">Re: Distribution of annual data across months</a></strong>
<ul><li><em>From:</em> Steve Hankin</li></ul></li>
<li><strong><a name="00177" href="msg00177.html">Re: Distribution of annual data across months</a></strong>
<ul><li><em>From:</em> Mick.Spillane</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00173.html">create climatological axes</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00177.html">Re: Distribution of annual data across months</a></strong>
</li>

</UL>
<center>[<a href="msg00173.html">Thread Prev</a>][<a href="msg00177.html">Thread Next</a>][<A HREF="threads.html#00174">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
