<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: [ferret_users] limit of numbers of viewports -->
<!--X-From-R13: @nzon Fnxnln <gnxnlnanzon7Nlnubb.pb.wc> -->
<!--X-Date: Thu, 8 Dec 2005 10:47:17 &#45;0800 -->
<!--X-Message-Id: 20051208184701.89135.qmail@web3509.mail.bbt.yahoo.co.jp -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 43986D35.6090204@noaa.gov -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: [ferret_users] limit of numbers of viewports</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg01072.html">Thread Prev</a>][<a href="msg01077.html">Thread Next</a>][<A HREF="threads.html#01076">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] limit of numbers of viewports</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Mick Spillane &lt;<a href="mailto:Mick.Spillane@DOMAIN.HIDDEN">Mick.Spillane@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] limit of numbers of viewports</strong></li>
<li><strong>From</strong>: <strong>Namba Takaya &lt;<a href="mailto:takayanamba7@DOMAIN.HIDDEN">takayanamba7@xxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 09 Dec 2005 03:47:01 +0900 (JST)</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></li>
<li>Domainkey-signature: a=rsa-sha1; q=dns; c=nofws;  s=yj20050223; d=yahoo.co.jp;h=Message-ID:Received:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type;b=IWRYzJxr7XHvchwDn8ypfBekUK8Pw+3nljy6TY5fFH+cgY7VEKNG4to32URkoyL9m+v2Zf1C2kRz5YsAhCXudHiZ9qdcF2G15ELPBMw95Qpr+sNt6fltKN9+EUVcGinO  ;</li>
<li>In-reply-to: &lt;43986D35.6090204@noaa.gov&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Dear Mick

Thank you very much for your suggestion.

I had tried but the result is the same as

XgksDuplicatePrimi()  300 Storage overflow has occurred in
GKS
XgksDuplicatePrimi()  300 Storage overflow has occurred in
GKS

Anyhow, it is good to avoid the problem accordint to your
suggestion.

Best Regards,

Takaya namba



--- Mick Spillane &lt;Mick.Spillane@noaa.gov&gt; からのメッセ
ージ：
&gt; Hello Takaya,
&gt; You might try adding " ; can memory/all " as the
&gt; last command in the
&gt; REPEAT loop.
&gt; In my simple/small demo the same image is produced
&gt; but without running
&gt; it with a full scale dataset like yours, I can't be
&gt; sure it will work in
&gt; your situation.
&gt; If this suggestion does not work, perhaps you could
&gt; smooth and regrid
&gt; the data to the largest size that will work (you say
&gt; 100x100 does work).
&gt; The full resolution image would need to be so big
&gt; anyway in terms of
&gt; pixels that it may be difficult to actually see the
&gt; detail. If someone
&gt; needed to see the full resolution 570x684 image for
&gt; a particular
&gt; year/month you could generate the monthly images as
&gt; individual plots
&gt; then treat the lower resolution "quilt" image with a
&gt; little HTML as a
&gt; set of low-res "thumbnails" which, with a click,
&gt; would lead to the full
&gt; image. Or perhaps an animation or "slideshow"
&gt; stepping through the
&gt; high-res images would be suitable.
&gt; Mick
&gt; 
&gt; Namba Takaya wrote:
&gt; 
&gt; &gt;Dear Mick
&gt; &gt;
&gt; &gt;When I try to do the grid of 570 
&gt; &gt;x 684, it has a problem.If I make the size of grid
&gt; &gt;smaller, ,eg, 100 x 100, it works very well. So the
&gt; &gt;problem looks like too much memory consumption.Are
&gt; there
&gt; &gt;any  ways to refresh the memory in this script.Or
&gt; any ways
&gt; &gt;to run this script with large grid.
&gt; &gt;
&gt; &gt;Best Regards,
&gt; &gt;
&gt; &gt;Takaya namba
&gt; &gt;
&gt; &gt;
&gt; &gt;--- Mick Spillane &lt;mick.spillane@noaa.gov&gt;
&gt; からのメッセ
&gt; &gt;ージ：
&gt; &gt;  
&gt; &gt;
&gt; &gt;&gt;Hi Takaya &amp; Ansley
&gt; &gt;&gt;This problem might be better solved with
&gt; regridding
&gt; &gt;&gt;than with multiple
&gt; &gt;&gt;viewports. Below is a demo, for an admittedly
&gt; small
&gt; &gt;&gt;x-y grid, that does
&gt; &gt;&gt;the job; a GIF image of the result. is attached.
&gt; &gt;&gt;Good luck,
&gt; &gt;&gt;Mick
&gt; &gt;&gt;!-------------------
&gt; &gt;&gt;! 6-Dec-05 : drawing 20 years of monthly data (on
&gt; an
&gt; &gt;&gt;x-y grid) without
&gt; &gt;&gt;using multiple viewports
&gt; &gt;&gt;! NOTE: the lines in the repeat loop end in
&gt; &gt;&gt;"backslash" which the
&gt; &gt;&gt;mailtool seems to alter
&gt; &gt;&gt;
&gt; &gt;&gt;! preliminary step - create some fake data 240
&gt; &gt;&gt;months on a 9x7 grid
&gt; &gt;&gt;def axis/x=1:9:1 xax ; def axis/y=1:7:1 yax ; def
&gt; &gt;&gt;axis/t=15-dec-1981:15-dec-2000/npoints=240 tax
&gt; &gt;&gt;def grid/x=xax/y=yax/t=tax grd
&gt; &gt;&gt;let/title="240 months of data on 9x7 grid"
&gt; &gt;&gt;
&gt; &gt;&gt;    
&gt; &gt;&gt;
&gt;
&gt;v=(1+randu(l[g=grd]))*(10-((x[g=grd]-5)^2+(y[g=grd]-4)^2)^0.5)
&gt; &gt;  
&gt; &gt;
&gt; &gt;&gt;! ... and save it to a file
&gt; &gt;&gt;save/file=testdata.nc v
&gt; &gt;&gt;
&gt; &gt;&gt;! remove the variable used to define the "data"
&gt; &gt;&gt;can var v
&gt; &gt;&gt;
&gt; &gt;&gt;! ... then read back the "data" ... now the demo
&gt; &gt;&gt;begins
&gt; &gt;&gt;use testdata.nc
&gt; &gt;&gt;
&gt; &gt;&gt;! define a conversion from time index L to month
&gt; and
&gt; &gt;&gt;year
&gt; &gt;&gt;let mod12=mod(l,12) ; set var/bad=0 mod12 ; let
&gt; &gt;&gt;month=missing(mod12,12)
&gt; &gt;&gt;let year=1981+(l-month)/12
&gt; &gt;&gt;
&gt; &gt;&gt;! create a base plot with appropriate axes to span
&gt; &gt;&gt;the entire year and
&gt; &gt;&gt;month range
&gt; &gt;&gt;plot/vs/nolab/nokey/set 1,1
&gt; &gt;&gt;ppl xaxis,1980,2001,1 ; ppl yaxis,0,13,1 ; ppl
&gt; &gt;&gt;xfor,(i4) ; ppl yfor,(i2)
&gt; &gt;&gt;; ppl plot
&gt; &gt;&gt;
&gt; &gt;&gt;! then, one by one, overlay the monthly gridded
&gt; &gt;&gt;images
&gt; &gt;&gt;repeat/l=1:240 (def
&gt; &gt;&gt;axis/x=`year-0.45`:`year+0.45`/npoints=9 xnew ;\
&gt; &gt;&gt;def axis/y=`month-0.4`:`month+0.4`/npoints=7 ynew
&gt; ;\
&gt; &gt;&gt;def grid/like=v/x=xnew/y=ynew gnew ; let
&gt; &gt;&gt;vnew=v[g=gnew,gx=@asn,gy=@asn] ;\
&gt; &gt;&gt;
&gt; &gt;&gt;    
&gt; &gt;&gt;
&gt;
&gt;shade/o/nolab/nokey/lev=(0,20,0.5)/hlim=1980:2001/vlim=0:13
&gt; &gt;  
&gt; &gt;
&gt; &gt;&gt;vnew ; ppl
&gt; &gt;&gt;shaset reset )
&gt; &gt;&gt;
&gt; &gt;&gt;frame/file=quilt.gif
&gt; &gt;&gt;
&gt; &gt;&gt;q
&gt; &gt;&gt;
&gt; &gt;&gt;
&gt; &gt;&gt;    
&gt; &gt;&gt;
&gt; &gt;
&gt; &gt;  
&gt; &gt;
&gt; &gt;&gt;ATTACHMENT part 2 image/gif x-mac-type=0;
&gt; &gt;&gt;    
&gt; &gt;&gt;
&gt; &gt;x-mac-creator=0; name=quilt.gif
&gt; &gt;  
&gt; &gt;
&gt; &gt;&gt; !  6-Dec-05 : drawing 20 years of monthly data
&gt; (on
&gt; &gt;&gt;an x-y grid) without using multiple viewports 
&gt; &gt;&gt;
&gt; &gt;&gt;! preliminary step - create some fake data 240
&gt; &gt;&gt;months on a 9x7 grid
&gt; &gt;&gt;def axis/x=1:9:1 xax ; def axis/y=1:7:1 yax ; def
&gt; &gt;&gt;axis/t=15-dec-1981:15-dec-2000/npoints=240 tax
&gt; &gt;&gt;def grid/x=xax/y=yax/t=tax grd
&gt; &gt;&gt;let/title="240 months of data on 9x7 grid"
&gt; &gt;&gt;
&gt; &gt;&gt;    
&gt; &gt;&gt;
&gt;
&gt;v=(1+randu(l[g=grd]))*(10-((x[g=grd]-5)^2+(y[g=grd]-4)^2)^0.5)
&gt; &gt;  
&gt; &gt;
&gt; &gt;&gt;! ... and save it to a file
&gt; &gt;&gt;save/file=testdata.nc v
&gt; &gt;&gt;
&gt; &gt;&gt;! remove the variable used to define the "data"
&gt; &gt;&gt;can var v
&gt; &gt;&gt;
&gt; &gt;&gt;! ... then read back the "data" ... now the demo
&gt; &gt;&gt;begins 
&gt; &gt;&gt;use testdata.nc
&gt; &gt;&gt;
&gt; &gt;&gt;! define a conversion from time index L to month
&gt; and
&gt; &gt;&gt;year
&gt; &gt;&gt;let mod12=mod(l,12) ; set var/bad=0 mod12 ; let
&gt; &gt;&gt;month=missing(mod12,12) ; let
&gt; year=1981+(l-month)/12
&gt; &gt;&gt;
&gt; &gt;&gt;! create a base plot with appropriate axes to span
&gt; &gt;&gt;the entire year and month range
&gt; &gt;&gt;plot/vs/nolab/nokey/set 1,1 ; ppl
&gt; xaxis,1980,2001,1
&gt; &gt;&gt;; ppl yaxis,0,13,1 ; ppl xfor,(i4) ; ppl yfor,(i2)
&gt; ;
&gt; &gt;&gt;ppl plot
&gt; &gt;&gt;
&gt; &gt;&gt;! then, one by one, overlay the monthly gridded
&gt; &gt;&gt;images
&gt; &gt;&gt;repeat/l=1:240 (def
&gt; &gt;&gt;axis/x=`year-0.45`:`year+0.45`/npoints=9 xnew ;
&gt; def
&gt; &gt;&gt;axis/y=`month-0.4`:`month+0.4`/npoints=7 ynew ;\
&gt; &gt;&gt;def grid/like=v/x=xnew/y=ynew gnew ; let
&gt; &gt;&gt;vnew=v[g=gnew,gx=@asn,gy=@asn] ;\
&gt; &gt;&gt;
&gt; &gt;&gt;    
&gt; &gt;&gt;
&gt;
&gt;shade/o/nolab/nokey/lev=(0,20,0.5)/hlim=1980:2001/vlim=0:13
&gt; &gt;  
&gt; &gt;
&gt; &gt;&gt;vnew ; ppl shaset reset )
&gt; &gt;&gt;frame/file=quilt.gif
&gt; &gt;&gt;
&gt; &gt;&gt;q
&gt; 
=== message truncated ===

--------------------------------------
STOP HIV/AIDS.
Yahoo! JAPAN Redribbon Campaign 2005
<a  href="http://pr.mail.yahoo.co.jp/redribbon/">http://pr.mail.yahoo.co.jp/redribbon/</a>
</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg01072.html">Re: [ferret_users] limit of numbers of viewports</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01077.html">Re: [ferret_users] limit of numbers of viewports</a></strong>
</li>

</UL>
<center>[<a href="msg01072.html">Thread Prev</a>][<a href="msg01077.html">Thread Next</a>][<A HREF="threads.html#01076">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
