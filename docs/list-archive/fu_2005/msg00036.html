<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: one plot bringing two metafiles up -->
<!--X-From-R13: Xnvfba Yhevna <wnvfbaNpnbf.vvfp.rearg.va> -->
<!--X-Date: Sat, 15 Jan 2005 02:33:25 &#45;0800 -->
<!--X-Message-Id: Pine.LNX.4.44.0501151611060.30232&#45;200000@caos.iisc.ernet.in -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 5.1.0.14.0.20050112151336.00a935b8@mail.flinders.edu.au -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: one plot bringing two metafiles up</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00031.html">Thread Prev</a>][<a href="msg00032.html">Thread Next</a>][<A HREF="threads.html#00036">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: one plot bringing two metafiles up</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: one plot bringing two metafiles up</strong></li>
<li><strong>From</strong>: <strong>Jaison Kurian &lt;<a href="mailto:jaison@DOMAIN.HIDDEN">jaison@xxxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Sat, 15 Jan 2005 16:12:22 +0530 (IST)</li>
<li>Cc: Hemerson Tonin &lt;<a href="mailto:hemer.tonin@DOMAIN.HIDDEN">hemer.tonin@xxxxxxxxxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00031.html">5.1.0.14.0.20050112151336.00a935b8@mail.flinders.edu.au</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Hemer,
           It is always better to insert few lines towards the begining and
ending of your scripts to remove previous versions of metafiles and to create
ps/pdf file from the metafile using Fprint command. This will ensure that
always you are using the proper metafile.plt. Also please note that &quot;ppl fill&quot;
or &quot;ppl plot&quot; is needed after a fill or plot command only if the fill or plot
command has the /SET_UP qualifier.

    Please have a look at the attached file (modified version of your script;
soi.jnl).

Hope This Helps

With Regards 

Jaison

On Wed, 12 Jan 2005, Hemerson Tonin wrote:

&gt; 
&gt; I have a journal (below) that uses ppl commands and fill_between.jnl, 
&gt; basically, my intend is reproduce a figure like SOI index ( see: 
&gt; <a  href="http://www.pmel.noaa.gov/~kessler/ENSO/soi-1950-98.gif">http://www.pmel.noaa.gov/~kessler/ENSO/soi-1950-98.gif</a> ) within my model 
&gt; running period.
&gt; 
&gt; I removed all older metafiles; set mode meta, run the journal, it comes 
&gt; perfect on screen, but in the end of day, I've got 2 metafiles.
&gt; 
&gt; One is metafile.plt and another one metafile.plt.~1~, resulting that, it is 
&gt; impossible to convert them (both ?!?!) to ps. It seems that the journal is 
&gt; spliting the plot in two.
&gt; 
&gt; 
&gt; Any ideas ?
&gt; 
&gt; Thank's in advanced
&gt; 
&gt; Hemer
&gt; (ferret 5.80 on linux)
&gt; 
&gt; 
&gt; 
&gt; 
&gt; my journal
&gt; _________________________________________________________________
&gt; 
&gt; use my_soi.nc
&gt; let/title=&quot;Southern Oscillation Index&quot;/unit=&quot;hPa: 1000hPa subtracted&quot; 
&gt; temp=soi[l=@sbx:12]
&gt; 
&gt; let el_nino=if temp le 0 then temp else 1/0
&gt; let la_nina=if temp ge 0 then temp else 1/0
&gt; 
&gt; set re/t=&quot;01-jan-1986&quot;:&quot;31-aug-2002&quot;
&gt; 
&gt; !-----------------------------------------------------------------------------------------------
&gt; ! this is a little trick to put time axis labels either below and above the 
&gt; plot
&gt; !-----------------------------------------------------------------------------------------------
&gt; 
&gt; define viewport/xlim=0:1/ylim=0:1 view1
&gt; define viewport/xlim=0:1/ylim=0:1 view2
&gt; 
&gt; set view view1
&gt; plot/colour=white/nolabels/vlim=-3.5:3.5:1 temp
&gt; 
&gt; set view view2
&gt; plot/colour=white/nolabels/vlim=-3.5:3.5:1 temp
&gt; ppl txlabp, 1
&gt; ppl plot
&gt; 
&gt; !-----------------------------------------------------------------------------------------------
&gt; ! end of trick
&gt; !-----------------------------------------------------------------------------------------------
&gt; 
&gt; ppl ylab &quot;hPa: 1000 hPa subtracted&quot;
&gt; ppl plot
&gt; 
&gt; go fill_between poly/ov/pal=red/nolabels el_nino time
&gt; ! time is the original axis of the variable soi
&gt; 
&gt; go fill_between poly/ov/pal=blue/nolabels la_nina time
&gt; plot/ov/colour=black/nolabels temp
&gt; 
&gt; label 15000 3 -1 0 .15 Cool (La Nina)
&gt; label 38600 3.13 -1 0 .1 @MA45
&gt; 
&gt; label 15000 -3.1 -1 0 .15 Warm (El Nino)
&gt; label 40000 -2.96 -1 0 .1 @MA45
&gt; 
&gt; label 84000 4.2 0 0 .2 &quot;Southern Oscillation Index&quot;
&gt; 
&gt; ____________________________________________________________________________
&gt; 
&gt; 
&gt; Tonin, H. E.
&gt; School of Chemistry, Physics and Earth Sciences
&gt; Flinders University
&gt; Adelaide - Australia

-- 
___________________________________________________

    Jaison Kurian                           
    Centre for Atmospheric and Oceanic Sciences
    Indian Institute of Science
    B A N G A L O R E   560 012
    Ph: +91-80-3942505
        +91-80-3600450
    Fax:+91-80-3600865
___________________________________________________
</pre>
<pre>\ cancel mode verify

 sp rm -f metafile*   ! remove all the previous versions of metafile
 set mode meta

    use my_soi.nc 
    let/title=&quot;Southern Oscillation Index&quot;/unit=&quot;hPa: 1000hPa subtracted&quot; temp=soi[l=@sbx:12] 
    let el_nino=if temp le 0 then temp else 1/0 
    let la_nina=if temp ge 0 then temp else 1/0 

    set reg/t=&quot;01-jan-1986&quot;:&quot;31-aug-2002&quot; 

!----------------------------------------------------------------------
! this is a little trick to put time axis labels either below and above the plot 
!----------------------------------------------------------------------

    define viewport/xlim=0:1/ylim=0:1 view1
    define viewport/xlim=0:1/ylim=0:1 view2

    set view view1 
      plot/colour=white/nolabels/vlim=-3.5:3.5:1 temp 

    set view view2 
      plot/colour=white/nolabels/vlim=-3.5:3.5:1/set temp 
      ppl txlabp, 1 
      ppl ylab &quot;hPa: 1000 hPa subtracted&quot; 
      ppl plot 

!----------------------------------------------------------------------
! end of trick 
!----------------------------------------------------------------------


    go fill_between poly/ov/pal=red/nolabels el_nino time 
    ! time is the original axis of the variable soi 

    go fill_between poly/ov/pal=blue/nolabels la_nina time 
    plot/ov/colour=black/nolabels temp 

    label 15000 3 -1 0 .15 Cool (La Nina) 
    label 38600 3.13 -1 0 .1 @MA45 

    label 15000 -3.1 -1 0 .15 Warm (El Nino) 
    label 40000 -2.96 -1 0 .1 @MA45 

    label 84000 4.2 0 0 .2 &quot;Southern Oscillation Index&quot;

! create the output ps/pdf file

    cancel mode meta ; ppl clsplt
    sp rm -f soi.p*          ! to remove earlier versions of soi.ps &amp; soi.pdf
    sp Fprint -l cps -R -o soi.ps metafile.plt
    sp ps2pdf soi.ps         
    sp rm -f metafile*
</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00031" href="msg00031.html">one plot bringing two metafiles up</a></strong>
<ul><li><em>From:</em> Hemerson Tonin</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00031.html">one plot bringing two metafiles up</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00032.html">lastest FERRET on IBM AIX</a></strong>
</li>

</UL>
<center>[<a href="msg00031.html">Thread Prev</a>][<a href="msg00032.html">Thread Next</a>][<A HREF="threads.html#00036">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
