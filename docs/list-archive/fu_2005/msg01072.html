<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: [ferret_users] limit of numbers of viewports -->
<!--X-From-R13: @nzon Fnxnln <gnxnlnanzon7Nlnubb.pb.wc> -->
<!--X-Date: Thu, 8 Dec 2005 05:11:02 &#45;0800 -->
<!--X-Message-Id: 20051208131048.22021.qmail@web3508.mail.bbt.yahoo.co.jp -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 43961DEF.7080003@noaa.gov -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: [ferret_users] limit of numbers of viewports</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg01069.html">Thread Prev</a>][<a href="msg01076.html">Thread Next</a>][<A HREF="threads.html#01072">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] limit of numbers of viewports</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Mick Spillane &lt;<a href="mailto:mick.spillane@DOMAIN.HIDDEN">mick.spillane@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] limit of numbers of viewports</strong></li>
<li><strong>From</strong>: <strong>Namba Takaya &lt;<a href="mailto:takayanamba7@DOMAIN.HIDDEN">takayanamba7@xxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 08 Dec 2005 22:10:48 +0900 (JST)</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>Domainkey-signature: a=rsa-sha1; q=dns; c=nofws;  s=yj20050223; d=yahoo.co.jp;h=Message-ID:Received:Date:From:Subject:To:Cc:In-Reply-To:MIME-Version:Content-Type;b=pdw4VM9gP0YY6U56c8qcg+0Q+q0KiSGothzP+Gy8DSRdZrc/zYwHkgLoBYQPKN9/bLqEZJFPf55MrBTp+ZTK4QAKatOQA6y1X8Vr6wa03yWr4x9NyZ6cxmMXokueghG3  ;</li>
<li>In-reply-to: &lt;<a href="msg01069.html">43961DEF.7080003@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Dear Mick

When I try to do the grid of 570 
x 684, it has a problem.If I make the size of grid
smaller, ,eg, 100 x 100, it works very well. So the
problem looks like too much memory consumption.Are there
any  ways to refresh the memory in this script.Or any ways
to run this script with large grid.

Best Regards,

Takaya namba


--- Mick Spillane &lt;mick.spillane@noaa.gov&gt; からのメッセ
ージ：
&gt; Hi Takaya &amp; Ansley
&gt; This problem might be better solved with regridding
&gt; than with multiple
&gt; viewports. Below is a demo, for an admittedly small
&gt; x-y grid, that does
&gt; the job; a GIF image of the result. is attached.
&gt; Good luck,
&gt; Mick
&gt; !-------------------
&gt; ! 6-Dec-05 : drawing 20 years of monthly data (on an
&gt; x-y grid) without
&gt; using multiple viewports
&gt; ! NOTE: the lines in the repeat loop end in
&gt; "backslash" which the
&gt; mailtool seems to alter
&gt; 
&gt; ! preliminary step - create some fake data 240
&gt; months on a 9x7 grid
&gt; def axis/x=1:9:1 xax ; def axis/y=1:7:1 yax ; def
&gt; axis/t=15-dec-1981:15-dec-2000/npoints=240 tax
&gt; def grid/x=xax/y=yax/t=tax grd
&gt; let/title="240 months of data on 9x7 grid"
&gt;
v=(1+randu(l[g=grd]))*(10-((x[g=grd]-5)^2+(y[g=grd]-4)^2)^0.5)
&gt; 
&gt; ! ... and save it to a file
&gt; save/file=testdata.nc v
&gt; 
&gt; ! remove the variable used to define the "data"
&gt; can var v
&gt; 
&gt; ! ... then read back the "data" ... now the demo
&gt; begins
&gt; use testdata.nc
&gt; 
&gt; ! define a conversion from time index L to month and
&gt; year
&gt; let mod12=mod(l,12) ; set var/bad=0 mod12 ; let
&gt; month=missing(mod12,12)
&gt; let year=1981+(l-month)/12
&gt; 
&gt; ! create a base plot with appropriate axes to span
&gt; the entire year and
&gt; month range
&gt; plot/vs/nolab/nokey/set 1,1
&gt; ppl xaxis,1980,2001,1 ; ppl yaxis,0,13,1 ; ppl
&gt; xfor,(i4) ; ppl yfor,(i2)
&gt; ; ppl plot
&gt; 
&gt; ! then, one by one, overlay the monthly gridded
&gt; images
&gt; repeat/l=1:240 (def
&gt; axis/x=`year-0.45`:`year+0.45`/npoints=9 xnew ;\
&gt; def axis/y=`month-0.4`:`month+0.4`/npoints=7 ynew ;\
&gt; def grid/like=v/x=xnew/y=ynew gnew ; let
&gt; vnew=v[g=gnew,gx=@asn,gy=@asn] ;\
&gt;
shade/o/nolab/nokey/lev=(0,20,0.5)/hlim=1980:2001/vlim=0:13
&gt; vnew ; ppl
&gt; shaset reset )
&gt; 
&gt; frame/file=quilt.gif
&gt; 
&gt; q
&gt; 
&gt; 

&gt; ATTACHMENT part 2 image/gif x-mac-type=0;
x-mac-creator=0; name=quilt.gif
&gt;  !  6-Dec-05 : drawing 20 years of monthly data (on
&gt; an x-y grid) without using multiple viewports 
&gt; 
&gt; ! preliminary step - create some fake data 240
&gt; months on a 9x7 grid
&gt; def axis/x=1:9:1 xax ; def axis/y=1:7:1 yax ; def
&gt; axis/t=15-dec-1981:15-dec-2000/npoints=240 tax
&gt; def grid/x=xax/y=yax/t=tax grd
&gt; let/title="240 months of data on 9x7 grid"
&gt;
v=(1+randu(l[g=grd]))*(10-((x[g=grd]-5)^2+(y[g=grd]-4)^2)^0.5)
&gt; 
&gt; ! ... and save it to a file
&gt; save/file=testdata.nc v
&gt; 
&gt; ! remove the variable used to define the "data"
&gt; can var v
&gt; 
&gt; ! ... then read back the "data" ... now the demo
&gt; begins 
&gt; use testdata.nc
&gt; 
&gt; ! define a conversion from time index L to month and
&gt; year
&gt; let mod12=mod(l,12) ; set var/bad=0 mod12 ; let
&gt; month=missing(mod12,12) ; let year=1981+(l-month)/12
&gt; 
&gt; ! create a base plot with appropriate axes to span
&gt; the entire year and month range
&gt; plot/vs/nolab/nokey/set 1,1 ; ppl xaxis,1980,2001,1
&gt; ; ppl yaxis,0,13,1 ; ppl xfor,(i4) ; ppl yfor,(i2) ;
&gt; ppl plot
&gt; 
&gt; ! then, one by one, overlay the monthly gridded
&gt; images
&gt; repeat/l=1:240 (def
&gt; axis/x=`year-0.45`:`year+0.45`/npoints=9 xnew ; def
&gt; axis/y=`month-0.4`:`month+0.4`/npoints=7 ynew ;\
&gt; def grid/like=v/x=xnew/y=ynew gnew ; let
&gt; vnew=v[g=gnew,gx=@asn,gy=@asn] ;\
&gt;
shade/o/nolab/nokey/lev=(0,20,0.5)/hlim=1980:2001/vlim=0:13
&gt; vnew ; ppl shaset reset )
&gt; frame/file=quilt.gif
&gt; 
&gt; q
&gt; 

--------------------------------------
STOP HIV/AIDS.
Yahoo! JAPAN Redribbon Campaign 2005
<a  href="http://pr.mail.yahoo.co.jp/redribbon/">http://pr.mail.yahoo.co.jp/redribbon/</a>
</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01069" href="msg01069.html">Re: [ferret_users] limit of numbers of viewports</a></strong>
<ul><li><em>From:</em> Mick Spillane</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg01069.html">Re: [ferret_users] limit of numbers of viewports</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01076.html">Re: [ferret_users] limit of numbers of viewports</a></strong>
</li>

</UL>
<center>[<a href="msg01069.html">Thread Prev</a>][<a href="msg01076.html">Thread Next</a>][<A HREF="threads.html#01072">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
