<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: Ferret: Vector plots of velocity on a C&#45;grid -->
<!--X-From-R13: "Qw Prrtyr&#45;Yenhfr" <Qw.Prrtyr&#45;YenhfrNabnn.tbi> -->
<!--X-Date: Mon, 13 Jun 2005 09:58:01 &#45;0700 -->
<!--X-Message-Id: 42ADBB18.807@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 260502556d.2556d26050@pmel.noaa.gov -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Ferret: Vector plots of velocity on a C-grid</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00591.html">Thread Prev</a>][<a href="msg00597.html">Thread Next</a>][<A HREF="threads.html#00593">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: Ferret: Vector plots of velocity on a C-grid</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>William S Kessler &lt;<a href="mailto:William.S.Kessler@DOMAIN.HIDDEN">William.S.Kessler@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: Ferret: Vector plots of velocity on a C-grid</strong></li>
<li><strong>From</strong>: <strong>&quot;Cj Beegle-Krause&quot; &lt;<a href="mailto:Cj.Beegle-Krause@DOMAIN.HIDDEN">Cj.Beegle-Krause@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 13 Jun 2005 09:58:00 -0700</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>, <a href="mailto:billy.kessler@DOMAIN.HIDDEN">billy.kessler@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="msg00591.html">260502556d.2556d26050@pmel.noaa.gov</a>&gt;</li>
<li>References: &lt;<a href="msg00591.html">260502556d.2556d26050@pmel.noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.4) Gecko/20030624 Netscape/7.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ccffff" style="background-color: #ccffff; color: #000099; "><font color="#000099">



Hi Billy,<br>
<br>
We're run into a similar problem making GNOME a grid independent
trajectory model.&nbsp; <br>
<a class="moz-txt-link-freetext" href="">http://response.restoration.noaa.gov/software/gnome/gnome.html</a><br>
<br>
Our idea has been to make GNOME work with any circulation model we come
in contact with so that we can leverage the best forecast model
available during a response regardless of whether it is rectangular,
curvilinear or finite element.&nbsp; We've been working with NOAA/CSDL for
create a description of netCDF files that will work with different grid
models.&nbsp; Our solution has been to interpolate all the velocities to one
point on the grid (corner or center) in easting and northing
coordinates (rather than grid relative).&nbsp; Although not perfect, we've
found them functional.&nbsp; As you mentioned, the narrow channel is a
problem.&nbsp; From our experience we would recommend either interpolating
all four velocities onto the center of the grid cell (works best for
narrow channels), or taking the two nearest sides to a corner and
moving them to that corner (gotta trust your grid).&nbsp; The latter may
seem really odd, but the problem of no velocity through the boundary
really isn't such a bad problem, as you end up with currents that
parallel the shoreline as they should.<br>
<br>
You can follow some of the discussion from Tom Gross' web page on the
HYDRONetCDF web page.<br>
<a class="moz-txt-link-freetext" href="">http://ccmp.chesapeake.org/HYDRONetCDF/HYDRONetCDF.html</a><br>
<br>
Best Regards,<br>
CJ<br>
<br>
William S Kessler wrote:<br>
<blockquote type="cite" cite="">
  <pre wrap="">This is only partly a Ferret question, but I suspect many Ferret users
have thought about how to deal with this problem.

I have OGCM output on a C-grid. The temperature and velocity components
are on a staggered grid structure. A single gridbox looks like:

  v  
u T u 
  v  

where the u-values are the currents in/out the east-west sides of the
box, and the v-values out the north-south, and T is the temperature
value defined in the center of the box. All these are on the same
vertical level. 

I want to make a vector plot of the velocity components, but since the
u's and v's are not at the same location this is not straightforward. 

One possibility is to define a grid consisting of all the u and v points
together, and interpolate all the velocities to all the points that
exist on either grid.

Another is to average the u's in x and v's in y onto the temperature
gridpoint.

A third is to do no interpolation, but treat the upper v and right-side
u as the flow at the northeast corner of the box, and the lower v and
left-side u as the flow at the southwest corner.

The problem becomes particularly acute when I want to make vectors in a
region of complicated land masses, with narrow straits, but I want the
plot to accurately reflect the model's actual flow, and not to omit any
gridpoints.

All of the above ideas result in losing some values, because, for
example, there is no left-side u-value on gridpoints against a western
boundary, while the right-side u and upper and lower v's do exist in
this case.

Anybody have a good idea how to do this as correctly as possible?

Billy K

  </pre>
</blockquote>
<br>
<pre class="moz-signature" cols="72">-- 
CJ Beegle-Krause, Ph.D.
NOAA/NOS/ORR/Hazmat
7600 Sand Point Way NE
Seattle, WA  98115
     voice:  (206) 526-6961
     fax:  (206) 526-6329

     &lt;:}}}}}&gt;&lt;
                           &lt;:}}}}}&gt;&lt;

\!/ \!/      \!/  &gt;^&lt;**&gt;^&lt;     \!/   \!/ \!/
</pre>


</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00591" href="msg00591.html">Ferret: Vector plots of velocity on a C-grid</a></strong>
<ul><li><em>From:</em> William S Kessler</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00591.html">Ferret: Vector plots of velocity on a C-grid</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00597.html">Re: Ferret: Vector plots of velocity on a C-grid</a></strong>
</li>

</UL>
<center>[<a href="msg00591.html">Thread Prev</a>][<a href="msg00597.html">Thread Next</a>][<A HREF="threads.html#00593">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
