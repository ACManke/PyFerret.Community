<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: [ferret_users] Telling Ferret How to Convert Units of "sigma_level" -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Wed, 16 Nov 2005 12:06:07 &#45;0800 -->
<!--X-Message-Id: 437B912E.8040806@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 437B5E31.3030000@noaa.gov -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: [ferret_users] Telling Ferret How to Convert Units of &quot;sigma_level&quot;</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg01007.html">Thread Prev</a>][<a href="msg01009.html">Thread Next</a>][<A HREF="threads.html#01008">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Telling Ferret How to Convert Units of &quot;sigma_level&quot;</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>John Schattel &lt;<a href="mailto:john.schattel@DOMAIN.HIDDEN">john.schattel@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Telling Ferret How to Convert Units of &quot;sigma_level&quot;</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 16 Nov 2005 12:06:06 -0800</li>
<li>Cc: ferret_users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg01007.html">437B5E31.3030000@noaa.gov</a>&gt;</li>
<li>References: &lt;<a href="msg01007.html">437B5E31.3030000@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
<li>User-agent: Mozilla Thunderbird 1.0.7 (Windows/20050923)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">



Hi John,<br>
If you look at the dataset you'll see that "sigma" is not a variable:<br>
<tt><br>
&nbsp;&nbsp; yes? use
<a class="moz-txt-link-rfc2396E" href="">"http://205.156.4.56/cgi-bin/nph-dods/dgom/ngom311_05Nov043D.nc"</a><br>
&nbsp;&nbsp;&nbsp; *** NOTE: Units on axis "sigma" are not recognized: sigma_level<br>
&nbsp;&nbsp;&nbsp; *** NOTE: They will not be convertible:<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp; yes? show data<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; currently SET data sets:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&gt;
<a class="moz-txt-link-freetext" href="">http://205.156.4.56/cgi-bin/nph-dods/dgom/ngom311_05Nov043D.nc</a>&nbsp;
(default)<br>
&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp; title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
K&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; L<br>
&nbsp;&nbsp;&nbsp; LON&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Longitude&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:217&nbsp;&nbsp;&nbsp;&nbsp; 1:160&nbsp;&nbsp;&nbsp;&nbsp;
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
&nbsp;&nbsp;&nbsp; LAT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Latitude&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:217&nbsp;&nbsp;&nbsp;&nbsp; 1:160&nbsp;&nbsp;&nbsp;&nbsp;
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
&nbsp;&nbsp;&nbsp; MASK&nbsp;&nbsp;&nbsp;&nbsp; Land Mask&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:217&nbsp;&nbsp;&nbsp;&nbsp; 1:160&nbsp;&nbsp;&nbsp;&nbsp;
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
&nbsp;&nbsp;&nbsp; DEPTH&nbsp;&nbsp;&nbsp; Bathymetry&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:217&nbsp;&nbsp;&nbsp;&nbsp; 1:160&nbsp;&nbsp;&nbsp;&nbsp;
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>
&nbsp;&nbsp;&nbsp; ZETA&nbsp;&nbsp;&nbsp;&nbsp; Water Surface Elevation&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:217&nbsp;&nbsp;&nbsp;&nbsp; 1:160&nbsp;&nbsp;&nbsp;&nbsp;
...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:15<br>
&nbsp;&nbsp;&nbsp; U&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Eastward Water Velocity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:217&nbsp;&nbsp;&nbsp;&nbsp; 1:160&nbsp;&nbsp;&nbsp;&nbsp;
1:37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:15<br>
&nbsp;&nbsp;&nbsp; V&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Northward Water Velocity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:217&nbsp;&nbsp;&nbsp;&nbsp; 1:160&nbsp;&nbsp;&nbsp;&nbsp;
1:37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:15<br>
&nbsp;&nbsp;&nbsp; TEMP&nbsp;&nbsp;&nbsp;&nbsp; Temperature&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:217&nbsp;&nbsp;&nbsp;&nbsp; 1:160&nbsp;&nbsp;&nbsp;&nbsp;
1:37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:15<br>
&nbsp;&nbsp;&nbsp; SALT&nbsp;&nbsp;&nbsp;&nbsp; Salinity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:217&nbsp;&nbsp;&nbsp;&nbsp; 1:160&nbsp;&nbsp;&nbsp;&nbsp;
1:37&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:15<br>
&nbsp;&nbsp;&nbsp; </tt><br>
So, check the grid of the variables:<tt><br>
<br>
&nbsp;&nbsp; yes? show grid temp<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GRID GQD3<br>
&nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; axis&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # pts&nbsp;&nbsp; start&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end<br>
&nbsp;&nbsp;&nbsp; NX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; X&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 217 r&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 217<br>
&nbsp;&nbsp;&nbsp; NY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 160 r&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 160<br>
&nbsp;&nbsp;&nbsp; SIGMA&nbsp;&nbsp;&nbsp;&nbsp; Z (sigma_level&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 37 i-&nbsp; 0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1<br>
&nbsp;&nbsp;&nbsp; TIME&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME&nbsp;&nbsp;&nbsp;&nbsp; <br>
<br>
</tt>Sigma is a coordinate axis, so you need to define a variable with
the values of sigma, and then you can proceed with your calculation.<tt><br>
<br>
&nbsp; yes? <b>let sig = z[gz=temp]</b><br>
&nbsp; yes? let depthValues = <b>sig </b>* ( depth + zeta )<br>
&nbsp; yes? define axis/z=1:37:1/units=meters/depth zdepth<br>
&nbsp; yes? let saltondepth = zaxreplace(salt,depthValues,z[gz=zdepth])<br>
<br>
</tt>Note also that the result is still a 4-dimensional variable, so to
PLOT it, choose a 1-dimensional subset<tt><br>
<br>
&nbsp; yes? PLOT/i=100/j=100/L=1 saltondepth<br>
<br>
<br>
</tt><br>
John Schattel wrote:
<blockquote cite="" type="cite">Hello All,
  <br>
  <br>
I'm trying to use ZAXREPLACE to regrid from sigma to depth using the
commands listed below.&nbsp; But Ferret complains about an unknown variable
SIGMA.&nbsp; Is this an issue with Ferret not being able to convert the
sigma axis because it uses units of "sigma_level"?&nbsp; If so, can anyone
tell me how to let Ferret know how to do the conversion?
  <br>
  <br>
Thanks,
  <br>
  <br>
John
  <br>
  <br>
use <a class="moz-txt-link-rfc2396E" href="">"http://205.156.4.56/cgi-bin/nph-dods/dgom/ngom311_05Nov043D.nc"</a>
  <br>
*** NOTE: Units on axis "sigma" are not recognized: sigma_level
  <br>
*** NOTE: They will not be convertible:
  <br>
let depthValues = sigma * ( depth + zeta )
  <br>
define axis/z=1:37:1/units=meters/depth zdepth
  <br>
let saltondepth = zaxreplace(salt,depthValues,z[gz=zdepth])
  <br>
plot saltondepth
  <br>
**ERROR: variable unknown or not in data set: SIGMA
  <br>
  <br>
</blockquote>


</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="01007" href="msg01007.html">[ferret_users] Telling Ferret How to Convert Units of &quot;sigma_level&quot;</a></strong>
<ul><li><em>From:</em> John Schattel</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg01007.html">[ferret_users] Telling Ferret How to Convert Units of &quot;sigma_level&quot;</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg01009.html">[ferret_users] Filling in the blanks with interpolation</a></strong>
</li>

</UL>
<center>[<a href="msg01007.html">Thread Prev</a>][<a href="msg01009.html">Thread Next</a>][<A HREF="threads.html#01008">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
