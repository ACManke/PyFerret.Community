<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: multiNetCDF descriptor, LAS, and OpenDAP -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Fri, 27 May 2005 14:21:58 &#45;0700 -->
<!--X-Message-Id: 42978F75.3060203@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: Pine.GSO.4.58.0505251323580.5186@louisiana.nrlssc.navy.mil -->
<!--X-Reference: 4294D3E0.8090401@noaa.gov -->
<!--X-Reference: Pine.GSO.4.58.0505271036370.5186@louisiana.nrlssc.navy.mil -->
<!--X-Reference: 42976C5D.7070308@noaa.gov -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: multiNetCDF descriptor, LAS, and OpenDAP</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00508.html">Thread Prev</a>][<a href="msg00500.html">Thread Next</a>][<A HREF="threads.html#00510">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: multiNetCDF descriptor, LAS, and OpenDAP</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: multiNetCDF descriptor, LAS, and OpenDAP</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 27 May 2005 14:21:57 -0700</li>
<li>Cc: Matt Fulgo &lt;<a href="mailto:Matt.Fulgo@DOMAIN.HIDDEN">Matt.Fulgo@xxxxxxxxxxxxxxx</a>&gt;,       Roland Schweitzer &lt;<a href="mailto:Roland.Schweitzer@DOMAIN.HIDDEN">Roland.Schweitzer@xxxxxxxx</a>&gt;, <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="msg00508.html">42976C5D.7070308@noaa.gov</a>&gt;</li>
<li>References: &lt;<a href="msg00497.html">Pine.GSO.4.58.0505251323580.5186@louisiana.nrlssc.navy.mil</a>&gt; &lt;<a href="msg00499.html">4294D3E0.8090401@noaa.gov</a>&gt; &lt;<a href="msg00506.html">Pine.GSO.4.58.0505271036370.5186@louisiana.nrlssc.navy.mil</a>&gt; &lt;<a href="msg00508.html">42976C5D.7070308@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Hi again Matt,<br>
The maximum number of stepfiles is currently 5000 (as of Ferret version 
5.53, September 2003) so you won't hit that limit with your dataset 
having 912 timesteps.  The program limits can be found in the Users 
Guide by looking in the index under &quot;limits&quot;.<br>
<br>
<br>
<br>
Ansley Manke wrote:<br>
<br>
<blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">Hi Matt,<br>
Just responding to your question about the maximum number of stepfiles 
in a desciptor file -- as things stand now it's hard-wired into Ferret 
(which is written largely in Fortran and so has lots of fixed-length 
arrays and buffers).  We have a plan to change this in the next 
version of Ferret so it'll be unlimited.<br>
<br>
The last two commands you show, accessing DODS files directly, work 
fine for me.  Maybe try clearing your DODS cache and try again (see 
DODS, caching) in the Ferret Users Guide.<br>
<br>
Ansley<br>
<br>
Matt Fulgo wrote:<br>
<br>
<blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">I have tried all of the aforementioned solutions and none have worked.<br>
However, I do believe that they have helped me narrow down the 
problem...<br>
<br>
When I tried to execute the script by itself:<br>
yes? go &quot;jnls/std_initialize&quot; &quot;NCOMCCS/h002/expt_09.0/s3d&quot; &quot;1&quot; &quot;1&quot;<br>
&quot;Salinity&quot;<br>
I received an error about the &amp;FORMAT_RECORD, this was due to the<br>
linux/Fortan 77 issues.  After fixing this and rerunning the script, 
I was<br>
informed that the maximum datasets for a descriptor is 500 - I had 912.<br>
(Does anyone know where this is set, as I will eventually need to fix<br>
this?)  So now, I'm down to a dataset of one NetCDF file, receiving the<br>
same error whether I run it though LAS or ferret and whether I use the<br>
provided jnl or simply try loading the data myself.  Here are some of 
the<br>
things that I have tried and the results:<br>
<br>
yes? go &quot;jnls/std_initialize&quot; &quot;NCOMCCS/h002/expt_09.0/s3d.des&quot; &quot;1&quot; &quot;1&quot;<br>
&quot;Salinity&quot;<br>
**TMAP ERR: non-existent or not on line yes? set data<br>
&quot;NCOMCCS/h002/expt_09.0/s3d&quot;<br>
            No files on-line from data set **TMAP ERR: non-existent or<br>
not on line<br>
            Data set: NCOMCCS/h002/expt_09.0/s3d.des No files on-line<br>
from data set set data &quot;NCOMCCS/h002/expt_09.0/s3d.des&quot;  Data set:<br>
NCOMCCS/h002/expt_09.0/s3d.des<br>
Command file, command group, or REPEAT execution aborted<br>
<br>
yes? set data<br>
&quot;<a  href="http://supply.nrlssc.navy.mil/cgi-bin/nph-dods/NCOMCCS/h002/expt_09.0/nc/s3d/s3d.ncom.h002.090.nest1.20001001_00000000.nc&quot">http://supply.nrlssc.navy.mil/cgi-bin/nph-dods/NCOMCCS/h002/expt_09.0/nc/s3d/s3d.ncom.h002.090.nest1.20001001_00000000.nc&quot</a>; 
<br>
** unknown netCDF error code: -31<br>
is this a CDF file ?<br>
<br>
yes? set data<br>
&quot;<a  href="http://www.ferret.noaa.gov/cgi-bin/nph-dods/data/levitus_climatology.nc&quot">http://www.ferret.noaa.gov/cgi-bin/nph-dods/data/levitus_climatology.nc&quot</a>; 
<br>
On Wed, 25 May 2005, Roland Schweitzer wrote:<br>
** unknown netCDF error code: -31<br>
is this a CDF file ?<br>
<br>
The last two are rather puzzling.  Again,<br>
<br>
Thanks for all your help,<br>
-Matt<br>
<br>
 
<br>
<blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">Hi,<br>
<br>
I suspect that the problem lies with the environment which LAS uses to<br>
run Ferret.  Your las.xml configuration specifies the &quot;.des&quot; file 
with a<br>
relative path.  The environment that Ferret uses when run by LAS is<br>
specified in las/server/Ferret_config.pl.  I'm not an expert on how<br>
Ferret resolves relative path names, but one solution would be to<br>
include the full path name /blah/blah/NCOMCCS/h002/expt_09.0 in<br>
Ferret_config.pl in the FER_DESCR variable and refer to the file 
only by<br>
's3d.des' in the data set configuration.<br>
<br>
Roland<br>
<br>
Matt Fulgo wrote:<br>
<br>
  
<br>
<blockquote style="border-left: #0000FF solid 0.1em; margin-left: 0.0em; padding-left: 1.0em">Greeting all,<br>
<br>
I am trying to setup a dataset in LAS using a descriptor file.  The<br>
dataset is separated to one file per variable per timestep.  After<br>
configuring LAS and creating the des file, I get the following 
error from<br>
LAS:<br>
<br>
Adding an acceptable error string: &quot;*** NOTE: &quot;.<br>
    NOAA/PMEL TMAP<br>
    FERRET v5.70<br>
    Linux(g77) 2.4.20 - 06/28/04<br>
    25-May-05 12:35<br>
<br>
yes? cancel mode verify<br>
yes? cancel mode interp<br>
yes? canc data/all<br>
yes? go std_initialize &quot;NCOMCCS/h002/expt_09.0/s3d.des&quot; &quot;1&quot; &quot;1&quot; 
&quot;Salinity&quot;<br>
**TMAP ERR: non-existent or not on line<br>
           No files on-line from data set<br>
           Data set: NCOMCCS/h002/expt_09.0/s3d.des<br>
set data &quot;NCOMCCS/h002/expt_09.0/s3d.des&quot;<br>
Command file, command group, or REPEAT execution aborted<br>
<br>
The descriptor file is as follows:<br>
<br>
&amp;FORMAT_RECORD<br>
   D_TYPE = ' MC',<br>
   D_FORMAT = ' 1A',<br>
   D_SOURCE_CLASS = 'MODEL OUTPUT',<br>
/<br>
&amp;BACKGROUND_RECORD<br>
    D_EXPNUM = '0001',<br>
    D_TITLE = '',<br>
    D_T0TIME = '01-Oct-2000 00:00:00.00',<br>
    D_TIME_UNIT = 43200,<br>
    D_TIME_MODULO = .FALSE.,<br>
/<br>
&amp;MESSAGE_RECORD<br>
    D_MESSAGE = ' ',<br>
    D_ALERT_ON_OPEN = F,<br>
    D_ALERT_ON_OUTPUT = F,<br>
/<br>
&amp;EXTRA_RECORD<br>
/<br>
&amp;STEPFILE_RECORD<br>
     s_filename =<br>
'<a  href="http://supply.nrlssc.navy.mil/cgi-bin/nph-dods/NCOMCCS/h002/expt_09.0/nc/s3d/s3d.ncom.h002.090.nest1.20001001_00000000.nc">http://supply.nrlssc.navy.mil/cgi-bin/nph-dods/NCOMCCS/h002/expt_09.0/nc/s3d/s3d.ncom.h002.090.nest1.20001001_00000000.nc</a>', 
<br>
     S_START = 0,<br>
     S_END = 0,<br>
     S_DELTA = 1,<br>
     S_NUM_OF_FILES = 1,<br>
     S_REGVARFLAG = ' ',<br>
/<br>
&amp;STEPFILE_RECORD<br>
     s_filename =<br>
'<a  href="http://supply.nrlssc.navy.mil/cgi-bin/nph-dods/NCOMCCS/h002/expt_09.0/nc/s3d/s3d.ncom.h002.090.nest1.20001001_12000000.nc">http://supply.nrlssc.navy.mil/cgi-bin/nph-dods/NCOMCCS/h002/expt_09.0/nc/s3d/s3d.ncom.h002.090.nest1.20001001_12000000.nc</a>', 
<br>
     S_START = 1,<br>
     S_END = 1,<br>
     S_DELTA = 1,<br>
     S_NUM_OF_FILES = 1,<br>
     S_REGVARFLAG = ' ',<br>
/<br>
&amp;STEPFILE_RECORD<br>
     s_filename =<br>
'<a  href="http://supply.nrlssc.navy.mil/cgi-bin/nph-dods/NCOMCCS/h002/expt_09.0/nc/s3d/s3d.ncom.h002.090.nest1.20001002_00000000.nc">http://supply.nrlssc.navy.mil/cgi-bin/nph-dods/NCOMCCS/h002/expt_09.0/nc/s3d/s3d.ncom.h002.090.nest1.20001002_00000000.nc</a>', 
<br>
     S_START = 2,<br>
     S_END = 2,<br>
     S_DELTA = 1,<br>
     S_NUM_OF_FILES = 1,<br>
     S_REGVARFLAG = ' ',<br>
/<br>
---------other 909 records not included------------<br>
&amp;STEPFILE_RECORD<br>
     s_filename = '**END OF STEPFILES**'<br>
/<br>
<br>
I have heard rumors of a 72 column limit for descriptor files, 
could this<br>
have anything to do with the failure?  Any help is appreciated and<br>
<br>
Thanks in advance,<br>
Matt<br>
<br>
<br>
    
</blockquote>
<br>
  
</blockquote><pre>
</pre>
</blockquote><pre>
</pre>
</blockquote><pre>
</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00497" href="msg00497.html">multiNetCDF descriptor, LAS, and OpenDAP</a></strong>
<ul><li><em>From:</em> Matt Fulgo</li></ul></li>
<li><strong><a name="00499" href="msg00499.html">Re: multiNetCDF descriptor, LAS, and OpenDAP</a></strong>
<ul><li><em>From:</em> Roland Schweitzer</li></ul></li>
<li><strong><a name="00506" href="msg00506.html">Re: multiNetCDF descriptor, LAS, and OpenDAP</a></strong>
<ul><li><em>From:</em> Matt Fulgo</li></ul></li>
<li><strong><a name="00508" href="msg00508.html">Re: multiNetCDF descriptor, LAS, and OpenDAP</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00508.html">Re: multiNetCDF descriptor, LAS, and OpenDAP</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00500.html">color bar data control</a></strong>
</li>

</UL>
<center>[<a href="msg00508.html">Thread Prev</a>][<a href="msg00500.html">Thread Next</a>][<A HREF="threads.html#00510">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
