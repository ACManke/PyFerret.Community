<!-- MHonArc v2.5.13 -->
<!--X-Subject: Re: climatology: what's going on with month_reg? -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Fri, 20 May 2005 10:22:54 &#45;0700 -->
<!--X-Message-Id: 428E1CEE.5030006@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 9cd0babe5e55bf1164c85ca3e7f8af69@astr.ucl.ac.be -->
<!--X-Reference: 42725CFC.9050902@noaa.gov -->
<!--X-Reference: d7f6d6e875683de699f3481a2ecc7c49@astr.ucl.ac.be -->
<!--X-Reference: 428E1AD4.5000103@noaa.gov -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: climatology: what's going on with month_reg?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00459.html">Thread Prev</a>][<a href="msg00391.html">Thread Next</a>][<A HREF="threads.html#00460">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: climatology: what's going on with month_reg?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: climatology: what's going on with month_reg?</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 20 May 2005 10:22:54 -0700</li>
<li>Cc: Emilie Vanvyve &lt;<a href="mailto:vanvyve@DOMAIN.HIDDEN">vanvyve@xxxxxxxxxxxxxx</a>&gt;,       Ferret users &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00459.html">428E1AD4.5000103@noaa.gov</a>&gt;</li>
<li>References: &lt;<a href="msg00388.html">9cd0babe5e55bf1164c85ca3e7f8af69@astr.ucl.ac.be</a>&gt; &lt;<a href="msg00389.html">42725CFC.9050902@noaa.gov</a>&gt; &lt;<a href="msg00454.html">d7f6d6e875683de699f3481a2ecc7c49@astr.ucl.ac.be</a>&gt; &lt;<a href="msg00459.html">428E1AD4.5000103@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.4) Gecko/20030624 Netscape/7.1 (ax)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">



Hi -- reading my response, I should have said for option 1:<br>
<br>
Define a new time axis on a gregorian calendar, <b>regrid your data to
that new axis, and then</b> use @MOD to make a climatology with
month_reg.<br>
<br>
Ansley<br>
<br>
Ansley Manke wrote:<br>
<blockquote type="cite" cite="">
  
  <title></title>
Hi Emile,<br>
Your data must be on a time axis with a non-gregorian calendar.&nbsp; There
are two different solutions to this.&nbsp; <br>
  <br>
1) Define a new time axis on a gregorian calendar, and then use @MOD to
make a climatology with month_reg.<br>
  <br>
2) Define your own climatological axis having the same calendar as your
input data.&nbsp; Use the number of days per year, divide by 12 and center
the points within the months.&nbsp; Here are the number of days per year for
the different calendar axes, from the Users Guide.<br>
  <br>
  <table>
    <tbody>
      <tr>
        <td width="235" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times"><b>calendar
name&nbsp;&nbsp;&nbsp;&nbsp;</b>&nbsp; </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times"><b>number
of days/year</b>&nbsp; </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times"><b>notes</b>&nbsp;
        </font></p>
        </td>
      </tr>
      <tr>
        <td width="235" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">GREGORIAN
or STANDARD&nbsp; </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">365.2425&nbsp;
        </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">default
calendar&nbsp; </font></p>
        </td>
      </tr>
      <tr>
        <td width="235" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">JULIAN&nbsp;
        </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">365.25&nbsp;
        </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">with
leap years&nbsp; </font></p>
        </td>
      </tr>
      <tr>
        <td width="235" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">NOLEAPor
COMMON_YEAR&nbsp; </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">365&nbsp;
        </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">no
leap years&nbsp; </font></p>
        </td>
      </tr>
      <tr>
        <td width="235" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">360_DAY&nbsp;
        </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">360&nbsp;
        </font></p>
        </td>
        <td width="186" valign="top">
        <p align="left"><font color="#1f1a17" size="3" face="Times">each
month is 30 days&nbsp; </font></p>
        </td>
      </tr>
    </tbody>
  </table>
  <font color="#1f1a17" size="3" face="Times">
  <br>
If you look at the month_reg calendar from the climatological_axes
dataset, <br>
  <br>
yes? use climatological_axes<br>
yes? list t[gt=month_reg], tbox[gt=month_reg], tboxlo[gt=month_reg],
tboxhi[gt=month_reg]<br>
  <br>
You'll see how that axis is set up, for the Gregorian calendar. You
should be able to do something similar. Your DEFINE AXIS command should
use a start time axis in year 0000, and use the /MODULO qualifier.<br>
  <br>
Ansley<br>
  <br>
  </font>Emilie Vanvyve wrote:<br>
  <blockquote type="cite"
 cite="">Hello
Ansley, <br>
    <br>
Sorry for the delay of this answer, I've been caught on another urgent
work. <br>
    <br>
Here is the error I'm returned when I use @MOD to get a monthly
climatology from a several-year data file (cfr joined e-mails for
further details): <br>
    <br>
    <tt><!---->yes? use CMAP.1979-2002.nc <br>
yes? use climatological_axes <br>
*** NOTE: regarding /opt/ferret/go/climatological_axes.cdf ... <br>
*** NOTE: Climatological axes SEASONAL_REG, MONTH_REG, and
MONTH_IRREG defined <br>
yes? cancel data climatological_axes <br>
yes? show data <br>
currently SET data sets: <br>
1&gt; ./CMAP.1979-2002.nc (default) <br>
name title I J K L <br>
RAIN1 precipitation (gauge, satellite 1:144 1:72 ... 1:288 <br>
ERROR1 relative error for rain1 1:144 1:72 ... 1:288 <br>
RAIN2 precipitation (gauge, satellite 1:144 1:72 ... 1:288 <br>
ERROR2 relative error for rain2 1:144 1:72 ... 1:288 <br>
    <br>
    <br>
yes? let clim_rain = rain1[d=1,x=10,y=0,gt=month_reg@mod] <br>
yes? list clim_rain <br>
**ERROR: regridding: only @ASN, @LIN, or @NRST regridding between
calendar types: 360_DAY, GREGORIAN <br>
yes? <br>
    </tt><br>
Does it help? <br>
    <br>
Emilie <br>
    <br>
    <br>
Le 29 avr. 2005, &agrave; 18:12, Ansley Manke a &eacute;crit : <br>
    <br>
    <blockquote> Hi Emilie, <br>
What trouble did you have when you tried using @MOD?&nbsp; That is really
what you want to use, to average all the January values, then all the
February values, and so on, returning a 12-month result.&nbsp; <br>
      <br>
      <tt>&nbsp; yes? use CMAP.1979-2</tt> <br>
      <tt> &nbsp; yes? use climatological_axes</tt> <br>
      <tt> &nbsp; yes? cancel data climatological_axes&nbsp; ! the axes will
still
be defined</tt> <br>
      <br>
      <tt> &nbsp; yes? let clim_rain = rain1[d=1,x=10,y=0,gt=month_reg@mod]</tt>
      <br>
      <tt> &nbsp; yes? list clim_rain </tt> <br>
      <br>
      <br>
      <br>
Emilie Vanvyve wrote: <br>
      <blockquote>Hello dear Ferret users, <br>
        <br>
I have the CMAP monthly data from 1979 to 2002 and would like to get
the mean values for every January, February..., and December. I looked
at the online manual and the FAQ and discovered the existence of the
"climatological_axes". I tried it, could not use the @MOD (as advised)
and so I used the @ASN. <br>
When I check the results, Ferret just took my first year and copied
it repeatively across the next years, so that the year 1980 in the new
climatological variable = 1979 values of the original variable, the
year 1981 = 1979, and so on and so forth. <br>
        <br>
Example: I focus on one point (around 10&deg;N 0&deg;E). <br>
        <br>
        <tt>yes? use CMAP.1979-2002.nc</tt> <br>
        <tt> yes? show data</tt> <br>
        <tt> currently SET data sets:</tt> <br>
        <tt> 1&gt; ./CMAP.1979-2002.nc (default)</tt> <br>
        <tt> name title I J K L</tt> <br>
        <tt> RAIN1 precipitation (gauge, satellite 1:144 1:72 ... 1:288</tt>
        <br>
        <tt> ERROR1 relative error for rain1 1:144 1:72 ... 1:288</tt> <br>
        <tt> RAIN2 precipitation (gauge, satellite 1:144 1:72 ... 1:288</tt>
        <br>
        <tt> ERROR2 relative error for rain2 1:144 1:72 ... 1:288</tt> <br>
        <br>
        <tt> yes? list rain1[d=1,l=1:24,x=10,y=0]</tt> <br>
        <tt> VARIABLE : precipitation (gauge, satellite, models)
(mm/day)</tt> <br>
        <tt> DATA SET : CPC Merged Analysis of Precipitation (CMAP)</tt>
        <br>
        <tt> FILENAME : CMAP.1979-2002.nc</tt> <br>
        <tt> SUBSET : 24 points (TIME)</tt> <br>
        <tt> CALENDAR : 360_DAY</tt> <br>
        <tt> LONGITUDE: 8.8E</tt> <br>
        <tt> LATITUDE : 1.2S</tt> <br>
        <tt> 8.8E</tt> <br>
        <tt> 4</tt> <br>
        <tt> 30-JAN-1979 / 1: 4.870</tt> <br>
        <tt> 30-FEB-1979 / 2: 5.780</tt> <br>
        <tt> 30-MAR-1979 / 3: 4.190</tt> <br>
        <tt> 30-APR-1979 / 4: 6.630</tt> <br>
        <tt> 30-MAY-1979 / 5: 4.130</tt> <br>
        <tt> 30-JUN-1979 / 6: 0.530</tt> <br>
        <tt> 30-JUL-1979 / 7: 0.620</tt> <br>
        <tt> 30-AUG-1979 / 8: 0.180</tt> <br>
        <tt> 30-SEP-1979 / 9: 0.400</tt> <br>
        <tt> 30-OCT-1979 / 10: 2.020</tt> <br>
        <tt> 30-NOV-1979 / 11: 7.650</tt> <br>
        <tt> 30-DEC-1979 / 12: 4.780</tt> <br>
        <tt> 30-JAN-1980 / 13: 4.820</tt> <br>
        <tt> 30-FEB-1980 / 14: 2.680</tt> <br>
        <tt> 30-MAR-1980 / 15: 8.200</tt> <br>
        <tt> 30-APR-1980 / 16: 4.220</tt> <br>
        <tt> 30-MAY-1980 / 17: 2.240</tt> <br>
        <tt> 30-JUN-1980 / 18: 0.530</tt> <br>
        <tt> 30-JUL-1980 / 19: 0.800</tt> <br>
        <tt> 30-AUG-1980 / 20: 0.290</tt> <br>
        <tt> 30-SEP-1980 / 21: 2.660</tt> <br>
        <tt> 30-OCT-1980 / 22: 8.630</tt> <br>
        <tt> 30-NOV-1980 / 23: 7.130</tt> <br>
        <tt> 30-DEC-1980 / 24: 3.550</tt> <br>
        <br>
        <tt> yes? use climatological_axes</tt> <br>
        <tt> *** NOTE: regarding /opt/ferret/go/climatological_axes.cdf
...</tt> <br>
        <tt> *** NOTE: Climatological axes SEASONAL_REG, MONTH_REG, and
MONTH_IRREG defined</tt> <br>
        <br>
        <tt> yes? let clim_rain = rain1[d=1,x=10,y=0,gt=month_reg@asn]</tt>
        <br>
        <tt> yes? list clim_rain[l=1:24]</tt> <br>
        <tt> VARIABLE :
RAIN1[D=CMAP.1979-2002,X=10,Y=0,GT=MONTH_REG@ASN]</tt> <br>
        <tt> SUBSET : 24 points (TIME)</tt> <br>
        <tt> LONGITUDE: 8.8E</tt> <br>
        <tt> LATITUDE : 1.2S</tt> <br>
        <tt> 8.8E</tt> <br>
        <tt> 4</tt> <br>
        <tt> 16-JAN / 1: 4.870</tt> <br>
        <tt> 15-FEB / 2: 5.780</tt> <br>
        <tt> 17-MAR / 3: 4.190</tt> <br>
        <tt> 16-APR / 4: 6.630</tt> <br>
        <tt> 16-MAY / 5: 4.130</tt> <br>
        <tt> 16-JUN / 6: 0.530</tt> <br>
        <tt> 16-JUL / 7: 0.620</tt> <br>
        <tt> 16-AUG / 8: 0.180</tt> <br>
        <tt> 15-SEP / 9: 0.400</tt> <br>
        <tt> 16-OCT / 10: 2.020</tt> <br>
        <tt> 15-NOV / 11: 7.650</tt> <br>
        <tt> 16-DEC / 12: 4.780</tt> <br>
        <tt> 15-JAN / 13: 4.870</tt> <br>
        <tt> 14-FEB / 14: 5.780</tt> <br>
        <tt> 17-MAR / 15: 4.190</tt> <br>
        <tt> 16-APR / 16: 6.630</tt> <br>
        <tt> 17-MAY / 17: 4.130</tt> <br>
        <tt> 16-JUN / 18: 0.530</tt> <br>
        <tt> 17-JUL / 19: 0.620</tt> <br>
        <tt> 16-AUG / 20: 0.180</tt> <br>
        <tt> 15-SEP / 21: 0.400</tt> <br>
        <tt> 16-OCT / 22: 2.020</tt> <br>
        <tt> 15-NOV / 23: 7.650</tt> <br>
        <tt> 16-DEC / 24: 4.780</tt> <br>
        <br>
So clim_rain(1979) = rain(1979), clim_rain(1980) = rain(1979), ...! <br>
        <br>
Where am I wrong? <br>
        <br>
Thanks for any suggestion! <br>
        <br>
Emilie V. <br>
        <br>
____________________________________________________________ <br>
        <b>Emilie VANVYVE</b> <br>
        <i>Physicist, PhD student</i> <br>
        <br>
Universit&eacute; catholique de Louvain (UCL) <br>
Institut d'astronomie et de g&eacute;ophysique G. Lema&icirc;tre (ASTR) <br>
Chemin du Cyclotron, 2 <br>
1348 Louvain-la-Neuve (Belgium) <br>
Phone: +32-(0)10-473300 // Fax: +32-(0)10-474722 <br>
E-mail:
<!----><a class="moz-txt-link-abbreviated"
 href="">vanvyve@astr.ucl.ac.be</a> //
Web:<!----> <a class="moz-txt-link-abbreviated"
 href="">www.astr.ucl.ac.be</a> <br>
        <br>
        <br>
      </blockquote>
    </blockquote>
____________________________________________________________ <br>
    <b>Emilie VANVYVE <br>
    </b><i>Physicist, PhD student <br>
    <font size="-1"><font size="-1"><br>
    </font></font></i>Universit&eacute; catholique de
Louvain (UCL) <br>
Institut d'astronomie et de g&eacute;ophysique G. Lema&icirc;tre (ASTR) <br>
Chemin du Cyclotron, 2 <br>
1348 Louvain-la-Neuve (Belgium) <br>
Phone: +32-(0)10-473300 // Fax: +32-(0)10-474722 <br>
E-mail: <a class="moz-txt-link-abbreviated"
 href="">vanvyve@astr.ucl.ac.be</a> //
Web: <a class="moz-txt-link-abbreviated"
 href="">www.astr.ucl.ac.be</a> <br>
    <br>
    <br>
  </blockquote>
</blockquote>


</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00388" href="msg00388.html">climatology: what's going on with month_reg?</a></strong>
<ul><li><em>From:</em> Emilie Vanvyve</li></ul></li>
<li><strong><a name="00389" href="msg00389.html">Re: climatology: what's going on with month_reg?</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00454" href="msg00454.html">Re: climatology: what's going on with month_reg?</a></strong>
<ul><li><em>From:</em> Emilie Vanvyve</li></ul></li>
<li><strong><a name="00459" href="msg00459.html">Re: climatology: what's going on with month_reg?</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00459.html">Re: climatology: what's going on with month_reg?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00391.html">problem in accessing large data files</a></strong>
</li>

</UL>
<center>[<a href="msg00459.html">Thread Prev</a>][<a href="msg00391.html">Thread Next</a>][<A HREF="threads.html#00460">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
