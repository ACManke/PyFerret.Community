<!-- MHonArc v2.5.4 -->
<!--X-Subject: Re: subtract 2D data at specific depth -->
<!--X-From-R13: Rbatkvnb Lunat <qmunatNvovf.efznf.zvnzv.rqh> -->
<!--X-Date: Mon, 21 Apr 1997 08:51:12 &#45;0700 -->
<!--X-Message-Id: Pine.OSF.3.95.970421114455.11532B&#45;100000@ibis.rsmas.miami.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: subtract 2D data at specific depth</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00045.html">Thread Prev</a>][<a href="msg00050.html">Thread Next</a>][<A HREF="threads.html#00048">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: subtract 2D data at specific depth</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><A HREF="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxx</A></strong></li>
<li><strong>Subject</strong>: <strong>Re: subtract 2D data at specific depth</strong></li>
<li><strong>From</strong>: <strong>Dongxiao Zhang &lt;<A HREF="mailto:dzhang@DOMAIN.HIDDEN">dzhang@xxxxxxxxxxxxxxxxxxxx</A>&gt;</strong></li>
<li>Date: Mon, 21 Apr 1997 11:50:59 -0400 (EDT)</li>
<li>Sender: owner-ferret_users</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

Hi all,

I received the answer for my question from Mark. It works. Hope it
helpful for all.

On Apr 18, 12:17pm, Dongxiao Zhang wrote:
&gt; Ferret will subtract a 2D field from a 3D field as in
&gt;
&gt;         LET temp_anomaly = temp - sst           ! temp is 3D, sst is 2D
&gt;   or
&gt;         LET temp_anomaly = temp - temp[z=0]     ! temp[Z=0] is a 2D field
&gt;
&gt;
&gt; My question is:
&gt;
&gt; Is there any way to subtract a 2D field from a 3D data only at a specific
&gt; depth level and leave the other levels not being changed?  This is useful,
&gt; for example, to get rid of the Ekman component in the upper layer of
&gt; velocity field.
&gt;-- End of excerpt from Dongxiao Zhang

Sure, this is very simple and there are a number of ways I can think of to do
this. One way is to define a new variable with the if-then-else structure. Here
is an example:

	LET noekmanvel = IF z EQ 0 THEN vel-ekmanvel ELSE vel

where vel is the 3D  (or even 4D field) and ekmanvel is the ekman velocity.
There could possibly be some small problem with different grids if ekmanvel is
defined on a 2D i-j grid, but this could be gotten around (I don't have an
example to try this directly - I will think about it over the weekend - or
Steve Hankin will come up with an answer).

If ekmanvel is 3D then you could have ekmanvel be 0 everywhere but the surface
and then just do a subtraction.

	Mark

-- 
-------------------------------------------------------------------------------

	      Mark Verschell (verschell@coaps.fsu.edu)
	      Center for Ocean and Atmospheric Prediction Studies
	      Florida State University
              2035 E. Paul Dirac Drive
              R.M. Johnson Bldg. - Suite 200
	      Tallahassee, FL  32306-3041
	      (904) 644-6532              (904) 644-4841 (fax)



--------------------------------------------------------------------
Dongxiao Zhang
Division of Meteorology and Physical Oceanography
Rosenstiel School of Marine and Atmospheric Science
4600 Rickenbacker Causeway
Miami, FL 33149
Phone  : (305)361-4806
Fax    : (305)361-4696
Office : MSC Room 309
--------------------------------------------------------------------


</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00045.html">Extracting data along transects</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00050.html">Net CDF to ASCII or binary</a></strong>
</li>

</UL>
<center>[<a href="msg00045.html">Thread Prev</a>][<a href="msg00050.html">Thread Next</a>][<A HREF="threads.html#00048">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
