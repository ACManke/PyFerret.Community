<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] EOf of 3d data -->
<!--X-From-R13: puvaah fnpuv <puvaah.fnpuv7Ntznvy.pbz> -->
<!--X-Date: Fri, 4 Jul 2014 01:46:06 &#45;0700 -->
<!--X-Message-Id: CAJerFNEad3we7GzQCBBZWWUwk2nHaA1yAhMxfE1+deM0bY5bUw@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 53B592FE.2020900@noaa.gov -->
<!--X-Reference: 1812918045.2277643.1404458686360.JavaMail.root@nio.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] EOf of 3d data</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00243.html">Thread Prev</a>][<a href="msg00245.html">Thread Next</a>][<A HREF="threads.html#00244">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] EOf of 3d data</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Shreya Dhame &lt;<a href="mailto:sdhame@DOMAIN.HIDDEN">sdhame@xxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] EOf of 3d data</strong></li>
<li><strong>From</strong>: <strong>chinnu sachi &lt;<a href="mailto:chinnu.sachi7@DOMAIN.HIDDEN">chinnu.sachi7@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 4 Jul 2014 14:16:01 +0530</li>
<li>Cc: Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;,        ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00243.html">1812918045.2277643.1404458686360.JavaMail.root@nio.org</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00242.html">53B592FE.2020900@noaa.gov</a>&gt;	&lt;<a href="msg00243.html">1812918045.2277643.1404458686360.JavaMail.root@nio.org</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr">You can use set mode diagnostic command before saving your output also specify how many mode you want in your EOF result. This will help to reduce the memory intake<br></div><div class="gmail_extra"><br><br>
<div class="gmail_quote">On Fri, Jul 4, 2014 at 12:54 PM, Shreya Dhame <span dir="ltr">&lt;<a rel="nofollow" href="mailto:sdhame@xxxxxxx" target="_blank">sdhame@xxxxxxx</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
Hi,<br>
<br>
Thank you for the reply. I got this error message while saving my output:<br>
**ERROR: request exceeds memory setting: A negative number of words were requested.<br>
&#xA0;*** NOTE: The current grid is most likely too large<br>
I tried breaking up the output and saving it in groups of timesteps but still got the same error. Is there any other way out of this problem?<br>
<div class="HOEnZb"><div class="h5"><br>
----- Original Message -----<br>
From: &quot;Ansley Manke&quot; &lt;<a rel="nofollow" href="mailto:ansley.b.manke@xxxxxxxx">ansley.b.manke@xxxxxxxx</a>&gt;<br>
To: &quot;ferret users&quot; &lt;<a rel="nofollow" href="mailto:ferret_users@xxxxxxxx">ferret_users@xxxxxxxx</a>&gt;<br>
Sent: Thursday, July 3, 2014 10:59:34 PM<br>
Subject: Re: [ferret_users] EOf of 3d data<br>
<br>
Hi,<br>
Yes, those functions expect the spatial variation to be in XY. &#xA0; You<br>
could do the calculation by defining a fake XY grid and using RESHAPE to<br>
put your variable onto that grid. &#xA0;Because Ferret grids are stored with<br>
the data varying fastest in the X and then Y direction this will keep<br>
the data order intact.<br>
<br>
so, the new grid has an x axis the length of your grid&#39;s y axis, a y<br>
axis the length of your z axis:<br>
<br>
yes? def axis/x=1:`ny`:1 xfake<br>
yes? def axis/y=1:`nz`:1 yfake<br>
<br>
yes? let var_with_grid = &#xA0;x[gx=xfake] + y[gy=yfake] +t[gt=T_20FLNNEW]<br>
yes? let var_xyt = RESHAPE (T_20FLNNEW, var_with_grid)<br>
<br>
Then call the EOF functions using var_xyt, and finally put the results<br>
back on the original yz grid with another RESHAPE function.<br>
<br>
Please have a look at the EOFSVD functions. They are faster than the EOF<br>
family of functions. &#xA0;As long as your data does not have gaps they are<br>
the better choice.<br>
<br>
Ansley<br>
<br>
On 7/2/2014 10:14 PM, Shreya Dhame wrote:<br>
&gt; Hi,<br>
&gt;<br>
&gt; I want to use the method of Empirical Orthogonal Function (EOF) analysis to decompose the spatiotemporal data in orthogonal modes. My data is in 3d matrix in the form (time(t), lat(y), depth(z)). I tried the eof_space,eof_stat and eof_tfunc given in ef_eof_demo.jnl but did not get valid results.Are these functions only for x.y.t data?<br>

&gt;<br>
&gt; SET MODE VERIFY<br>
&gt; USE merge7y.cdf<br>
&gt;<br>
&gt; LET eofspace = eof_space(T_20FLNNEW, 0.5)<br>
&gt; SAVE/CLOBBER/FILE=merge7y_eof_space.cdf eofspace<br>
&gt;<br>
&gt; can variable/all<br>
&gt;<br>
&gt; use merge7y_eof_space.cdf<br>
&gt; set view ul; fill/l=1/title=&quot;eof 1&quot; eofspace<br>
&gt; set view ur; fill/l=2/title=&quot;eof 2&quot; eofspace<br>
&gt;<br>
&gt; USE merge7y.cdf<br>
&gt;<br>
&gt; LET eofstat = eof_stat(T_20NEW, 0.5)<br>
&gt; let nout = &#xA0;eofstat[i=1,j=1]<br>
&gt;<br>
&gt; SAVE/CLOBBER/FILE=merge7y_eof_stat.cdf eofstat[i=1:`nout`]<br>
&gt;<br>
&gt; can var/all<br>
&gt;<br>
&gt; use merge7y_eof_stat.cdf<br>
&gt;<br>
&gt; let nout = eofstat[i=1,j=1,d=merge7y_eof_stat]<br>
&gt; let pcts = eofstat[i=1:`nout`,j=2,d=merge7y_eof_stat]<br>
&gt; let eigenv = eofstat[i=1:`nout`,j=3,d=merge7y_eof_stat]<br>
&gt;<br>
&gt; list nout<br>
&gt; list pcts<br>
&gt; list eigenv<br>
&gt;<br>
&gt; USE merge7y.cdf<br>
&gt; LET eoftime = eof_tfunc(T_20NEW, 0.5)<br>
&gt;<br>
&gt; SAVE/CLOBBER/FILE=M1215_eof_tfunc.cdf eoftime[i=1:`nout`]<br>
&gt;<br>
&gt; can var/all<br>
&gt; use merge7y_eof_tfunc.cdf<br>
&gt; can view<br>
&gt;<br>
&gt; set view ul; plot/k=1/title=&quot;time function 1&quot; eoftime<br>
&gt; set view ur; plot/k=2/title=&quot;time function 2&quot; eoftime<br>
&gt;<br>
&gt; set mode/last verify<br>
&gt;<br>
&gt;<br>
&gt; --Thank you<br>
</div></div></blockquote></div><br><br clear="all"><br>-- <br><b>Regards,<br>Chinnu Sachidanandan<br>Physical Oceanography Division<br>National Institute of Oceanography<br><a rel="nofollow" href="mailto:csachidanandan@xxxxxxx" target="_blank">csachidanandan@xxxxxxx</a></b><br>

</div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00242" href="msg00242.html">Re: [ferret_users] EOf of 3d data</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00243" href="msg00243.html">Re: [ferret_users] EOf of 3d data</a></strong>
<ul><li><em>From:</em> Shreya Dhame</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00243.html">Re: [ferret_users] EOf of 3d data</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00245.html">Re: [ferret_users] EOf of 3d data</a></strong>
</li>

</UL>
<center>[<a href="msg00243.html">Thread Prev</a>][<a href="msg00245.html">Thread Next</a>][<A HREF="threads.html#00244">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
