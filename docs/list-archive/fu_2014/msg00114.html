<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Find dates of 10 highest rainfall in a 3D dataset -->
<!--X-From-R13: wntnqvfu xneznpuneln <w_xneznpunelnNlnubb.pbz> -->
<!--X-Date: Tue, 25 Mar 2014 15:30:37 &#45;0700 -->
<!--X-Message-Id: 1395786631.61242.YahooMailNeo@web141603.mail.bf1.yahoo.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 1395675285.94975.YahooMailNeo@web141603.mail.bf1.yahoo.com -->
<!--X-Reference: 53306A69.4000107@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Find dates of 10 highest rainfall in a 3D dataset</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00112.html">Thread Prev</a>][<a href="msg00115.html">Thread Next</a>][<A HREF="threads.html#00114">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Find dates of 10 highest rainfall in a 3D dataset</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;,        &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Find dates of 10 highest rainfall in a 3D dataset</strong></li>
<li><strong>From</strong>: <strong>jagadish karmacharya &lt;<a href="mailto:j_karmacharya@DOMAIN.HIDDEN">j_karmacharya@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 25 Mar 2014 15:30:31 -0700 (PDT)</li>
<li>In-reply-to: &lt;<a href="msg00112.html">53306A69.4000107@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00111.html">1395675285.94975.YahooMailNeo@web141603.mail.bf1.yahoo.com</a>&gt; &lt;<a href="msg00112.html">53306A69.4000107@noaa.gov</a>&gt;</li>
<li>Reply-to: jagadish karmacharya &lt;<a href="mailto:j_karmacharya@DOMAIN.HIDDEN">j_karmacharya@xxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div style="color:#000; background-color:#fff; font-family:HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;font-size:10pt">Dear Ansley,<br><br>Many thanks. I got it working building on your suggestion.<br><br><div>Jagadish</div><div style="display: block;" class="yahoo_quoted"> <br> <br> <div style="font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif; font-size: 10pt;"> <div style="font-family: HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif; font-size: 12pt;"> <div dir="ltr"> <font face="Arial" size="2"> On Monday, March 24, 2014 6:06 PM, Ansley Manke &lt;ansley.b.manke@xxxxxxxx&gt; wrote:<br> </font> </div>  <div class="y_msg_container"><div id="yiv4071884988"><div>
    You might think of defining variables, var[i=@shf:1], var[i=@shf:-1]
    and so forth and require that those be present in the grid.<br clear="none">
    <br clear="none">
    Something like this <br clear="none">
    <tt><br clear="none">
    </tt>
    <blockquote><tt>
        let var_ip = ifv var[i=@shf:1] </tt><tt>then 1</tt><br clear="none">
      <tt>
        let var_im = ifv var[i=@shf:-1] then 1</tt><br clear="none">
      <tt>
        let var_jp = ifv var[j=@shf:1] then 1</tt><br clear="none">
      <tt>
        let var_jm = ifv var[j=@shf:-1] </tt><tt>then 1</tt><br clear="none">
      <br clear="none">
      <tt>let var_neighbors = var_ip + var_im + var_jp + var_jm</tt><tt><br clear="none">
        <br clear="none">
        ! use as a mask<br clear="none">
        <br clear="none">
        let var_masked = if var_neighbors gt 2 then var<br clear="none">
      </tt></blockquote>
    <br clear="none">
    The above just looks one grid cell in x and y, but you could include
    more such definitions: var[i=@shf:1,j=@shf:1],
    var[i=@shf:1,j=@shf:-1], ...<br clear="none">
    <br clear="none">
    <div class="yiv4071884988yqt3313198014" id="yiv4071884988yqt96386"><div class="yiv4071884988moz-cite-prefix">On 3/24/2014 8:34 AM, jagadish
      karmacharya wrote:<br clear="none">
    </div>
    <blockquote type="cite">
      <div style="color:#000;background-color:#fff;font-family:HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;font-size:10pt;">
        <div id="yiv4071884988">
          <div>
            <div style="color:#000;background-color:#fff;font-family:HelveticaNeue, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif;font-size:10pt;">
              <div id="yiv4071884988yui_3_13_0_ym1_10_1395663667433_9"><span id="yiv4071884988yui_3_13_0_ym1_10_1395663667433_16">Dear
                  all,<br clear="none">
                  <br clear="none">
                  Actually I am able to find the dates of highest
                  gridpoint rainfall events in a 3 D dataset but the
                  problem is the model dataset I am using seems to have
                  many grid point stroms resulting in many maxima's that
                  occur only in a grid but having no rainfall in
                  surrounding grid. To avoide this problem I am wonding
                  whether it would be possible to define a maxima event
                  that also take into account rainfall in the grids
                  surrounding the maximum rainfall grid (e.g. say
                  rainfall in surrounding 1/3 of the grids i.e. 8 out of
                  sorround 24 grids is above a threshold (e.g. 10% of
                  the maxamima or a fix threshold)).<br clear="none">
                  <br clear="none">
                  I am using following script to find the dates of 10
                  highest gridpoint rainfall maxima: (actually the list
                  may contain more than one maxima value in a given data
                  (corresponding extereme rainfall occuring in more than
                  one grid on the same data) but I am sorting uniqe
                  dates in excel)<br clear="none">
                  let sorted_i1=sorti(xsequence(pr[X=79:89,Y=26:31]))<br clear="none">
                  let
                  sorted_pr=samplei(xsequence(pr[X=79:89,Y=26:31]),sorted_i1)<br clear="none">
                  let isize=sorted_pr[i=@ngd]<br clear="none">
                  list sorted_pr[i=`isize-9`:`isize`],
                  sorted_i1[i=`isize-9`:`isize`]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ! This would
                  list the 10 highest rainfall and i-values
                  corresponding to those max<br clear="none">
                  I could then find the date (timestep) by dividing
                  those i-values with number of grids in each time step
                  (say 800 for the region above in the dataset) and then
                  adding 1 and ignoring the decimal points from the
                  result i.e.<br clear="none">
                  list (sorted_i1[i=`isize-9`:`isize`]/800)+1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; !
                  would list the time steps of occurance of 10 highest
                  rainfall<br clear="none">
                  <br clear="none">
                  For the problem I mentioned above, one opition I can
                  think of is to intepolate the model output to a
                  coarser grid and then repeat above procedure but I
                  wonder if there is a better alternative.<br clear="none">
                  <br clear="none">
                  Best regards,<br clear="none">
                  <br clear="none">
                  Jagadish<br clear="none">
                </span></div>
            </div>
          </div>
        </div>
      </div>
    </blockquote></div>
    <br clear="none">
  </div></div><br><br></div>  </div> </div>  </div> </div>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00111" href="msg00111.html">[ferret_users] Find dates of 10 highest rainfall in a 3D dataset</a></strong>
<ul><li><em>From:</em> jagadish karmacharya</li></ul></li>
<li><strong><a name="00112" href="msg00112.html">Re: [ferret_users] Find dates of 10 highest rainfall in a 3D dataset</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00112.html">Re: [ferret_users] Find dates of 10 highest rainfall in a 3D dataset</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00115.html">[ferret_users] ferret crash with DEFINE ATT/OUTPUT</a></strong>
</li>

</UL>
<center>[<a href="msg00112.html">Thread Prev</a>][<a href="msg00115.html">Thread Next</a>][<A HREF="threads.html#00114">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
