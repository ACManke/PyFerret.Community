<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Writing output to txt file -->
<!--X-From-R13: Oaqerj Ivggraoret &#45; @AOO Trqreny <naqerj.jvggraoretNabnn.tbi> -->
<!--X-Date: Thu, 7 Aug 2014 15:14:57 &#45;0700 -->
<!--X-Message-Id: CAKoe08QA&#45;H_7M8xtbxgbzZ0vPjcR16KmLh+tWbYFEvdm6WXcfQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAEenqfLXmJ9cvhEKF+_8gqr0hDMTPns6rw8MeJsxF_uciivDeQ@mail.gmail.com -->
<!--X-Reference: 53E3B449.3090903@noaa.gov -->
<!--X-Reference: 0EF59257&#45;87AB&#45;4146&#45;BF0C&#45;B23375D087E9@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Writing output to txt file</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00291.html">Thread Prev</a>][<a href="msg00296.html">Thread Next</a>][<A HREF="threads.html#00293">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Writing output to txt file</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;William S. Kessler&quot; &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Writing output to txt file</strong></li>
<li><strong>From</strong>: <strong>Andrew Wittenberg - NOAA Federal &lt;<a href="mailto:andrew.wittenberg@DOMAIN.HIDDEN">andrew.wittenberg@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 7 Aug 2014 18:14:32 -0400</li>
<li>Cc: Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;,        Ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00291.html">0EF59257-87AB-4146-BF0C-B23375D087E9@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00289.html">CAEenqfLXmJ9cvhEKF+_8gqr0hDMTPns6rw8MeJsxF_uciivDeQ@mail.gmail.com</a>&gt;	&lt;<a href="msg00290.html">53E3B449.3090903@noaa.gov</a>&gt;	&lt;<a href="msg00291.html">0EF59257-87AB-4146-BF0C-B23375D087E9@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Billy,

As a matter of fact, this very feature was added to Ferret in May
2011, in response to requests from us at GFDL.  It's called SET
REDIRECT, and it works like this:

  NOAA/PMEL TMAP
  FERRET v6.725
  Linux 2.6.18-274.12.1.el5 64-bit - 04/10/12
  7-Aug-14 18:03

yes? use coads_climatology
yes? set redirect/tee/journal
yes? show data
     currently SET data sets:
    1&gt; /home/atw/ferret/exe/x86_64/rhel6/ferret-6.72/fer_dsets/data/coads_climatology.cdf
 (default)
 name     title                             I         J         K         L
 SST      SEA SURFACE TEMPERATURE          1:180     1:90      ...       1:12
 AIRT     AIR TEMPERATURE                  1:180     1:90      ...       1:12
 SPEH     SPECIFIC HUMIDITY                1:180     1:90      ...       1:12
 WSPD     WIND SPEED                       1:180     1:90      ...       1:12
 UWND     ZONAL WIND                       1:180     1:90      ...       1:12
 VWND     MERIDIONAL WIND                  1:180     1:90      ...       1:12
 SLP      SEA LEVEL PRESSURE               1:180     1:90      ...       1:12

yes? spawn cat ferret.jnl
 ! NOAA/PMEL TMAP
 ! FERRET v6.725
 ! Linux 2.6.18-274.12.1.el5 64-bit - 04/10/12
 !  7-Aug-14 18:03

use coads_climatology
set redirect/tee/journal
sho dat
!     currently SET data sets:
!    1&gt; /home/atw/ferret/exe/x86_64/rhel6/ferret-6.72/fer_dsets/data/coads_climatology.cdf
 (default)
! name     title                             I         J         K         L
! SST      SEA SURFACE TEMPERATURE          1:180     1:90      ...       1:12
! AIRT     AIR TEMPERATURE                  1:180     1:90      ...       1:12
! SPEH     SPECIFIC HUMIDITY                1:180     1:90      ...       1:12
! WSPD     WIND SPEED                       1:180     1:90      ...       1:12
! UWND     ZONAL WIND                       1:180     1:90      ...       1:12
! VWND     MERIDIONAL WIND                  1:180     1:90      ...       1:12
! SLP      SEA LEVEL PRESSURE               1:180     1:90      ...       1:12
!
sp cat ferret.jnl
yes? cancel redirect


Alternatively you can redirect to an arbitrary text file, so you can
grep and sed and awk to your heart's content using the SPAWN command
or SPAWN() function.  Full documentation of SET REDIRECT is here:

<a  rel="nofollow" href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/SET#_VPINDEXENTRY_SET_REDIRECT">http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/commands-reference/SET#_VPINDEXENTRY_SET_REDIRECT</a>

Andrew

---
Dr. Andrew T. Wittenberg
Physical Scientist (NOAA Federal)
Climate Change, Variability, and Prediction Group
NOAA/Geophysical Fluid Dynamics Laboratory
201 Forrestal Road
Princeton, NJ 08540-6649
USA
<a  rel="nofollow" href="http://www.gfdl.noaa.gov/~atw">http://www.gfdl.noaa.gov/~atw</a>


On Thu, Aug 7, 2014 at 4:21 PM, William S. Kessler
&lt;william.s.kessler@xxxxxxxx&gt; wrote:
&gt; Beyond this, it would be useful to be able to direct certain output to the jnl file as additional documentation.
&gt;
&gt; A cheap workaround is to give the command, then simply copy/paste the resulting text back into Ferret. Ferret will complain on each line (making an ugly screen), but these complaints do not appear in the jnl file. You get quite readable output.
&gt;
&gt; I often search the jnl files for, say, occurrences of &quot;use&quot; so I can tell which files were used to made a certain plot. But if I've brought data in via a script (as usual), that might not tell me what I want to know, or it might require additional searching through perhaps several scripts. I often wish to be able to easily send the output of SHO DAT/BRIEF to the jnl file, for instance, after making a plot. There are lots of other examples. This ability would be a great enhancement.
&gt;
&gt; Billy K
&gt;
&gt; On Aug 7, 2014, at 10:15 , Ansley Manke wrote:
&gt;
&gt;&gt; Hi,
&gt;&gt; STAT is a command that displays its result to standard output. It's not a function, so &quot;LIST STAT varname&quot; is not valid syntax.
&gt;&gt;
&gt;&gt; You can get the information from STAT into variables by using the set of symbols that are automatically defined when you issue the STAT command.
&gt;&gt; yes? stat sst
&gt;&gt;
&gt;&gt;              SEA SURFACE TEMPERATURE
&gt;&gt;              LONGITUDE: 20E to 20E(380)
&gt;&gt;              LATITUDE: 90S to 90N
&gt;&gt;              Z:  N/A
&gt;&gt;              TIME: 01-JAN 00:45 to 31-DEC 06:34
&gt;&gt;              E:  N/A
&gt;&gt;              F:  N/A
&gt;&gt;              DATA SET: /home/users/tmap/ferret/linux/fer_dsets/data/coads_climatology.cdf
&gt;&gt;
&gt;&gt;  Total # of data points: 194400 (180*90*1*12*1*1)
&gt;&gt;  # flagged as bad  data: 89622
&gt;&gt;  Minimum value: -2.6
&gt;&gt;  Maximum value: 33.15
&gt;&gt;  Mean    value: 18.095 (unweighted average)
&gt;&gt;  Standard deviation: 9.4023
&gt;&gt;
&gt;&gt; yes? sh sym stat*
&gt;&gt; STAT_MIN = &quot;-2.6&quot;
&gt;&gt; STAT_MAX = &quot;33.15&quot;
&gt;&gt; STAT_MEAN = &quot;18.095&quot;
&gt;&gt; STAT_STD = &quot;9.4023&quot;
&gt;&gt; STAT_NGOOD = &quot;104778&quot;
&gt;&gt; STAT_NBAD = &quot;89622&quot;
&gt;&gt; so you could write
&gt;&gt;  let varmean = ($stat_mean)
&gt;&gt;  let varstd = ($stat_var)
&gt;&gt;  ...
&gt;&gt; and then list those to your file.  It would be best to add /TITLE= and /UNITS=  to the LET commands so the information is documented.
&gt;&gt;
&gt;&gt; There are also functions and transformations that return the same information; the @AVE, @VAR, @NGD, @NBD, @MIN and @MAX transformations could be used to set up variables containing that information, or this function to return both the min and max.
&gt;&gt;
&gt;&gt; yes? show func minmax
&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; On 8/6/2014 11:06 PM, Nitin Patil wrote:
&gt;&gt;&gt; Dear All,
&gt;&gt;&gt;
&gt;&gt;&gt; My script is as follows:
&gt;&gt;&gt;
&gt;&gt;&gt; let gp1=Optical_Depth_Land_And_Ocean_Mean[d=1,x=73:81@ave,y=30:33@ave,k=1:122]
&gt;&gt;&gt; let gp2=Optical_Depth_Land_And_Ocean_Mean[d=1,x=73:85@ave,y=25:29@ave,k=1:122]
&gt;&gt;&gt; let mean=(gp1+gp2)/2
&gt;&gt;&gt; stat mean
&gt;&gt;&gt; list/file=GP2002.txt stat mean !!! NOT WORKING
&gt;&gt;&gt;
&gt;&gt;&gt; I want to write the stat mean output in a txt file, any idea.
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt; --
&gt;&gt;&gt; Regards,
&gt;&gt;&gt; Nitin Patil
&gt;&gt;
&gt;
&gt;


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00289" href="msg00289.html">[ferret_users] Writing output to txt file</a></strong>
<ul><li><em>From:</em> Nitin Patil</li></ul></li>
<li><strong><a name="00290" href="msg00290.html">Re: [ferret_users] Writing output to txt file</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00291" href="msg00291.html">Re: [ferret_users] Writing output to txt file</a></strong>
<ul><li><em>From:</em> William S. Kessler</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00291.html">Re: [ferret_users] Writing output to txt file</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00296.html">Re: [ferret_users] Writing output to txt file</a></strong>
</li>

</UL>
<center>[<a href="msg00291.html">Thread Prev</a>][<a href="msg00296.html">Thread Next</a>][<A HREF="threads.html#00293">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
