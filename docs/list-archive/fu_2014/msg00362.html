<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Multiplying by days in month -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Thu, 23 Oct 2014 13:34:18 &#45;0700 -->
<!--X-Message-Id: 54496644.90805@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 69555C2E&#45;C6EA&#45;4A37&#45;8892&#45;CFDE6DC141D3@gmail.com -->
<!--X-Reference: 54482B86.4090107@noaa.gov -->
<!--X-Reference: 20DEE5A8&#45;652E&#45;4B71&#45;A315&#45;5C43B97A25DA@gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Multiplying by days in month</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00361.html">Thread Prev</a>][<a href="msg00363.html">Thread Next</a>][<A HREF="threads.html#00362">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Multiplying by days in month</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Sam Rabin &lt;<a href="mailto:samrabibstuff@DOMAIN.HIDDEN">samrabibstuff@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Multiplying by days in month</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 23 Oct 2014 13:34:12 -0700</li>
<li>Cc: &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00361.html">20DEE5A8-652E-4B71-A315-5C43B97A25DA@gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00359.html">69555C2E-C6EA-4A37-8892-CFDE6DC141D3@gmail.com</a>&gt; &lt;<a href="msg00360.html">54482B86.4090107@noaa.gov</a>&gt; &lt;<a href="msg00361.html">20DEE5A8-652E-4B71-A315-5C43B97A25DA@gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:24.0) Gecko/20100101 Thunderbird/24.8.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi,<br>
    Thank you for the update.&#xA0; Using @ASN to put the data onto the grid
    of your variable is fine - so long as there aren't time gaps in the
    data set.<br>
    <br>
    Thinking about it still more, here's a simpler idea.&#xA0; You could use
    the pseudo-variable TBOX to define a variable which is the length of
    each month, and converting it to days.<br>
    <blockquote><tt>yes? let tlen = tbox[gt=ba_rate]</tt><br>
      <br>
      <tt>! Convert to days. A general script should verify that the<br>
        ! time axis starts in January and represents full months.</tt><br>
      <br>
      <tt>yes? let factr = `tbox[L=1]/31.0`&#xA0; </tt><br>
      <br>
      <tt>yes? let month_length = tlen* factr</tt><br>
    </blockquote>
    I haven't tested this, but it should work fine.&#xA0; <br>
    <br>
    -Ansley<br>
    <br>
    <div class="moz-cite-prefix">On 10/22/2014 6:51 PM, Sam Rabin wrote:<br>
    </div>
    <blockquote
      cite=""
      type="cite">
      
      Awesome, thanks! This gets me most of the way there, but I noticed
      a discrepancy. It looks like the result of what you gave me isn&#x2019;t
      exactly the same as if I multiplied each January by 31, each
      February by 28.25, etc. &#x2014; except, for some reason, for every July
      and December, which work perfectly.
      <div><br>
      </div>
      <div>I made a few variations:
        <div><br>
          <div>
            <ul class="MailOutline">
              <li>BA_v1: ba_rate_month as calculated via your procedure</li>
              <li>BA_v2: Used four years&#x2019; worth of days in month so that
                leap year Februaries have 29 days, others with 28. (To
                generalize, I can get fancy with IF clauses and the MOD
                function &#x2014; Y is a leap year if MOD(Y,4) EQ 0.)</li>
              <li>BA_v3: Instead of&#xA0;[gt=ba_rate] on the last line,
                use&#xA0;[gt=ba_rate@asn].</li>
            </ul>
            <div><br>
            </div>
            <div>As you can see in the results printed below my
              signature, BA_v3 works correctly.</div>
          </div>
          <div><br>
          </div>
          <div>Thanks for your help!</div>
          <div><br>
          </div>
          <div><span class="Apple-tab-span" style="white-space:pre"> </span>Sam</div>
          <div><br>
          </div>
          <div><br>
          </div>
          <div><br>
          </div>
          <div><font face="Courier"><span style="font-size: 12px;">yes?
                list/prec=7 ba_rate[i=@sum,j=@sum,l=1:48],
                BA_v1[i=@sum,j=@sum,l=1:48],&#xA0;BA_v2[i=@sum,j=@sum,l=1:48],
                BA_v3[i=@sum,j=@sum,l=1:48]<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;DATA SET:
                ./land_month_meanFxAvgProper_1_1501-1723_BArate.nc<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;TIME: 01-JAN-1501 00:00 to 01-JAN-1505
                00:00 JULIAN<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LONGITUDE: 0E to 0E(360) (XY summed)<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE: 90S to 90N (XY summed)<br>
                &#xA0;Column&#xA0;&#xA0;1: BA_RATE is Burned area (km2/day)<br>
                &#xA0;Column&#xA0;&#xA0;2: BA_V1 is BA_RATE *
                DAYS_IN_MONTHS[GT=BA_RATE]<br>
                &#xA0;Column&#xA0;&#xA0;3: BA_V2 is BA_RATE *
                DAYS_IN_MONTHS2[GT=BA_RATE]<br>
                &#xA0;Column&#xA0;&#xA0;4: BA_V3 is BA_RATE *
                DAYS_IN_MONTHS2[GT=BA_RATE@ASN]<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;BA_RATE&#xA0; &#xA0;&#xA0;BA_V1&#xA0;&#xA0; &#xA0;&#xA0;BA_V2&#xA0;&#xA0;
                &#xA0;&#xA0;BA_V3<br>
                16-JAN-1501 12 /&#xA0;&#xA0;1:&#xA0;&#xA0; &#xA0;&#xA0;80.44&#xA0;&#xA0; &#xA0;&#xA0;2488.&#xA0;&#xA0; &#xA0;&#xA0;2486.&#xA0;&#xA0;
                &#xA0;&#xA0;2494.<br>
                15-FEB-1501 00 /&#xA0;&#xA0;2:&#xA0;&#xA0;&#xA0;2338.79&#xA0; &#xA0;&#xA0;66202.&#xA0; &#xA0;&#xA0;65719.&#xA0;
                &#xA0;&#xA0;65486.<br>
                16-MAR-1501 12
                /&#xA0;&#xA0;3:&#xA0;&#xA0;&#xA0;9201.38&#xA0;&#xA0;&#xA0;285098.&#xA0;&#xA0;&#xA0;284947.&#xA0;&#xA0;&#xA0;285243.<br>
                16-APR-1501 00
                /&#xA0;&#xA0;4:&#xA0;&#xA0;13499.57&#xA0;&#xA0;&#xA0;405199.&#xA0;&#xA0;&#xA0;405420.&#xA0;&#xA0;&#xA0;404987.<br>
                16-MAY-1501 12
                /&#xA0;&#xA0;5:&#xA0;&#xA0;14870.32&#xA0;&#xA0;&#xA0;460746.&#xA0;&#xA0;&#xA0;460503.&#xA0;&#xA0;&#xA0;460980.<br>
                16-JUN-1501 00
                /&#xA0;&#xA0;6:&#xA0;&#xA0;16933.16&#xA0;&#xA0;&#xA0;508261.&#xA0;&#xA0;&#xA0;508538.&#xA0;&#xA0;&#xA0;507995.<br>
                16-JUL-1501 12
                /&#xA0;&#xA0;7:&#xA0;&#xA0;21494.46&#xA0;&#xA0;&#xA0;666328.&#xA0;&#xA0;&#xA0;666328.&#xA0;&#xA0;&#xA0;666328.<br>
                16-AUG-1501 12
                /&#xA0;&#xA0;8:&#xA0;&#xA0;27994.54&#xA0;&#xA0;&#xA0;867391.&#xA0;&#xA0;&#xA0;866932.&#xA0;&#xA0;&#xA0;867831.<br>
                16-SEP-1501 00
                /&#xA0;&#xA0;9:&#xA0;&#xA0;33873.29&#xA0;&#xA0;1016731.&#xA0;&#xA0;1017286.&#xA0;&#xA0;1016199.<br>
                16-OCT-1501 12 /
                10:&#xA0;&#xA0;25794.03&#xA0;&#xA0;&#xA0;799209.&#xA0;&#xA0;&#xA0;798787.&#xA0;&#xA0;&#xA0;799615.<br>
                16-NOV-1501 00 /
                11:&#xA0;&#xA0;21719.95&#xA0;&#xA0;&#xA0;651940.&#xA0;&#xA0;&#xA0;652296.&#xA0;&#xA0;&#xA0;651599.<br>
                16-DEC-1501 12 /
                12:&#xA0;&#xA0;20904.34&#xA0;&#xA0;&#xA0;648035.&#xA0;&#xA0;&#xA0;648035.&#xA0;&#xA0;&#xA0;648035.<br>
                16-JAN-1502 12 /
                13:&#xA0;&#xA0;22102.71&#xA0;&#xA0;&#xA0;684201.&#xA0;&#xA0;&#xA0;682983.&#xA0;&#xA0;&#xA0;685184.<br>
                15-FEB-1502 00 /
                14:&#xA0;&#xA0;22847.21&#xA0;&#xA0;&#xA0;646185.&#xA0;&#xA0;&#xA0;641997.&#xA0;&#xA0;&#xA0;639722.<br>
                16-MAR-1502 12 /
                15:&#xA0;&#xA0;22879.40&#xA0;&#xA0;&#xA0;709089.&#xA0;&#xA0;&#xA0;708527.&#xA0;&#xA0;&#xA0;709261.<br>
                16-APR-1502 00 /
                16:&#xA0;&#xA0;22050.57&#xA0;&#xA0;&#xA0;661683.&#xA0;&#xA0;&#xA0;662225.&#xA0;&#xA0;&#xA0;661517.<br>
                16-MAY-1502 12 /
                17:&#xA0;&#xA0;21413.66&#xA0;&#xA0;&#xA0;663662.&#xA0;&#xA0;&#xA0;663136.&#xA0;&#xA0;&#xA0;663823.<br>
                16-JUN-1502 00 /
                18:&#xA0;&#xA0;18749.40&#xA0;&#xA0;&#xA0;562623.&#xA0;&#xA0;&#xA0;563084.&#xA0;&#xA0;&#xA0;562482.<br>
                16-JUL-1502 12 /
                19:&#xA0;&#xA0;23282.84&#xA0;&#xA0;&#xA0;721768.&#xA0;&#xA0;&#xA0;721768.&#xA0;&#xA0;&#xA0;721768.<br>
                16-AUG-1502 12 /
                20:&#xA0;&#xA0;31219.10&#xA0;&#xA0;&#xA0;967558.&#xA0;&#xA0;&#xA0;966790.&#xA0;&#xA0;&#xA0;967792.<br>
                16-SEP-1502 00 /
                21:&#xA0;&#xA0;32838.06&#xA0;&#xA0;&#xA0;985389.&#xA0;&#xA0;&#xA0;986196.&#xA0;&#xA0;&#xA0;985142.<br>
                16-OCT-1502 12 /
                22:&#xA0;&#xA0;29327.18&#xA0;&#xA0;&#xA0;908922.&#xA0;&#xA0;&#xA0;908201.&#xA0;&#xA0;&#xA0;909143.<br>
                16-NOV-1502 00 /
                23:&#xA0;&#xA0;18861.25&#xA0;&#xA0;&#xA0;565979.&#xA0;&#xA0;&#xA0;566443.&#xA0;&#xA0;&#xA0;565837.<br>
                16-DEC-1502 12 /
                24:&#xA0;&#xA0;24675.93&#xA0;&#xA0;&#xA0;764954.&#xA0;&#xA0;&#xA0;764954.&#xA0;&#xA0;&#xA0;764954.<br>
                16-JAN-1503 12 /
                25:&#xA0;&#xA0;24545.29&#xA0;&#xA0;&#xA0;760382.&#xA0;&#xA0;&#xA0;759302.&#xA0;&#xA0;&#xA0;760904.<br>
                15-FEB-1503 00 /
                26:&#xA0;&#xA0;23400.15&#xA0;&#xA0;&#xA0;661281.&#xA0;&#xA0;&#xA0;679352.&#xA0;&#xA0;&#xA0;655204.<br>
                16-MAR-1503 12 /
                27:&#xA0;&#xA0;24048.15&#xA0;&#xA0;&#xA0;745493.&#xA0;&#xA0;&#xA0;745493.&#xA0;&#xA0;&#xA0;745493.<br>
                16-APR-1503 00 /
                28:&#xA0;&#xA0;25808.78&#xA0;&#xA0;&#xA0;774263.&#xA0;&#xA0;&#xA0;774263.&#xA0;&#xA0;&#xA0;774263.<br>
                16-MAY-1503 12 /
                29:&#xA0;&#xA0;19201.62&#xA0;&#xA0;&#xA0;595250.&#xA0;&#xA0;&#xA0;595250.&#xA0;&#xA0;&#xA0;595250.<br>
                16-JUN-1503 00 /
                30:&#xA0;&#xA0;17855.02&#xA0;&#xA0;&#xA0;535651.&#xA0;&#xA0;&#xA0;535651.&#xA0;&#xA0;&#xA0;535651.<br>
                16-JUL-1503 12 /
                31:&#xA0;&#xA0;16090.21&#xA0;&#xA0;&#xA0;498797.&#xA0;&#xA0;&#xA0;498797.&#xA0;&#xA0;&#xA0;498797.<br>
                16-AUG-1503 12 /
                32:&#xA0;&#xA0;21976.96&#xA0;&#xA0;&#xA0;681286.&#xA0;&#xA0;&#xA0;681286.&#xA0;&#xA0;&#xA0;681286.<br>
                16-SEP-1503 00 /
                33:&#xA0;&#xA0;27334.76&#xA0;&#xA0;&#xA0;820043.&#xA0;&#xA0;&#xA0;820043.&#xA0;&#xA0;&#xA0;820043.<br>
                16-OCT-1503 12 /
                34:&#xA0;&#xA0;28825.21&#xA0;&#xA0;&#xA0;893581.&#xA0;&#xA0;&#xA0;893581.&#xA0;&#xA0;&#xA0;893581.<br>
                16-NOV-1503 00 /
                35:&#xA0;&#xA0;30561.32&#xA0;&#xA0;&#xA0;916840.&#xA0;&#xA0;&#xA0;916840.&#xA0;&#xA0;&#xA0;916840.<br>
                16-DEC-1503 12 /
                36:&#xA0;&#xA0;28564.04&#xA0;&#xA0;&#xA0;885485.&#xA0;&#xA0;&#xA0;885485.&#xA0;&#xA0;&#xA0;885485.<br>
                16-JAN-1504 12 /
                37:&#xA0;&#xA0;25712.30&#xA0;&#xA0;&#xA0;797081.&#xA0;&#xA0;&#xA0;797081.&#xA0;&#xA0;&#xA0;797081.<br>
                15-FEB-1504 12 /
                38:&#xA0;&#xA0;25385.38&#xA0;&#xA0;&#xA0;717972.&#xA0;&#xA0;&#xA0;712028.&#xA0;&#xA0;&#xA0;736176.<br>
                16-MAR-1504 12 /
                39:&#xA0;&#xA0;24186.73&#xA0;&#xA0;&#xA0;749210.&#xA0;&#xA0;&#xA0;749012.&#xA0;&#xA0;&#xA0;749789.<br>
                16-APR-1504 00 /
                40:&#xA0;&#xA0;22441.96&#xA0;&#xA0;&#xA0;673796.&#xA0;&#xA0;&#xA0;673980.&#xA0;&#xA0;&#xA0;673259.<br>
                16-MAY-1504 12 /
                41:&#xA0;&#xA0;19744.92&#xA0;&#xA0;&#xA0;611620.&#xA0;&#xA0;&#xA0;611458.&#xA0;&#xA0;&#xA0;612092.<br>
                16-JUN-1504 00 /
                42:&#xA0;&#xA0;16672.43&#xA0;&#xA0;&#xA0;500572.&#xA0;&#xA0;&#xA0;500708.&#xA0;&#xA0;&#xA0;500173.<br>
                16-JUL-1504 12 /
                43:&#xA0;&#xA0;15625.86&#xA0;&#xA0;&#xA0;484402.&#xA0;&#xA0;&#xA0;484402.&#xA0;&#xA0;&#xA0;484402.<br>
                16-AUG-1504 12 /
                44:&#xA0;&#xA0;20372.97&#xA0;&#xA0;&#xA0;631075.&#xA0;&#xA0;&#xA0;630908.&#xA0;&#xA0;&#xA0;631562.<br>
                16-SEP-1504 00 /
                45:&#xA0;&#xA0;26970.94&#xA0;&#xA0;&#xA0;809773.&#xA0;&#xA0;&#xA0;809994.&#xA0;&#xA0;&#xA0;809128.<br>
                16-OCT-1504 12 /
                46:&#xA0;&#xA0;28341.75&#xA0;&#xA0;&#xA0;877916.&#xA0;&#xA0;&#xA0;877684.&#xA0;&#xA0;&#xA0;878594.<br>
                16-NOV-1504 00 /
                47:&#xA0;&#xA0;27011.61&#xA0;&#xA0;&#xA0;810994.&#xA0;&#xA0;&#xA0;811216.&#xA0;&#xA0;&#xA0;810348.<br>
                16-DEC-1504 12 /
                48:&#xA0;&#xA0;26251.07&#xA0;&#xA0;&#xA0;813783.&#xA0;&#xA0;&#xA0;813783.&#xA0;&#xA0;&#xA0;813783.<br>
                yes? list
BA_v1[i=@sum,j=@sum,l=1:48]/ba_rate[i=@sum,j=@sum,l=1:48],&#xA0;BA_v2[i=@sum,j=@sum,l=1:48]/ba_rate[i=@sum,j=@sum,l=1:48],&#xA0;BA_v3[i=@sum,j=@sum,l=1:48]/ba_rate[i=@sum,j=@sum,l=1:48]<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;DATA SET:
                ./land_month_meanFxAvgProper_1_1501-1723_BArate.nc<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;TIME: 01-JAN-1501 00:00 to 01-JAN-1505
                00:00 JULIAN<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LONGITUDE: 0E to 0E(360)<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE: 90S to 90N<br>
                &#xA0;Column&#xA0;&#xA0;1: EX#1 is
                BA_V1[I=@SUM,J=@SUM,L=1:48]/BA_RATE[I=@SUM,J=@SUM,L=1:48]<br>
                &#xA0;Column&#xA0;&#xA0;2: EX#2 is
                BA_V2[I=@SUM,J=@SUM,L=1:48]/BA_RATE[I=@SUM,J=@SUM,L=1:48]<br>
                &#xA0;Column&#xA0;&#xA0;3: EX#3 is
                BA_V3[I=@SUM,J=@SUM,L=1:48]/BA_RATE[I=@SUM,J=@SUM,L=1:48]<br>
                &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;EX#1&#xA0;&#xA0;&#xA0;EX#2&#xA0;&#xA0;&#xA0;EX#3<br>
                16-JAN-1501 12 /&#xA0;&#xA0;1:&#xA0;&#xA0;30.93&#xA0;&#xA0;30.90&#xA0;&#xA0;31.00<br>
                15-FEB-1501 00 /&#xA0;&#xA0;2:&#xA0;&#xA0;28.31&#xA0;&#xA0;28.10&#xA0;&#xA0;28.00<br>
                16-MAR-1501 12 /&#xA0;&#xA0;3:&#xA0;&#xA0;30.98&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-APR-1501 00 /&#xA0;&#xA0;4:&#xA0;&#xA0;30.02&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-MAY-1501 12 /&#xA0;&#xA0;5:&#xA0;&#xA0;30.98&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-JUN-1501 00 /&#xA0;&#xA0;6:&#xA0;&#xA0;30.02&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-JUL-1501 12 /&#xA0;&#xA0;7:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-AUG-1501 12 /&#xA0;&#xA0;8:&#xA0;&#xA0;30.98&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-SEP-1501 00 /&#xA0;&#xA0;9:&#xA0;&#xA0;30.02&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-OCT-1501 12 / 10:&#xA0;&#xA0;30.98&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-NOV-1501 00 / 11:&#xA0;&#xA0;30.02&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-DEC-1501 12 / 12:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-JAN-1502 12 / 13:&#xA0;&#xA0;30.96&#xA0;&#xA0;30.90&#xA0;&#xA0;31.00<br>
                15-FEB-1502 00 / 14:&#xA0;&#xA0;28.28&#xA0;&#xA0;28.10&#xA0;&#xA0;28.00<br>
                16-MAR-1502 12 / 15:&#xA0;&#xA0;30.99&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-APR-1502 00 / 16:&#xA0;&#xA0;30.01&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-MAY-1502 12 / 17:&#xA0;&#xA0;30.99&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-JUN-1502 00 / 18:&#xA0;&#xA0;30.01&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-JUL-1502 12 / 19:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-AUG-1502 12 / 20:&#xA0;&#xA0;30.99&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-SEP-1502 00 / 21:&#xA0;&#xA0;30.01&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-OCT-1502 12 / 22:&#xA0;&#xA0;30.99&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-NOV-1502 00 / 23:&#xA0;&#xA0;30.01&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-DEC-1502 12 / 24:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-JAN-1503 12 / 25:&#xA0;&#xA0;30.98&#xA0;&#xA0;30.93&#xA0;&#xA0;31.00<br>
                15-FEB-1503 00 / 26:&#xA0;&#xA0;28.26&#xA0;&#xA0;29.03&#xA0;&#xA0;28.00<br>
                16-MAR-1503 12 / 27:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-APR-1503 00 / 28:&#xA0;&#xA0;30.00&#xA0;&#xA0;30.00&#xA0;&#xA0;30.00<br>
                16-MAY-1503 12 / 29:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-JUN-1503 00 / 30:&#xA0;&#xA0;30.00&#xA0;&#xA0;30.00&#xA0;&#xA0;30.00<br>
                16-JUL-1503 12 / 31:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-AUG-1503 12 / 32:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-SEP-1503 00 / 33:&#xA0;&#xA0;30.00&#xA0;&#xA0;30.00&#xA0;&#xA0;30.00<br>
                16-OCT-1503 12 / 34:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-NOV-1503 00 / 35:&#xA0;&#xA0;30.00&#xA0;&#xA0;30.00&#xA0;&#xA0;30.00<br>
                16-DEC-1503 12 / 36:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-JAN-1504 12 / 37:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                15-FEB-1504 12 / 38:&#xA0;&#xA0;28.28&#xA0;&#xA0;28.05&#xA0;&#xA0;29.00<br>
                16-MAR-1504 12 / 39:&#xA0;&#xA0;30.98&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-APR-1504 00 / 40:&#xA0;&#xA0;30.02&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-MAY-1504 12 / 41:&#xA0;&#xA0;30.98&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-JUN-1504 00 / 42:&#xA0;&#xA0;30.02&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-JUL-1504 12 / 43:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00<br>
                16-AUG-1504 12 / 44:&#xA0;&#xA0;30.98&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-SEP-1504 00 / 45:&#xA0;&#xA0;30.02&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-OCT-1504 12 / 46:&#xA0;&#xA0;30.98&#xA0;&#xA0;30.97&#xA0;&#xA0;31.00<br>
                16-NOV-1504 00 / 47:&#xA0;&#xA0;30.02&#xA0;&#xA0;30.03&#xA0;&#xA0;30.00<br>
                16-DEC-1504 12 / 48:&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00&#xA0;&#xA0;31.00</span></font></div>
          <div><br>
          </div>
          <div><br>
          </div>
          <div><br>
            <div>
              <div>On Oct 22, 2014, at 6:11 PM, Ansley Manke &lt;<a rel="nofollow"
                  moz-do-not-send="true"
                  href="mailto:ansley.b.manke@xxxxxxxx">ansley.b.manke@xxxxxxxx</a>&gt;
                wrote:</div>
              <br class="Apple-interchange-newline">
              <blockquote type="cite">
                
                <div text="#000000" bgcolor="#FFFFFF"> Hi Sam,<br>
                  The Julian axis makes it a bit tricky.&#xA0; If you don't
                  mind treating all the February's as having length
                  28.25, the average length in a Julian calendar, then
                  here's a method:<br>
                  <br>
                  ! Define a variables with the number of days per month<br>
                  <blockquote><tt>yes? let days =
                      tsequence({31,28.25,31,30,31,30,31,31,30,31,30,31})</tt><br>
                  </blockquote>
                  ! Define a monthly modulo axis, using the /EDGES
                  qualifier, and the running sum of days per <br>
                  ! month, starting with zero at the beginning of
                  January.&#xA0; I've referenced this to year <br>
                  ! 0000, but you could have the time origin in January
                  of any year.<br>
                  <blockquote><tt>yes? let edges_days =
                      tsequence({0,31,28.25,31,30,31,30,31,31,30,31,30,31})</tt><br>
                    <tt>yes? define
                      axis/modulo/EDGES/calendar=julian/t0="1-jan-0000:00:00"/units=days
                      \<br>
                      &#xA0;monthly_julian = edges_days[l=@iin]</tt><br>
                    <br>
                    <tt>yes? list/prec=6 t[gt=monthly_julian]<br>
                      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : T<br>
                      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; axis MONTHLY_JULIAN<br>
                      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; SUBSET&#xA0;&#xA0; : 12 points (TIME)<br>
                      &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; CALENDAR : JULIAN<br>
                      &#xA0;16-JAN-1501 12 /&#xA0; 1:&#xA0;&#xA0; 15.500<br>
                      &#xA0;15-FEB-1501 03 /&#xA0; 2:&#xA0;&#xA0; 45.125<br>
                      &#xA0;16-MAR-1501 18 /&#xA0; 3:&#xA0;&#xA0; 74.750<br>
                      &#xA0;16-APR-1501 06 /&#xA0; 4:&#xA0; 105.250<br>
                      &#xA0;16-MAY-1501 18 /&#xA0; 5:&#xA0; 135.750<br>
                      &#xA0;16-JUN-1501 06 /&#xA0; 6:&#xA0; 166.250<br>
                      &#xA0;16-JUL-1501 18 /&#xA0; 7:&#xA0; 196.750<br>
                      &#xA0;16-AUG-1501 18 /&#xA0; 8:&#xA0; 227.750<br>
                      &#xA0;16-SEP-1501 06 /&#xA0; 9:&#xA0; 258.250<br>
                      &#xA0;16-OCT-1501 18 / 10:&#xA0; 288.750<br>
                      &#xA0;16-NOV-1501 06 / 11:&#xA0; 319.250<br>
                      &#xA0;16-DEC-1501 18 / 12:&#xA0; 349.750</tt><tt><br>
                      <br>
                      yes? let days_in_months =&#xA0; </tt><tt>days[gt=monthly_julian@asn]</tt><tt><br>
                    </tt><tt><br>
                    </tt><tt>yes? ! try this to check the time axis:<br>
                      yes? ! </tt><tt>list/t=1-jan-1501:31-dec-1624 </tt><tt>days_in_months</tt></blockquote>
                  ! Now this variable is on a monthly Julian axis that
                  should be compatible with your time axis.<br>
                  <blockquote><tt>yes? let ba_rate_month = ba_rate*
                      days_in_months[gt=ba_rate]</tt><br>
                  </blockquote>
                  <br>
                  <br>
                  <br>
                  <div class="moz-cite-prefix">On 10/22/2014 6:56 AM,
                    Sam Rabin wrote:<br>
                  </div>
                  <blockquote
                    cite=""
                    type="cite">
                    
                    Ferret gurus &#x2014;
                    <div><br>
                    </div>
                    <div>I have a NetCDF dataset that shows, for each
                      month, the mean daily burned area in each grid
                      cell. I want to convert these daily rates to
                      monthly values, which requires multiplying them by
                      the number of days in each month. As a kludge,
                      I&#x2019;ve just been multiplying the entire dataset by
                      365.25/12, but I&#x2019;d like to do it properly. That
                      is, I want to multiply the values for each January
                      by 31, each February by 28 (29 in leap years!),
                      etc.</div>
                    <div><br>
                    </div>
                    <div>I will need to do this regularly in the future,
                      so any advice pertinent to making an external
                      function and/or .jnl script would be much
                      appreciated. Please note that the length of the
                      time axis can differ wildly between instances, so
                      I&#x2019;d need something general. (Although if it helps,
                      the time axis will almost always be a multiple of
                      12 months starting in January.)</div>
                    <div><br>
                    </div>
                    <div>If it helps, info on the variable (BA_RATE) can
                      be found after my signature.</div>
                    <div><br>
                    </div>
                    <div>Thanks in advance!</div>
                    <div><br>
                    </div>
                    <div><span class="Apple-tab-span"
                        style="white-space:pre"> </span>Sam</div>
                    <div><br>
                    </div>
                    <div><br>
                    </div>
                    <div><br>
                    </div>
                    <div><br>
                    </div>
                    <div><br>
                    </div>
                    <div><font face="Courier"><span style="font-size:
                          12px;">yes? show grid BA_RATE<br>
                          &#xA0; &#xA0;&#xA0;GRID GKY2<br>
                          &#xA0;name&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;axis&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;# pts&#xA0;&#xA0;&#xA0;start&#xA0; &#xA0;
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;end<br>
                          &#xA0;LON&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;LONGITUDE&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;144mr&#xA0;&#xA0;&#xA0;1.25E&#xA0; &#xA0;
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;1.25W<br>
                          &#xA0;LAT&#xA0;&#xA0; &#xA0; &#xA0;&#xA0;LATITUDE&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;90 i&#xA0;&#xA0;&#xA0;89.494S&#xA0;
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;89.494N<br>
                          &#xA0;normal&#xA0; &#xA0;&#xA0;Z<br>
                          &#xA0;TIME&#xA0; &#xA0; &#xA0;&#xA0;TIME&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;1488
                          i&#xA0;&#xA0;&#xA0;16-JAN-1501 12:00&#xA0; &#xA0;&#xA0;16-DEC-1624 12:00<br>
                          yes? list BA_RATE[i=@sum,j=@sum,l=1:5]<br>
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;VARIABLE : Burned area (km2/day)<br>
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;DATA SET :
                          SSR_force30_luN_esm2mb-FIREunpacked_meanFx_avgProper<br>
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;FILENAME :
                          land_month_meanFxAvgProper_1_1501-1624.nc<br>
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;SUBSET&#xA0;&#xA0;&#xA0;: 5 points (TIME)<br>
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;CALENDAR : JULIAN<br>
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LONGITUDE: 0E to 0E(360) (XY
                          summed)<br>
                          &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;LATITUDE : 90S to 90N (XY summed)<br>
                          &#xA0;16-JAN-1501 12 / 1:&#xA0;&#xA0; &#xA0;&#xA0;80.<br>
                          &#xA0;15-FEB-1501 00 / 2:&#xA0;&#xA0;&#xA0;2339.<br>
                          &#xA0;16-MAR-1501 12 / 3:&#xA0;&#xA0;&#xA0;9201.<br>
                          &#xA0;16-APR-1501 00 / 4:&#xA0;&#xA0;13500.<br>
                          &#xA0;16-MAY-1501 12 / 5:&#xA0;&#xA0;14870.</span></font></div>
                    <div><br>
                    </div>
                  </blockquote>
                  <br>
                </div>
              </blockquote>
            </div>
            <br>
          </div>
        </div>
      </div>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00359" href="msg00359.html">[ferret_users] Multiplying by days in month</a></strong>
<ul><li><em>From:</em> Sam Rabin</li></ul></li>
<li><strong><a name="00360" href="msg00360.html">Re: [ferret_users] Multiplying by days in month</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00361" href="msg00361.html">Re: [ferret_users] Multiplying by days in month</a></strong>
<ul><li><em>From:</em> Sam Rabin</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00361.html">Re: [ferret_users] Multiplying by days in month</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00363.html">[ferret_users] appending along z axis</a></strong>
</li>

</UL>
<center>[<a href="msg00361.html">Thread Prev</a>][<a href="msg00363.html">Thread Next</a>][<A HREF="threads.html#00362">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
