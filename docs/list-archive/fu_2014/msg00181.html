<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] event statistics &#45;&#45; length of contiguous "spell" -->
<!--X-From-R13: Dhff Tvrqyre <ehffryy.svrqyreNpfveb.nh> -->
<!--X-Date: Wed, 14 May 2014 16:59:19 &#45;0700 -->
<!--X-Message-Id: 53740349.6060508@csiro.au -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 1400026765.5460.YahooMailNeo@web141604.mail.bf1.yahoo.com -->
<!--X-Reference: 53739215.9090704@noaa.gov -->
<!--X-Reference: 53739AB1.3040607@noaa.gov -->
<!--X-Reference: 1400095371.78181.YahooMailNeo@web141605.mail.bf1.yahoo.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] event statistics -- length of contiguous &quot;spell&quot;</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00180.html">Thread Prev</a>][<a href="msg00182.html">Thread Next</a>][<A HREF="threads.html#00181">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] event statistics -- length of contiguous &quot;spell&quot;</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] event statistics -- length of contiguous &quot;spell&quot;</strong></li>
<li><strong>From</strong>: <strong>Russ Fiedler &lt;<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 15 May 2014 09:59:05 +1000</li>
<li>In-reply-to: &lt;<a href="msg00180.html">1400095371.78181.YahooMailNeo@web141605.mail.bf1.yahoo.com</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00176.html">1400026765.5460.YahooMailNeo@web141604.mail.bf1.yahoo.com</a>&gt; &lt;<a href="msg00178.html">53739215.9090704@noaa.gov</a>&gt; &lt;<a href="msg00179.html">53739AB1.3040607@noaa.gov</a>&gt; &lt;<a href="msg00180.html">1400095371.78181.YahooMailNeo@web141605.mail.bf1.yahoo.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:24.0) Gecko/20100101 Thunderbird/24.5.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <div class="moz-cite-prefix">Hi Jagadish,<br>
      <br>
      I think you also need to consider the case when the first entry of
      your time series is 1 (i.e. coincides with the start of a spell).
      In that case your solution (2) would not catch the first event and
      even numbers would correspond to wet spells rather than dry.<br>
      <br>
      You could either pad the series at the start with a dry day or
      maybe add one if necessary using the first value in your range of
      interest.<br>
      <br>
      Something like<br>
      <br>
      def sym first_day 183&nbsp; ! this is a wet day in your series below<br>
      let&nbsp; &nbsp; ID_GOOD = VAR1[<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:L=@EVNT:0.999">L=@EVNT:0.999</a>] + `VAR1[l=(first_day)]`<br>
      <br>
      list/l=($first_day):285 ...<br>
      <br>
      <br>
      To get the number of days in a spell you could spread the results
      along a new axis and then count the number of good values.<br>
      <br>
      def axis/x=1:`id_good[l=@max]`:1 xax<br>
      let id_good_2d = if id_good eq i then id_good + 0*i[gx=xax] ! Put
      spell "i" on its own axis.<br>
      <br>
      shade id_good_2d&nbsp; ! we can see each spell wet or dry. This can be
      masked using mod(var,2) eq 0 or 1<br>
      <br>
      let length_of_spell = id_good_2d[l=@ngd]<br>
      <br>
      plot/title="Spell length"&nbsp;&nbsp; length_of_spell<br>
      <br>
      plot/title="Wet spell length"/sym&nbsp; if mod(id_good,2) eq 1 then
      length_of_spell<br>
      <br>
      The stats should be easy after this.<br>
      <br>
      Cheers,<br>
      Russ<br>
      <br>
      On 15/05/14 05:22, 'jagadish karmacharya' via _OAR PMEL Ferret
      Users wrote:<br>
    </div>
    <blockquote
      cite=""
      type="cite">
      
      <div style="color:#000; background-color:#fff;
        font-family:HelveticaNeue, Helvetica Neue, Helvetica, Arial,
        Lucida Grande, sans-serif;font-size:10pt">
        <div id="yiv8297687257">
          <div>
            <div
              style="color:#000;background-color:#fff;font-family:HelveticaNeue,
              Helvetica Neue, Helvetica, Arial, Lucida Grande,
              sans-serif;font-size:10pt;">
              <div class="yiv8297687257" id="yiv8297687257" style="">
                <div class="yiv8297687257"
                  id="yiv8297687257yui_3_16_0_1_1399912292838_106824"
                  style="">
                  <div class="yiv8297687257"
                    id="yiv8297687257yui_3_16_0_1_1399912292838_106823"
                    style="color:#000;background-color:#fff;font-family:HelveticaNeue,
                    Helvetica Neue, Helvetica, Arial, Lucida Grande,
                    sans-serif;font-size:10pt;">
                    <div class="yiv8297687257"
                      id="yiv8297687257yui_3_16_0_11_1399912292838_15"
                      style=""><span class="yiv8297687257"
                        id="yiv8297687257yui_3_16_0_11_1399912292838_25"
                        style="">Dear steve and Hein,<br style=""
                          clear="none">
                        <br class="yiv8297687257" style="" clear="none">
                        Thanks for quickly sharing your thoughts.<br
                          class="yiv8297687257" style="" clear="none">
                        <br class="yiv8297687257" style="" clear="none">
                        I have not really gone though all the details
                        you suggestioned but I am glad to report that I
                        have found a solution (in fact 2 different
                        solutions).<br class="yiv8297687257" style=""
                          clear="none">
                        <br class="yiv8297687257" style="" clear="none">
                        First a clearification - What I mean by the
                        spells was: active and break spell has been
                        defined as days when rainfall is above or below
                        a certain threshold provided it last for atleast
                        3 consequtive days. Previous taking help from
                        the ferret forum I was able implement the
                        criteria such that the result timeseries has
                        value = 1 for active spell (also for break spell
                        but in seperate variable) and missing for other
                        period. That has worked fine as I was then only
                        interested in the total duration of such spell
                        and other composite analysis using those. So my
                        original data and variables looks like
                        following:<br class="yiv8297687257" style=""
                          clear="none">
                      </span><br class="yiv8297687257" style=""
                        clear="none">
                      <span class="yiv8297687257"
                        id="yiv8297687257yui_3_16_0_11_1399912292838_25"
                        style="">yes? sh d<br class="yiv8297687257"
                          style="" clear="none">
                        &nbsp;&nbsp;&nbsp;&nbsp; currently SET data sets:<br
                          class="yiv8297687257" style="" clear="none">
                        &nbsp;&nbsp;&nbsp; 1&gt;
                        ../results/12kmRuns/IMD_active_break_JJASonly.90_05.nc&nbsp;
                        (default)<br class="yiv8297687257" style=""
                          clear="none">
                        &nbsp;name&nbsp;&nbsp;&nbsp;&nbsp; title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        I&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; J&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; K&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; L&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        M&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; N<br class="yiv8297687257" style=""
                          clear="none">
                        &nbsp;ATV_JA&nbsp;&nbsp; ATV&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:5844&nbsp;&nbsp;&nbsp;
                        ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br class="yiv8297687257" style=""
                          clear="none">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (X=66.3E:98.8E, Y=6.3N:38.8N)<br
                          class="yiv8297687257" style="" clear="none">
                        &nbsp;BRK_JA&nbsp;&nbsp; BRK&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:5844&nbsp;&nbsp;&nbsp;
                        ...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br class="yiv8297687257" style=""
                          clear="none">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (X=66.3E:98.8E, Y=6.3N:38.8N)<br
                          class="yiv8297687257" style="" clear="none">
                        <br class="yiv8297687257" style="" clear="none">
                        yes? list atv_ja[l=@ngd],brk_ja[l=@ngd]<br
                          class="yiv8297687257" style="" clear="none">
                      </span><span class="yiv8297687257"
                        id="yiv8297687257yui_3_16_0_11_1399912292838_25"
                        style="">(deleted lines)<br clear="none">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ATV_JA&nbsp; BRK_JA<br class="yiv8297687257"
                          style="" clear="none">
                        I / *:&nbsp;&nbsp;&nbsp;&nbsp; 108.0&nbsp; 125.0<br class="yiv8297687257"
                          style="" clear="none">
                        <br class="yiv8297687257" style="" clear="none">
                        Solution 1)<br class="yiv8297687257" style=""
                          clear="none">
                        Hein email's yesterday indicating it would be
                        difficult to implement (what I have request for)
                        in ferret prompted me to seek other options
                        which lead to 1st solution in which I avoided
                        the proble mby creating new files for active
                        (and break) period wherein values &gt; 1 during
                        active period and zero for the rest. Next I
                        used: <br class="yiv8297687257" style=""
                          clear="none">
                        let ID_atv=atv[l=@evnt:1] <br
                          class="yiv8297687257" style="" clear="none">
                      </span></div>
                    <div class="yiv8297687257"
                      id="yiv8297687257yui_3_16_0_11_1399912292838_19"
                      style="">to "tag" the events where successive odd
                      id's corresponds to succesive active spells (&amp;
                      succesive even id's corresponds to succesive gaps
                      between the spells).<br class="yiv8297687257"
                        style="" clear="none">
                      <br class="yiv8297687257" style="" clear="none">
                      Now from that I can easly find duration of each
                      spell. (I then imported those spell lengh in
                      spreadsheet to compute mean, median, max of the
                      spell duration etc, but it should be possible to
                      do it in ferret itself with little more play)<br
                        class="yiv8297687257" style="" clear="none">
                      <br class="yiv8297687257" style="" clear="none">
                      Solution 2) <br class="yiv8297687257" style=""
                        clear="none">
                      But quickly going through steve's mail a while ago
                      I though it might be posible to use similar trick:<br
                        class="yiv8297687257" style="" clear="none">
                      so what I did is - I filled the missing values in
                      the original data (above) with zero. Then defined
                      the event as before with slight twist:<br
                        class="yiv8297687257" style="" clear="none">
                      let id1=var1[<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:l=@evnt:0.999">l=@evnt:0.999</a>]<span
                        class="yiv8297687257"
                        id="yiv8297687257yui_3_16_0_12_1399912292838_53"
                        style="">&nbsp;&nbsp;&nbsp; <span class="yiv8297687257"
                          id="yiv8297687257yui_3_16_0_12_1399912292838_56"
                          style="">&nbsp;&nbsp;&nbsp; ! here any value between 0 and 1
                          would work</span></span><br
                        class="yiv8297687257" style="" clear="none">
                      which gave desired result!<br
                        class="yiv8297687257" style="" clear="none">
                      <br class="yiv8297687257" style="" clear="none">
                      i.e.<br class="yiv8297687257" style=""
                        clear="none">
                      let VAR1 = IF ATV_JA THEN ATV_JA ELSE 0<br
                        class="yiv8297687257" style="" clear="none">
                      let ID_GOOD = VAR1[<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:L=@EVNT:0.999">L=@EVNT:0.999</a>]<br
                        class="yiv8297687257" style="" clear="none">
                      let ID_BAD = ATV_JA[L=@EVNT:1]<span
                        class="yiv8297687257"
                        id="yiv8297687257yui_3_16_0_12_1399912292838_101"
                        style="">&nbsp;&nbsp;&nbsp; <span class="yiv8297687257"
                          id="yiv8297687257yui_3_16_0_12_1399912292838_104"
                          style="">&nbsp;&nbsp;&nbsp; ! just for illustration, this
                          doesn't work, using value between 0 &amp; 1
                          also doesn't give desired result</span></span><br
                        class="yiv8297687257" style="" clear="none">
                      &nbsp;&nbsp;&nbsp;&nbsp; <br class="yiv8297687257" style=""
                        clear="none">
                      list/l=181:245 atv_ja,id_bad,var1,id_good<br
                        class="yiv8297687257" style="" clear="none">
                      (deleted lines)<br class="yiv8297687257" style=""
                        clear="none">
                      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ATV_JA&nbsp; ID_BAD&nbsp; VAR1&nbsp; ID_GOOD<br
                        class="yiv8297687257" style="" clear="none">
                      30-JUN-1990 00 / 181:&nbsp;&nbsp; ....&nbsp;&nbsp; 0.00&nbsp; 0.000&nbsp;&nbsp; 0.000<br
                        class="yiv8297687257" style="" clear="none">
                      01-JUL-1990 00 / 182:&nbsp;&nbsp; ....&nbsp;&nbsp; 0.00&nbsp; 0.000&nbsp;&nbsp; 0.000<br
                        class="yiv8297687257" style="" clear="none">
                      02-JUL-1990 00 / 183:&nbsp; 1.000&nbsp;&nbsp; 1.00&nbsp; 1.000&nbsp;&nbsp; 1.000<br
                        class="yiv8297687257" style="" clear="none">
                      03-JUL-1990 00 / 184:&nbsp; 1.000&nbsp;&nbsp; 2.00&nbsp; 1.000&nbsp;&nbsp; 1.000<br
                        class="yiv8297687257" style="" clear="none">
                      04-JUL-1990 00 / 185:&nbsp; 1.000&nbsp;&nbsp; 3.00&nbsp; 1.000&nbsp;&nbsp; 1.000<br
                        class="yiv8297687257" style="" clear="none">
                      05-JUL-1990 00 / 186:&nbsp; 1.000&nbsp;&nbsp; 4.00&nbsp; 1.000&nbsp;&nbsp; 1.000<br
                        class="yiv8297687257" style="" clear="none">
                      06-JUL-1990 00 / 187:&nbsp;&nbsp; ....&nbsp;&nbsp; 4.00&nbsp; 0.000&nbsp;&nbsp; 2.000<br
                        class="yiv8297687257" style="" clear="none">
                      07-JUL-1990 00 / 188:&nbsp;&nbsp; ....&nbsp;&nbsp; 4.00&nbsp; 0.000&nbsp;&nbsp; 2.000<br
                        class="yiv8297687257" style="" clear="none">
                      (deleted lines)<br class="yiv8297687257" style=""
                        clear="none">
                      19-AUG-1990 00 / 231:&nbsp;&nbsp; ....&nbsp;&nbsp; 4.00&nbsp; 0.000&nbsp;&nbsp; 2.000<br
                        class="yiv8297687257" style="" clear="none">
                      20-AUG-1990 00 / 232:&nbsp;&nbsp; ....&nbsp;&nbsp; 4.00&nbsp; 0.000&nbsp;&nbsp; 2.000<br
                        class="yiv8297687257" style="" clear="none">
                      21-AUG-1990 00 / 233:&nbsp;&nbsp; ....&nbsp;&nbsp; 4.00&nbsp; 0.000&nbsp;&nbsp; 2.000<br
                        class="yiv8297687257" style="" clear="none">
                      22-AUG-1990 00 / 234:&nbsp; 1.000&nbsp;&nbsp; 5.00&nbsp; 1.000&nbsp;&nbsp; 3.000<br
                        class="yiv8297687257" style="" clear="none">
                      23-AUG-1990 00 / 235:&nbsp; 1.000&nbsp;&nbsp; 6.00&nbsp; 1.000&nbsp;&nbsp; 3.000<br
                        class="yiv8297687257" style="" clear="none">
                      24-AUG-1990 00 / 236:&nbsp; 1.000&nbsp;&nbsp; 7.00&nbsp; 1.000&nbsp;&nbsp; 3.000<br
                        class="yiv8297687257" style="" clear="none">
                      25-AUG-1990 00 / 237:&nbsp; 1.000&nbsp;&nbsp; 8.00&nbsp; 1.000&nbsp;&nbsp; 3.000<br
                        class="yiv8297687257" style="" clear="none">
                      26-AUG-1990 00 / 238:&nbsp;&nbsp; ....&nbsp;&nbsp; 8.00&nbsp; 0.000&nbsp;&nbsp; 4.000<br
                        class="yiv8297687257" style="" clear="none">
                      27-AUG-1990 00 / 239:&nbsp;&nbsp; ....&nbsp;&nbsp; 8.00&nbsp; 0.000&nbsp;&nbsp; 4.000<br
                        class="yiv8297687257" style="" clear="none">
                      28-AUG-1990 00 / 240:&nbsp;&nbsp; ....&nbsp;&nbsp; 8.00&nbsp; 0.000&nbsp;&nbsp; 4.000<br
                        class="yiv8297687257" style="" clear="none">
                      29-AUG-1990 00 / 241:&nbsp; 1.000&nbsp;&nbsp; 9.00&nbsp; 1.000&nbsp;&nbsp; 5.000<br
                        class="yiv8297687257" style="" clear="none">
                      30-AUG-1990 00 / 242:&nbsp; 1.000&nbsp; 10.00&nbsp; 1.000&nbsp;&nbsp; 5.000<br
                        class="yiv8297687257" style="" clear="none">
                      31-AUG-1990 00 / 243:&nbsp; 1.000&nbsp; 11.00&nbsp; 1.000&nbsp;&nbsp; 5.000<br
                        class="yiv8297687257" style="" clear="none">
                      01-SEP-1990 00 / 244:&nbsp;&nbsp; ....&nbsp; 11.00&nbsp; 0.000&nbsp;&nbsp; 6.000<br
                        class="yiv8297687257" style="" clear="none">
                      02-SEP-1990 00 / 245:&nbsp;&nbsp; ....&nbsp; 11.00&nbsp; 0.000&nbsp;&nbsp; 6.000<br
                        class="yiv8297687257" style="" clear="none">
                      <br class="yiv8297687257" style="" clear="none">
                      I would like to thank your both for sharing your
                      ideas that help me come up with these solutions.<br
                        class="yiv8297687257" style="" clear="none">
                      <br clear="none">
                      Best regards,<br clear="none">
                      <br class="yiv8297687257" style="" clear="none">
                      Jagadish</div>
                    <div class="yiv8297687257yqt0452545476"
                      id="yiv8297687257yqt38798">
                      <div class="yiv8297687257"
                        id="yiv8297687257yqt39544" style="">
                        <div class="yiv8297687257"
                          id="yiv8297687257yui_3_16_0_11_1399912292838_21"
                          style="display:none;">
                          <div class="yiv8297687257"
                            style="font-family:HelveticaNeue, Helvetica
                            Neue, Helvetica, Arial, Lucida Grande,
                            sans-serif;font-size:10pt;">
                            <div class="yiv8297687257"
                              style="font-family:HelveticaNeue,
                              Helvetica Neue, Helvetica, Arial, Lucida
                              Grande, sans-serif;font-size:12pt;">
                              <div class="yiv8297687257" dir="ltr"
                                style=""> <font class="yiv8297687257"
                                  style="" face="Arial" size="2"> On
                                  Wednesday, May 14, 2014 6:39 PM, Steve
                                  Hankin
                                  <a rel="nofollow" class="moz-txt-link-rfc2396E" href="mailto:steven.c.hankin@xxxxxxxx">&lt;steven.c.hankin@xxxxxxxx&gt;</a>
                                  wrote:<br class="yiv8297687257"
                                    style="" clear="none">
                                </font> </div>
                              <div class="yiv8297687257" style="">
                                <div class="yiv8297687257"
                                  id="yiv8297687257" style="">
                                  <div class="yiv8297687257" style="">
                                    Hi Jagadish,<br
                                      class="yiv8297687257" style=""
                                      clear="none">
                                    <br class="yiv8297687257" style=""
                                      clear="none">
                                    Here is an example of using the
                                    "closest index above" and "closest
                                    index below" filters in Ferret to
                                    compute the length of contiguous
                                    "spells"<br class="yiv8297687257"
                                      style="" clear="none">
                                    <blockquote class="yiv8297687257"
                                      style=""><tt class="yiv8297687257"
                                        style="">define
                                        axis/t=1-jan-1900:1-jan-2000:30/units=days
                                        t30</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">let spells = IF
                                        RANDU(L[gt=t30]) GT 0.5 THEN 1</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">let inverseSpells = IF
                                        MISSING(spells,2) EQ 2 THEN 1</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">let closestAbove =
                                        inverseSpells[l=@cia]</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">let closestBelow =
                                        inverseSpells[l=@cib]</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">let rawSize =
                                        closestAbove+closestBelow</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">let contigSize = IF
                                        rawSize NE 0 THEN rawSize-1</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">&nbsp;</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">list/l=1:50 spells,
                                        inverseSpells, closestAbove,
                                        closestBelow, contigSize</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TIME:
                                        17-DEC-1899 00:00 to 26-JAN-1904
                                        00:00</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">&nbsp;Column&nbsp; 1: SPELLS is
                                        IF RANDU(L[GT=T30]) GT 0.5 THEN
                                        1</tt><tt class="yiv8297687257"
                                        style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">&nbsp;Column&nbsp; 2:
                                        INVERSESPELLS is IF
                                        MISSING(SPELLS,2) EQ 2 THEN 1</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">&nbsp;Column&nbsp; 3:
                                        CLOSESTABOVE is
                                        INVERSESPELLS[L=@CIA]</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">&nbsp;Column&nbsp; 4:
                                        CLOSESTBELOW is
                                        INVERSESPELLS[L=@CIB]</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">&nbsp;Column&nbsp; 5: CONTIGSIZE
                                        is IF RAWSIZE NE 0 THEN
                                        RAWSIZE-1</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        SPELLS&nbsp; INVERSE CLOSEST CLOSEST
                                        CONTIGSIZE</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">01-JAN-1900 /&nbsp; 1:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">31-JAN-1900 /&nbsp; 2:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        1.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">02-MAR-1900 /&nbsp; 3:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">01-APR-1900 /&nbsp; 4:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        1.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">01-MAY-1900 /&nbsp; 5:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">31-MAY-1900 /&nbsp; 6:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        1.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">30-JUN-1900 /&nbsp; 7:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">30-JUL-1900 /&nbsp; 8:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        1.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">29-AUG-1900 /&nbsp; 9:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">28-SEP-1900 / 10:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">28-OCT-1900 / 11:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">27-NOV-1900 / 12:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">27-DEC-1900 / 13:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        1.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">26-JAN-1901 / 14:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">25-FEB-1901 / 15:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 2.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        2.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">27-MAR-1901 / 16:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 2.000&nbsp;&nbsp;
                                        2.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">26-APR-1901 / 17:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">26-MAY-1901 / 18:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">25-JUN-1901 / 19:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 2.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        2.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">25-JUL-1901 / 20:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 2.000&nbsp;&nbsp;
                                        2.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">24-AUG-1901 / 21:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">23-SEP-1901 / 22:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">23-OCT-1901 / 23:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">22-NOV-1901 / 24:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">22-DEC-1901 / 25:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">21-JAN-1902 / 26:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 2.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        2.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">20-FEB-1902 / 27:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 2.000&nbsp;&nbsp;
                                        2.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">22-MAR-1902 / 28:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">21-APR-1902 / 29:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        1.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">21-MAY-1902 / 30:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">20-JUN-1902 / 31:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 3.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        3.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">20-JUL-1902 / 32:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 2.000&nbsp;&nbsp; 2.000&nbsp;&nbsp;
                                        3.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">19-AUG-1902 / 33:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 3.000&nbsp;&nbsp;
                                        3.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">18-SEP-1902 / 34:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">18-OCT-1902 / 35:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">17-NOV-1902 / 36:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 2.000&nbsp;&nbsp; 1.000&nbsp;&nbsp;
                                        2.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">17-DEC-1902 / 37:&nbsp;
                                        1.000&nbsp;&nbsp;&nbsp; ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 2.000&nbsp;&nbsp;
                                        2.000</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">16-JAN-1903 / 38:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style="">15-FEB-1903 / 39:&nbsp;&nbsp;
                                        ....&nbsp;&nbsp; 1.000&nbsp;&nbsp; 0.000&nbsp;&nbsp; 0.000&nbsp;&nbsp;&nbsp;
                                        ....</tt><tt
                                        class="yiv8297687257" style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><tt class="yiv8297687257"
                                        style=""><br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </tt><br class="yiv8297687257"
                                        style="" clear="none">
                                      <br class="yiv8297687257" style=""
                                        clear="none">
                                    </blockquote>
                                    <br class="yiv8297687257" style=""
                                      clear="none">
                                    <br class="yiv8297687257" style=""
                                      clear="none">
                                    <div class="yiv8297687257"
                                      id="yiv8297687257yqt68789"
                                      style="">
                                      <div class="yiv8297687257"
                                        style="">On 5/14/2014 8:56 AM,
                                        Steve Hankin wrote:<br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </div>
                                      <blockquote class="yiv8297687257"
                                        style="" type="cite"> </blockquote>
                                    </div>
                                  </div>
                                  <div class="yiv8297687257"
                                    id="yiv8297687257yqt02274" style="">
                                    <div class="yiv8297687257" style=""><br
                                        class="yiv8297687257" style=""
                                        clear="none">
                                      <div class="yiv8297687257"
                                        style="">On 5/13/2014 5:19 PM,
                                        'jagadish karmacharya' via _OAR
                                        PMEL Ferret Users wrote:<br
                                          class="yiv8297687257" style=""
                                          clear="none">
                                      </div>
                                      <blockquote class="yiv8297687257"
                                        style="" type="cite">
                                        <div class="yiv8297687257"
                                          style="color:#000;background-color:#fff;font-family:HelveticaNeue,
                                          Helvetica Neue, Helvetica,
                                          Arial, Lucida Grande,
                                          sans-serif;font-size:10pt;">
                                          <div class="yiv8297687257"
                                            style=""><span
                                              class="yiv8297687257"
                                              style="">Dear ferret
                                              users,</span></div>
                                          <div class="yiv8297687257"
                                            style="color:rgb(0, 0,
                                            0);font-size:13.3333px;font-family:HelveticaNeue,
                                            Helvetica Neue, Helvetica,
                                            Arial, Lucida Grande,
                                            sans-serif;background-color:transparent;font-style:normal;"><br
                                              class="yiv8297687257"
                                              style="" clear="none">
                                            <span class="yiv8297687257"
                                              style=""></span></div>
                                          <div class="yiv8297687257"
                                            style="color:rgb(0, 0,
                                            0);font-size:13.3333px;font-family:HelveticaNeue,
                                            Helvetica Neue, Helvetica,
                                            Arial, Lucida Grande,
                                            sans-serif;background-color:transparent;font-style:normal;"><span
                                              class="yiv8297687257"
                                              style="">I have a 1
                                              dimensional time series
                                              with intermittent values
                                              equal to 1 and missing
                                              values in between (1's
                                              represent spells of
                                              certain events). I want to
                                              calculate number of spells
                                              of of 1's and other stats
                                              such as mean and medium
                                              duration of spells of 1's.</span></div>
                                        </div>
                                      </blockquote>
                                      <br class="yiv8297687257" style=""
                                        clear="none">
                                      Hi Jagadish,<br
                                        class="yiv8297687257" style=""
                                        clear="none">
                                      <br class="yiv8297687257" style=""
                                        clear="none">
                                      Following up on the ideas that
                                      Hein has begun ...<br
                                        class="yiv8297687257" style=""
                                        clear="none">
                                      <br class="yiv8297687257" style=""
                                        clear="none">
                                      Your description is not
                                      sufficiently specific on the
                                      definition of a "spell" to give a
                                      precise answer on how (or whether)
                                      the tools available in Ferret can
                                      do what you are after.<br
                                        class="yiv8297687257" style=""
                                        clear="none">
                                      <ul class="yiv8297687257"
                                        id="yiv8297687257yui_3_16_0_1_1399912292838_103587"
                                        style="">
                                        <li class="yiv8297687257"
                                          style="">if the definition of
                                          a spell is that it a threshold
                                          on the *density* of 1's found
                                          per unit length of the time
                                          series, then the @SBX (running
                                          average) filter will give you
                                          something very close to what
                                          you are after</li>
                                      </ul>
                                      <ul class="yiv8297687257"
                                        id="yiv8297687257yui_3_16_0_1_1399912292838_103589"
                                        style="">
                                        <li class="yiv8297687257"
                                          style="">e.g. yes? let
                                          tdensity =
                                          mytimeseries[l=@sbx:11]&nbsp;&nbsp;&nbsp; <br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; yes? PLOT tdensity&nbsp;&nbsp;&nbsp; !
                                          have a look ...<br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; yes? let myspells = IF
                                          tdensity gt threshold THEN 1<br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                        </li>
                                      </ul>
                                      <ul class="yiv8297687257"
                                        id="yiv8297687257yui_3_16_0_1_1399912292838_103591"
                                        style="">
                                        <li class="yiv8297687257"
                                          style="">if the definition of
                                          a spell is that it must be a
                                          strictly contiguous sequence
                                          of 1's, it will take more
                                          imagination to see how to
                                          apply the available Ferret
                                          tools.&nbsp;&nbsp;&nbsp; Here's one approach
                                          to identifying the contiguous
                                          spells using existing tools:</li>
                                      </ul>
                                      <ol class="yiv8297687257"
                                        id="yiv8297687257yui_3_16_0_1_1399912292838_103593"
                                        style="">
                                        <li class="yiv8297687257"
                                          style="">use the tdensity
                                          approach above varying the box
                                          width to identify the longest
                                          spell.&nbsp; <br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                          yes? let tdensity =
                                          mytimeseries[l=@sbx:11]<br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                          yes? let elevenOrLonger = IF
                                          tdensity EQ 1 THEN 1<br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                          yes? LIST
                                          elevenOrLonger[L=@SUM]&nbsp;&nbsp;&nbsp;&nbsp; !
                                          if answer is zero, there are
                                          no spells this long<br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                        </li>
                                        <li class="yiv8297687257"
                                          style="">define a new time
                                          series in which you mask out
                                          the blocks of contiguous 1s
                                          just found<br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                          Iterate the procedure to find
                                          number and location of spells
                                          of shorter and shorter
                                          duration.&nbsp; (Note only
                                          odd-number length spells can
                                          be found this way.)<br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                        </li>
                                      </ol>
                                      <ul class="yiv8297687257"
                                        id="yiv8297687257yui_3_16_0_1_1399912292838_103595"
                                        style="">
                                        <li class="yiv8297687257"
                                          style="">Or ... as Hein says,
                                          you can write raw code to
                                          perform any custom calculation
                                          you want by using either
                                          Python in pyFerret or defining
                                          your own external function in
                                          vanilla Ferret.&nbsp; ==&gt; Then
                                          contribute the idea back to
                                          the Ferret user's list!&nbsp; A
                                          filter that, at each point,
                                          measured the length of
                                          contiguous block of
                                          non-missing values surrounding
                                          it, would be a nice, generic
                                          Ferret tool.&nbsp; (Should we add
                                          such a filter into Ferret?&nbsp; It
                                          would be a fairly easy
                                          addition:&nbsp;&nbsp; e.g. LET
                                          contiguous_spell_length =
                                          mytimeseries[l=@cntg])</li>
                                      </ul>
                                      <ul class="yiv8297687257"
                                        id="yiv8297687257yui_3_16_0_1_1399912292838_103597"
                                        style="">
                                        <li class="yiv8297687257"
                                          style="">I cant help wondering
                                          if a clever use of the nearest
                                          index above and nearest index
                                          below filters might be used to
                                          build a contiguous length
                                          filter using a few LET
                                          definitions ...<br
                                            class="yiv8297687257"
                                            style="" clear="none">
                                        </li>
                                      </ul>
                                      &nbsp;&nbsp;&nbsp; - Steve<br
                                        class="yiv8297687257" style=""
                                        clear="none">
                                      <br class="yiv8297687257" style=""
                                        clear="none">
                                      <blockquote class="yiv8297687257"
                                        style="" type="cite">
                                        <div class="yiv8297687257"
                                          style="color:#000;background-color:#fff;font-family:HelveticaNeue,
                                          Helvetica Neue, Helvetica,
                                          Arial, Lucida Grande,
                                          sans-serif;font-size:10pt;">
                                          <div class="yiv8297687257"
                                            style="color:rgb(0, 0,
                                            0);font-size:13.3333px;font-family:HelveticaNeue,
                                            Helvetica Neue, Helvetica,
                                            Arial, Lucida Grande,
                                            sans-serif;background-color:transparent;font-style:normal;"><span
                                              class="yiv8297687257"
                                              style=""><br
                                                class="yiv8297687257"
                                                style="" clear="none">
                                            </span></div>
                                          <div class="yiv8297687257"
                                            style="color:rgb(0, 0,
                                            0);font-size:13.3333px;font-family:HelveticaNeue,
                                            Helvetica Neue, Helvetica,
                                            Arial, Lucida Grande,
                                            sans-serif;background-color:transparent;font-style:normal;"><span
                                              class="yiv8297687257"
                                              style=""> I guess @evnt
                                              transformation would be
                                              helpful for this, in
                                              particular defining ID
                                              number as outlined here <a rel="nofollow"
                                                moz-do-not-send="true"
                                                rel="nofollow"
                                                shape="rect"
                                                class="yiv8297687257"
                                                style="" target="_blank"
href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2013/msg00277.html">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2013/msg00277.html</a>
                                              would provide an solution.
                                              I made an attempt
                                              accordingly but haven't
                                              been able to solve the
                                              problem.</span></div>
                                          <div class="yiv8297687257"
                                            style="color:rgb(0, 0,
                                            0);font-size:13.3333px;font-family:HelveticaNeue,
                                            Helvetica Neue, Helvetica,
                                            Arial, Lucida Grande,
                                            sans-serif;background-color:transparent;font-style:normal;"><br
                                              class="yiv8297687257"
                                              style="" clear="none">
                                            <span class="yiv8297687257"
                                              style=""></span></div>
                                          <div class="yiv8297687257"
                                            style="color:rgb(0, 0,
                                            0);font-size:13.3333px;font-family:HelveticaNeue,
                                            Helvetica Neue, Helvetica,
                                            Arial, Lucida Grande,
                                            sans-serif;background-color:transparent;font-style:normal;"><span
                                              class="yiv8297687257"
                                              style="">I would
                                              appreciate any lead on
                                              this.</span></div>
                                          <div class="yiv8297687257"
                                            style="color:rgb(0, 0,
                                            0);font-size:13.3333px;font-family:HelveticaNeue,
                                            Helvetica Neue, Helvetica,
                                            Arial, Lucida Grande,
                                            sans-serif;background-color:transparent;font-style:normal;"><br
                                              class="yiv8297687257"
                                              style="" clear="none">
                                            <span class="yiv8297687257"
                                              style=""></span></div>
                                          <div class="yiv8297687257"
                                            style=""><span
                                              class="yiv8297687257"
                                              style="">Thanks,</span><br
                                              class="yiv8297687257"
                                              style="" clear="none">
                                          </div>
                                          <div class="yiv8297687257"
                                            style=""> <br
                                              class="yiv8297687257"
                                              style="" clear="none">
                                          </div>
                                          <div class="yiv8297687257"
                                            style="">Jagadish</div>
                                        </div>
                                      </blockquote>
                                      <br class="yiv8297687257" style=""
                                        clear="none">
                                      <br class="yiv8297687257" style=""
                                        clear="none">
                                    </div>
                                  </div>
                                </div>
                                <br class="yiv8297687257" style=""
                                  clear="none">
                                <br class="yiv8297687257" style=""
                                  clear="none">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00182" href="msg00182.html">Re: [ferret_users] event statistics -- length of contiguous &quot;spell&quot;</a></strong>
<ul><li><em>From:</em> 'jagadish karmacharya' via _OAR PMEL Ferret Users</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00176" href="msg00176.html">[ferret_users] event statistics</a></strong>
<ul><li><em>From:</em> 'jagadish karmacharya' via _OAR PMEL Ferret Users</li></ul></li>
<li><strong><a name="00178" href="msg00178.html">Re: [ferret_users] event statistics</a></strong>
<ul><li><em>From:</em> Steve Hankin</li></ul></li>
<li><strong><a name="00179" href="msg00179.html">Re: [ferret_users] event statistics -- length of contiguous &quot;spell&quot;</a></strong>
<ul><li><em>From:</em> Steve Hankin</li></ul></li>
<li><strong><a name="00180" href="msg00180.html">Re: [ferret_users] event statistics -- length of contiguous &quot;spell&quot;</a></strong>
<ul><li><em>From:</em> 'jagadish karmacharya' via _OAR PMEL Ferret Users</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00180.html">Re: [ferret_users] event statistics -- length of contiguous &quot;spell&quot;</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00182.html">Re: [ferret_users] event statistics -- length of contiguous &quot;spell&quot;</a></strong>
</li>

</UL>
<center>[<a href="msg00180.html">Thread Prev</a>][<a href="msg00182.html">Thread Next</a>][<A HREF="threads.html#00181">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
