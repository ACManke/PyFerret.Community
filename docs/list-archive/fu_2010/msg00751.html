<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] &#45;&#45; Ferret process ID (PID) -->
<!--X-From-R13: Oaqerj Ivggraoret <Oaqerj.IvggraoretNabnn.tbi> -->
<!--X-Date: Wed, 8 Dec 2010 14:40:34 &#45;0800 -->
<!--X-Message-Id: alpine.LRH.2.00.1012081734360.20726@atw -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 58148.132.166.74.187.1291809572.squirrel@webmail.lsce.ipsl.fr -->
<!--X-Reference: 4CFFC919.1000401@noaa.gov -->
<!--X-Reference: 20101208.120245.392799189.furue@hawaii.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] -- Ferret process ID (PID)</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00750.html">Thread Prev</a>][<a href="msg00536.html">Thread Next</a>][<A HREF="threads.html#00751">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] -- Ferret process ID (PID)</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ryo Furue &lt;<a href="mailto:furue@DOMAIN.HIDDEN">furue@xxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] -- Ferret process ID (PID)</strong></li>
<li><strong>From</strong>: <strong>Andrew Wittenberg &lt;<a href="mailto:Andrew.Wittenberg@DOMAIN.HIDDEN">Andrew.Wittenberg@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 08 Dec 2010 17:39:39 -0500 (EST)</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="mailto:20101208.120245.392799189.furue@DOMAIN.HIDDEN">20101208.120245.392799189.furue@xxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:58148.132.166.74.187.1291809572.squirrel@DOMAIN.HIDDEN">58148.132.166.74.187.1291809572.squirrel@xxxxxxxxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4CFFC919.1000401@DOMAIN.HIDDEN">4CFFC919.1000401@xxxxxxxx</a>&gt; &lt;<a href="mailto:20101208.120245.392799189.furue@DOMAIN.HIDDEN">20101208.120245.392799189.furue@xxxxxxxxxx</a>&gt;</li>
<li>Reply-to: Andrew Wittenberg &lt;<a href="mailto:Andrew.Wittenberg@DOMAIN.HIDDEN">Andrew.Wittenberg@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Alpine 2.00 (LRH 1167 2008-08-23)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Ryo,

I use perl to get Ferret's process ID:

   let pid = `spawn(&quot;perl -e 'print getppid,0'&quot;)`

The trailing 0 prevents the last digit of the PID from getting chomped.

Andrew


On Wed, 8 Dec 2010, Ryo Furue wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Patrick and Ansley,

| Starting
| with Ferret v6.64, if Ferret crashes, and if it can catch the errors
| SIGILL, SIGFPE, and SIGSEGV, then it returns a -1 status code.

Interesting!  In that case, to get a non-zero exit status, you can end
your Ferret script with something along the lines of

 SP kill -FPE \`cat /proc/$$/stat | awk '{print $4}'\`

to kill &quot;itself&quot; with SIGFPE, thereby exiting with a non-zero
status.

You could put this one line in a separate script, say
&quot;error-exit.jnl&quot;, and call it like

 go error-exit

to get the same effect. (Tested.)

Caveat: The part

 cat /proc/$$/stat | awk '{print $4}'

is a trick to get the parent PID on Linux, which may not work
on other Unix systems.  In that case you would have to find
another trick such as processing the output from the ps command.

Is there a simpler way to obtain the process ID of the current
Ferret session?

Ferret's &quot;SP&quot; command creates a child process in which to run the
command line.  So, you want to kill the parent of the subprocess.
To do that, you have to find out the process ID of the parent
(Ferret).

Regards,
Ryo

</pre></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00746" href="msg00746.html">[ferret_users]</a></strong>
<ul><li><em>From:</em> Patrick . Brockmann</li></ul></li>
<li><strong><a name="00747" href="msg00747.html">Re: [ferret_users]</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00750" href="msg00750.html">Re: [ferret_users]</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00750.html">Re: [ferret_users]</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00536.html">[ferret_users] Segmentation fault with long global attrubute</a></strong>
</li>

</UL>
<center>[<a href="msg00750.html">Thread Prev</a>][<a href="msg00536.html">Thread Next</a>][<A HREF="threads.html#00751">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
