<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] contour/fill and contour/line &#45; different algorithm? -->
<!--X-From-R13: Bnhy Kbhat <Bnhy.X.KbhatNabnn.tbi> -->
<!--X-Date: Thu, 30 Sep 2010 13:21:39 &#45;0700 -->
<!--X-Message-Id: 489C2A44&#45;4AE3&#45;46A9&#45;ABC6&#45;F8C23A4D3D4C@noaa.gov -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: 038079DA&#45;220B&#45;4E24&#45;A613&#45;EFF16EBE3D0D@noaa.gov -->
<!--X-Reference: 4CA3D9DE.3060804@noaa.gov -->
<!--X-Derived: pngm3qdWtsjLZ.png -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] contour/fill and contour/line - different algorithm?</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00553.html">Thread Prev</a>][<a href="msg00554.html">Thread Next</a>][<A HREF="threads.html#00560">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] contour/fill and contour/line - different algorithm?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:Ansley.B.Manke@DOMAIN.HIDDEN">Ansley.B.Manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] contour/fill and contour/line - different algorithm?</strong></li>
<li><strong>From</strong>: <strong>Paul Young &lt;<a href="mailto:Paul.J.Young@DOMAIN.HIDDEN">Paul.J.Young@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 30 Sep 2010 14:19:13 -0600</li>
<li>Cc: Ferret Usergroup &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="mailto:4CA3D9DE.3060804@DOMAIN.HIDDEN">4CA3D9DE.3060804@xxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:038079DA-220B-4E24-A613-EFF16EBE3D0D@DOMAIN.HIDDEN">038079DA-220B-4E24-A613-EFF16EBE3D0D@xxxxxxxx</a>&gt; &lt;<a href="mailto:4CA3D9DE.3060804@DOMAIN.HIDDEN">4CA3D9DE.3060804@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi Ansley and all,

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>The FILL and CONTOUR commands use the same algorithm. What's the  
</tt><tt>difference between your symbols ($my_levels) and ($lv)?  Maybe it's  
</tt><tt>just a typo in what you sent.
</tt><pre style="margin: 0em;">

  fill/lev=($my_levels)
  contour/over/nolab/lev=($lv)
</pre></blockquote><pre style="margin: 0em;">

Sorry, that was a typo - trying to simplify my code for the mail list.

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><tt>If you want the same contour lines as colors, try doing it in one  
</tt><tt>command with FILL/LINE.  If that shows any differences, then it may  
</tt><tt>be in the rendering of the colors, or in any case we should hunt  
</tt><tt>further.
</tt></blockquote><pre style="margin: 0em;">

</pre><tt>No difference unfortunately..... although, a related question, how do  
</tt><tt>I do FILL/LINE if I first make the plot with /SET? Doesn't work with  
</tt><tt>PPL FILL/LINE....
</tt><pre style="margin: 0em;">

</pre><tt>Do you have suggestions for further test? I guess it's going to have  
</tt><tt>something to do with the log pressure axis regridding, but it seems to  
</tt><tt>get it right sometimes (e.g., see attached - pressure/time plots of  
</tt><tt>water vapor: bottom right panel seems fine).
</tt><pre style="margin: 0em;">

Cheers,

Paul


</pre><p><a href="pngm3qdWtsjLZ.png" ><img src="pngm3qdWtsjLZ.png" alt="PNG image"></a></p>
<pre style="margin: 0em;">




</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">

Ansley

On 9/29/2010 1:56 PM, Paul Young wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi all,

</pre><tt>I've been doing some plots where I do a &quot;fill&quot; with a &quot;contour/ 
</tt><tt>line&quot; over the top. This has worked out fine for the most part, but  
</tt><tt>today I've been trying it on some data where I transform the  
</tt><tt>pressure axis to log pressure. In essence, the problem is that the  
</tt><tt>contour lines do not line up with the shading, mostly at higher  
</tt><tt>altitudes. (see attached) The vertical model levels are certainly  
</tt><tt>more spread out there, but I would have guessed that the contour/ 
</tt><tt>line would still follow contour/fill.....
</tt><pre style="margin: 0em;">

Commands follow:

</pre><tt>use my_water_vap_climatology.nc                             !Model  
</tt><tt>water vapor output
</tt><pre style="margin: 0em;">

</pre><tt>define axis/depth/from_data/name=lnpz/z ln(z[gz=my_data])    !Put  
</tt><tt>on log pressure axis
</tt><pre style="margin: 0em;">
let x_lnp = my_data[gz=lnpz@asn]

</pre><tt>let zmin = 250                                            !Set up  
</tt><tt>plot (range and axes etc)
</tt><pre style="margin: 0em;">
let zmax = 25
ppl axlabp -1, 0
ppl tics 0.125, 0.25, 0, 0

set region/z=`ln(zmin)`:`ln(zmax)`
fill/lev=($my_levels)/nokey \
</pre><tt> (x_lnp[l=@max]-x_lnp[l=@min])                              ! 
</tt><tt>Contour/fill yearly range
</tt><pre style="margin: 0em;">
contour/over/nolab/lev=($lv) \
</pre><tt> (x_lnp[l=@max]-x_lnp[l=@min])                            !Over  
</tt><tt>plot contour lines - PROBLEM HERE?!
</tt><pre style="margin: 0em;">

Thanks for any pointers,

Paul














</pre></blockquote></blockquote><pre style="margin: 0em;">

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00552" href="msg00552.html">[ferret_users] contour/fill and contour/line - different algorithm?</a></strong>
<ul><li><em>From:</em> Paul Young</li></ul></li>
<li><strong><a name="00553" href="msg00553.html">Re: [ferret_users] contour/fill and contour/line - different algorithm?</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00553.html">Re: [ferret_users] contour/fill and contour/line - different algorithm?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00554.html">[ferret_users] data translation</a></strong>
</li>

</UL>
<center>[<a href="msg00553.html">Thread Prev</a>][<a href="msg00554.html">Thread Next</a>][<A HREF="threads.html#00560">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
