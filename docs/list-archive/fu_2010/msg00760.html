<!-- MHonArc v2.6.16 -->
<!--X-Subject: RE: [ferret_users] conform variables and how to catch common sizes of region [SEC=UNCLASSIFIED] -->
<!--X-From-R13: [nex Ivyyvnzf <[nex.IvyyvnzfNobz.tbi.nh> -->
<!--X-Date: Mon, 13 Dec 2010 19:06:42 &#45;0800 -->
<!--X-Message-Id: E6CC5A2604A98F49A3F0901433A07A1F01977EDC2707@BOM&#45;VMBX&#45;HO.bom.gov.au -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 4D0670E7.8050902@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RE: [ferret_users] conform variables and how to catch common sizes of region [SEC=UNCLASSIFIED]</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00759.html">Thread Prev</a>][<a href="msg00761.html">Thread Next</a>][<A HREF="threads.html#00760">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [ferret_users] conform variables and how to catch common sizes of region [SEC=UNCLASSIFIED]</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;'Steve Hankin'&quot; &lt;<a href="mailto:steven.c.hankin@DOMAIN.HIDDEN">steven.c.hankin@xxxxxxxx</a>&gt;,        &quot;'<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>'&quot; &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>RE: [ferret_users] conform variables and how to catch common sizes of region [SEC=UNCLASSIFIED]</strong></li>
<li><strong>From</strong>: <strong>Mark Williams &lt;<a href="mailto:Mark.Williams@DOMAIN.HIDDEN">Mark.Williams@xxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 14 Dec 2010 14:06:20 +1100</li>
<li>Accept-language: en-US, en-AU</li>
<li>Acceptlanguage: en-US, en-AU</li>
<li>In-reply-to: &lt;<a href="mailto:4D0670E7.8050902@DOMAIN.HIDDEN">4D0670E7.8050902@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>Thread-index: Acua+ymVFYFgJ6vJQPS6nKdBemYk5gAN2+pA</li>
<li>Thread-topic: [ferret_users] conform variables and how to catch common sizes of region [SEC=UNCLASSIFIED]</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="white" style="background-color: white; a:link { color: blue } a:visited { color: blue } ">





<div class=Section1>

<p class=MsoNormal><font size=2 color=navy face=Arial><span style='font-size:
10.0pt;font-family:Arial;color:navy'>Hi Steve and all<o:p></o:p></span></font></p>

<p class=MsoNormal><font size=2 color=navy face=Arial><span style='font-size:
10.0pt;font-family:Arial;color:navy'><o:p>&nbsp;</o:p></span></font></p>

<p class=MsoNormal><font size=2 color=navy face=Arial><span style='font-size:
10.0pt;font-family:Arial;color:navy'>It has been a while since I have had the
chance to do some &#8220;ferreting&#8221; but I do remember coming across the error
message mentioned in this email and being puzzled. &nbsp;As I remember I
eventually resolved the issue by ensuring both variables are on the same grid
through regridding.<o:p></o:p></span></font></p>

<p class=MsoNormal><font size=2 color=navy face=Arial><span style='font-size:
10.0pt;font-family:Arial;color:navy'><o:p>&nbsp;</o:p></span></font></p>

<p class=MsoNormal><font size=2 color=navy face=Arial><span style='font-size:
10.0pt;font-family:Arial;color:navy'>Defining the axis with an OVERLAP or
SUPERSET qualifier would be a useful addition.&nbsp; But for me a change to the
diagnostic which points out that it may not be about sizes but about coordinate
ranges, resolutions or offsets would help a lot and presumably be easily
implemented.&nbsp; I know I spent some time going down the wrong path in the
past!<o:p></o:p></span></font></p>

<p class=MsoNormal><font size=2 color=navy face=Arial><span style='font-size:
10.0pt;font-family:Arial;color:navy'><o:p>&nbsp;</o:p></span></font></p>

<p class=MsoNormal><font size=2 color=navy face=Arial><span style='font-size:
10.0pt;font-family:Arial;color:navy'>Mark<o:p></o:p></span></font></p>

<div>

<p><font size=2 color=navy face="@Arial Unicode MS"><span style='font-size:
10.0pt;font-family:"\@Arial Unicode MS";color:navy'>--</span></font><font
color=navy><span style='color:navy'> <br>
</span></font><font size=2 color=navy face=Arial><span style='font-size:10.0pt;
font-family:Arial;color:navy'>Dr Mark Williams</span></font><font color=navy><span
style='color:navy'> <br>
</span></font><font size=2 color=navy face=Arial><span style='font-size:10.0pt;
font-family:Arial;color:navy'>Regional Director, Victoria</span></font><font
color=navy><span style='color:navy'> <br>
</span></font><font size=2 color=navy face=Arial><span style='font-size:10.0pt;
font-family:Arial;color:navy'>Bureau of Meteorology</span></font><font
color=navy><span style='color:navy'> <br>
</span></font><font size=2 color=navy face=Arial><span style='font-size:10.0pt;
font-family:Arial;color:navy'>Phone 03 9669 4968</span></font><font color=navy><span
style='color:navy'> <br>
</span></font><st1:place w:st="on"><st1:City w:st="on"><font size=2 color=navy
  face=Arial><span style='font-size:10.0pt;font-family:Arial;color:navy'>Mobile</span></font></st1:City></st1:place><font
size=2 color=navy face=Arial><span style='font-size:10.0pt;font-family:Arial;
color:navy'> 0417 519 795</span></font><font color=navy><span style='color:
navy'> </span></font><o:p></o:p></p>

</div>

<div>

<div class=MsoNormal align=center style='text-align:center'><font size=3
color=black face="Times New Roman"><span lang=EN-US style='font-size:12.0pt;
color:windowtext'>

<hr size=2 width="100%" align=center tabindex=-1>

</span></font></div>

<p class=MsoNormal><b><font size=2 color=black face=Tahoma><span lang=EN-US
style='font-size:10.0pt;font-family:Tahoma;color:windowtext;font-weight:bold'>From:</span></font></b><font
size=2 color=black face=Tahoma><span lang=EN-US style='font-size:10.0pt;
font-family:Tahoma;color:windowtext'> owner-ferret_users@xxxxxxxx [mailto:owner-ferret_users@xxxxxxxx]
<b><span style='font-weight:bold'>On Behalf Of </span></b>Steve Hankin<br>
<b><span style='font-weight:bold'>Sent:</span></b> Tuesday, 14 December 2010
06:16<br>
<b><span style='font-weight:bold'>To:</span></b> Patrick.Brockmann@xxxxxx<br>
<b><span style='font-weight:bold'>Cc:</span></b> oar.pmel.ferret_users@xxxxxxxx<br>
<b><span style='font-weight:bold'>Subject:</span></b> Re: [ferret_users]
conform variables and how to catch common sizes of region</span></font><font
color=black><span lang=EN-US style='color:windowtext'><o:p></o:p></span></font></p>

</div>

<p class=MsoNormal><font size=3 color=black face="Times New Roman"><span
style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></font></p>

<p class=MsoNormal><font size=3 color=black face="Times New Roman"><span
style='font-size:12.0pt'><br>
<br>
On 12/13/2010 8:01 AM, <a rel="nofollow" href="mailto:Patrick.Brockmann@xxxxxx">Patrick.Brockmann@xxxxxx</a>
wrote: <o:p></o:p></span></font></p>

<pre wrap=""><font size=2 color=black face="Courier New"><span
style='font-size:10.0pt'>Hi all,<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>Is there a way to catch common sizes of region<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>between variables ?<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>Here is an example and its error message.<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>yes? use piControl2_18000101_23391231_1M_tops.nc<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>yes? use piControl2_18000101_20491231_1M_topl.nc<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>yes? let A=tops+topl<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>yes? list A[i=30,j=40]<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'> **ERROR: inconsistent sizes of data regions: T axis<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TOPL[D=2] has 3000 points (L=0001:3000)<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; _expression_ has 6480 points (L=0001:6480)<o:p></o:p></span></font></pre>

<p class=MsoNormal><font size=3 color=black face="Times New Roman"><span
style='font-size:12.0pt'><br>
Hi Patrick,<br>
<br>
It seems like the issue is not just about &quot;sizes&quot;;&nbsp; it is about
the coordinate ranges and values.&nbsp; Theses two time axes could cover
different time ranges and could potentially have different resolutions or
offsets in their time coordinates.&nbsp; Even if you did not suffer the error
above, this _expression_ should give you an &quot;ambiguous coordinates&quot;
error message.&nbsp; (I don't see how the syntax can work as-is, unless the
_1M_topl.nc dataset contains both tops and topl variables.&nbsp;&nbsp; Doesn't
the _expression_ need to be &quot;</span></font><tt><font size=2
face="Courier New"><span style='font-size:10.0pt'>let A=tops[d=1]+topl</span></font></tt>&quot;?)<br>
<br>
The easy answer is to arbitrarily say that one of the two variables -- say
whatever is from the first dataset that gets initialized -- is the
authoritative time range. Then you can say<o:p></o:p></p>

<pre wrap=""><font size=2 color=black face="Courier New"><span
style='font-size:10.0pt'>let A=tops+topl[gt=tops[d=1]]<o:p></o:p></span></font></pre>

<p class=MsoNormal><font size=3 color=black face="Times New Roman"><span
style='font-size:12.0pt'>and your problem should be solved.<br>
<br>
What is the &quot;right&quot; solution?&nbsp; My guess is that in the situation
above there is a region of time over which the two axes overlap perfectly (have
identical time step coordinates).&nbsp;&nbsp; If so then the &quot;right&quot;
solution might look something like this:<o:p></o:p></span></font></p>

<pre wrap=""><font size=2 color=black face="Courier New"><span
style='font-size:10.0pt'>use piControl2_18000101_23391231_1M_tops.nc<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>use piControl2_18000101_20491231_1M_topl.nc<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>DEFINE AXIS/<b><span
style='font-weight:bold'>OVERLAP</span></b>/T tnew = tops[d=1], topl[d=2]<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>let A=tops[D=1,gt=tnew]+topl[gt=tnew]<o:p></o:p></span></font></pre><pre
wrap=""><font size=2 color=black face="Courier New"><span style='font-size:
10.0pt'>This command could only be implemented with code changes in Ferret.&nbsp; But I expect that you could achieve the desired goal by creating a grid-changing external function that performed the sum.&nbsp; The function would create the new time, overlap-region axis.<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; - Steve<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>P.S. &nbsp;Could also implement variations on this theme such as<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>&nbsp;&nbsp;&nbsp; DEFINE AXIS/<b><span
style='font-weight:bold'>SUPERSET</span></b>/T tnew = tops[d=1], topl[d=2]<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>How useful would these be?<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre>

<p class=MsoNormal><font size=3 color=black face="Times New Roman"><span
style='font-size:12.0pt'><br>
<br>
<br>
<o:p></o:p></span></font></p>

<pre wrap=""><font size=2 color=black face="Courier New"><span
style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>I understand perfectly that the 2 components of the variable A<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>are not conform but how to get the result of this error to process<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>their common size of region on T axis, here L=0001:3000<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>and then be able to do for example<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>yes? save/l=0001:3000 A<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>Note that I research the most general way to do this and<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>so I cannot &quot;simply&quot; get lend from topl and tops and calculate<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>the minimum because variable A may be the combinaison of n variables.<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>Let me know If I have been clear enough and if there is<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>a workaround I have missed.<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'>Patrick<o:p></o:p></span></font></pre><pre><font
size=2 color=black face="Courier New"><span style='font-size:10.0pt'><o:p>&nbsp;</o:p></span></font></pre></div>




</td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00759" href="msg00759.html">Re: [ferret_users] conform variables and how to catch common sizes of region</a></strong>
<ul><li><em>From:</em> Steve Hankin</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00759.html">Re: [ferret_users] conform variables and how to catch common sizes of region</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00761.html">[ferret_users] N/A</a></strong>
</li>

</UL>
<center>[<a href="msg00759.html">Thread Prev</a>][<a href="msg00761.html">Thread Next</a>][<A HREF="threads.html#00760">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
