<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Interpolation on co&#45;range chart -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 18 Oct 2010 10:27:47 &#45;0700 -->
<!--X-Message-Id: 4CBC8393.7060400@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: AANLkTikFob9=tZjO&#45;z6&#45;OYuXZPfbK1+iOwE=+DUz9oDO@mail.gmail.com -->
<!--X-Reference: 4CB734C3.9000000@noaa.gov -->
<!--X-Reference: AANLkTi=x+0bfmRRgFU9BEXvh_Gd5UwzBO6QELq8NpN1J@mail.gmail.com -->
<!--X-Reference: 4CB88FF4.3070807@noaa.gov -->
<!--X-Reference: AANLkTimyiMniUEStF4r6kuYEogG5Z6&#45;pOh6oGN1g9bO+@mail.gmail.com -->
<!--X-Derived: gifq7oS71UFah.gif -->
<!--X-Derived: gifXRaoe7jB2r.gif -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Interpolation on co-range chart</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00628.html">Thread Prev</a>][<a href="msg00621.html">Thread Next</a>][<A HREF="threads.html#00629">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Interpolation on co-range chart</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;Yu, Hao-Cheng&quot; &lt;<a href="mailto:danish.url@DOMAIN.HIDDEN">danish.url@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Interpolation on co-range chart</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 18 Oct 2010 10:27:47 -0700</li>
<li>Cc: Ferret mailing list &lt;<a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="mailto:AANLkTimyiMniUEStF4r6kuYEogG5Z6-pOh6oGN1g9bO%2B@DOMAIN.HIDDEN">AANLkTimyiMniUEStF4r6kuYEogG5Z6-pOh6oGN1g9bO+@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:AANLkTikFob9%3DtZjO-z6-OYuXZPfbK1%2BiOwE%3D%2BDUz9oDO@DOMAIN.HIDDEN">AANLkTikFob9=tZjO-z6-OYuXZPfbK1+iOwE=+DUz9oDO@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4CB734C3.9000000@DOMAIN.HIDDEN">4CB734C3.9000000@xxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTi%3Dx%2B0bfmRRgFU9BEXvh_Gd5UwzBO6QELq8NpN1J@DOMAIN.HIDDEN">AANLkTi=x+0bfmRRgFU9BEXvh_Gd5UwzBO6QELq8NpN1J@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4CB88FF4.3070807@DOMAIN.HIDDEN">4CB88FF4.3070807@xxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTimyiMniUEStF4r6kuYEogG5Z6-pOh6oGN1g9bO%2B@DOMAIN.HIDDEN">AANLkTimyiMniUEStF4r6kuYEogG5Z6-pOh6oGN1g9bO+@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">

  
  
    Hi Dan- <br>
    Writing back now to the List as well.<br>
    <br>
    It is the data values themselves which cross from 360 to 0, not the
    coordinate axis as I thought when I first answered.<br>
    <br>
    Thank you for the pictures and the data.&nbsp; I don't know that any
    interpolation method would work well on this data field, with the
    abrupt change from low to high values. If it is to make smooth
    contours then it will do the kind of thing it is doing now, filling
    in something like 20 color values along the discontinuity, but here
    you probably don't want to fill across that gap.<br>
    <br>
    The data values are these, changing abruptly from values under near
    0 to values near 360. First make a shade plot to see what we're
    looking at.<br>
    <br>
    <tt>yes? list pha<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; VARIABLE : PHA<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FILENAME : M2P_test.nc<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SUBSET&nbsp;&nbsp; : 6 by 6 points (LONGITUDE-LATITUDE)<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Z&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 1<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; T&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 2<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 121.63E121.75E121.88E122E&nbsp;&nbsp; 122.13E122.25E<br>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6<br>
      &nbsp;25.63N / 6:&nbsp;&nbsp; 53.1&nbsp;&nbsp; 46.0&nbsp;&nbsp; 36.3&nbsp;&nbsp; 26.5&nbsp;&nbsp; 13.9&nbsp;&nbsp;&nbsp; 2.0<br>
      &nbsp;25.5N&nbsp; / 5:&nbsp;&nbsp; 57.9&nbsp;&nbsp; 49.1&nbsp;&nbsp; 34.8&nbsp;&nbsp; 21.0&nbsp;&nbsp;&nbsp; 3.9&nbsp; 350.1<br>
      &nbsp;25.38N / 4:&nbsp;&nbsp; 63.2&nbsp;&nbsp; 48.3&nbsp;&nbsp; 27.7&nbsp;&nbsp; 10.2&nbsp; 353.3&nbsp; 340.7<br>
      &nbsp;25.25N / 3:&nbsp;&nbsp; 66.6&nbsp;&nbsp; 47.7&nbsp;&nbsp; 22.9&nbsp; 357.2&nbsp; 341.9&nbsp; 331.6<br>
      &nbsp;25.13N / 2:&nbsp;&nbsp; ....&nbsp;&nbsp; ....&nbsp;&nbsp;&nbsp; 8.3&nbsp; 337.0&nbsp; 326.9&nbsp; 321.6<br>
      &nbsp;25N&nbsp;&nbsp;&nbsp; / 1:&nbsp;&nbsp; ....&nbsp;&nbsp; ....&nbsp;&nbsp; ....&nbsp; 314.1&nbsp; 317.5&nbsp; 317.9<br>
      <br>
      yes? shade pha<br>
      <br>
    </tt><img alt="the shade plot"
      src="gifq7oS71UFah.gif" width="541"
      height="466"><br>
    <tt>&nbsp;&nbsp; yes? ! and here is the FILL plot.<br>
      &nbsp;&nbsp; yes? fill pha</tt><br>
    <img alt="the fill plot" src="gifXRaoe7jB2r.gif"
      width="541" height="466"><br>
    <br>
    The data in fact does change as shown in the plot, but for this data
    we don't want to be interpolating between 0 and 360.&nbsp; One workaround
    is to define two variables, one on each side of the break at 360.<br>
    <br>
    <tt>&nbsp;&nbsp; yes?
      let/units="`pha,return=units`"/title="`pha,return=title`" pha1 =
      if pha lt 70 then pha<br>
      &nbsp;&nbsp; yes? fill/lev=(0,360,10) pha1<br>
      <br>
      &nbsp;&nbsp; yes? let/units="`pha,return=units`"/title="`pha,return=title`"
      pha2 = if pha gt 300 then pha<br>
      &nbsp;&nbsp; yes? fill/over/nolab/lev pha2</tt><br>
    <br>
    On a plot over a larger area, the blank white portion would not look
    quite so large.&nbsp; Putting a SHADE plot underneath the FILL is another
    way to handle this, so<br>
    <br>
    <tt>&nbsp;&nbsp; yes? fill pha<br>
      &nbsp;&nbsp; yes? </tt><tt>fill/over/nolab/lev pha1<br>
    </tt><tt>&nbsp;&nbsp; yes? fill/over/nolab/lev pha2<br>
      <br>
    </tt>Ansley<br>
    <br>
    On 10/15/2010 5:49 PM, Yu, Hao-Cheng wrote:
    <blockquote
      cite=""
      type="cite">Hi Ansley,<br>
      <br>
      Thanks for your suggestion.<br>
      I use "shade" to plot the figure which didn't shows such
      interpolation error.<br>
      Please see the attachment gif (M2P_cross3.gif).<br>
      I also attach the data netcdf file. <br>
      If I try to use "contour",&nbsp; the result shows like M2P_cross4.gif,
      there are lots of contour lines between the region across 0(360)
      degree.<br>
      <br>
      Regards, dan<br>
      <br>
      <div class="gmail_quote">2010/10/16 Ansley Manke <span dir="ltr">&lt;<a rel="nofollow"
            moz-do-not-send="true" href="mailto:Ansley.B.Manke@xxxxxxxx">Ansley.B.Manke@xxxxxxxx</a>&gt;</span><br>
        <blockquote class="gmail_quote" style="margin: 0pt 0pt 0pt
          0.8ex; border-left: 1px solid rgb(204, 204, 204);
          padding-left: 1ex;">
          <div bgcolor="#ffffff" text="#000000"> Hi -<br>
            Thank you for the image. The cancel axis/modulo does not
            have anything to do with this, so you can remove that from
            your script. My first suggestion is to look at the data with
            a SHADE plot.&nbsp; It looks like there is a strong gradient in
            the data and I wonder if that is causing the fill algorithm
            to have problems.&nbsp; We might be able to improve the result of
            the fill with the right choice of color levels.<br>
            <font color="#888888"> <br>
              Ansley</font>
            <div>
              <div class="h5"><br>
                <br>
                <br>
                On 10/14/2010 10:31 PM, Yu, Hao-Cheng wrote:
                <blockquote type="cite">Hi Ansley,
                  <div><br>
                  </div>
                  <div>I attach a gif file which meet the region cross 0
                    degree.</div>
                  <div>However, I use "fill" not "contour".</div>
                  <div>And I use the following script:</div>
                  <div><br>
                  </div>
                  <div>
                    <div>fill/l=2/tit="M2 Phase"/set pha</div>
                    <div>go remove_logo</div>
                    <div>go unlabel 3</div>
                    <div>go unlabel 4</div>
                    <div>go unlabel 5</div>
                    <div>go unlabel 6</div>
                    <div>go unlabel 7</div>
                    <div>go margins 0.2 " " " " " "</div>
                    <div>cancel axis/modulo `pha,return=xaxis`</div>
                    <div>ppl fill</div>
                    <div><br>
                    </div>
                    <div>pha is a 2D variable contains&nbsp;global&nbsp;M2 phase
                      data.</div>
                    <div><br>
                    </div>
                    <div>The figure seems still contain some error
                      interpolations.</div>
                    <div>Could you show me how to avoid this?</div>
                    <div><br>
                    </div>
                    <div>Regards, dan</div>
                    <br>
                    <div class="gmail_quote">2010/10/15 Ansley Manke <span
                        dir="ltr">&lt;<a rel="nofollow" moz-do-not-send="true"
                          href="mailto:Ansley.B.Manke@xxxxxxxx"
                          target="_blank">Ansley.B.Manke@xxxxxxxx</a>&gt;</span><br>
                      <blockquote class="gmail_quote" style="margin: 0pt
                        0pt 0pt 0.8ex; border-left: 1px solid rgb(204,
                        204, 204); padding-left: 1ex;">&nbsp;Hi Dan,<br>
                        If you do not want Ferret to treat a longitude
                        axis as a modulo axis, you can remove the modulo
                        property from the axis<br>
                        <br>
                        yes? cancel axis/modulo `var,return=xaxis`<br>
                        <br>
                        If this doesn't answer your question, perhaps
                        you could send an image showing the contour
                        lines that you do not want, and we can figure
                        out what is happening.<br>
                        <font color="#888888"> <br>
                          Ansley</font>
                        <div>
                          <div><br>
                            <br>
                            On 10/13/2010 9:15 PM, Yu, Hao-Cheng wrote:<br>
                            <blockquote class="gmail_quote"
                              style="margin: 0pt 0pt 0pt 0.8ex;
                              border-left: 1px solid rgb(204, 204, 204);
                              padding-left: 1ex;"> Dear ferret users,<br>
                              <br>
                              I try to plot co-range chart with global
                              tide data.<br>
                              I notice ferret interpolated the values
                              when the degree values across 360 (or 0).<br>
                              For example, the region between 5 and 355,
                              ferret will interpolate to 180. (Should be
                              0)<br>
                              This will cause lots of contour line in
                              this region, and give wrong interpolation
                              values.<br>
                              Is there anyone do such interpolation and
                              avoid error like this?<br>
                              <br>
                              <br>
                              Sincerely, dan<br>
                            </blockquote>
                          </div>
                        </div>
                      </blockquote>
                    </div>
                    <br>
                  </div>
                </blockquote>
              </div>
            </div>
          </div>
        </blockquote>
      </div>
      <br>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00620" href="msg00620.html">[ferret_users] Interpolation on co-range chart</a></strong>
<ul><li><em>From:</em> Yu, Hao-Cheng</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00628.html">Re: [ferret_users] Interpolation on co-range chart</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00621.html">[ferret_users] absolute time</a></strong>
</li>

</UL>
<center>[<a href="msg00628.html">Thread Prev</a>][<a href="msg00621.html">Thread Next</a>][<A HREF="threads.html#00629">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
