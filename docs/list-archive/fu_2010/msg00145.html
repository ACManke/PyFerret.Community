<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Re: netCDF4, netCDF&#45;4 -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 22 Feb 2010 11:56:49 &#45;0800 -->
<!--X-Message-Id: 4B82E185.1040706@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 4B829252.6080300@cea.fr -->
<!--X-Reference: 4B82D3CA.7050600@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Re: netCDF4, netCDF-4</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00144.html">Thread Prev</a>][<a href="msg00146.html">Thread Next</a>][<A HREF="threads.html#00145">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Re: netCDF4, netCDF-4</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Ansley Manke &lt;<a href="mailto:Ansley.B.Manke@DOMAIN.HIDDEN">Ansley.B.Manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Re: netCDF4, netCDF-4</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 22 Feb 2010 11:56:53 -0800</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="mailto:4B82D3CA.7050600@DOMAIN.HIDDEN">4B82D3CA.7050600@xxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:4B829252.6080300@DOMAIN.HIDDEN">4B829252.6080300@xxxxxx</a>&gt; &lt;<a href="mailto:4B82D3CA.7050600@DOMAIN.HIDDEN">4B82D3CA.7050600@xxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Thunderbird 2.0.0.23 (Windows/20090812)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">



Just a typo in my message above--&nbsp; It should have read <br>
<br>
&nbsp;&nbsp; "These executables are built with gfortran rather than g77..."<br>
<br>
Ansley<br>
<br>
Ansley Manke wrote:
<blockquote cite="" type="cite">
  
  
Hi Patrick,<br>
Yes, we have been working with Unidata as they completed the work on
netcdf4.1. We have been testing Ferret with the netcdf-4 features,
adding syntax to write netcdf-4 files with compression and chunking,
and testing the OPeNDAP capabilities that are included in the netcdf4.x
library. We have built Ferret with netcdf4.1, and you can get test
versions of Ferret v6.43(beta) with netcdf4.1 here:<br>
  <br>
&nbsp;&nbsp; <a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="ftp://ftp.pmel.noaa.gov/ferret/pub/ferret_netcdf-4.1/">ftp://ftp.pmel.noaa.gov/ferret/pub/ferret_netcdf-4.1/</a><br>
  <font face="Times New Roman, Times, serif"><br>
Your feedback is welcome!&nbsp; There are still a few details to resolve
about our build with netcdf4.1, and just today I see there's a
message about a patch needed for HDF4.1, but we hope to make an
official release soon; this will be Ferret v6.5.<br>
  <br>
  </font><font face="Times New Roman, Times, serif">The tar files
contain
the Ferret executable, a note about the builds,
and a file called ferret_netcdf4.txt, which contains the following
short document about the syntax for using Ferret with netcdf-4 -I've
also included that document below so you can see what the syntax looks
like. The executables tar files also contain external function </font><font
 face="Times New Roman, Times, serif"> .so files </font><font
 face="Times New Roman, Times, serif">and gksm2ps, so these are
complete executables files that can be installed using the regular
Ferret install procedure.<br>
  <br>
These executables are built with gfortran rather than gksm2ps.&nbsp; This
means that anybody who has their own custom external functions will
need to rebuild them with gfortran/gcc instead of g77.&nbsp; Also, the
32-bit linux executable is now built on RedHat 5.&nbsp; This means that it
will NOT run on RedHat 3.&nbsp; For the 32-bit version, you will need to
re-install the environment as the font files from previous releases
will not work with this executable.<br>
  <br>
-Ansley<br>
  <br>
Ferret syntax for working with netcdf4 files.<br>
  <br>
1. A Ferret symbol is set at startup: NETCDF_VERSION<br>
This queries the netCDF-4 call nc_inq_libvers, and reports back a
string like<br>
  <br>
&nbsp;&nbsp; yes? SHOW SYMBOL NETCDF_VERSION<br>
&nbsp;&nbsp; NETCDF_VERSION = "4.1 of Feb&nbsp; 5 2010 16:32:49 $"<br>
  <br>
  <br>
2. Netcdf4 formatted files are read by Ferret with no intervention from
the user,<br>
except possibly to adjust the chunk cache for better performance.<br>
  <br>
  <br>
3. SHOW NCCACHE&nbsp;&nbsp;&nbsp; Lists the current settings for the CACHE<br>
  <br>
Chunk cache size is listed in mbytes. The current default set by the
netcdf4.1 <br>
library is 4.194304 bytes. <br>
  <br>
  <br>
4. SET NCCACHE to change the chunk cache settings from the defaults<br>
  <br>
SET NCCACHE/SIZE/NELEMS/PREEMPT Sets the chunk cache:<br>
  <br>
&nbsp;&nbsp;&nbsp; /SIZE=&nbsp;&nbsp; new size in mb<br>
&nbsp;&nbsp;&nbsp; /NELEMS&nbsp; see the netcdf4 documentation<br>
&nbsp;&nbsp;&nbsp; /PREEPMT see the netcdf4 documentation<br>
  <br>
  <br>
5. CANCEL NCCACHE&nbsp; restores the default settings for the chunk cache<br>
  <br>
  <br>
For example,<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp; yes? SHOW NCCACHE<br>
&nbsp;&nbsp; Current NCDF Chunk Cache size 4.1943 MB, n_elems = 1009, preemption
= 75<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp; yes? SET NCCACHE/SIZ=16<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp; yes? SHOW NCCACHE<br>
&nbsp;&nbsp; Current NCDF Chunk Cache size 16 MB, n_elems = 1009, preemption = 75<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp; yes? CANCEL NCCACHE<br>
&nbsp;&nbsp;&nbsp; Restoring default chunk cache settings<br>
&nbsp;&nbsp; <br>
&nbsp;&nbsp; yes? SHO NCCACHE<br>
&nbsp;&nbsp; Current NCDF Chunk Cache size 4.1943 MB, n_elems = 1009, preemption
= 75<br>
  <br>
  <br>
6. New qualifiers on SET LIST, to make settings for subsequent SAVE
commands:<br>
  <br>
&nbsp;&nbsp; SET LIST/NCFORMAT/ENDIAN/DEFLATE/SHUFFLE&nbsp; <br>
  <br>
&nbsp;&nbsp;&nbsp; /NCFORMAT = netcdf4, classic, 4, 3, 64BIT_OFFSET. (4=netcdf4,
3=classic)<br>
&nbsp;&nbsp;&nbsp; /ENDIAN&nbsp;&nbsp; = big, little, native<br>
&nbsp;&nbsp;&nbsp; /DEFLATE&nbsp; = deflate level, 0 through 9 (1 is recommended for
compression)<br>
&nbsp;&nbsp;&nbsp; /SHUFFLE&nbsp; = 0 or 1<br>
  <br>
  <br>
6a. (needed but not implemented yet, CANCEL LIST/... to restore default
settings)<br>
  <br>
  <br>
7. New qualifiers on LIST/FORMAT=CDF (e.g. SAVE). These can be set per
variable.<br>
  <br>
SAVE/NCFORMAT/DEFLATE/SHUFFLE/ENDIAN/XCHUNK/YCHUNK/ZCHUNK/TCHUNK<br>
  <br>
&nbsp;&nbsp;&nbsp; /NCFORMAT = netcdf4, classic, 4, 3, 64BIT_OFFSET. (4=netcdf4,
3=classic)<br>
&nbsp;&nbsp;&nbsp; /ENDIAN&nbsp;&nbsp; = big, little, native<br>
&nbsp;&nbsp;&nbsp; /DEFLATE&nbsp; = deflate level, 0 through 9; if specified with no
argument,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; deflate is set to 1. (1 is recommended for compression)<br>
&nbsp;&nbsp;&nbsp; /SHUFFLE&nbsp; = 0 or 1; if /shuffle with no argument, it is set to 1<br>
&nbsp;&nbsp;&nbsp; /XCHUNK/YCHUNK/ZCHUNK/TCHUNK = chunk sizes in each index direction<br>
  <br>
For example,<br>
  <br>
&nbsp;&nbsp; yes? USE ocean_atlas_monthly<br>
&nbsp;&nbsp; yes? ! save with default chunk sizes<br>
&nbsp;&nbsp; yes? SAVE/FILE=deflate.nC/CLOBBER/NCFORMAT=4/DEFLATE/SHUFFLE temp<br>
  <br>
&nbsp;&nbsp; yes? ! or specify chunks<br>
&nbsp;&nbsp; yes? SAVE/FILE=deflate.nc/CLOBBER/NCFORMAT=4/DEFLATE=1\<br>
/XCHUNK=360/YCHUNK=180/ZCHUNK=1/TCHUNK=1 temp<br>
  <br>
  </font><br>
  <br>
Brockmann Patrick wrote:
  <blockquote cite="" type="cite">Hi all, <br>
    <br>
Is there a netCDF4 compliant release of ferret already available ? <br>
We will very soon start to produce the CMIP5 output in netCDF4 format
and <br>
work without ferret is simply not imaginable ! <br>
    <br>
Let me know if I have missed something about this subject. <br>
Only mail has been found <br>
    <a rel="nofollow" moz-do-not-send="true" class="moz-txt-link-freetext"
 href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2009/msg00157.html">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2009/msg00157.html</a>
    <br>
    <br>
Patrick <br>
    <br>
  </blockquote>
</blockquote>


</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00143" href="msg00143.html">[ferret_users] netCDF4, netCDF-4</a></strong>
<ul><li><em>From:</em> Brockmann Patrick</li></ul></li>
<li><strong><a name="00144" href="msg00144.html">[ferret_users] Re: netCDF4, netCDF-4</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00144.html">[ferret_users] Re: netCDF4, netCDF-4</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00146.html">[ferret_users] TXMNTC</a></strong>
</li>

</UL>
<center>[<a href="msg00144.html">Thread Prev</a>][<a href="msg00146.html">Thread Next</a>][<A HREF="threads.html#00145">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
