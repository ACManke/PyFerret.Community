<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Question to CURV_TO_RECT_MAP, CURV_TO_RECT (remapping) -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 5 Oct 2010 13:37:49 &#45;0700 -->
<!--X-Message-Id: 4CAB8C9C.1030003@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: AANLkTim+eN8RvAecqKPhdvMMT1rL9cH5j1S54LN5g9VJ@mail.gmail.com -->
<!--X-Reference: 4CAB765C.8060808@noaa.gov -->
<!--X-Reference: AANLkTi=dJa0PO=ySoC29&#45;G2fPKMcjKe75upe7FWL8DVX@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Question to CURV_TO_RECT_MAP, CURV_TO_RECT (remapping)</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00583.html">Thread Prev</a>][<a href="msg00586.html">Thread Next</a>][<A HREF="threads.html#00584">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Question to CURV_TO_RECT_MAP, CURV_TO_RECT (remapping)</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Szymon Roziewski &lt;<a href="mailto:szymon.roziewski@DOMAIN.HIDDEN">szymon.roziewski@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Question to CURV_TO_RECT_MAP, CURV_TO_RECT (remapping)</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 05 Oct 2010 13:37:48 -0700</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="mailto:AANLkTi%3DdJa0PO%3DySoC29-G2fPKMcjKe75upe7FWL8DVX@DOMAIN.HIDDEN">AANLkTi=dJa0PO=ySoC29-G2fPKMcjKe75upe7FWL8DVX@xxxxxxxxxxxxxx</a>&gt;</li>
<li>References: &lt;<a href="mailto:AANLkTim%2BeN8RvAecqKPhdvMMT1rL9cH5j1S54LN5g9VJ@DOMAIN.HIDDEN">AANLkTim+eN8RvAecqKPhdvMMT1rL9cH5j1S54LN5g9VJ@xxxxxxxxxxxxxx</a>&gt; &lt;<a href="mailto:4CAB765C.8060808@DOMAIN.HIDDEN">4CAB765C.8060808@xxxxxxxx</a>&gt; &lt;<a href="mailto:AANLkTi%3DdJa0PO%3DySoC29-G2fPKMcjKe75upe7FWL8DVX@DOMAIN.HIDDEN">AANLkTi=dJa0PO=ySoC29-G2fPKMcjKe75upe7FWL8DVX@xxxxxxxxxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.2.9) Gecko/20100915 Thunderbird/3.1.4</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#ffffff" style="background-color: #ffffff; color: #000000; "><font color="#000000">

  
  
    Hi -<br>
    Thanks for writing back. It sounds like we need an addition to the
    documentation.<br>
    <br>
    Ansley<br>
    <br>
    On 10/5/2010 12:19 PM, Szymon Roziewski wrote:
    <blockquote
      cite=""
      type="cite">Thank You for response Ansley.<br>
      Yes, You are right!<br>
      I defined a rotated grid (x=-5.666667:5.25,y=-2.0:10.0) so this
      grid is not a subset the initial curvilinear grid.<br>
      <br>
      <div class="gmail_quote">2010/10/5 Ansley Manke <span dir="ltr">&lt;<a rel="nofollow"
            moz-do-not-send="true" href="mailto:Ansley.B.Manke@xxxxxxxx">Ansley.B.Manke@xxxxxxxx</a>&gt;</span><br>
        <blockquote class="gmail_quote" style="border-left: 1px solid
          rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left:
          1ex;">&nbsp;Hi -<br>
          It should not be a problem to use a small subset of the range
          of the curvilinear grid. What is the approximate resolution of
          the curvilinear grid? If there are only a few points on the
          curvilinear grid and you want to regrid to this very fine
          output grid, I expect your results might not be very good.<br>
          <br>
          Are the longitude curvilinear coordinates also expressed as
          East longitudes, so that they contain the range
          x=-5.666667:5.25 ? &nbsp;If not then use values for the longitudes
          in your axis definition that are on the same branch of modulo
          longitudes as what is in the curvilinear coordinate variable.
          You have probably done this, but it's always a good idea to
          make plots of the data in its curvilinear form to be sure you
          are reading it correctly.
          <div>
            <div class="h5"><br>
              <br>
              <br>
              On 10/5/2010 11:03 AM, Szymon Roziewski wrote:<br>
              <blockquote class="gmail_quote" style="border-left: 1px
                solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex;
                padding-left: 1ex;">
                Hi there,<br>
                <br>
                I have problem with an applying of functions
                &nbsp;CURV_TO_RECT_MAP and then CURV_TO_RECT.<br>
                Curvilinear grid reffers to greater area than the output
                rectilinear grid - maybe this issue causes problem.<br>
                <br>
                ! making grid for curvilinear coordinates - lon and lat<br>
                <br>
                DEFINE AXIS/x=1:448:1/unit=degree xaxis<br>
                DEFINE AXIS/y=1:615:1/unit=degree yaxis<br>
                DEFINE GRID/x=xaxis/y=yaxis gridlonlat<br>
                <br>
                !loading curvilinear coords<br>
                <br>
                FILE/VARIABLES=clon_in/COLUMNS=448/GRID=gridlonlat
                "/home/szymon/WAM/CHECK/um_c3_lon_448x615.txt"<br>
                FILE/VARIABLES=clat_in/COLUMNS=448/GRID=gridlonlat
                "/home/szymon/WAM/CHECK/um_c3_lat_448x615.txt"<br>
                <br>
                !making an output grid 132x145<br>
                <br>
                define
                axis/x=-5.666666667:5.25:0.083333333/modulo/units=degrees
                xax<br>
                def axis/y=-2.0:10.0:0.083333333/units=degrees yax<br>
                let grid_out = y[gy=yax] + x[gx=xax]<br>
                <br>
                let map = CURV_TO_RECT_MAP(clon_in[d=1], clat_in[d=2],
                grid_out, 10)<br>
                save/clobber/file=curv_map_UM_TO_ICM.nc map<br>
                Everything was done without any problems.<br>
                <br>
                Then next step is to use this variable data for
                remapping wind field to smaller rectilinear grid which
                reffers to the area that is contained in greater
                curvilinear area.<br>
                <br>
                DEFINE AXIS/x=1:448:1/unit=degree xaxis<br>
                DEFINE AXIS/y=1:615:1/unit=degree yaxis<br>
                <br>
                DEFINE GRID/x=xaxis/y=yaxis gridlonlat<br>
                <br>
                !loading &nbsp;wind which reffers to curvilinear grid.<br>
                <br>
                file/var=wlon/grid=gridlonlat/format=stream/type=r4/swap
"/home/szymon/WAM/CHECK/03225_2010092100+03000000c3hs000000000000000"<br>
                file/var=wlat/grid=gridlonlat/format=stream/type=r4/swap
"/home/szymon/WAM/CHECK/03226_2010092100+03000000c3hs000000000000000"<br>
                <br>
                ! using mapping data<br>
                use curv_map_UM_TO_ICM.nc<br>
                <br>
                !remapping<br>
                let wlon_icm = curv_to_rect(wlon[d=1], map[d=3])<br>
                let wlat_icm = curv_to_rect(wlat[d=2], map[d=3])<br>
                <br>
                vector/over/title="WIND"/length=15/xskip=10/yskip=10
                wlon_icm, wlat_icm<br>
                !unfortunately there's no any data for plotting..<br>
                frame/file=interpolate.gif<br>
                <br>
                these are data sets:<br>
                <br>
                &nbsp; &nbsp; currently SET data sets:<br>
                &nbsp; &nbsp;1&gt;
                /home/szymon/WAM/CHECK/03225_2010092100+03000000c3hs000000000000000<br>
                &nbsp;name &nbsp; &nbsp; title &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I &nbsp; &nbsp; &nbsp; &nbsp; J
                &nbsp; &nbsp; &nbsp; &nbsp; K &nbsp; &nbsp; &nbsp; &nbsp; L<br>
                &nbsp;WLON &nbsp; &nbsp; WLON &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1:448 &nbsp; &nbsp;
                1:615 &nbsp; &nbsp; ... &nbsp; &nbsp; &nbsp; ...<br>
                <br>
                &nbsp; &nbsp;2&gt;
                /home/szymon/WAM/CHECK/03226_2010092100+03000000c3hs000000000000000<br>
                &nbsp;name &nbsp; &nbsp; title &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I &nbsp; &nbsp; &nbsp; &nbsp; J
                &nbsp; &nbsp; &nbsp; &nbsp; K &nbsp; &nbsp; &nbsp; &nbsp; L<br>
                &nbsp;WLAT &nbsp; &nbsp; WLAT &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1:448 &nbsp; &nbsp;
                1:615 &nbsp; &nbsp; ... &nbsp; &nbsp; &nbsp; ...<br>
                <br>
                &nbsp; &nbsp;3&gt; ./curv_map_UM_TO_ICM.nc &nbsp;(default)<br>
                &nbsp;name &nbsp; &nbsp; title &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; I &nbsp; &nbsp; &nbsp; &nbsp; J
                &nbsp; &nbsp; &nbsp; &nbsp; K &nbsp; &nbsp; &nbsp; &nbsp; L<br>
                &nbsp;MAP &nbsp; &nbsp; &nbsp;CURV_TO_RECT_MAP(CLON_IN[D=1], &nbsp; 1:132 &nbsp; &nbsp;
                1:145 &nbsp; &nbsp; 1:4 &nbsp; &nbsp; &nbsp; 1:3<br>
                <br>
                How can I work around that issue?<br>
                <br>
                -- <br>
                With best regards,<br>
                Simon<br>
              </blockquote>
            </div>
          </div>
        </blockquote>
      </div>
      <br>
      <br clear="all">
      <br>
      -- <br>
      Z wyrazami szacunku,<br>
      Szymon Roziewski<br>
    </blockquote>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00578" href="msg00578.html">[ferret_users] Question to CURV_TO_RECT_MAP, CURV_TO_RECT (remapping)</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
<li><strong><a name="00582" href="msg00582.html">Re: [ferret_users] Question to CURV_TO_RECT_MAP, CURV_TO_RECT (remapping)</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00583" href="msg00583.html">Re: [ferret_users] Question to CURV_TO_RECT_MAP, CURV_TO_RECT (remapping)</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00583.html">Re: [ferret_users] Question to CURV_TO_RECT_MAP, CURV_TO_RECT (remapping)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00586.html">[ferret_users] problems for concatenate several netcdf files</a></strong>
</li>

</UL>
<center>[<a href="msg00583.html">Thread Prev</a>][<a href="msg00586.html">Thread Next</a>][<A HREF="threads.html#00584">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
