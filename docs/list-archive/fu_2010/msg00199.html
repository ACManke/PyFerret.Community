<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [ferret_users] Memory question -->
<!--X-From-R13: [nepb Egrvanpure <fgrvanpureNpyvzngr.havor.pu> -->
<!--X-Date: Fri, 19 Mar 2010 09:39:06 &#45;0700 -->
<!--X-Message-Id: 4BA3A8A1.9040305@climate.unibe.ch -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 931521BA&#45;6CB3&#45;4C20&#45;AAD8&#45;F7B53FCB1287@mit.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Memory question</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00197.html">Thread Prev</a>][<a href="msg00200.html">Thread Next</a>][<A HREF="threads.html#00199">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Memory question</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Jonathan Winter &lt;<a href="mailto:jwinter@DOMAIN.HIDDEN">jwinter@xxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Memory question</strong></li>
<li><strong>From</strong>: <strong>Marco Steinacher &lt;<a href="mailto:steinacher@DOMAIN.HIDDEN">steinacher@xxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 19 Mar 2010 17:38:57 +0100</li>
<li>Cc: <a href="mailto:oar.pmel.ferret_users@DOMAIN.HIDDEN">oar.pmel.ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="mailto:931521BA-6CB3-4C20-AAD8-F7B53FCB1287@DOMAIN.HIDDEN">931521BA-6CB3-4C20-AAD8-F7B53FCB1287@xxxxxxx</a>&gt;</li>
<li>Openpgp: id=62937F7F;	url=http://www.websource.ch/pgp/msteinacher.asc</li>
<li>References: &lt;<a href="mailto:931521BA-6CB3-4C20-AAD8-F7B53FCB1287@DOMAIN.HIDDEN">931521BA-6CB3-4C20-AAD8-F7B53FCB1287@xxxxxxx</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Thunderbird 2.0.0.23 (X11/20090817)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi Jonathan,

The memory size you are requesting is far too big. The value in the
'insufficient memory' error message are words but the argument to the
'set memory/size=nnn' command are MEGA-words. Try something like size=100.


&gt;From the &quot;Memory use&quot; section of the FERRET Users Guide:
----
Use the command SET MEMORY/SIZE=nnn to increase the memory cache region
available to Ferret. The number of words listed in the memory is the
size of the request which failed; the total requirement for memory may
be larger than shown. nnn is expressed in MWords. For operations that
just load the data, nnn will need to be approximately the size in words
that is quoted in the message, divided by 1.e6. For many operations,
such as graphics operations or transforms, the calculations need more
memory, and so perhaps twice that size will be needed.
----

Cheers,
Marco

Jonathan Winter wrote:
&gt; Hi all,
&gt; 
&gt; I am trying to regrid a 0.5 deg dataset to 5-min and then write it out
&gt; as a NetCDF file.  I use the following commands:
&gt; 
&gt; use 030410_init_wsoi.nc
&gt; use vegtype_5min.nc
&gt; show grid vegtype[d=2]
&gt; show grid wsoi_lay[d=1]
&gt; define grid/X=GJR1/Y=GJR1/Z=GOL1/L=GOL1 veg_grid
&gt; let wsoi =  wsoi_lay[d=1,G=veg_grid]
&gt; set variable/title=&quot;Soil Moisture&quot; wsoi
&gt; set region/X=-179.96:179.96/Y=-89.958:89.958N/Z=0.1:4/T=6941:7275
&gt; save/file=wsoi.nc wsoi
&gt; 
&gt; At that point I get:
&gt;  **ERROR: insufficient memory: 18662400 words were requested.
&gt;  *** NOTE: You can use SET MEMORY/SIZE=xxx to increase memory.
&gt;  *** NOTE: The &quot;Memory use&quot; section of the FERRET Users Guide has
&gt; further tips.
&gt; 
&gt; So I:
&gt; set memory/size=20000000
&gt; 
&gt; And I get:
&gt;  *** NOTE: internal overflow expressing =20000000 Mwords as words.
&gt; Restoring previous memory size.
&gt;  Cached data cleared from memory
&gt; 
&gt; If I try to set memory/size=1000000000 FERRET says it has done it, but
&gt; then I run out of memory again if I try to write out:
&gt;  **ERROR: insufficient memory: 671846400 words were requested.
&gt;  *** NOTE: You can use SET MEMORY/SIZE=xxx to increase memory.
&gt;  *** NOTE: The &quot;Memory use&quot; section of the FERRET Users Guide has
&gt; further tips
&gt; 
&gt; Any thoughts on what is going on or how I may be able to do this?  Thank
&gt; you in advance for the assistance.
&gt; 
&gt; Best,
&gt; 
&gt; Jonathan


-- 
***************************************
Marco Steinacher

Climate and Environmental Physics
Physics Institute, University of Bern
Sidlerstrasse 5, CH-3012 Bern

Phone ++41 (0)31 631 34 02
Fax   ++41 (0)31 631 87 42
steinacher@xxxxxxxxxxxxxxxx
<a  rel="nofollow" href="http://www.climate.unibe.ch/~steinach">http://www.climate.unibe.ch/~steinach</a>
OpenPGP Key ID: 0x62937F7F
***************************************

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00197" href="msg00197.html">[ferret_users] Memory question</a></strong>
<ul><li><em>From:</em> Jonathan Winter</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00197.html">[ferret_users] Memory question</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00200.html">Re: [ferret_users] Memory question</a></strong>
</li>

</UL>
<center>[<a href="msg00197.html">Thread Prev</a>][<a href="msg00200.html">Thread Next</a>][<A HREF="threads.html#00199">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<A HREF="ferret_contact_us.html">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://tmap.pmel.noaa.gov">TMAP</a>
</address>
<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
