<!-- MHonArc v2.6.18 -->
<!--X-Subject: [ferret_users] inconsistent treatment of modulo axis, depending on range -->
<!--X-From-R13: Vryyn Dvrqr <uryyn.evrqrNzcvp.qr> -->
<!--X-Date: Thu, 12 Jan 2017 05:25:18 &#45;0800 -->
<!--X-Message-Id: 7ae3f89f&#45;f838&#45;e3a3&#45;9f40&#45;ba3f019a2f44@mpic.de -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Derived: pdfmO7xDGdWWR.pdf -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[ferret_users] inconsistent treatment of modulo axis, depending on range</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00025.html">Thread Prev</a>][<a href="msg00028.html">Thread Next</a>][<A HREF="threads.html#00027">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] inconsistent treatment of modulo axis, depending on range</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] inconsistent treatment of modulo axis, depending on range</strong></li>
<li><strong>From</strong>: <strong>Hella Riede &lt;<a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 12 Jan 2017 14:25:11 +0100</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=from:to:subject:message-id:date:user-agent:mime-version         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive         :list-unsubscribe;        bh=wq786490ujva63EP+FG4iFOQnZjOATEZ1+4WHcUhr70=;        b=CMEZfyuGcAMJGfMQTIfNL54GNxyp5uXgm5e1FbF3CJ7Gjx0Q4NfSy8BjndUf9NlkoO         Pwzhyolu4jOK3dtbdSiqd9SWMYxY4nt3bi0wPpAS0iJOmm3T/+tlpWGFd4pTfhTaJT3v         SKKzNnnAO9KS98lfG+kupIlSSrcf3etzEcrqH7vCxPvcvcstNZvaMu1jlJH/oo7dqlnm         Yo+cwM6p44kcdPz0/qgdYDvhMv+dG360ICkvo800vy1nYI3Ra1mXWvubK+NJJD9c3Y6g         HU9IX4S8jqjHR+/CSlqwc09YvJV7wZcuiiiswkYnHVgrYOWR+WXLGTY2GXxhhP2UGArh         WMbA==</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20100101 Thunderbird/45.5.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi ferreters,

as you can see in the attached figure, I have a problem with a gap in the ferret modulo axis at 180 degree E/W, depending on the range plotted.


I use the gridding function SCAT2GRID_BIN_XY with the following input:

let LON  = {165, 175, 185, 195, 205}
let LAT  = { 50,  50,  50,  50,  50}
let VARI = {  1,   2,   3,   4,   5}
def ax/X=-170:180:10/unit=longitude/modulo xgrid
def ax/Y=-35:85:10/unit=latitude ygrid
!! grid variable 'vari' to xgrid and ygrid using coordinate variables
let VARIG = SCAT2GRID_BIN_XY(LON,LAT,VARI,X[GX=XGRID],Y[GY=YGRID])


Just as in the attached plot, when I list the result crossing the 180 degree E/W meridian, it seems that scat2grid respects the modulo x axis:

yes? list/y=45/x=150:220 varig
 150E   / 33:   ....
 160E   / 34:  1.000
 170E   / 35:  2.000
 180E   / 36:  3.000
 170W   / 37:  4.000
 160W   / 38:  5.000
 150W   / 39:   ....
 140W   / 40:   ....


But when I do the standard listing, there's an undefined value at 180 degrees E, and the average of 185 and 195 degrees E ( = 175 and 165 degrees W) is all put at 170 degrees W:

yes? list/y=45 varig
 170W    /  1:  3.500
 160W    /  2:  5.000
 150W    /  3:   ....
[more undefined values]
 150E    / 33:   ....
 160E    / 34:  1.000
 170E    / 35:  2.000
 180E    / 36:   ....


The same &quot;modulo gap&quot; happens with this shifted combination:
let LON  = {160, 170, 180, 190, 200}
def ax/X=-180:180:10/edges/unit=longitude/modulo xgrid


I understand that this is probably an interpolation issue as the lon values are all exactly between the defined grid points (on the edges) so that ferret has to make a decision, on which side to put the result. Still it seems that the treatment of this situation should be consistent, and not dependent on the range defined for listing or plotting.


Thanks for any input on this.


Best wishes,
Hella


</pre><p><strong>Attachment:
<a href="pdfmO7xDGdWWR.pdf" ><tt>ferret_modulo_gap.pdf</tt></a></strong><br>
<em>Description:</em> Adobe PDF document</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00025.html">[ferret_users] Memory hogging when setting and canceling dataset</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00028.html">[ferret_users] converting depth cordinated into density (sigma) cordinate</a></strong>
</li>

</UL>
<center>[<a href="msg00025.html">Thread Prev</a>][<a href="msg00028.html">Thread Next</a>][<A HREF="threads.html#00027">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
