<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Monthly climatologies repeated along long time axis -->
<!--X-From-R13: Ivyyvnz Yrffyre <jvyyvnz.f.xrffyreNabnn.tbi> -->
<!--X-Date: Mon, 10 Jul 2017 09:31:19 &#45;0700 -->
<!--X-Message-Id: 6C77BED9&#45;F10C&#45;4CFD&#45;9B6A&#45;01099877ED1C@noaa.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAPnt&#45;U+acON922v&#45;bB=gCSWe=0+1WwQzztgc6TfFbn4MC6kY7Q@mail.gmail.com -->
<!--X-Reference: 8ADA0F8B&#45;08C9&#45;4724&#45;8061&#45;1764D4B6C6D5@noaa.gov -->
<!--X-Reference: CAPnt&#45;U+U=oVKjuULqD2EeCubc+FQ_cXvKDW7+6xSxLNWMhP8GQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Monthly climatologies repeated along long time axis</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00485.html">Thread Prev</a>][<a href="msg00489.html">Thread Next</a>][<A HREF="threads.html#00487">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Monthly climatologies repeated along long time axis</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Paul Goddard &lt;<a href="mailto:pgoddard@DOMAIN.HIDDEN">pgoddard@xxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Monthly climatologies repeated along long time axis</strong></li>
<li><strong>From</strong>: <strong>William Kessler &lt;<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 10 Jul 2017 09:31:16 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.b=Te/G7JJV;       spf=pass (google.com: domain of <a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a> designates 2607:f8b0:400e:c05::230 as permitted sender) smtp.mailfrom=<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.b=Te/G7JJV;       spf=pass (google.com: domain of <a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a> designates 2607:f8b0:400e:c05::230 as permitted sender) smtp.mailfrom=<a href="mailto:william.s.kessler@DOMAIN.HIDDEN">william.s.kessler@xxxxxxxx</a></li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:to         :references:message-id:content-transfer-encoding:cc:date:in-reply-to         :subject:mime-version:from:arc-authentication-results         :arc-message-signature:dkim-signature:arc-authentication-results;        bh=zKCcCvz3jiRSzR4ndbaD0vyK8CsgpQJrmBpnJm9vadg=;        b=tU8fqSsqCvVStm+syaScQDNyFhCn4E+yBVIC1GLKIPuR81KAlbINQffx9OcH9nlOFV         A04uaa8KP+Gsux3l+vPOdziOJ1QoSUb8+SU3FnTWhwo82DBPWTkAuVWqAB7m6vHwivpQ         1K4/r111CLvD3I+ymGxx8h4pOGFeTlSARIJCbdjO4q03ky/z9q9QHGFRRL9WBNvqJAmC         QC0Ozvrp0BT0eOwZHL1seRvfg8kcT6P6P5/eUaBnESRv9qfOxPMu/TORwTWwP9X7iVpX         K/Jj/axFm5rWDACVO3ndmvOV+Scp2j0Qo1x+QVQ5RxiusQ/RBPiiRR5i5FxLsBh9+NxT         Xm4w==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=to:references:message-id:content-transfer-encoding:cc:date         :in-reply-to:subject:mime-version:from:dkim-signature         :arc-authentication-results;        bh=zKCcCvz3jiRSzR4ndbaD0vyK8CsgpQJrmBpnJm9vadg=;        b=ZC1wq1dQAu1T49dOmHwIF1VmssYa5hNHxufusBg1HjL6nxcNCsJFVm0tEBvt/dTU0H         ZDTVyFJeyN5mqEogt0/kHczeTI+TyiwuEin+Ay0v67aGBV/FHqkqkvaOabVqIk10ji7P         vK0R8w7liQcJHVlTVZfX3Cm2d5vy9WR0PnH0SRG8I0SzzYESuqWuzKbNER0YwaWa2/Qt         TuDSyH4vtyv9IRDqYvj3pVrU0gFrRdHVkf+YiL38/HkaLK0MWjL/hfhy55JUKKL58pKA         d+P9x0dhSfgrtTBfIocPS1OaC9ARmBrCvribDraHRHDypSuX1JMa3Hcw/qJ0MhZqNtul         B5bw==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1499704279; cv=pass;        d=google.com; s=arc-20160816;        b=CyunCug+aCetObbKFbrSGXoBmyO+B2bxNEQSQAGNbY1o+HqYnHm1JTcDOi23FzWbJJ         IpPiNRdBiKQazHiigWwZJzm1Qeg/I8NI0hCN9d+qylC3aCahmXgRoNFYEtkvUqV0XW5H         QqbznDIms65CjYXjizZKwT7d02l3045KE1nhXpI9vi7W3bcG2/tsP8W9MCuF9UFQlpiR         jMkMbyKHIZajipuEf4ISOkkAhMb5kg2EnDdWLlVeF/dqlo28FipSiVHPo7d/LU0rjal0         vfMsfH35hICigdvDgK64yvTE5PpvTsuSiKRT90foEnf31NxpXfK8SIHn0Rgb1Z7W2HVW         ob7A==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1499704278; cv=none;        d=google.com; s=arc-20160816;        b=LPkWp4YTW8xw8z19LiCxUfvH3zlC6hSRqd9KEF4xR3QYQ+QC++vOPTHU4RdTlXAysu         lSikAz6Mi28QdnbMWLnkecSIcda0N1lU9tReLXPlklVppwnrL7vk3xqsI85W7+2cB3fp         N3tWx9sGONZN5oPcxhjZPdm1XYy98+5VJORjU3czrcZeXJ4WRbpkbzQTO4K5pTRZF8KC         3zpqvuiyTpcEfSSoZKtgxV+B3lmWPsFU64jtdyQ3jzooD/iFk3fUztHltaMz79XPC0cb         pBeuGs6Z211r3Z9BMW08WybsY6VCyTgXTC5urjUCMetLKd/81qBhAUWGhBEL7LcB0Vk6         KSaA==</li>
<li>Cc: Ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=from:mime-version:subject:in-reply-to:date:cc         :content-transfer-encoding:message-id:references:to         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=zKCcCvz3jiRSzR4ndbaD0vyK8CsgpQJrmBpnJm9vadg=;        b=o6a6QqE/t9DVz/9/APSBDlZX4chi5M4b7hfIMMVgw5rUYBnqrC4hpIErbK6r20EFFb         owQ1lOz6IYrfc6AxpowTLlyFJoce2d3rZVWik+y6sHWZLBWtBHVuDqmbsfdTeDnJM53G         sSP80ADITVaX2d31+KSVd87tpo1AFgYec5vbNy21GASSePZhpeDvx+fdG0skrX1L/3L3         6HKJJDhRkSufY1SL5A+saDOS3oZVLbiZOz/NnLpAfmEV5Rth5nzmYAh9vejXpWINHJnH         gaAwu7c4swx6MryGZucp4SffXs4DSnrPsb2wgSa8Whkszf+yMx2I4rSSe8cUb/MnTj4X         4OCA==</li>
<li>In-reply-to: &lt;CAPnt-U+U=oVKjuULqD2EeCubc+FQ_cXvKDW7+6xSxLNWMhP8GQ@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAPnt-U+acON922v-bB=gCSWe=0+1WwQzztgc6TfFbn4MC6kY7Q@mail.gmail.com&gt; &lt;<a href="msg00484.html">8ADA0F8B-08C9-4724-8061-1764D4B6C6D5@noaa.gov</a>&gt; &lt;CAPnt-U+U=oVKjuULqD2EeCubc+FQ_cXvKDW7+6xSxLNWMhP8GQ@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>The only thing I would add would be to overplot the pieces to make sure everything is right. Especially ACL and ACLMOD. The modulo operation can reduce the amplitude of the annual cycle if, for example, ACL values are on the first of the month (as in some data sets, e.g. ERA-Interim) but month_reg is centered on the middle of the month. month_reg is linearly interpolating between values which can reduce peaks. 

Similarly, you might get slightly different values from month_reg vs month_irreg for values on the first of the month. It is possible to define an analog for month_irreg with values on the first day of each month in that case. I could dig up an example.

Whenever I regrid as here, I always make a few test plots of the intermediate steps to check. This is so easy to do in Ferret, and is one reason to do the calculation in explicit steps as in my example.

Billy

&gt; On Jul 10, 2017, at 9:16 AM, Paul Goddard &lt;pgoddard@xxxxxxxxxxxxxxxxx&gt; wrote:
&gt; 
&gt; Perfect, thanks Billy
&gt; 
&gt; Best,
&gt; Paul
&gt; 
&gt; On Sun, Jul 9, 2017 at 6:22 PM, William S. Kessler &lt;william.s.kessler@xxxxxxxx&gt; wrote:
&gt; If A is your 20-year time series and ACL is your 12-month climatology:
&gt; 
&gt; First, put the climatology on a modulo time axis:
&gt; 
&gt; let ACLMOD = ACL[gt=month_reg@mod]
&gt; 
&gt; Extend it to the time axis of A:
&gt; 
&gt; let ACLRG = ACLMOD[gt=A]
&gt; 
&gt; let ADM = A - ACLRG  ! anomalies
&gt; 
&gt; Sent from my phone .... Please excuse my brevity .... and my typing.
&gt; 
&gt; &gt; On Jul 9, 2017, at 4:06 PM, Paul Goddard &lt;pgoddard@xxxxxxxxxxxxxxxxx&gt; wrote:
&gt; &gt;
&gt; &gt; Hi all,
&gt; &gt;
&gt; &gt; It is likely that an answer is already on the ferret users archive, if so, just refer me to that page, but I could not find what I was looking for.
&gt; &gt;
&gt; &gt; I have a monthly climatology, so 12 time steps.  I would like to subtract the climatology off a 20 year monthly data set (of 240 time steps) to end with an anomaly with 240 time steps. How can I regrid the 12 climatologies to a 240 time step axis with the 12 months of the climatology just repeated 20 times.
&gt; &gt;
&gt; &gt; Thanks in advance,
&gt; &gt; Paul
&gt; 



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00489" href="msg00489.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00483" href="msg00483.html">[ferret_users] Monthly climatologies repeated along long time axis</a></strong>
<ul><li><em>From:</em> Paul Goddard</li></ul></li>
<li><strong><a name="00484" href="msg00484.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
<ul><li><em>From:</em> William S. Kessler</li></ul></li>
<li><strong><a name="00485" href="msg00485.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
<ul><li><em>From:</em> Paul Goddard</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00485.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00489.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
</li>

</UL>
<center>[<a href="msg00485.html">Thread Prev</a>][<a href="msg00489.html">Thread Next</a>][<A HREF="threads.html#00487">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
