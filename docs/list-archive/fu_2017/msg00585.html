<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Using xbox and zbox to find total transport -->
<!--X-From-R13: Dhff Tvrqyre <ehffryy.svrqyreNpfveb.nh> -->
<!--X-Date: Mon, 14 Aug 2017 00:43:44 &#45;0700 -->
<!--X-Message-Id: 71b74d20&#45;bc6a&#45;d224&#45;4f82&#45;2fa837afd29c@csiro.au -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAJMBgoPvP1A&#45;dfx13ePX&#45;ONwKp4SwUUDanvrz6Peb1ZhXAnftg@mail.gmail.com -->
<!--X-Reference: CAEwQpaKGiTdhqXwM5aDU6ofnOK8vQBT4hWgOam54rBC3gRYEJQ@mail.gmail.com -->
<!--X-Reference: CAJMBgoPvZErVYz4CC3&#45;sp=hS+rv5Nzpyg8ZB1uQnp_VQYPnwQg@mail.gmail.com -->
<!--X-Reference: CAEwQpa+dAZ01DSk9ciz_NC3zEP5bPVrASZL5vZrj=&#45;s1jOZgPw@mail.gmail.com -->
<!--X-Reference: CAJMBgoNjt_QBO+cBWGwi&#45;rMUgAw&#45;6Bcm4R9VZjkHs6jqEBSSZQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Using xbox and zbox to find total transport</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00584.html">Thread Prev</a>][<a href="msg00586.html">Thread Next</a>][<A HREF="threads.html#00585">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Using xbox and zbox to find total transport</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Using xbox and zbox to find total transport</strong></li>
<li><strong>From</strong>: <strong>Russ Fiedler &lt;<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 14 Aug 2017 17:43:29 +1000</li>
<li>Arc-authentication-results: i=4; mx.google.com;       dkim=pass header.i=@csiro.au header.s=dkim header.b=IWy4U+s2;       arc=pass (i=2 dkim=pass dkdomain=csiro.au);       spf=fail (google.com: domain of prvs=39238343e=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a> does not designate 52.222.5.176 as permitted sender) smtp.mailfrom=prvs=39238343e=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>;       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=csiro.au</li>
<li>Arc-authentication-results: i=3; mx.google.com;       dkim=pass header.i=@csiro.au header.s=dkim header.b=IWy4U+s2;       arc=pass (i=2 dkim=pass dkdomain=csiro.au);       spf=fail (google.com: domain of prvs=39238343e=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a> does not designate 52.222.5.176 as permitted sender) smtp.mailfrom=prvs=39238343e=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>;       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=csiro.au</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@csiro.au header.s=dkim header.b=IWy4U+s2;       arc=pass (i=1 spf=pass spfdomain=csiro.au dkim=pass dkdomain=csiro.au dmarc=pass fromdomain=csiro.au);       spf=fail (google.com: domain of prvs=39238343e=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a> does not designate 65.127.216.226 as permitted sender) smtp.mailfrom=prvs=39238343e=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@csiro.au header.s=dkim header.b=IWy4U+s2;       spf=pass (google.com: domain of prvs=39238343e=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a> designates 2405:b000:e00:257::7:42 as permitted sender) smtp.mailfrom=prvs=39238343e=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>;       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=csiro.au</li>
<li>Arc-message-signature: i=4; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:in-reply-to:mime-version:user-agent:date:from         :references:to:subject:ironport-phdr:arc-authentication-results         :arc-message-signature:arc-authentication-results         :arc-message-signature:message-id:arc-authentication-results         :arc-message-signature:dkim-signature:arc-authentication-results;        bh=kfKsF0f4UvTY070C9ococ/sQDAyS3ucJN8oOfOBYF6g=;        b=F4oGAzR0i/N+zm27jo1BIMRhTAIJcqD3C7tOm+oS24Jt+ybPQmOpw26EZ8wTsj45NL         iqnTyrjPeKA30cxM3HQol0PX6j8Q+K4VICijiRclHqBpB/N357Wwo2wo70Jgl3TKiuSv         99EkUVZpU3HkFUJLZj5wf219rOZ0y3dJzeKZEcss1dBFInXFzMGVu51NRIM4perSsIxu         /56aUL48VIq/R+rZ2hF6sNbqTbwkzafEsTDlf7iUkrDj/lrXV7sY4sgcPrUpTukGRDNG         kcUHLzoGqMu5ubywqObmw7XFA/z1vQQhL0id2wT8o/RuONazdw/xSc66zoDi2ozZxCKQ         CdyA==</li>
<li>Arc-message-signature: i=3; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date:from         :references:to:subject:ironport-phdr:dkim-signature         :arc-authentication-results:arc-message-signature         :arc-authentication-results:arc-message-signature:message-id         :arc-authentication-results;        bh=kfKsF0f4UvTY070C9ococ/sQDAyS3ucJN8oOfOBYF6g=;        b=H7iHpMuihavCu7B7nt6zIuTLjUBDanSNC00zEvN954bOqdXj454xvnO8jIK0mMtK1Y         SFn5Mox5J4gq5pT0TR3n3Fn5ZXiHgsnXn86ZwRM2CqRV2bVsvNYRybo3Y82nEFIZS4Z8         70+h5tE3xqNXBNVjGEc8atCRZRvolzkB83jHV/ffqVwmDBAzTlLZRgY9YgPUybHuq97h         Xyo0LHewEfKMGFTnAE42r3A95thEUXcR2sx20K/Zj6AdzrqbzZsjkhbpktcFYg8Rz/IJ         cTb04sDO47Uq61TTPlqJrV4V2G9NKj7kjtPWApvWaELL3gaZgJ8nhSLsuk+ck6TyfTX9         +pxQ==</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:ironport-phdr:dkim-signature         :arc-authentication-results:arc-message-signature         :arc-authentication-results;        bh=kfKsF0f4UvTY070C9ococ/sQDAyS3ucJN8oOfOBYF6g=;        b=tRdTuZe4TbTgj7kJnJ2K6drfYGS2Hwe92XQFA+2DM6P9pi2SZTI4rSId/GvezkSKFy         Bnpkb0qBioTEO0+cBVpNZDV3BnkH9JuXbvfcUgHOGquduhC8ds8sOnoWSadObbdjRhoQ         SV8eztFzdpfEyOCP9F74uQ6qFWvJErny5Alaz0sIZ/j/6VwZIYzOfthHGrCypBYrwoO5         A0bTxuqJVHSNarLU05ueIq67ntcR+uGUFx/Uf2IxH6H6IPmUj8ByjAKlaTrHIAjW3r8m         j6r8mLhjMlhwW6CP1jab6Pkz+sqZWrgMYhKx27U2sR6PNpjuV+m2fcFeZphWZvAA+Iwo         p/vw==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:ironport-phdr:dkim-signature         :arc-authentication-results;        bh=kfKsF0f4UvTY070C9ococ/sQDAyS3ucJN8oOfOBYF6g=;        b=zSAqNQAtc/vgYWftmbOqNlkUUap8dcp9qS766cGXbZVNWKhteEsoFHwo5CELdeyY0F         7l2NIMXczL27f4yIiGW9Tt4ZSH1xwJ4xO3DYjdSGsnI5ComiQ8MpDs+PUeVPuWBHpgOT         90+/mSsSE6xkaMEDcao7bc5DJ03AKJlNnOJ1FzZMUPhawOOvHal/1dFDHqW2SIQNqwBd         I5xseONugqpH1pFP2xrvbLCaq8wFU7H+DdbrJQ6gSuZCzWmgtVuw6nOETyMXf+h1KWaY         CkY+vV+sfdhks4m+VAiQ5YIBqIjqiVQM6W5OOPYNoq0Uhe82fQhu6BypUiY/0cGXocoN         Z3WA==</li>
<li>Arc-seal: i=4; a=rsa-sha256; t=1502696622; cv=pass;        d=google.com; s=arc-20160816;        b=yLU+oIW6I4JxJCfEuUiYdz1RYIsJCyCb9TXsynhh3ChmJl6PML4Xug+Z+NtnQBxr1A         93F+ElVAYVAIlwwDFei3yfLXfJoPsCBn/vtQhTcjwyD8GqUIyRp9bZsZrvGcIlsDbDfF         vFhcenoMXsRD+ia761FxUj5YPbwPs7XJQw+PCEbPCcyXw8e0xGp5BT6GXlIqkD9DXDau         l+BtjlUHFHn3Cph08vqbDDWAgZg3Wh/Rndv+OuOBlWqopsDSRPBZRgQ0qhzL9p7UohTa         spgxkK03TCi/OTJ+IKe9NjvreXcmi98RX44mEGLkPh89vf/TwJ7Mo92ej9e+8T+wIdaG         /dEg==</li>
<li>Arc-seal: i=3; a=rsa-sha256; t=1502696622; cv=pass;        d=google.com; s=arc-20160816;        b=M4kIxSPia7hjfb5wr+VJXQpHdsTKIfJio1OwY6AfWpHqYTERJMlfk/YpzfUx/j9lMn         UL5C6kWaOFAYULuyCjyJnLxee6aPgCyHlidp7rD8bhGQX1gwWf5jM8Y6Hj/OXdf1qia1         LgkdxOs0JPlUrbzuLRkuwS084UzA0HoSaY2+X8zs3UFBFvilJDh9SLGu3wRObVlu84Lk         uWEEQk7Y3q2ayBX/zManvwe2GfLR9WgZ6e1qoqWkalwcIsboEd6HgahaOmxO9gLc4gUu         tqjQb0bLbq/89aaURQ9TS0yHxKfEPdjvTvv/agx/rfQkjW0dkBI/Qe0jFlpnsGF1jAwT         KLPQ==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1502696619; cv=pass;        d=google.com; s=arc-20160816;        b=sYCr1qMGCJINeHRJF+Dj5MCc7rLCtcf91Ijb92qSEOE0ffSuOSY0ZI+eimJQxaIi0U         lS5S0gTKPf7faqYMqAzkUE6co2zAlYiOaeUOtGssmEfti1dPm+HywsHXXkPh8m+0iBkJ         A51fKJlSjO0En3th9+qFWH2nM2mjhQnUwBUe090QaTHPiaW2BL4IKTHaH7ZkJQgmGL8H         kpPma8iCKv+meQ9Te6Gsm6net69Rm2C97fIbNxEyXZWKTdpFPA5g7r0jHTPfowVYgtQX         V5vJeuwGPXFDsEuLuGOriY06mujcKs18juVhe899icFpsYZwUVL3sYELbVHbmeFsCMhg         dCvQ==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1502696614; cv=none;        d=google.com; s=arc-20160816;        b=Zk98ym+e9fp3nQX+zVr8qps5XFTi41mLW/qmiJ3aKVsGAeo3kYnjbmVGaifsZOLMz3         Mw3KcoGa6oj5cA0a/WoHCJVG6G3tnNuusfowp3qQjojlDODKsxAMT9J+NFTCHHwf7fbX         /Qco1N66RpmL1Uei6/pH3JlERwI5zvYNSNNQ4IfhNzH+SjoN0x+h652PxAoMXpcd5yE+         mV1u5XS//YNq/Xwsq1CJcq8Tqqjr6lx5bhhSggAtEzYB0SqM1dkf8UjC2lFXkp7VyVu5         VsCPWH3qOyGZV7Ctx61sP3b6LbAzUFbwF4YFstZobJ9QlH7sNjNZh/48Ps7JH3bgcv2k         ZQ+A==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=message-id:ironport-phdr:subject:to:references:from:date:user-agent         :mime-version:in-reply-to:content-language:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=kfKsF0f4UvTY070C9ococ/sQDAyS3ucJN8oOfOBYF6g=;        b=YyGOzAHBj0R81fosgzqZ6KR4fcoObthYF3V4mQBQOk4kknf38smFcVONPjxbGwvZva         UVG9FaoQjg71hH9veHOfaIqczbPpScZMARdjvIjMH50GzlaO7ZlurDftjkoRVFYzOKN0         xMBxB0NUtsWYDBRWlsc/gEjH/4wq/+zQi80ZlVaVD9RN42m3pwJkxh79aoG2hF9vfq6y         9K3IGgA8nVXQsaFHOurF6HHzo5TohUnf5XPX0JPYNyIReM0wjYdK/vh2SJTPRoVRbiYw         QxVYJj6heeTArVorG67l1ilNVdWkFzbvgwiGhIb5GqA9EaaaxSIcM1e/1D4GBnhp4yQA         S96g==</li>
<li>In-reply-to: &lt;<a href="msg00584.html">CAJMBgoNjt_QBO+cBWGwi-rMUgAw-6Bcm4R9VZjkHs6jqEBSSZQ@mail.gmail.com</a>&gt;</li>
<li>Ironport-phdr: 9a23:hUZqqh+AET5ZVf9uRHKM819IXTAuvvDOBiVQ1KB42+McTK2v8tzYMVDF4r011RmSDNWds6oMotGVmpioYXYH75eFvSJKW713fDhBt/8rmRc9CtWOE0zxIa2iRSU7GMNfSA0tpCnjYgBaF8nkelLdvGC54yIMFRXjLwp1Ifn+FpLPg8it2e2//57ebx9UiDahfLh/MAi4oQLNu8cMnIBsMLwxyhzHontJf+RZ22ZlLk+Nkhj/+8m94odt/zxftPw9+cFAV776f7kjQrxDEDsmKWE169b1uhTFUACC+2ETUmQSkhpPHgjF8BT3VYr/vyfmquZw3jSRMMvrRr42RDui9b9mRgL2hicJNzA382/ZhcJ/g61ZvB2svAZwz5LObYyPKPZzcKHQcNUHTmRBRMZRUClBD5ugYYsSFOoBJvtToYn8p1QQsBS+ARejBPnywTJPnH/2wLY60/8/HgHC2AwsBdwOsHXKo9roMKcdT/q1wbLUwjXYbvNWwzD95JLSfRA8uPyBW697f8nJyUQ3CQ/IgUmcpIzgMjyOyugBr3SX4u99We6zlWIqrh99rz2qy8sxiITEg4YYxk3C+C5k2og6P8e4R1R+YdO8FZtQsDyVOJVuT8M5RmFopD46yrobuZ6nZCQKyIooxxrYa/Gfd4eG4QjtVPiQLDp9mn5od66ziha3/Ee71uHwStW43VNXoiZZjNXBs24B2hnW58SaSPZw+0Os1SuJ2AzL6+FEJ147lbbDJpI/zbM8ipoevEHYESPqhEn6kKqbelg49uS27unrfLDrq5qBO4J2jwzzNrkiltS6AesiMwgOW2ab+f671L3m5UD5WqhKjuYtkqbHtJDaId4XpqC4AwBLz4kj7wiwDy293dsEhnkHLUhFeBWdg4fzJlHCOOr4Auung1SwjDdrwOjLPrP/DZXXNHjMjqvhcq5g605H1gUz18tf6olSCrEGOv38QFX9tNPfDh8nYESIxLPpBc9n258pRHmCGLSxNqTbuBmH4fx8DfOLYdovpS3mY9Yk6vLqgGVxzUUAZrKk2Z9RZnG1EvBrOW2Senv2hZEIDDFZ7UIFUOX2hQjaAnZobHGoUvdk6w==</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00579.html">CAJMBgoPvP1A-dfx13ePX-ONwKp4SwUUDanvrz6Peb1ZhXAnftg@mail.gmail.com</a>&gt; &lt;<a href="msg00581.html">CAEwQpaKGiTdhqXwM5aDU6ofnOK8vQBT4hWgOam54rBC3gRYEJQ@mail.gmail.com</a>&gt; &lt;CAJMBgoPvZErVYz4CC3-sp=hS+rv5Nzpyg8ZB1uQnp_VQYPnwQg@mail.gmail.com&gt; &lt;CAEwQpa+dAZ01DSk9ciz_NC3zEP5bPVrASZL5vZrj=-s1jOZgPw@mail.gmail.com&gt; &lt;<a href="msg00584.html">CAJMBgoNjt_QBO+cBWGwi-rMUgAw-6Bcm4R9VZjkHs6jqEBSSZQ@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Thunderbird/52.2.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <div class="moz-cite-prefix"><br>
      Hi James,<br>
      <br>
      I think the version of SODA you are using is based on POP and grid
      cell centres are at the middle of the cell. So let Z(k) be the
      centre of cell k and ZB(k) be the base of the cell. We have all
      the Z(k) and set ZB(0) to zero<br>
      <br>
      ZB(0) = 0 <br>
      Z(k)=0.5*(ZB(k-1)+ZB(k))<br>
      <br>
      =&gt; ZB(k) = 2*Z(k)-ZB(k-1)&#xA0; for k=1...<br>
      <br>
      Note there may be partial cells involved which complicates
      transport calculations. There's also the free surface to consider.
      Also I think the results are interpolated from a mercator grid to
      evenly spaced in latitude so beware. I'd suggest contacting the
      original providers for further info.<br>
      <br>
      Russ<br>
      <br>
      On 14/08/17 16:05, James wang wrote:<br>
    </div>
    <blockquote type="cite"
cite="">
      
      <div dir="ltr">
        <div>
          <div>Hi Ryo,<br>
            <br>
          </div>
          As you suggested, I tried to understand the bound/edges
          attribute from the documentation.<br>
          Now, as a test case i tried to create a new axis with the
          following script <br>
          <br>
          <br>
          <br>
          let bounds={0.5,1.5, 1.5,2.5, 2.5,3.5, 3.5,4.5, 4.5,5.5,
          5.5,6.5, 6.5,7.5, 7.5,8.5, 8.5,9.5, 9.5,11}<br>
          let zaxlev= {1,2,3,4,5,6,7,8,9,10}<br>
          DEFINE AXIS/Z/UNITS=meters/DEPTH/BOUNDS zaxis = zaxlev,bounds<br>
          LIST/PRECISION=6
          ZBOXLO[GZ=zaxis],ZBOXHI[GZ=zaxis],Z[GZ=zaxis],zbox[gz=zaxis]<br>
          <br>
          <br>
          <br>
          &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DEPTH (m): 0.5 to 11<br>
          &#xA0;Column&#xA0; 1: ZBOXLO is ZBOXLO (axis ZAXIS)<br>
          &#xA0;Column&#xA0; 2: ZBOXHI is ZBOXHI (axis ZAXIS)<br>
          &#xA0;Column&#xA0; 3: Z is Z (axis ZAXIS)<br>
          &#xA0;Column&#xA0; 4: ZBOX is ZBOX (axis ZAXIS)<br>
          &#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ZBOXLO&#xA0;&#xA0; ZBOXHI&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Z&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; ZBOX<br>
          1&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0; 1:&#xA0; 0.50000&#xA0;&#xA0; 1.5000&#xA0;&#xA0; 1.0000&#xA0; 1.00000<br>
          2&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0; 2:&#xA0; 1.50000&#xA0;&#xA0; 2.5000&#xA0;&#xA0; 2.0000&#xA0; 1.00000<br>
          3&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0; 3:&#xA0; 2.50000&#xA0;&#xA0; 3.5000&#xA0;&#xA0; 3.0000&#xA0; 1.00000<br>
          4&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0; 4:&#xA0; 3.50000&#xA0;&#xA0; 4.5000&#xA0;&#xA0; 4.0000&#xA0; 1.00000<br>
          5&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0; 5:&#xA0; 4.50000&#xA0;&#xA0; 5.5000&#xA0;&#xA0; 5.0000&#xA0; 1.00000<br>
          6&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0; 6:&#xA0; 5.50000&#xA0;&#xA0; 6.5000&#xA0;&#xA0; 6.0000&#xA0; 1.00000<br>
          7&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0; 7:&#xA0; 6.50000&#xA0;&#xA0; 7.5000&#xA0;&#xA0; 7.0000&#xA0; 1.00000<br>
          8&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0; 8:&#xA0; 7.50000&#xA0;&#xA0; 8.5000&#xA0;&#xA0; 8.0000&#xA0; 1.00000<br>
          9&#xA0;&#xA0;&#xA0;&#xA0; /&#xA0; 9:&#xA0; 8.50000&#xA0;&#xA0; 9.5000&#xA0;&#xA0; 9.0000&#xA0; 1.00000<br>
          10&#xA0;&#xA0;&#xA0; / 10:&#xA0; 9.50000&#xA0; 11.0000&#xA0; 10.0000&#xA0; 1.50000<br>
          <br>
          <br>
        </div>
        The earlier file was downloaded SODA reanalysis model output and
        so there was no way to get the bounds information. This depth
        axis I want to use for regridding the sigma coordinate model
        output to Z-Axis the model has more sigma levels in the upper
        few meter. Am I trying in the correct way ? I would be grateful
        for any suggestions.<br>
        <div>
          <div>
            <div><br>
              <br>
            </div>
          </div>
        </div>
      </div>
      <div class="gmail_extra"><br>
        <div class="gmail_quote">On Fri, Aug 11, 2017 at 3:32 PM, Ryo
          Furue <span dir="ltr">&lt;<a rel="nofollow" href="mailto:furue@xxxxxxxxxx"
              target="_blank" moz-do-not-send="true">furue@xxxxxxxxxx</a>&gt;</span>
          wrote:<br>
          <blockquote class="gmail_quote" style="margin:0 0 0
            .8ex;border-left:1px #ccc solid;padding-left:1ex">
            <div dir="ltr">Hi James,
              <div><br>
                <div class="gmail_extra">
                  <div class="gmail_quote"><span class="">
                      <blockquote class="gmail_quote" style="margin:0 0
                        0 .8ex;border-left:1px #ccc
                        solid;padding-left:1ex">
                        <div dir="ltr">
                          <div>As you suggested I tried to rectify the
                            following script.</div>
                          <div><br>
                          </div>
                          <div>use "Data/Test.nc"<br>
                            LIST/precision=6
                            ZBOXLO[GZ=v],ZBOXHI[GZ=v],Z[GZ<wbr>=v],ZBOX[GZ=v]<br>
                            LET NEW_EDGES=ZCAT ({0}, zboxhi[gz=v])<br>
                          </div>
                        </div>
                      </blockquote>
                      <div><br>
                      </div>
                    </span>
                    <div>I don't think this works.&#xA0; Because ZBOXHI is
                      provided by Ferret, which cannot know the
                      positions of the correct edges!&#xA0; Ferret makes some
                      assumptions and computes ZBOXHI and ZBOXLO, which
                      are usually wrong.</div>
                    <div><br>
                    </div>
                    <div>From the ncdump list you showed, it's clear
                      that the edges information is missing.</div>
                    <div><br>
                    </div>
                    <div>Mathematically, the problem is this.&#xA0; Let Z(0),
                      Z(1), . . . , Z(N) be the edges of the gridcells
                      and z(1), z(2), . . . , z(N) be the depths at
                      which velocity is defined.&#xA0; Usually (almost
                      always),</div>
                    <div><br>
                    </div>
                    <div>&#xA0; &#xA0; &#xA0;z(k) = [Z(k-1) + Z(k)]/2, for k = 1, 2, .
                      . . , N</div>
                    <div><br>
                    </div>
                    <div>but we know only z(1), . . . , z(N).&#xA0; That is,
                      there are only N equations, which is not
                      sufficient to determine the N+1 numbers Z(0), . .
                      . , Z(N).</div>
                    <div><br>
                    </div>
                    <div>In addition, Ferret doesn't know the above
                      equation (because there can be other relations
                      between z's and Z's).&#xA0; For this reason, Ferret
                      doesn't bother to try to solve for Z's, makes some
                      assumptions, and comes up with (usually incorrect)
                      Z's.</div>
                    <div><br>
                    </div>
                    <div>But, usually (almost always), Z(0) = 0 for an
                      OGCM.&#xA0; With this additional constraint, you can
                      solve the above set of equations to determine Z's.
                      Those are the values you need to use to fix your
                      vertical axis.</div>
                    <div><br>
                    </div>
                    <div>Instead of calculating Z's like this: &#xA0;You or
                      somebody else set up the numerical model whose
                      output you are using. That person must know the
                      positions of the edges.</div>
                    <div><br>
                    </div>
                    <div>Better still, I hope you can persuade the
                      person who produced the netCDF file to include the
                      edges information.&#xA0; See the _bnds attribute
                      defined in the CF convention.</div>
                    <div><br>
                    </div>
                    <div>Cheers,</div>
                    <div><br>
                    </div>
                    <div>Ryo</div>
                    <div><br>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </blockquote>
        </div>
        <br>
      </div>
    </blockquote>
    <p><br>
    </p>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00586" href="msg00586.html">Re: [ferret_users] Using xbox and zbox to find total transport</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00579" href="msg00579.html">[ferret_users] Using xbox and zbox to find total transport</a></strong>
<ul><li><em>From:</em> James wang</li></ul></li>
<li><strong><a name="00581" href="msg00581.html">Re: [ferret_users] Using xbox and zbox to find total transport</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00582" href="msg00582.html">Re: [ferret_users] Using xbox and zbox to find total transport</a></strong>
<ul><li><em>From:</em> James wang</li></ul></li>
<li><strong><a name="00583" href="msg00583.html">Re: [ferret_users] Using xbox and zbox to find total transport</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00584" href="msg00584.html">Re: [ferret_users] Using xbox and zbox to find total transport</a></strong>
<ul><li><em>From:</em> James wang</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00584.html">Re: [ferret_users] Using xbox and zbox to find total transport</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00586.html">Re: [ferret_users] Using xbox and zbox to find total transport</a></strong>
</li>

</UL>
<center>[<a href="msg00584.html">Thread Prev</a>][<a href="msg00586.html">Thread Next</a>][<A HREF="threads.html#00585">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
