<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] : pyferret 7.2 segmentation fault when a second variable is displayed -->
<!--X-From-R13: Rravfr Ibegura &#45; @AOO Ossvyvngr <qravfr.jbeguraNabnn.tbi> -->
<!--X-Date: Tue, 18 Jul 2017 04:01:45 &#45;0700 -->
<!--X-Message-Id: CAHgE1GgUV5y3x8O&#45;aNRqYFUjRBs4&#45;Ju2GqiQGUyWXHGvTvTxew@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 21d5e616&#45;343b&#45;ddac&#45;fc7f&#45;bb72ffe9f0b0@io&#45;warnemuende.de -->
<!--X-Reference: CAELLC7WZLud39KHSZk7cN9&#45;nsrF8vUwrXO&#45;s+p4jz+x1zKsmGQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] : pyferret 7.2 segmentation fault when a second variable is displayed</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00494.html">Thread Prev</a>][<a href="msg00495.html">Thread Next</a>][<A HREF="threads.html#00497">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] : pyferret 7.2 segmentation fault when a second variable is displayed</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Karl Smith - NOAA Affiliate &lt;<a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] : pyferret 7.2 segmentation fault when a second variable is displayed</strong></li>
<li><strong>From</strong>: <strong>Denise Worthen - NOAA Affiliate &lt;<a href="mailto:denise.worthen@DOMAIN.HIDDEN">denise.worthen@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 18 Jul 2017 07:01:42 -0400</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.b=Ii8W8VWX;       spf=pass (google.com: domain of <a href="mailto:denise.worthen@DOMAIN.HIDDEN">denise.worthen@xxxxxxxx</a> designates 2607:f8b0:400c:c08::235 as permitted sender) smtp.mailfrom=<a href="mailto:denise.worthen@DOMAIN.HIDDEN">denise.worthen@xxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.b=Ii8W8VWX;       spf=pass (google.com: domain of <a href="mailto:denise.worthen@DOMAIN.HIDDEN">denise.worthen@xxxxxxxx</a> designates 2607:f8b0:400c:c08::235 as permitted sender) smtp.mailfrom=<a href="mailto:denise.worthen@DOMAIN.HIDDEN">denise.worthen@xxxxxxxx</a></li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:cc         :to:subject:message-id:date:from:references:in-reply-to:mime-version         :arc-authentication-results:arc-message-signature:dkim-signature         :arc-authentication-results;        bh=t0+qwVreywwx6aUc92vGoRCw1iEpba4Ex0LwZyZAGwU=;        b=GB2SoCq6FOb07BK0sd06hvWJz3SL6cB/amDNgVTT5A/395IRjAin8M6leSwkDCDoTF         tshBwmVXVzbmZ3W2xSP9SkBrmOV0BZAitoQ/QjdmiTCOOEBcfA0OPAXkYXBuWOQ+NcQ+         7vAnEpPAI3X1xDI+E7Mg4PCIxyecFrvzLx1ozMGNiuC3Ro5qNvBgXPqMQ/K1XmXnsY7N         XTyvxQ800BcqVMfMywhf5VAZisb8g5TBrfcVdMktObz6hlDkKmqKkm4nyxSl8Q8wVxy2         HFb8pkTYNVb6h5MeAGCKhDa0cPivGdoUyQA4Yd/Ffu+/FxPoU2T9HsWV+E+xFpbUKh4c         ylGQ==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:references:in-reply-to         :mime-version:dkim-signature:arc-authentication-results;        bh=t0+qwVreywwx6aUc92vGoRCw1iEpba4Ex0LwZyZAGwU=;        b=AsKCtKJmKJsxEOwkNuA+syF19d/crmyn/g8tSp68jWGDazkfgdwWye6DqPLa6PxqLM         NDY1u/BCteAi3IxyuQ6lQd6ONFfpxeNQ1WAOIWybNIDqFJRAagAaofoOdtsI1O0ghnz2         AQmEoLkjERReVEV61moWyhTIlqAfWl3I4SIOShUoW5MDKU+tXEc1lg94/Szv0fzM2ZPW         /oeRA89LgjvinIwOSwMS6g+XnctZrAodvPvcMowg00jmqCOJ6weLqnOFEmKZSsF6Zan3         R4GzY9jlz15kQKcfivgEw5j923KkaHCuTKTHYrl6xCcufrpXcP3omZ4sJmPLY67n0VTY         J8Pg==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1500375704; cv=pass;        d=google.com; s=arc-20160816;        b=Ob0OHI4s07iPWW+thXLywI3l7HMVRGizFgQ+hVVD2KXJYeNCdBFWCpEDhxjYZ9LTgV         eGM5vJ89VeZ0O65DF+MjWiOshoIxAvcyH9sUzo6N+DMDXChOZDIKl6aDn0Ia3zv/hCCm         ysT1CPyhuIxu276Ng70z4jtBKk1XChLbANDOUnSU3kNMo+JsyNoMWqOYZs1wV/e0L3ep         2Ee/C3fRdSer4064MRUcvX8SoSamnvIvDjlKEFIlGr0ciY+Fy27QpYMcCGo/9+WuCFt3         eXsdB5mSdIm+/doUheApYbkGsJJNYpt7ELNc8VNiFqWzUDrgxvJQO5E5/xUJFyuEu1cO         t0dg==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1500375703; cv=none;        d=google.com; s=arc-20160816;        b=xJOSYB0edMNAbVOCy7rXh6zvoUp7PSJVmY1THZGl6LmtbrbKFx1lZeAdR9NaVPunth         bKr35yh4P/OHVXCEXoWtNaPE6POtNng6hWSUrh5fyvc0jD3jbVN274Y3V+dkEFCVURLP         0Fu1cDF4NJTQNz8xwWBMkympOedR3t4v5TIGgUitjN375JvGDkr86c7p6ynMBaSc6OiI         pYSZcNW2PLZSIhA74l09d7LUoLHxscW9XvLozmAuBBYM0VS8epVMIUvf66s9mpHxo2iV         Dl6UWGTh/++0hWcDDuh3p0p3CXuKJ6T/eai2XYV0Qt8kcGjJr71xT1gs0ioq2gbcIQSW         fJrg==</li>
<li>Cc: &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=mime-version:in-reply-to:references:from:date:message-id:subject:to         :cc:x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=t0+qwVreywwx6aUc92vGoRCw1iEpba4Ex0LwZyZAGwU=;        b=ZL2kKFd3ciGPFXFkSE8sx2D8NCBJN9wWoLrNkuTO9nasPeyi2Djj4rZ3tRDj0vGpQ1         0YpiSXCJWO3JhyDeUudKEzcJul/N0yMLylZHOAUAuomzCMbh11gwaoB610+Kv/Pz9iwU         MpSCSatDY0/IGOCS6qKKOO840yQtHKAWOwipK31zCLueBZiNNQAsF7cqH5F32uCeZgmT         K+zoeB2UPYGozZHb/um7ec9FDtwAi756frCviIFSRZx5Zu/Fz1vN7D2I8/dWe6in0N5u         +EEfeJWsDk1T/alf00lN6/TpXWsGRbHC1ipnDXH/SApLbciAzSHj72w1KaQr09s/M4Fa         aLxA==</li>
<li>In-reply-to: &lt;<a href="msg00494.html">CAELLC7WZLud39KHSZk7cN9-nsrF8vUwrXO-s+p4jz+x1zKsmGQ@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00493.html">21d5e616-343b-ddac-fc7f-bb72ffe9f0b0@io-warnemuende.de</a>&gt; &lt;<a href="msg00494.html">CAELLC7WZLud39KHSZk7cN9-nsrF8vUwrXO-s+p4jz+x1zKsmGQ@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div class="gmail_default" style="font-family:verdana,sans-serif">Karl,</div><div class="gmail_default" style="font-family:verdana,sans-serif"><br></div><div class="gmail_default" style="font-family:verdana,sans-serif">Do you know whether the fixes you are committing might fix the issues w/ pyferret on osx 10.12?</div><div class="gmail_default" style="font-family:verdana,sans-serif"><br></div><div class="gmail_default" style="font-family:verdana,sans-serif">Denise</div></div><div class="gmail_extra"><br><div class="gmail_quote">On Mon, Jul 17, 2017 at 7:08 AM, Karl Smith - NOAA Affiliate <span dir="ltr">&lt;<a rel="nofollow" href="mailto:karl.smith@xxxxxxxx" target="_blank">karl.smith@xxxxxxxx</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Hi Martin,<div><br></div><div>Thank you for the report.&#xA0; PyFerret users should wait to upgrade PyFerret until I complete a new release; there will be another update to Ferret and PyFerret later this week.&#xA0; I am not sure at this point if it will make any difference for Ferret user&#39;s experience.</div><div><br></div><div>Details:</div><div>When (attempting to) compile and run the Mac version of PyFerret I ran into a number of issues, including an issue similar to that you show.&#xA0; It was at this time I realized there was still a mix of C-allocated memory and Python-allocated memory (although I though Python.h had aliases so the C memory management statements would actually use Python memory management).&#xA0; Once I got everything moved to Python memory management everything worked fine. &#xA0;(I just ran your test and it was successful.) &#xA0;I had not seen any issue on RedHat systems, but since Mac is now a Unix-type system, it does not surprise me you are seeing this on other Linux systems.</div><div><br></div><div>Since you are building your own PyFerret, I have checked in updates on GitHub&#xA0;</div><div>&#xA0; &#xA0; <a rel="nofollow" href="https://github.com/NOAA-PMEL/PyFerret" target="_blank">https://github.com/NOAA-PMEL/<wbr>PyFerret</a></div><div>If you are so inclined, you might try rebuilding from that code and seeing if you still have the problem.&#xA0; I have been working (through the weekend) on revising code in Ferret (and PyFerret) so: (1) hopefully more C memory management statements will not appear in the future in PyFerret, and (2) we can do a thorough check of memory management to ensure everything appears as expected.&#xA0; So there will be further updates, but hopefully it will be insignificant for the end-user&#39;s experience.</div><div><br></div><div>Best,</div><div>Karl</div><div><br></div></div><div class="gmail_extra"><div><div class="h5"><br><div class="gmail_quote">On Mon, Jul 17, 2017 at 1:56 AM, Martin Schmidt <span dir="ltr">&lt;<a rel="nofollow" href="mailto:martin.schmidt@xxxxxxxxxxxxxxxxx" target="_blank">martin.schmidt@io-<wbr>warnemuende.de</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi,<br>
<br>
my new version of pyferret ends with an segmentation fault, when I am trying to display more than one variable.<br>
<br>
See the example below. I have compiled pyferret by myself, so there may be, perhaps, some error in my installation of python, but the same python behaves well with earlier pyferret versions. The same error occurs with two different builds on different system version (openSuse 13.2 and SLES_11).<br>
<br>
Below is an example with hycom data. Other data sets produce the same error. Does anyone else experience the same?<br>
<br>
Best,<br>
<br>
Martin<br>
<br>
<br>
<br>
mschmidt@phy-59:~&gt; ferret<br>
<br>
&#xA0; &#xA0; &#xA0; &#xA0; NOAA/PMEL TMAP<br>
&#xA0; &#xA0; &#xA0; &#xA0; PyFerret v7.2 (optimized)<br>
&#xA0; &#xA0; &#xA0; &#xA0; Linux 3.16.7-53-default - 07/15/17<br>
&#xA0; &#xA0; &#xA0; &#xA0; 17-Jul-17 10:32<br>
<br>
yes? use <a rel="nofollow" href="http://tds.hycom.org/thredds/dodsC/GLBu0.08/expt_91.2/ts3z" rel="noreferrer" target="_blank">http://tds.hycom.org/thredds/d<wbr>odsC/GLBu0.08/expt_91.2/ts3z</a><br>
yes? sh data<br>
&#xA0; &#xA0; &#xA0;currently SET data sets:<br>
&#xA0; &#xA0; 1&gt; <a rel="nofollow" href="http://tds.hycom.org/thredds/dodsC/GLBu0.08/expt_91.2/ts3z" rel="noreferrer" target="_blank">http://tds.hycom.org/thredds/d<wbr>odsC/GLBu0.08/expt_91.2/ts3z</a> (default)<br>
&#xA0;name&#xA0; &#xA0; &#xA0;title&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;I&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;J K&#xA0; &#xA0; &#xA0; &#xA0; &#xA0;L<br>
&#xA0;TAU&#xA0; &#xA0; &#xA0; Tau&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; ...&#xA0; &#xA0; &#xA0; &#xA0;... ...&#xA0; &#xA0; &#xA0; &#xA0;1:437<br>
&#xA0;WATER_TEMP<br>
&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Water Temperature&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; 1:4500&#xA0; &#xA0; 1:2001 1:40&#xA0; &#xA0; &#xA0; 1:437<br>
&#xA0;SALINITY Salinity&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;1:4500&#xA0; &#xA0; 1:2001 1:40&#xA0; &#xA0; &#xA0; 1:437<br>
<br>
yes? shade/x=0/l=100 WATER_TEMP<br>
yes? shade/x=0/l=100 SALINITY<br>
Traceback (most recent call last):<br>
&#xA0; File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;<br>
&#xA0; File &quot;/sw/viz/ferret/py_ferret_v720<wbr>_os132_py_27/lib/python2.7/sit<wbr>e-packages/pyferret/__init__.<wbr>py&quot;, line 538, in init<br>
&#xA0; &#xA0; result = run()<br>
&#xA0; File &quot;/sw/viz/ferret/py_ferret_v720<wbr>_os132_py_27/lib/python2.7/sit<wbr>e-packages/pyferret/__init__.<wbr>py&quot;, line 710, in run<br>
&#xA0; &#xA0; retval = libpyferret._run(str_command)<br>
RuntimeError:<br>
<br>
**ERROR Ferret crash; signal = 11 (SIGSEGV)<br>
Enter Ctrl-D to exit Python<span class="m_763248351951600460HOEnZb"><font color="#888888"><br>
<br>
<br>
-- <br>
Dr. Martin Schmidt<br>
Leibniz-Institute for Baltic Sea Research<br>
Seestrasse 15<br>
D18119 Rostock<br>
Germany<br>
<br>
</font></span></blockquote></div><br><br clear="all"><div><br></div></div></div><span class="HOEnZb"><font color="#888888">-- <br><div class="m_763248351951600460gmail_signature" data-smartmail="gmail_signature"><div dir="ltr">Karl M. Smith, Ph.D.<br>JISAO Univ. Wash. and PMEL NOAA<br>&quot;The contents of this message are mine personally and do<br>not necessarily reflect any position of the Government<br>or the National Oceanic and Atmospheric Administration.&quot;<br></div></div>
</font></span></div>
</blockquote></div><br></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00493" href="msg00493.html">[ferret_users] : pyferret 7.2 segmentation fault when a second variable is displayed</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00494" href="msg00494.html">Re: [ferret_users] : pyferret 7.2 segmentation fault when a second variable is displayed</a></strong>
<ul><li><em>From:</em> Karl Smith - NOAA Affiliate</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00494.html">Re: [ferret_users] : pyferret 7.2 segmentation fault when a second variable is displayed</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00495.html">[ferret_users] Order of axes</a></strong>
</li>

</UL>
<center>[<a href="msg00494.html">Thread Prev</a>][<a href="msg00495.html">Thread Next</a>][<A HREF="threads.html#00497">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
