<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Monthly climatologies repeated along long time axis -->
<!--X-From-R13: Bnhy Ubqqneq <ctbqqneqNrznvy.nevmban.rqh> -->
<!--X-Date: Tue, 11 Jul 2017 11:47:18 &#45;0700 -->
<!--X-Message-Id: CAPnt&#45;UKXOrkZdj0hbdc7on028aMPgbvK4XL0QH3gcfW7d3S_eQ@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAPnt&#45;U+acON922v&#45;bB=gCSWe=0+1WwQzztgc6TfFbn4MC6kY7Q@mail.gmail.com -->
<!--X-Reference: 8ADA0F8B&#45;08C9&#45;4724&#45;8061&#45;1764D4B6C6D5@noaa.gov -->
<!--X-Reference: CAPnt&#45;U+U=oVKjuULqD2EeCubc+FQ_cXvKDW7+6xSxLNWMhP8GQ@mail.gmail.com -->
<!--X-Reference: 6C77BED9&#45;F10C&#45;4CFD&#45;9B6A&#45;01099877ED1C@noaa.gov -->
<!--X-Reference: 1e1f52e1&#45;5b89&#45;1654&#45;0b97&#45;02f848910669@noaa.gov -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Monthly climatologies repeated along long time axis</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00489.html">Thread Prev</a>][<a href="msg00486.html">Thread Next</a>][<A HREF="threads.html#00490">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Monthly climatologies repeated along long time axis</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Monthly climatologies repeated along long time axis</strong></li>
<li><strong>From</strong>: <strong>Paul Goddard &lt;<a href="mailto:pgoddard@DOMAIN.HIDDEN">pgoddard@xxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 11 Jul 2017 11:47:16 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@email-arizona-edu.20150623.gappssmtp.com header.b=1Vs3h89e;       spf=neutral (google.com: 2607:f8b0:400d:c09::234 is neither permitted nor denied by best guess record for domain of <a href="mailto:pgoddard@DOMAIN.HIDDEN">pgoddard@xxxxxxxxxxxxxxxxx</a>) smtp.mailfrom=<a href="mailto:pgoddard@DOMAIN.HIDDEN">pgoddard@xxxxxxxxxxxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@email-arizona-edu.20150623.gappssmtp.com header.b=1Vs3h89e;       spf=neutral (google.com: 2607:f8b0:400d:c09::234 is neither permitted nor denied by best guess record for domain of <a href="mailto:pgoddard@DOMAIN.HIDDEN">pgoddard@xxxxxxxxxxxxxxxxx</a>) smtp.mailfrom=<a href="mailto:pgoddard@DOMAIN.HIDDEN">pgoddard@xxxxxxxxxxxxxxxxx</a></li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:cc         :to:subject:message-id:date:from:references:in-reply-to:mime-version         :arc-authentication-results:arc-message-signature:dkim-signature         :arc-authentication-results;        bh=SRjnEwgNKH1573mjxjK5Fg7RFQvOxg2+QQ56+nU6HIA=;        b=hxGQyE4q3nvhNb448jzdA+4Iyi5ulop8nRJln59LFHHGy9FZprvDGw/XLKBDB3harI         IaLXSRQwigYdMVdYIFJL9nkoo/6LY8sg3bUKchwYKmAJDF11Im/zLNSMJaKHmWgUB9+k         1ZOZdXeGaFhYV8DZYsTIlsmvBAMx+KiO79HvIBJZzo8QY27JD2gnq8N16Poh5TIXCxBA         lIqAFfe49RGtW/Qmf0UGbjMu6O4qOEIxfAdCj0NhF4Tnra+sSqQmyIIwHdt9Zu8WmmVO         6kqXGcix26C2VxHqRVWP4maXyCH2Ie6szyQRdQMamZNioCfqOtTpjB05YzQZ1+VA2BHK         YIYA==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:references:in-reply-to         :mime-version:dkim-signature:arc-authentication-results;        bh=SRjnEwgNKH1573mjxjK5Fg7RFQvOxg2+QQ56+nU6HIA=;        b=xx2iluKD3mBasIi1mGAhilhszMy+h3Q/WtO4beb+z5pMNJwkFA9EcGWElaM+pKwuOG         151A/2goZUEDRVCCMdbRyT46Bd0S885+fxgMfHA9nnCgYqvMLvcJCUOW6FA5LKWGfoWh         87lR9Z4sPwAbGJzFv0c1uI//O3o2GABonKuSb0KfYXgaJOx6e3n0MAo5gBSCBF+v4mXz         BP3b7iYDpWqZ+BgcLqeMxf6k1bO3xxoQHCrWOFM7SAOWlyYqoXQEHDCGRXfuScDTcmvh         jounbEtb6pvt824+Ua2TKnNeVZJcB6b17hXqpKb5/I9+DQp7IEgKKA3hV4JsyA6CvxdO         roIg==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1499798838; cv=pass;        d=google.com; s=arc-20160816;        b=B/wj5Y4rla3d+eL0ICXVrBGm9jCdLh98F5UHwz8L6bkZQBP6t8b8CKU8vC00qc+HKd         Sbop6h/lE5oNPrfrGpR3OC1IEkUfVx+koocramJ4tHaIOy21HWz0xye76iNbCpKYsWSm         RcdZXBHgKT0tBk6HMs/T7ZfZ7VeexytLzdkTRSH2UClgfHTzJ7rU4olC6i/XD+mSSuDz         yZ/XnBo7v5KH2AxL2gBa4M0lVBUS60IRydx3wyvVBmq/KX0vaDAyJi9vnTnjV0HxHL8E         R6NjcURWxkVHYqCtGXEorpjjEfECilPlZyUyO4BWrmYfOFbLqWbdP+Z6TAFVWgxNAPus         yJxg==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1499798837; cv=none;        d=google.com; s=arc-20160816;        b=RPs7u9zHBUebduoM/6OQWL6rUh9luqpeTZ7H6Ia3RdwfPpv3yvJmSeZXEgBc38V1ua         ipGOPaP8DIB7d9Kw4sKv4P+AJhGz4c7TKVC/cAz0CRLui8yFXqRhc1juKBxDBBz1VGH9         nYEhNowiE066taIKZ3oilUYWv/6dlcfHB3FdiNOYlBMKxtswrlkpVuHvFQZkRbDuHgVp         XcJBFrhtA4uBnAxvTMQcGPV3iqLt/GMiwd0nBlBaBJXA7xUYSQ5eVsWuqjusgzBNZwP6         gLh/okYEuk/6o3LUBClJDCU+AWiul/MshYN80xtXop/5lwJQDSPlRF8FYcbvxJh9Khfj         +lYg==</li>
<li>Cc: ferret_users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=mime-version:in-reply-to:references:from:date:message-id:subject:to         :cc:x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=SRjnEwgNKH1573mjxjK5Fg7RFQvOxg2+QQ56+nU6HIA=;        b=PWbUdykKpUkk8AD5qbm7g5dUsE1m+KzbjArUqHF6cmMrjDjrfDjBD/RFXj7Z5ygKdN         aPFwvyhWLVQqINB3dQt82Ca9BNrEfy/NL1SZdGrr99vyTAJvxLWJzOM+DAtraQwxYraX         9uur+qN/1h7Q824NgxPeV/z/8K3Rp8yBB3WSOQ/LchG4RioPSpd4uUAKzRcLzm/yfkbN         SgdOcIEnjEk1KYCJR0tejepZIe4xAJCmDF93Kvf3I0xE5SHwnNvTRdv3Pr+5tnRFfkvl         r88ljh9qnZoQC+tUfmx27MIl6GScS5jTkLsRQDG7GGOpK+QRF84PvB+hNJcI5wJlW9Qr         3WUQ==</li>
<li>In-reply-to: &lt;<a href="msg00489.html">1e1f52e1-5b89-1654-0b97-02f848910669@noaa.gov</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAPnt-U+acON922v-bB=gCSWe=0+1WwQzztgc6TfFbn4MC6kY7Q@mail.gmail.com&gt; &lt;<a href="msg00484.html">8ADA0F8B-08C9-4724-8061-1764D4B6C6D5@noaa.gov</a>&gt; &lt;CAPnt-U+U=oVKjuULqD2EeCubc+FQ_cXvKDW7+6xSxLNWMhP8GQ@mail.gmail.com&gt; &lt;<a href="msg00487.html">6C77BED9-F10C-4CFD-9B6A-01099877ED1C@noaa.gov</a>&gt; &lt;<a href="msg00489.html">1e1f52e1-5b89-1654-0b97-02f848910669@noaa.gov</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div><div><div><div>Thanks Billy and Ansley for the detailed explanation; it is very helpful.<br></div><br></div>My monthly data and climatologies were dated mid-month, and the results appear to be as expected. <br><br></div>Thanks again, Best<br></div>Paul<br></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Jul 11, 2017 at 10:58 AM, Ansley C. Manke <span dir="ltr">&lt;<a rel="nofollow" href="mailto:ansley.b.manke@xxxxxxxx" target="_blank">ansley.b.manke@xxxxxxxx</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi Paul,<br>
<br>
To expand on what Billy is saying here, results from modulo regridding will be affected by how the &#39;grid cells&#39; of the monthly time axes are defined.&#xA0; In an extreme example, If your 20-year monthly data has time coordinates that are for instance, at the start of each month,<br>
<br>
yes? list/l=1:6/nohead uwnd[x=180,y=0]<br>
&#xA0;01-JAN-1982 / 1: -2.738<br>
&#xA0;01-FEB-1982 / 2: -2.331<br>
&#xA0;01-MAR-1982 / 3: -3.251<br>
&#xA0;01-APR-1982 / 4: -3.124<br>
&#xA0;01-MAY-1982 / 5: -1.818<br>
&#xA0;01-JUN-1982 / 6: -2.007<br>
<br>
and the climatology has its months defined with the coordinates centered mid-month, then the regridding of one time axis to the other might not be what you expect.&#xA0; The regridding is done by a linear interpolation, so the &quot;uwnd&quot; data above would have an interpolated value between Jan 1st and Feb 1st being used to compute the value at mid-January for instance.<span class="HOEnZb"><font color="#888888"><br>
<br>
Ansley</font></span><div class="HOEnZb"><div class="h5"><br>
<br>
<br>
On 7/10/2017 9:31 AM, William Kessler wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
The only thing I would add would be to overplot the pieces to make sure everything is right. Especially ACL and ACLMOD. The modulo operation can reduce the amplitude of the annual cycle if, for example, ACL values are on the first of the month (as in some data sets, e.g. ERA-Interim) but month_reg is centered on the middle of the month. month_reg is linearly interpolating between values which can reduce peaks.<br>
<br>
Similarly, you might get slightly different values from month_reg vs month_irreg for values on the first of the month. It is possible to define an analog for month_irreg with values on the first day of each month in that case. I could dig up an example.<br>
<br>
Whenever I regrid as here, I always make a few test plots of the intermediate steps to check. This is so easy to do in Ferret, and is one reason to do the calculation in explicit steps as in my example.<br>
<br>
Billy<br>
<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
On Jul 10, 2017, at 9:16 AM, Paul Goddard &lt;<a rel="nofollow" href="mailto:pgoddard@xxxxxxxxxxxxxxxxx" target="_blank">pgoddard@xxxxxxxxxxxxxxxxx</a>&gt; wrote:<br>
<br>
Perfect, thanks Billy<br>
<br>
Best,<br>
Paul<br>
<br>
On Sun, Jul 9, 2017 at 6:22 PM, William S. Kessler &lt;<a rel="nofollow" href="mailto:william.s.kessler@xxxxxxxx" target="_blank">william.s.kessler@xxxxxxxx</a>&gt; wrote:<br>
If A is your 20-year time series and ACL is your 12-month climatology:<br>
<br>
First, put the climatology on a modulo time axis:<br>
<br>
let ACLMOD = ACL[gt=month_reg@mod]<br>
<br>
Extend it to the time axis of A:<br>
<br>
let ACLRG = ACLMOD[gt=A]<br>
<br>
let ADM = A - ACLRG&#xA0; ! anomalies<br>
<br>
Sent from my phone .... Please excuse my brevity .... and my typing.<br>
<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">
On Jul 9, 2017, at 4:06 PM, Paul Goddard &lt;<a rel="nofollow" href="mailto:pgoddard@xxxxxxxxxxxxxxxxx" target="_blank">pgoddard@xxxxxxxxxxxxxxxxx</a>&gt; wrote:<br>
<br>
Hi all,<br>
<br>
It is likely that an answer is already on the ferret users archive, if so, just refer me to that page, but I could not find what I was looking for.<br>
<br>
I have a monthly climatology, so 12 time steps.&#xA0; I would like to subtract the climatology off a 20 year monthly data set (of 240 time steps) to end with an anomaly with 240 time steps. How can I regrid the 12 climatologies to a 240 time step axis with the 12 months of the climatology just repeated 20 times.<br>
<br>
Thanks in advance,<br>
Paul<br>
</blockquote></blockquote>
<br>
</blockquote>
<br>
</div></div></blockquote></div><br></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00483" href="msg00483.html">[ferret_users] Monthly climatologies repeated along long time axis</a></strong>
<ul><li><em>From:</em> Paul Goddard</li></ul></li>
<li><strong><a name="00484" href="msg00484.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
<ul><li><em>From:</em> William S. Kessler</li></ul></li>
<li><strong><a name="00485" href="msg00485.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
<ul><li><em>From:</em> Paul Goddard</li></ul></li>
<li><strong><a name="00487" href="msg00487.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
<ul><li><em>From:</em> William Kessler</li></ul></li>
<li><strong><a name="00489" href="msg00489.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00489.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00486.html">Re: [ferret_users] Monthly climatologies repeated along long time axis</a></strong>
</li>

</UL>
<center>[<a href="msg00489.html">Thread Prev</a>][<a href="msg00486.html">Thread Next</a>][<A HREF="threads.html#00490">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
