<!-- MHonArc v2.6.18 -->
<!--X-Subject: [ferret_users] Memory hogging when setting and canceling dataset -->
<!--X-From-R13: Vryyn Dvrqr <uryyn.evrqrNzcvp.qr> -->
<!--X-Date: Wed, 11 Jan 2017 07:15:24 &#45;0800 -->
<!--X-Message-Id: 8b0088bd&#45;78e5&#45;f8ee&#45;04ab&#45;ad0982036cae@mpic.de -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[ferret_users] Memory hogging when setting and canceling dataset</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00023.html">Thread Prev</a>][<a href="msg00026.html">Thread Next</a>][<A HREF="threads.html#00025">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] Memory hogging when setting and canceling dataset</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] Memory hogging when setting and canceling dataset</strong></li>
<li><strong>From</strong>: <strong>Hella Riede &lt;<a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 11 Jan 2017 16:15:19 +0100</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=to:from:subject:message-id:date:user-agent:mime-version         :content-transfer-encoding:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive:list-unsubscribe;        bh=8FV4TUPDVpAPWSTp1ubhJuv5oM/tY5pSZgo36YzxjUE=;        b=Fwgo/lYf5scWGoeTXO2J8FoTvSaHOz+mNsks2ZhOlqCLyzhAxGieHqSkKWxDms61bu         xxiQdvOksM2FqVcrW2U1uMYCpFQnlU9KeivPLvBbkJf5i4RbWGTvTHtappwZN89QH1lx         hyoWV0Mf2dkLa2pK2C0bDX0c844pP9DEA1dIxCUMyBuC5nUx6AwEmPW1NAZbrBX3UKYK         HDu4yTrLbnjMhMOIhJw1LUxTkkr+sT917WVh1EEsGCiNurTwq8rJNkDS92q7ii1kK5gl         wf6W9SaxzAZNDFUlVcD6l9JtAeIb0RU4FxLJfb7RmuP0FeRT8rSKbzIv0yD46fQ8cWif         mw0A==</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20100101 Thunderbird/45.5.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hi ferreters,

in my ferret script I have a loop, which is set to run about 4000 times. In each iteration, 4 datasets are set, and all datasets are canceled again at the the end of that iteration (so that 'show data' at the end of an iteration returns no datasets).

While the loop is running, ferret occupies about 10 MB memory more per second and never frees it again. Also after the script is stopped ferret doesn't free up any of that memory. After some time ferret occupies 14 GB of memory and crashes with

**ERROR: command syntax: TNAME = ???
def sym tname =
Command file, command group, or REPEAT execution aborted
ERROR RUNNING SCRIPT


Minimal working example with a different dataset offered by ferret:
repeat/RANGE=1:4000/NAME=count (\
 use etopo05.cdf;\
 can dat 1;\
)

This example above adds &gt; 50 MB of occuppied memory per second.

'cancel memory/all' at the end of each iteration does not help with this problem. Any ideas?


Best wishes,
Hella

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00026" href="msg00026.html">Re: [ferret_users] Memory hogging when setting and canceling dataset</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00023.html">[ferret_users] Bug converting metafile to postcript</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00026.html">Re: [ferret_users] Memory hogging when setting and canceling dataset</a></strong>
</li>

</UL>
<center>[<a href="msg00023.html">Thread Prev</a>][<a href="msg00026.html">Thread Next</a>][<A HREF="threads.html#00025">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
