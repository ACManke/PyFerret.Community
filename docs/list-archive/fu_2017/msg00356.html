<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Manually interpolate zero degree level -->
<!--X-From-R13: Dhff Tvrqyre <ehffryy.svrqyreNpfveb.nh> -->
<!--X-Date: Thu, 18 May 2017 19:45:27 &#45;0700 -->
<!--X-Message-Id: f2c96790&#45;1cdf&#45;189b&#45;f75a&#45;dde8de513c10@csiro.au -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAA4txijPD1MRFHG_aWhkZYkk4kynjSfnUBWvyCJEWjrUmoksVQ@mail.gmail.com -->
<!--X-Reference: f48baeaa&#45;a2c3&#45;6155&#45;9dde&#45;7e29ceb91714@noaa.gov -->
<!--X-Reference: 5b8c67e5&#45;ba27&#45;b34d&#45;5b3d&#45;d9992599cffc@csiro.au -->
<!--X-Reference: CAA4txiieztwmQbkQk4MBSHY+kqvxzPj0rdDcO+tbe3SXnFhV1g@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Manually interpolate zero degree level</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00355.html">Thread Prev</a>][<a href="msg00358.html">Thread Next</a>][<A HREF="threads.html#00356">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Manually interpolate zero degree level</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Manually interpolate zero degree level</strong></li>
<li><strong>From</strong>: <strong>Russ Fiedler &lt;<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 19 May 2017 12:45:21 +1000</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@csiro.au;       spf=pass (google.com: domain of prvs=305ee7545=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a> designates 2405:b000:b00:220::64:39 as permitted sender) smtp.mailfrom=prvs=305ee7545=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>;       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=csiro.au</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@csiro.au;       spf=pass (google.com: domain of prvs=305ee7545=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a> designates 2405:b000:b00:220::64:39 as permitted sender) smtp.mailfrom=prvs=305ee7545=<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>;       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=csiro.au</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-unsubscribe:list-archive:list-help:list-post:list-id         :mailing-list:precedence:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:ironport-phdr         :arc-authentication-results:arc-message-signature:dkim-signature         :arc-authentication-results;        bh=cM4Ind6SQvPe/E+wAJDB99i+IWIBkMSBYaYBUmOJ5CI=;        b=Ux44oBuUnY/wSrIZ7TdBVkk8jwN+TImkQTs2ySqptl77heHWy4MQLJWo1QVuzL1T/J         ch5TEzxJ3H7WrLuqPs2fayKj+lSUbAQkj4Hat0DJtuZJQWvzL3Vn411xqVHlL5bEjwDk         tm2wZ43z/XOeFv0Xwz+KtIhKtShVpRlEercuTEdDevV2MPX14rsDNYDInTUutUXFwe/h         MXyAT4c4E68ZPoZdeZNwFfH7xkYEwz09hf9yZuHd4Rnk175kUp0E9NptPlQ/942rlzxP         7bjSyLUcIHo0hoaJVNOMqpa1FDW8XvcVk3TYn/xNc1s77p5oMnMPQGagPKQ2gUlHBIWo         K9aA==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=in-reply-to:mime-version:user-agent:date:message-id:from:references         :to:subject:ironport-phdr:dkim-signature:arc-authentication-results;        bh=cM4Ind6SQvPe/E+wAJDB99i+IWIBkMSBYaYBUmOJ5CI=;        b=lE1nS5t5OuKwOwHpp2RwqyO8GoctGNfgpGa6KgSuzkRkQGSD+3uS6IccUCqo7xgSS5         GoHwFUR1OBFREUnYUxHifOCl5cYYIosT6ldy1EKeAOlktSCU84Z5yCDk3LoOdgU5Rk4v         V3FYh+j7/m6QEPiLJpNhSZMD1S3Qo/e7FkP22qqQmBK+yv/TKOs4UyU5py48xupwalbA         k34Kww2OwcuQeGDuZfXNkRXXb7nR+nPGGD7FWogJg6/c6DblIG7/7zxAJe1DC+OrUS4O         cjWkVNXRz8el+Qncfm/Edx3HVpr/xb+BMSm7wmdh7iLFfGd+BcZrY5rTD24sQDPqYEnU         szXw==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1495161926; cv=pass;        d=google.com; s=arc-20160816;        b=iHVcCMiBdUYihP25pdhRrQ0627KKLiM8d4iYMiwslZsFfONqM1+dKtNay7Bx6JAI1+         yT1zkvVYeMmfGnYXiNiajPij+rbMRisrPYOL26Yuy+mK/BXkkpL3khIN+gHcG23M9KPi         r6BykJPqi8awEizpUSnDbSVhrN8JaaChtHI/k9aq4m98++ih5VKwmYzgMM+k7zkMU4vZ         BTcQ6GSPP+A/22WlSkj0gPJwTwd8oJXFyomEx7igpquEHRqGbG262c3KqhTBtFIzu0YK         JZz+GZb8MkkCTNi34LNekxe4Qi3fEBhGyMjmUmavwP0tU1DK0S+HmcYFtOsQYYNzP0J/         LELw==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1495161926; cv=none;        d=google.com; s=arc-20160816;        b=zrlNGT0XWUeL6CUnD/fhrxh3FM9aI61Wsk5s+awFyki6StJVbCIJOJd4Q2TrHsgPPH         mDTfMDTlCGLAeZwXQETo0y6kX+x/eZRc+nrHop9iCaDdW3P+asaI+gKm20v9sJgXNORV         y3C/76pR6g/ZKe/0yrVpXHFKdKxEzobCFMdAQNdgBGnklyHogd0bUAXQJJWo/ijdr5tp         5y7g12TPFJxDb9V2vIljRbbU/OqxPsm/za1+SkK1NeXNUPLktZnImAKQQ25VMvQfwUBq         UU4kG2WJIzFst2sf00qmk4IWUOn0acn3ZoLwDK3XhxYsorqIOLAIwr0hIEnCkwm9oZqh         1ORw==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=ironport-phdr:subject:to:references:from:message-id:date:user-agent         :mime-version:in-reply-to:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive:list-unsubscribe;        bh=cM4Ind6SQvPe/E+wAJDB99i+IWIBkMSBYaYBUmOJ5CI=;        b=AuXqCLj66VTME5k9vGpJ4t8fCznzMLB2GW2CjlsPhcFsd85WGZVCKGf4foIMde3IRw         QIwlfVNymi8Vy+kfspqIqIVIEPLTArBIgmUnCHtEb190bF/xqvx2ju/Q3qh8YJGq8Xx8         0UBWvvSS39aZgMlaQ+CRw9z35UfEcYv5yiQWXr5WFXkMfkM5RHdrDWkWqyzLiTSC8tWn         lfEHhmenitp7sJhFD7bMxtUaYlJMlnmTUBIJei4wb5E0tLWzORqel/eIBKwXVtlL6lwL         hV1q9cH3MwNIOn1ELTko4o3j2PzVJU6K6yXOUqhJdHNCXhXxQDibLbFL2V+TSL9I/Enz         NRDQ==</li>
<li>In-reply-to: &lt;<a href="msg00355.html">CAA4txiieztwmQbkQk4MBSHY+kqvxzPj0rdDcO+tbe3SXnFhV1g@mail.gmail.com</a>&gt;</li>
<li>Ironport-phdr: 9a23:wiX/mhMJFSbn6HulukYl6mtUPXoX/o7sNwtQ0KIMzox0I/z+rarrMEGX3/hxlliBBdydsKMazbeJ++C4ACpbsMnH6ChDOLV3FDY7yuwu3DYcSPafDkP6KPO4JwcbJ+9lEGFfwnegLEJOE9z/bVCB6le77DoVBwmtfVEtfre9FYHdldm42P6v8JPPfQpImCC9YbRvJxmqsAndrMcbjI9jJ6oryhbEoGZDd+BKyW91P16ekRLx68Wq8JJ/7yhcvu8q+tJdX6n9Y6k3QrtUASg8PWwy+MPlqwTIQxGV5nsbXGUWkx5IDBbA4RrnQJr/sTb0u/Rk1iWCMsL4Ub47WTK576d2UxDokzsINyQ48G7MlMN9ir9QrQ+7qBx+x47UZ5yVNOZ7c6jAc94WWXZNU8BMXCNPGIO8a5YEAfQHM+hWsoLxo0ICoQaiCQWpAu7k1z1GiWLs3aAizuovDw/G0gwjEdwAvnvbo9f6O7sJXO+v0KXF1y/OY+9Y1Dr/7oXDbxAvoeuLXbJ1acff1VQvFxjejl6NqYLlPi2a2fkJs2eF9eprSOWii3Q6qwFquTig2MMsio3TioIby1DL6zh2wIIrKt2iU0N0fcWkEJpKtyGdLYd5WN4iTnhutS0nxLMGvpu7czILyJQh3xPfbfuHfJKS7R75W+aRJil4iXR4c7y8nxa/6Vasx+LgWsS01VtFtTZJnsXQun0IyhDf9taLR/5j8kqk3DuDygLe5+RALEwpk6fQNoQvzaQqlpUJtETOBir2mELrg6CIbkgk4e2o6/j/YrXhu5+cK5d4igHgPaQqncyyGeA3PAsUUWiF+Omx0aPv8ELlTLhKi/A5ibXVvIzGKckeu6K1HxFZ34M95xu6CjqqzdYVkHwDIV5Yfh2Ll4npO1fQL/DkFfqznVuhnCtryv3DJbLtHonBImTGnbv8Ybpx9UtRxBQ2wN1a+p5ZCLQMLfbuVkPpsdzXFB45Mwi6w+b9D9V905sTWXiSAq+CK6Pdr1uI5uY1L+mCZY8apivyK/w76P70lnI2hUQdfaiz3ZsQcny3BOlmL12DYXXwmtcBDXsKvg0mQezkllKCSyRTaGiuX60k+zE7E5ypDZ3YRo22hryB2z20EYdMamBJDVCMDySgS4LRVfoWci+OFdJ6nyYffb6mQoZn2haw5yHgzL8yFPfP4WU2tJ/v0NVvr7nJiAop+DhwScqc3m2JQntclXgJXThw1b0p8h818UuKzaUt268QLtdU/f4cF15iOA==</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00348.html">CAA4txijPD1MRFHG_aWhkZYkk4kynjSfnUBWvyCJEWjrUmoksVQ@mail.gmail.com</a>&gt; &lt;<a href="msg00352.html">f48baeaa-a2c3-6155-9dde-7e29ceb91714@noaa.gov</a>&gt; &lt;<a href="msg00354.html">5b8c67e5-ba27-b34d-5b3d-d9992599cffc@csiro.au</a>&gt; &lt;<a href="msg00355.html">CAA4txiieztwmQbkQk4MBSHY+kqvxzPj0rdDcO+tbe3SXnFhV1g@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20100101 Thunderbird/45.3.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <div class="moz-cite-prefix"><br>
      Hi,<br>
      <br>
      Ah, I thought that might be a problem. You can use the event mask
      transformation @EVNT to get the last occurrence and mask out all
      the preceding<br>
      events.<br>
      <br>
<a rel="nofollow" class="moz-txt-link-freetext" href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS#_VPINDEXENTRY_550">http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS#_VPINDEXENTRY_550</a><br>
      <br>
      <br>
      It's a bit tricky though.<br>
      <br>
      let event=temp[z=@EVNT:0]&#xA0; ! Increments every time temp crosses
      zero starting from the highest<br>
      let event_rev = event[z=@max] - event &#xA0; ! Reverse the order. Zero
      beneath the lowest crossing and increases thereafter<br>
      let temp_mask = if event_rev le 1 then temp&#xA0; ! We only want the
      temps surrounding the lowest crossing<br>
      let isotherm_0 = temp_mask[z=@WEQ:0] <br>
      ...<br>
      <br>
      You can also mask like this<br>
      <br>
      let event=temp[z=@EVNT:0]&#xA0; <br>
      let last_cross=event[z=@max]<br>
      let next_last=max(last_cross-1,0)<br>
      let temp_mask = if event ge next_last then temp<br>
      ...<br>
      <br>
      c.f.<br>
      <br>
<a rel="nofollow" class="moz-txt-link-freetext" href="http://ferret.pmel.noaa.gov/Ferret/faq/finding-the-location-of-last-isotherm">http://ferret.pmel.noaa.gov/Ferret/faq/finding-the-location-of-last-isotherm</a><br>
      <br>
      <br>
      <br>
      Russ<br>
      <br>
      <br>
      On 18/05/17 19:32, Jasper Denissen wrote:<br>
    </div>
    <blockquote
cite=""
      type="cite">
      
      <div dir="ltr">
        <div>
          <div>
            <div>
              <div>Dear Ansley and Russ,<br>
                <br>
              </div>
              Thank you both for your helpful answers. I was indeed
              looking for what you mentioned Russ. But there is one
              remaining problem: In some cases there are multiple zero
              degree levels; I did some sampling and found out that when
              I execute:<br>
              <br>
              let/title="geopotential height on 0 degree isotherm" z_g_0
              = integrand_0[z=@sum]&#xA0; ! interpolated Z_g<br>
              <br>
            </div>
            it gives me the heighest height at which this situation
            occurs. I'd like for it to give me all interpolated heights
            at which T=0, so that I can manually select the lowest level
            (so use this variable and k=@min). Is this possible?<br>
            <br>
          </div>
          Kind regards,<br>
          <br>
        </div>
        Jasper Denissen<br>
      </div>
      <div class="gmail_extra"><br>
        <div class="gmail_quote">2017-05-18 2:44 GMT+02:00 Russ Fiedler
          <span dir="ltr">&lt;<a rel="nofollow" moz-do-not-send="true"
              href="mailto:russell.fiedler@xxxxxxxx" target="_blank">russell.fiedler@xxxxxxxx</a>&gt;</span>:<br>
          <blockquote class="gmail_quote" style="margin:0 0 0
            .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi,<br>
            <br>
            I think Jasper actually wants @WEQ rather than @LOC since
            his independent height variable is pressure not geopotential
            height.<br>
            <br>
            <a rel="nofollow" moz-do-not-send="true"
href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS#_VPID_175"
              rel="noreferrer" target="_blank">http://ferret.pmel.noaa.gov/Fe<wbr>rret/documentation/users-guide<wbr>/variables-xpressions/XPRESSIO<wbr>NS#_VPID_175</a><br>
            <br>
            <br>
            let isotherm_0 = temp[z=@WEQ:0]&#xA0; ! pressure kernel at 0
            degrees<br>
            let integrand_0 = geopotential*isotherm_0/9.81&#xA0; !<br>
            let/title="geopotential height on 0 degree isotherm" z_g_0 =
            integrand_0[z=@sum]&#xA0; ! interpolated Z_g<br>
            <br>
            <br>
            Cheers,<br>
            Russ
            <div class="HOEnZb">
              <div class="h5"><br>
                <br>
                On 18/05/17 05:17, Ansley C. Manke wrote:<br>
                <blockquote class="gmail_quote" style="margin:0 0 0
                  .8ex;border-left:1px #ccc solid;padding-left:1ex">
                  Hi,<br>
                  <br>
                  Look at the transformation @LOC which picks out the
                  data at a specified value.<br>
                  <br>
                  -Ansley<br>
                  <br>
                  <br>
                  On 5/17/2017 6:14 AM, Jasper Denissen wrote:<br>
                  <blockquote class="gmail_quote" style="margin:0 0 0
                    .8ex;border-left:1px #ccc solid;padding-left:1ex">
                    Dear ferret users,<br>
                    <br>
                    I've got two variables, temperature T (K) and
                    geopotential Z (m^2/s^2) on 25 pressure levels and a
                    certain spatial extent. What I want to do is find
                    the exact (read linearly interpolated) height of the
                    zero degree level. All I found in the ferret
                    documentation was interpolate transformations which
                    fill data gaps, but I just need to define one
                    variable which contains the interpolated
                    geopotential height (geopotential / 9.81) at which
                    the interpolated temperature equals zero. If there
                    are several heights where T = 0, please take the
                    lowest height.<br>
                    <br>
                    I think this should be a fairly simple
                    transformation, but I can't seem to find the answer
                    myself. Someone please help me!<br>
                    <br>
                    Kind regards,<br>
                    <br>
                    Jasper Denissen<br>
                    MSc student Earth &amp; Environment<br>
                    Wageningen University<br>
                  </blockquote>
                  <br>
                </blockquote>
                <br>
              </div>
            </div>
          </blockquote>
        </div>
        <br>
      </div>
    </blockquote>
    <p><br>
    </p>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00358" href="msg00358.html">Re: [ferret_users] Manually interpolate zero degree level</a></strong>
<ul><li><em>From:</em> Jasper Denissen</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00348" href="msg00348.html">[ferret_users] Manually interpolate zero degree level</a></strong>
<ul><li><em>From:</em> Jasper Denissen</li></ul></li>
<li><strong><a name="00352" href="msg00352.html">Re: [ferret_users] Manually interpolate zero degree level</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
<li><strong><a name="00354" href="msg00354.html">Re: [ferret_users] Manually interpolate zero degree level</a></strong>
<ul><li><em>From:</em> Russ Fiedler</li></ul></li>
<li><strong><a name="00355" href="msg00355.html">Re: [ferret_users] Manually interpolate zero degree level</a></strong>
<ul><li><em>From:</em> Jasper Denissen</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00355.html">Re: [ferret_users] Manually interpolate zero degree level</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00358.html">Re: [ferret_users] Manually interpolate zero degree level</a></strong>
</li>

</UL>
<center>[<a href="msg00355.html">Thread Prev</a>][<a href="msg00358.html">Thread Next</a>][<A HREF="threads.html#00356">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
