<!-- MHonArc v2.6.18 -->
<!--X-Subject: RE: [ferret_users] vertical weighted averagng -->
<!--X-From-R13: "Afvafxv, Dboreg TAD@OFZ, BZ" <ebfvafxvNacf.rqh> -->
<!--X-Date: Thu, 23 Mar 2017 01:36:22 &#45;0700 -->
<!--X-Message-Id: D32DD84B3FCEC3418400F08614D9B8B8D88CB6BB@GROWLER.ern.nps.edu -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: D32DD84B3FCEC3418400F08614D9B8B8D88C0A2A@GROWLER.ern.nps.edu -->
<!--X-Reference: CAFXLzPhWeubd_ByREpeHVCRGKSz=WtDDqFL4XE=_7RnF4W&#45;3LA@mail.gmail.com -->
<!--X-Reference: D32DD84B3FCEC3418400F08614D9B8B8D88C2B12@GROWLER.ern.nps.edu -->
<!--X-Reference: f8767f5a&#45;92c8&#45;d7a6&#45;de60&#45;d90cd476fe11@io&#45;warnemuende.de -->
<!--X-Derived: cdfNq73LqYXg5.cdf -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>RE: [ferret_users] vertical weighted averagng</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00156.html">Thread Prev</a>][<a href="msg00238.html">Thread Next</a>][<A HREF="threads.html#00236">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [ferret_users] vertical weighted averagng</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Martin Schmidt &lt;<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;,        &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot;	&lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>RE: [ferret_users] vertical weighted averagng</strong></li>
<li><strong>From</strong>: <strong>&quot;Osinski, Robert FORNATL, PL&quot; &lt;<a href="mailto:rosinski@DOMAIN.HIDDEN">rosinski@xxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 23 Mar 2017 08:36:15 +0000</li>
<li>Accept-language: en-US</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=from:to:subject:thread-topic:thread-index:date:message-id         :references:in-reply-to:accept-language:content-language         :mime-version:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive         :list-unsubscribe;        bh=zxtESWjNd1nqM8VeQ4t7SG4lDsJiU3gAjGoLFE/OKjw=;        b=ZWyhiev4lnNWLMu30fd23mjj6t7UzOfX72QIgBlQlP4sFnxD4RCrtkb73KBgsz6Gfl         yuyKtBut+PppJZbzOsikWFgHEnP2RCOrXG517bStDB9eL4Y5rXsGeKsHmL9WouEWik9H         JWUQfft2L+KF6zXZt3SUjXhotiXMmmReYMjiJDp00N/Lohx3a+Fr1vpVsFqhKdR1YB4N         Z1m3KFdj3eLI3Ao78PGoD4yJsDc/Z+yZWtkovAZjOFSvRmY/XbX53hcpfUjTp1htEaok         ON8z3BHblY9nFKw0qVZ9RSpmXSY+O2dsiiVCeoBEzCxEY/VgRGBNLxmY18GaAiCF/1KO         lxGA==</li>
<li>In-reply-to: &lt;<a href="msg00156.html">f8767f5a-92c8-d7a6-de60-d90cd476fe11@io-warnemuende.de</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00149.html">D32DD84B3FCEC3418400F08614D9B8B8D88C0A2A@GROWLER.ern.nps.edu</a>&gt; &lt;CAFXLzPhWeubd_ByREpeHVCRGKSz=WtDDqFL4XE=_7RnF4W-3LA@mail.gmail.com&gt; &lt;<a href="msg00154.html">D32DD84B3FCEC3418400F08614D9B8B8D88C2B12@GROWLER.ern.nps.edu</a>&gt;,&lt;<a href="msg00156.html">f8767f5a-92c8-d7a6-de60-d90cd476fe11@io-warnemuende.de</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>Thread-index: AdKSYRsGR14f6cIRRauE9u948fsXNgA4tXQAAAYn+ZMAE71ogAQAwxAx</li>
<li>Thread-topic: [ferret_users] vertical weighted averagng</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; ">


<div style="direction: ltr;font-family: Tahoma;color: #000000;font-size: 10pt;">Martin, Ryo,
<div>thanks for your answers. Actually @ave is doing weight averaging for vertical averaging. I know that it will also do the same for horizontal averaging. Unfortunately, in my file (please find attached) latitude and longitude are not aligned with x,y axis
 so is I do:</div>
<div><br>
<div>
<div>yes? stat/k=1 temp</div>
<div>&nbsp;...</div>
<div>&nbsp; &nbsp;&nbsp;<span style="font-size: 10pt;">&nbsp;Mean &nbsp; &nbsp;value: -1.7884 (unweighted average)</span></div>
<div>&nbsp;</div>
<div>&nbsp;and using @ave</div>
<div>
<div>yes? list/k=1 temp[x=@ave,y=@ave]</div>
<div><span style="font-size: 10pt;">...</span></div>
<div><span style="font-size: 10pt;">&nbsp; &nbsp; &nbsp; -1.788</span></div>
</div>
<div>but I'd like to have area weighed averaged value. How should I told ferret that x and y is long and lat for averaging computations,</div>
<div>thanks,</div>
<div>Robert</div>
<div><br>
</div>
<div style="font-family: Times New Roman; color: #000000; font-size: 16px">
<hr tabindex="-1">
<div id="divRpF648152" style="direction: ltr;"><font face="Tahoma" size="2" color="#000000"><b>From:</b> Martin Schmidt [martin.schmidt@xxxxxxxxxxxxxxxxx]<br>
<b>Sent:</b> Thursday, March 02, 2017 7:20 AM<br>
<b>To:</b> Osinski, Robert FORNATL, PL; ferret_users@xxxxxxxx<br>
<b>Subject:</b> Re: [ferret_users] vertical weighted averagng<br>
</font><br>
</div>
<div></div>
<div>
<div class="moz-cite-prefix">Hi Robert,<br>
<br>
a first inspection with ncdump shows an overly long file history. There is a flag in nco to supress this.&nbsp;
<br>
<br>
I have the feeling the file is aggregated from time slice files using nco. This is not needed if you are working locally, since ferret can do the aggregation for you. Please consult the manual. For sure, it is appropriate to select one grid point, to send the
 file via mail.<br>
<br>
The first step should be to read the file header with ferret<br>
ferret<br>
<br>
use sample_TS.nc<br>
show data<br>
<br>
You may also want to see the vertical distribution of grid points:<br>
<br>
list z[gz=temp]<br>
<br>
To average temp, you may use the ferret operator @ave<br>
<br>
list/l=1 temp[z=@ave]<br>
<br>
You may plot a time series<br>
<br>
plot temp[z=@ave]<br>
<br>
This looks simple, but for sure ferret makes assumptions where exactly the grid points are positioned within the grid cells. Any information on this like on cell boundaries is missing in the file. So this needs some thoughts.<br>
<br>
So far, the result should be fine. Hope this gets you started. I suggest, to have a look into the excellent manual and go through the tutorial.<br>
<br>
Best,<br>
Martin<br>
<br>
<br>
<br>
<br>
On 03/02/2017 02:56 PM, Osinski, Robert FORNATL, PL wrote:<br>
</div>
<blockquote type="cite">
<div style="direction:ltr; font-family:Tahoma; color:#000000; font-size:10pt">Dears,<br>
sorry if I was not clear enough with my question. <br>
I have model outputs which are not equally spaced in vertical and I'd like to know how to calculate for instance weighted mean in vertical temperature. As example I attached a file with results from single point,<br>
Thanks in advance,<br>
Robert Osinski<br>
NPS&nbsp;
<div>&nbsp; &nbsp;&nbsp;<br>
<div style="font-family:Times New Roman; color:#000000; font-size:16px">
<hr tabindex="-1">
<div id="divRpF139807" style="direction:ltr"><font color="#000000" face="Tahoma" size="2"><b>From:</b> saurabh rathore [<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:rohitsrb2020@xxxxxxxxx" target="_blank">rohitsrb2020@xxxxxxxxx</a>]<br>
<b>Sent:</b> Wednesday, March 01, 2017 6:58 PM<br>
<b>To:</b> Osinski, Robert FORNATL, PL<br>
<b>Cc:</b> <a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:ferret_users@xxxxxxxx" target="_blank">
ferret_users@xxxxxxxx</a><br>
<b>Subject:</b> Re: [ferret_users] vertical weighted averagng<br>
</font><br>
</div>
<div>
<div dir="ltr">
<div class="gmail_default" style="color:rgb(0,0,0)">Hi,<br>
</div>
<div class="gmail_default" style="color:rgb(0,0,0)">I don't know exactly about the question you are asking but i think its very simple to do.<br>
</div>
<div class="gmail_default" style="color:rgb(0,0,0)">suppose you are having var(i,j,k,l)<br>
</div>
<div class="gmail_default" style="color:rgb(0,0,0)">so its simply you can do to average about a single point also suppose you are having k=1:27, 1 corresponds to surface and you want to make average of your 5th level only then you have to do like this<br>
<br>
</div>
<div class="gmail_default" style="color:rgb(0,0,0)">let lev5_ave=var[k=5@ave] <br>
<br>
</div>
<div class="gmail_default" style="color:rgb(0,0,0)">this way you can do to average out the level and it works also.<br>
<br>
</div>
<div class="gmail_default" style="color:rgb(0,0,0)">I hope this is the thing you were asking.<br>
</div>
<div class="gmail_default" style="color:rgb(0,0,0)"><br>
</div>
<div class="gmail_default" style="color:rgb(0,0,0)">regards, saurabh <br>
</div>
</div>
<div class="gmail_extra"><br>
<div class="gmail_quote">On Wed, Mar 1, 2017 at 7:03 PM, Osinski, Robert FORNATL, PL
<span dir="ltr">&lt;<a rel="nofollow" href="mailto:rosinski@xxxxxxx" target="_blank">rosinski@xxxxxxx</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0
                    .8ex; border-left:1px #ccc solid; padding-left:1ex">
<div>
<div style="direction:ltr; font-family:Tahoma; color:#000000; font-size:10pt">Ferreters,<br>
I know that @AVE transformation computes the length-weight average of point in horizontal, but how to calculate weighted average for one point but in vertical?<br>
Thanks in advance,<br>
Robert Osinski<br>
NPS<br>
</div>
</div>
</blockquote>
</div>
<br>
<br clear="all">
<br>
-- <br>
<div class="gmail_signature">
<div dir="ltr">
<div>
<div dir="ltr">
<div><font color="#0000ff" size="4"><b><br>
</b></font></div>
<div><font color="#0000ff" size="4"><b><br>
</b></font></div>
<font color="#0000ff" face="times new roman,
                          serif" size="4"><b>REGARDS</b></font>
<div><font color="#0000ff" face="times new
                            roman, serif" size="4"><b><br>
</b></font>
<div><font color="#0000ff" face="times new
                              roman, serif" size="4"><b>Saurabh Rathore</b></font></div>
<div><font color="#0000ff" face="times new
                              roman, serif" size="4"><b>Research Scholar (PhD.)</b></font></div>
<div><font color="#0000ff" face="times new
                              roman, serif" size="4"><b>Centre For Oceans, Rivers, Atmosphere &amp; Land Science Technology</b></font></div>
<div><font color="#0000ff" face="times new
                              roman, serif" size="4"><b>Indian Institute Of Technology, Kharagpur</b></font></div>
<div><font color="#0000ff" face="times new
                              roman, serif" size="4"><b>contact :- 91- 8345984434</b></font></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</blockquote>
<p><br>
</p>
</div>
</div>
</div>
</div>
</div>


</td></tr></table><p><strong>Attachment:
<a href="cdfNq73LqYXg5.cdf" ><tt>sample_file_POP.nc</tt></a></strong><br>
<em>Description:</em> sample_file_POP.nc</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00238" href="msg00238.html">Re: [ferret_users] vertical weighted averagng</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00149" href="msg00149.html">[ferret_users] vertical weighted averagng</a></strong>
<ul><li><em>From:</em> Osinski, Robert FORNATL, PL</li></ul></li>
<li><strong><a name="00153" href="msg00153.html">Re: [ferret_users] vertical weighted averagng</a></strong>
<ul><li><em>From:</em> saurabh rathore</li></ul></li>
<li><strong><a name="00154" href="msg00154.html">RE: [ferret_users] vertical weighted averagng</a></strong>
<ul><li><em>From:</em> Osinski, Robert FORNATL, PL</li></ul></li>
<li><strong><a name="00156" href="msg00156.html">Re: [ferret_users] vertical weighted averagng</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00156.html">Re: [ferret_users] vertical weighted averagng</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00238.html">Re: [ferret_users] vertical weighted averagng</a></strong>
</li>

</UL>
<center>[<a href="msg00156.html">Thread Prev</a>][<a href="msg00238.html">Thread Next</a>][<A HREF="threads.html#00236">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
