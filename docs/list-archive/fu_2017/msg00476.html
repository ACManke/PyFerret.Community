<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] additional ')' in repeat loop does not lead to error but wrong values -->
<!--X-From-R13: "Oafyrl Q. [naxr" <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Wed, 5 Jul 2017 10:59:43 &#45;0700 -->
<!--X-Message-Id: eefbd856&#45;31e0&#45;3a06&#45;8797&#45;27f502e7db68@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: a1b22554&#45;927f&#45;917d&#45;b11e&#45;d6acd1697fe0@mpic.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] additional ')' in repeat loop does not lead to error but wrong values</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00469.html">Thread Prev</a>][<a href="msg00472.html">Thread Next</a>][<A HREF="threads.html#00476">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] additional ')' in repeat loop does not lead to error but wrong values</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] additional ')' in repeat loop does not lead to error but wrong values</strong></li>
<li><strong>From</strong>: <strong>&quot;Ansley C. Manke&quot; &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 5 Jul 2017 10:59:41 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.b=vpPKp1mM;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 2607:f8b0:400e:c00::234 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.b=vpPKp1mM;       spf=pass (google.com: domain of <a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a> designates 2607:f8b0:400e:c00::234 as permitted sender) smtp.mailfrom=<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a></li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:arc-authentication-results         :arc-message-signature:dkim-signature:arc-authentication-results;        bh=OTzwnM+eyl82+JtatnxpaaJTU6TYI7cWVnDRb8TlwbM=;        b=Od5vC/YsrR1t2pkaw+06TdwXMutsYPYt8dv7yIhVWoLXz9g6oq1vvvERqq1uH5pA3z         JpNohaKA84DQw9m5op0ZYg7rSn3WCgUYhUz1Z4RDRpUBUA3KTKOsb0XUnHpg+kL/7sab         /Z7IEC5eyYkuPUPmIjQ/5ICgnmDCgD4xxdS0lanekdS5QYNOgjeaAaQBULgSwYIAMiQL         0nTa2FabQPdcnsz0G65rrk4ST6OmFGKL7CH1xZ375Mj4zomB/AB6YPs1hx4ls6QY/TBe         O1qfN8A136/Qa9YK34b1OdGZ0ruFZOEd/sMs4soJU3dXTn9A2ekhGbu+8QuxNmZZojjf         pY6g==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-language:in-reply-to:mime-version:user-agent:date         :message-id:from:references:to:subject:dkim-signature         :arc-authentication-results;        bh=OTzwnM+eyl82+JtatnxpaaJTU6TYI7cWVnDRb8TlwbM=;        b=Oh4FiLYGrT+JdkBwYviAI60348az98NbXbNDJFPHmzX8IGBGja/sQpreknF9FnsQvs         xV2ZW3cxK5S8VzgdU7wQXxb1PixUa/o7u9wpdI9FckE6ymT6nfjQ0N/PvMZknUPdXqeE         l40cF2VWDx//OQUE+Alf6D+UzZ2EPxjkg8jymrCQ1Wx4JyTrJXhCQSt04MKtKiAIfYPV         bDaSgjPOqiCiczvnUarhKEIQY9JSar+bG/J2LyLufeVUgiQu649d0vqI07FK9WrdHu94         In/0IucmF7VlN5N/mwBw9cf3Oek/9KsuX/B7F9C8OguRqf3p1ZDL4rvsDCDzbCKbJwe9         76Sw==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1499277583; cv=pass;        d=google.com; s=arc-20160816;        b=jSERWqhNd8dHsmUVRRo/Tl8GoktuhjqiK8/U51FBRO5sZN1iJ2SmNvbSRmOXEVdzcl         NfQ+kYeWMyhJg8ssZaoi4j+MYrYty+XazGzE9knPrxCGldUVdzlYSsfYyEj9K8doHV5p         gceXn4pd/9NbityLpVpGx+OSUml93mkX7UyCP7qwzOV3j57P2CtHh9n9pn3m+etW5ouy         z0h1G8MwXR0AQNkvROZ/9HzOkvX6AemPQLwsJ1WT/UAKMlzfjnjCTfndAEQ3Yeqxj/uw         56ZKdXe0ObC0eijrohixg56WfDU0IeWb+Bijsdpd7dcEfcO6nGjKSbiRFUJ9Dx2faa1b         MVuA==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1499277583; cv=none;        d=google.com; s=arc-20160816;        b=fQITCuBUaH10Sun/7y7iYy0v5+SetxRxoWxWIZw2y5WoMitBq6PLsH+171q8rMsKTr         tu1H0YEIgtMYC/lSLwEy34ta4koSLCNKlOtxZpB5SS61kdujgdrgupmgq9l/sIXTqehG         f0HM/zN8cBHlx4dAWHKe0wkvIT2kCACuIzgWmaIVYLhGX/CkhDJAqcH4MvyqV+RQtuqT         aFC11fp0qGCHIPwRFo3kemuaqhm9KhPQm1s+7OdSaBS0T7SNTdHC8Nq37WreKExtE0yP         wPt9TqY5BikQVo8InDnhalDvH3/+WS42xV/1BmrP9d+HAKELNDJx9LKEkvNj6aBRLXV4         xeyQ==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-language:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=OTzwnM+eyl82+JtatnxpaaJTU6TYI7cWVnDRb8TlwbM=;        b=g36fy8uhYb9sXFr+WQe84/rBYzQLCkEE/rUYRfgypKAXH+qLIf5o80kRjnFvGzYQxB         H2MPT58ZKRcsNpbMaD9xQrjgRmEwAy1gV9mmHGhPmLsJQDHhbFKXCT7uhM73e9WsqZeK         pCXOa19mPPqstoeio5jqJA+hL4zArvp2iqP18Vxglg49zx6B8tOks+36n4YTyahB7Amt         CotELnpiI6dS35v/MG3+qw+Sp1arxfDKtC3E1KitSr4MW7oelWpNw10SMwAylfSJlNdj         EBSPmvFvt5WOQhfAmIlA+OelUz7K9hWZarqq4Nb8Xr1YvjAx6rNsEikumyGn1G4wdRb0         Glxw==</li>
<li>In-reply-to: &lt;<a href="msg00469.html">a1b22554-927f-917d-b11e-d6acd1697fe0@mpic.de</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00469.html">a1b22554-927f-917d-b11e-d6acd1697fe0@mpic.de</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:52.0) Gecko/20100101 Thunderbird/52.2.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    <p>Hi,</p>
    <p>Thank you for the report. What I see is the result gets stuck
      showing a value of 3.&#xA0; With MODE VERIFY turned on, the value of
      ($count) is for some reason evaluated too soon, so it is always
      set to the value it has before that second loop starts,<br>
    </p>
    <blockquote><tt>yes?&#xA0; repeat/range=1:3:1/name=count (def sym count =
        `count`; say ($count); message)</tt><br>
      <tt>...</tt><br>
      <br>
      <tt>yes? repeat/range=1:3:1/name=count (def sym count = `count`;
        say ($count); message))</tt><br>
      <tt>&#xA0;!-&gt; repeat/range=1:3:1/name=count (def sym count =
        `count`; <b><font size="+1">say 3</font></b>; message))</tt><br>
      <tt>!-&gt; REPEAT: COUNT:1</tt><br>
      <tt>&#xA0;!-&gt; def sym count = 1</tt><br>
      <tt>3</tt><br>
      <tt>&#xA0; Hit Carriage Return to continue</tt><br>
      <tt>&#xA0;</tt><br>
      <tt>!-&gt; REPEAT: COUNT:2</tt><br>
      <tt>&#xA0;!-&gt; def sym count = 2</tt><br>
      <tt>3</tt><br>
      <tt>&#xA0; Hit Carriage Return to continue</tt><br>
      <tt>&#xA0;</tt><br>
      <tt>!-&gt; REPEAT: COUNT:3</tt><br>
      <tt>&#xA0;!-&gt; def sym count = 3</tt><br>
      <tt>3</tt><br>
      <tt>&#xA0; Hit Carriage Return to continue</tt><br>
    </blockquote>
    <br>
    This should be a syntax error, so yes, we'll look into why it is
    happening.&#xA0; <br>
    <br>
    It may have to do with how the the "message" command operates. If I
    replace that with something else, for instance, let b = 12, then it
    does report an error.<br>
    <blockquote><tt>yes? repeat/range=1:3:1/name=count (def sym count =
        `count`; say ($count); let b = 12))</tt><br>
    </blockquote>
    The single command,<br>
    &#xA0;<br>
    <tt>&#xA0;&#xA0; yes? message)</tt><br>
    <br>
    does not result in a syntax error, though in other circumstances the
    lack of a paired ( ) would be an error.<br>
    <br>
    Ansley<br>
    <br>
    <div class="moz-cite-prefix">On 7/3/2017 12:49 PM, Riede, Hella
      wrote:<br>
    </div>
    <blockquote type="cite"
      cite="">
      <pre wrap="">Dear ferreters,


I discovered that an additional round bracket at the end of a repeat statement does not lead to an error that exits the command but instead carries on with wrong / old values. Some statements within the loop are apparently then not executed anymore. 


Here's an example where the loop works as expected:

 	NOAA/PMEL TMAP
 	FERRET v7.1 (optimized)
 	Linux 2.6.32-642.13.1.el6.x86_64 64-bit - 02/15/17
 	 3-Jul-17 17:53     
yes? repeat/range=1:3:1/name=count (def sym count = `count`; say ($count); message)
1
  Hit Carriage Return to continue
 
2
  Hit Carriage Return to continue
 
3
  Hit Carriage Return to continue



Here's an example where the loop has an additional round bracket at the end. The value of the ($count) symbol is not reassigned anymore despite 'def sym count = `count`':

yes? repeat/range=1:3:1/name=count (def sym count = `count`; say ($count); message))
4
  Hit Carriage Return to continue
 
4
  Hit Carriage Return to continue
 
4
  Hit Carriage Return to continue



Listing the variable 'count' as well shows that this values changes within the repeat loop as expected, so just the symbol statement seems to be skipped:

yes? repeat/range=1:3:1/name=count (list count; def sym count = `count`; say ($count); message))
             VARIABLE : constant
          1.000
4
  Hit Carriage Return to continue
 
             VARIABLE : constant
          2.000
4
  Hit Carriage Return to continue
 
             VARIABLE : constant
          3.000
4
  Hit Carriage Return to continue
 


So in this way one might inadvertently end up with wrong values assigned to a symbol, or at least other values than expected.



Best wishes,
Hella


</pre>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00469" href="msg00469.html">[ferret_users] additional ')' in repeat loop does not lead to error but wrong values</a></strong>
<ul><li><em>From:</em> Riede, Hella</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00469.html">[ferret_users] additional ')' in repeat loop does not lead to error but wrong values</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00472.html">[ferret_users] SAVE precision of var from binary data?</a></strong>
</li>

</UL>
<center>[<a href="msg00469.html">Thread Prev</a>][<a href="msg00472.html">Thread Next</a>][<A HREF="threads.html#00476">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
