<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] diagonal section -->
<!--X-From-R13: [negva Epuzvqg <znegva.fpuzvqgNvb&#45;jnearzhraqr.qr> -->
<!--X-Date: Wed, 29 Mar 2017 08:11:49 &#45;0700 -->
<!--X-Message-Id: 726c4cc2&#45;1e73&#45;52ae&#45;575a&#45;6372dc126f05@io&#45;warnemuende.de -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: D32DD84B3FCEC3418400F08614D9B8B8D88CB6CD@GROWLER.ern.nps.edu -->
<!--X-Reference: CAEwQpa+dLWxSza6i8uK9_j9nbhVp&#45;szKTP5HE&#45;C0YE8nQgAYRw@mail.gmail.com -->
<!--X-Reference: 0f96d83b&#45;b069&#45;c3cb&#45;b197&#45;ec0355a4bba1@io&#45;warnemuende.de -->
<!--X-Reference: CAEwQpaJBhCoDDf0fD9JXz&#45;cdb&#45;=TeLqKfkc2jPLjthS0uj+_qQ@mail.gmail.com -->
<!--X-Reference: D32DD84B3FCEC3418400F08614D9B8B8D88CCF5C@GROWLER.ern.nps.edu -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] diagonal section</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00253.html">Thread Prev</a>][<a href="msg00245.html">Thread Next</a>][<A HREF="threads.html#00254">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] diagonal section</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] diagonal section</strong></li>
<li><strong>From</strong>: <strong>Martin Schmidt &lt;<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 29 Mar 2017 17:11:26 +0200</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:x-original-sender:x-original-authentication-results         :precedence:mailing-list:list-id:list-post:list-help:list-archive         :list-unsubscribe;        bh=QjNWMMmdhS2E2GUvHoMR5iWkDLHVXQiR1FefXorXXCg=;        b=Kgnl/mxzd2lDIIuHqzcOcF3E6ZtR0XFN0dJNQKTIHXmohHK8wnxonfY7KtMUKx1rpc         W4m7jCcKYXu8AySGWyUpKPAQ7m6KTtakR37cnB6of7ONNaBgRX7ZZisQwl72KLnBMI8T         v9ZqPDgHwO8WePmMmBPQEhivlfRXfbamy0MVXy9yZ71saiavjOhWb4/l86/mH2QSWdYn         CJX0lxHRPnTb93MKd0RZgcuxm5Be/KVE0tDEJ6CL3vRj6cxvDIh09SIYZDtoIH+qHyaO         zOBLssI9kmXs45eamZhXWmtt4x4pMWVygpCP4a+eu9/xwPbbfXNMFIDir/OoxYgTiYQK         ENcw==</li>
<li>In-reply-to: &lt;<a href="msg00253.html">D32DD84B3FCEC3418400F08614D9B8B8D88CCF5C@GROWLER.ern.nps.edu</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;, &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">https://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00237.html">D32DD84B3FCEC3418400F08614D9B8B8D88CB6CD@GROWLER.ern.nps.edu</a>&gt; &lt;<a href="msg00242.html">CAEwQpa+dLWxSza6i8uK9_j9nbhVp-szKTP5HE-C0YE8nQgAYRw@mail.gmail.com</a>&gt; &lt;<a href="msg00243.html">0f96d83b-b069-c3cb-b197-ec0355a4bba1@io-warnemuende.de</a>&gt; &lt;CAEwQpaJBhCoDDf0fD9JXz-cdb-=TeLqKfkc2jPLjthS0uj+_qQ@mail.gmail.com&gt; &lt;<a href="msg00253.html">D32DD84B3FCEC3418400F08614D9B8B8D88CCF5C@GROWLER.ern.nps.edu</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 10.0; WOW64; rv:45.0) Gecko/20100101 Thunderbird/45.8.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi,<br>
    the following script should help to do what you want. Searching the
    web will reveal similar tools. Please be aware that the earth radius
    may be not accurate enough for some purposes.<br>
    Best,<br>
    Martin<br>
    <br>
    \can mode verify<br>
    ! find the great circle distance between 2 points using the law of
    cosines<br>
    ! 4 input arguments specify the (decimal) latitudes/longitudes of
    the points<br>
    ! arg1=latitude 1<br>
    ! arg2=longitude 1 (pos E)<br>
    ! arg3=latitude 2<br>
    ! arg4=longitude 2 (pos (E)<br>
    <br>
    let pd=4*atan(1)/180 <br>
    let rearth=6371.2&#xA0;&#xA0; ! radius of the earth in km<br>
    <br>
    ! latitude must start from N pole (textbook law of cosines)<br>
    let latt1=90-$1<br>
    let latt2=90-$3<br>
    <br>
    ! convert spherical to Cartesian coordinates<br>
    let x1=sin(pd*latt1)*cos(pd*$2)<br>
    let y1=sin(pd*latt1)*sin(pd*$2)<br>
    let z1=cos(pd*latt1)<br>
    let x2=sin(pd*latt2)*cos(pd*$4)<br>
    let y2=sin(pd*latt2)*sin(pd*$4)<br>
    let z2=cos(pd*latt2)<br>
    <br>
    let d1=(((x1 - x2)^2) + ((y1 - y2)^2)) + ((z1 - z2)^2)<br>
    let angle=acos(1-d1/2)&#xA0;&#xA0;&#xA0; &#xA0;&#xA0;&#xA0; ! angular distance between the points<br>
    let distance=rearth*angle&#xA0;&#xA0;&#xA0; ! distance on the sphere<br>
    <br>
    !say `distance` km<br>
    set mode verify<br>
    <br>
    <br>
    <div class="moz-cite-prefix">Am 29.03.2017 um 15:10 schrieb Osinski,
      Robert FORNATL, PL:<br>
    </div>
    <blockquote
      cite=""
      type="cite">
      
      
      <div style="direction: ltr;font-family: Tahoma;color:
        #000000;font-size: 10pt;">Martin, Ruo,<br>
        I'll play with <span dir="ltr">script vertical_section.jnl. Is
          it possible to have distance (from the first point [km]) on X
          axis instated of number of point using vertical_section
          script?<br>
          thanks,<br>
          Robert<br>
          &#xA0;<br>
        </span>
        <div style="font-family: Times New Roman; color: #000000;
          font-size: 16px">
          <hr tabindex="-1">
          <div id="divRpF316874" style="direction: ltr;"><font
              face="Tahoma" color="#000000" size="2"><b>From:</b>
              <a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:owner-ferret_users@xxxxxxxx">owner-ferret_users@xxxxxxxx</a> [<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:owner-ferret_users@xxxxxxxx">owner-ferret_users@xxxxxxxx</a>]
              on behalf of Ryo Furue [<a rel="nofollow" class="moz-txt-link-abbreviated" href="mailto:furue@xxxxxxxxxx">furue@xxxxxxxxxx</a>]<br>
              <b>Sent:</b> Tuesday, March 28, 2017 9:14 AM<br>
              <b>To:</b> Martin Schmidt<br>
              <b>Cc:</b> ferret users<br>
              <b>Subject:</b> Re: [ferret_users] diagonal section<br>
            </font><br>
          </div>
          <div>
            <div dir="ltr">Martin and Robert,<br>
              <div class="gmail_extra">
                <div class="gmail_quote"><br>
                  <blockquote class="gmail_quote" style="margin:0 0 0
                    .8ex; border-left:1px #ccc solid; padding-left:1ex">
                    <div bgcolor="#FFFFFF">
                      <p>Hi, concerning the first question I would like
                        to draw your attention to the script<br>
                      </p>
                      <p>script vertical_section.jnl</p>
                    </div>
                  </blockquote>
                  <div><br>
                  </div>
                  <div>That's excellent! So, it generates the diagonal
                    and uses SAMPLEXY .&#xA0; It's a perfect solution to the
                    original question.</div>
                  <div><br>
                  </div>
                  <div>Ryo</div>
                  <div>&#xA0;</div>
                  <blockquote class="gmail_quote" style="margin:0 0 0
                    .8ex; border-left:1px #ccc solid; padding-left:1ex">
                    <div bgcolor="#FFFFFF">
                      <p>More details on<br>
                      </p>
                      <a rel="nofollow" moz-do-not-send="true"
                        class="m_7332720950543904446moz-txt-link-freetext"
href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS"
                        target="_blank">http://ferret.pmel.noaa.gov/<wbr>Ferret/documentation/users-<wbr>guide/variables-xpressions/<wbr>XPRESSIONS</a><br>
                      <br>
                      Greetings,<br>
                      Martin<br>
                      <div class="m_7332720950543904446moz-cite-prefix">Am
                        28.03.2017 um 14:30 schrieb Ryo Furue:<br>
                      </div>
                      <blockquote type="cite">
                        <div dir="ltr">Hi Robert,
                          <div><font face="Tahoma" color="#000000"><span
                                style="font-size:13.3333px"><br>
                              </span></font>
                            <div class="gmail_extra">
                              <div class="gmail_quote">
                                <blockquote class="gmail_quote"
                                  style="margin:0 0 0 .8ex;
                                  border-left:1px #ccc solid;
                                  padding-left:1ex">
                                  <div>
                                    <div style="direction:ltr;
                                      font-family:Tahoma; color:#000000;
                                      font-size:10pt">
                                      <div>I know how to draw vertical
                                        sections along the grid line but
                                        how to make picture of diagonal
                                        section between two points for
                                        instance between (5,5) and
                                        (15,25).
                                      </div>
                                    </div>
                                  </div>
                                </blockquote>
                                <div><br>
                                </div>
                                <div>I don't have a complete answer, but
                                  if you can generate a set of points
                                  forming the diagonal, you can
                                  accomplish what you need, by using the
                                  function samplexy .</div>
                                <div><br>
                                </div>
                                <blockquote class="gmail_quote"
                                  style="margin:0 0 0 .8ex;
                                  border-left:1px #ccc solid;
                                  padding-left:1ex">
                                  <div>
                                    <div style="direction:ltr;
                                      font-family:Tahoma; color:#000000;
                                      font-size:10pt">
                                      <div>The second question is how to
                                        do the same diagonal section of
                                        velocity perpendicular to this
                                        section having only components
                                        of velocity along axis</div>
                                    </div>
                                  </div>
                                </blockquote>
                                <div><br>
                                </div>
                                <div>Because you know the angle of the
                                  diagonal line, you can compute the
                                  component of velocity perpendicular to
                                  the line by</div>
                                <div><br>
                                </div>
                                <div>&#xA0; let vn = (-1)*u*sin(angle) +
                                  v*cos(angle)<br>
                                </div>
                                <div><br>
                                </div>
                                <div>Once you have computed the normal
                                  component of the velocity like this,
                                  you can again use the samplexy
                                  function to get the slice of the
                                  velocity field along the line.</div>
                                <div><br>
                                </div>
                                <div>(I haven't looked at your netCDF
                                  file . . . .)</div>
                                <div><br>
                                </div>
                                <div>Regards,</div>
                                <div><br>
                                </div>
                                <div>Ryo</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </blockquote>
                      <br>
                    </div>
                  </blockquote>
                </div>
                <br>
              </div>
            </div>
          </div>
        </div>
      </div>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00237" href="msg00237.html">[ferret_users] diagonal section</a></strong>
<ul><li><em>From:</em> Osinski, Robert FORNATL, PL</li></ul></li>
<li><strong><a name="00242" href="msg00242.html">Re: [ferret_users] diagonal section</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00243" href="msg00243.html">Re: [ferret_users] diagonal section</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
<li><strong><a name="00244" href="msg00244.html">Re: [ferret_users] diagonal section</a></strong>
<ul><li><em>From:</em> Ryo Furue</li></ul></li>
<li><strong><a name="00253" href="msg00253.html">RE: [ferret_users] diagonal section</a></strong>
<ul><li><em>From:</em> Osinski, Robert FORNATL, PL</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00253.html">RE: [ferret_users] diagonal section</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00245.html">[ferret_users] creating a mask for calculating Equatable Threat Score(ETS)</a></strong>
</li>

</UL>
<center>[<a href="msg00253.html">Thread Prev</a>][<a href="msg00245.html">Thread Next</a>][<A HREF="threads.html#00254">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
