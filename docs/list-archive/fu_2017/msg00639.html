<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] memory problems in ferret 7.20 (pyferret) -->
<!--X-From-R13: Yney Ezvgu &#45; @AOO Ossvyvngr <xney.fzvguNabnn.tbi> -->
<!--X-Date: Wed, 20 Sep 2017 12:15:00 &#45;0700 -->
<!--X-Message-Id: CAELLC7Vxs&#45;Rc7QBUNzcRm_8fhBiTwC2ySZPG3mzCZ2y=UOCxXA@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAORxmhuDzG858S8HUnNzfEVMskemtzxX7BgQiPe&#45;bunN2zR+ag@mail.gmail.com -->
<!--X-Reference: 85011cbf&#45;739d&#45;c69a&#45;5d66&#45;a72611e3aef2@io&#45;warnemuende.de -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] memory problems in ferret 7.20 (pyferret)</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00638.html">Thread Prev</a>][<a href="msg00642.html">Thread Next</a>][<A HREF="threads.html#00639">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] memory problems in ferret 7.20 (pyferret)</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Martin Schmidt &lt;<a href="mailto:martin.schmidt@DOMAIN.HIDDEN">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] memory problems in ferret 7.20 (pyferret)</strong></li>
<li><strong>From</strong>: <strong>Karl Smith - NOAA Affiliate &lt;<a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 20 Sep 2017 12:14:56 -0700</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.s=20150623 header.b=EjICi6kj;       spf=pass (google.com: domain of <a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a></li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@noaa-gov.20150623.gappssmtp.com header.s=20150623 header.b=EjICi6kj;       spf=pass (google.com: domain of <a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a> designates 209.85.220.41 as permitted sender) smtp.mailfrom=<a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a></li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence:cc         :to:subject:message-id:date:from:references:in-reply-to:mime-version         :arc-authentication-results:arc-message-signature:dkim-signature         :arc-authentication-results;        bh=+rHwvQgLYeyR7eoQCLYst0hyG6yRbSeCuDAQ3RmyRq4=;        b=ag/J1FM2DvzfjDSIAfbF30upU4Gbr5Nk1XjbU1oSYXE02c74H/IjdyiEI/jwJgLVdt         nwil0eonqeaeLNsl+0zoRkR2kxPTdTLj/mi8wz/116J7FgqUXxeTJQMRKp29g2pzGQJm         LFo9HcQWd3MWaGOpGMWVkB38bADw3adoTvwVoBhkJeAbP1RWM7OTv+hCSoXWHKN3UNWU         QDEcM2iyeq75MtojDkD3O6opnPXTRh60ypaM+rtyFu1kAmPEVrxrKPf/jOg3SK8bCULv         IDR0xSIjeIeTp/DKqNr7Balhs+bYptoYIkavzVAPYqq2akNG5rJLZNB/A0kBHkZS2q8V         A2FQ==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=cc:to:subject:message-id:date:from:references:in-reply-to         :mime-version:dkim-signature:arc-authentication-results;        bh=+rHwvQgLYeyR7eoQCLYst0hyG6yRbSeCuDAQ3RmyRq4=;        b=zr6Rqt6xfeEA2Aq/SxqVL7FY4cBFblsSLeJCT5bhrkGU97wuC/J6V5u+0GRHmRv8lY         TOiBqYVVBwwnT4y5OftTtzFKReT1TPr3ioRFSxd6QmNl3BFg4qmztNYyvEQgrEftdRei         dpogCJGST6PxuO4zFr/fPVg/dzyi99k4gXFL0CeSpGGnEkqSNIbTVBzHFydwUOwbBsVb         x4cSyJT2Fg3X6OFXj4qIpgqAs51H71goUU+ZlU04Xhgv7fxe+gCIPQXdpkWaVEvFv0Lz         qOfzHFe+yD6b47hRNOpOzjQBR3CXxnsCt0IvbqeAS2qmUo/fbJv9fuD3jXL7QgnGzxNi         SRkg==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1505934898; cv=pass;        d=google.com; s=arc-20160816;        b=rmDs7nSZ0fwLLqYNLjjduZ2bDFjKuz4gCoYYBWXd5XHYGqevs0lQY6/ZsgpTJI2p9b         KKXQSGKj+9qHaLfcG4AB7UJzPRrBYWHc6AU/09xaoGxxFfdnqtxCATWzwRTlm41doWex         NqwQJIx6VzfXNHnPqCAvLv0H7ElcNBBtEeIOS7Jdlq4hWf1P2IeHWlOVCLbou+ZQ4kDq         ViObuSi5xP72q7aO1xUL1WSMNeEMfihRsWWQ7H0kWjgJzdve7dEY5V2p9S/xwTUkriQc         jSoB3Zq1/d93Rt3pMiPj+Xy4+yOWYO/5VenBzQYXPEjWiGx7kk98ONZ5kRi9kwUaHnRB         pw7g==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1505934897; cv=none;        d=google.com; s=arc-20160816;        b=Epf1Zb+0YXdc7P5v8mEcqxW/ZP7bKwkwBMCXiX8/jOygRLF8twV4l8SXZmRWI3WjWS         i/M7SVmM//PDSC+B0cuEqQvmegJMwy8vrfBnyCn6v4JKfVAacbpKtr+WkCQ5f7AhqlHp         q1SWBHIot5F3SRiFcYs2DEDFYOys10U5YLvKbEcqcY5gDoG5v1773oeJSXwsIDfPtnJh         9BfSpcOCmg6JAwhJJ8jVrGomI4A6MKqzvie4tGGlqBet8HzDSQbdQlm4XP00y4NGzwmM         tE1os0B3ufKYL6deRLp7wWoTGimT8MGLZlAH3oStoXlNitycyHK66MfYLiowADogIB8c         81aw==</li>
<li>Cc: ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=mime-version:in-reply-to:references:from:date:message-id:subject:to         :cc:x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=+rHwvQgLYeyR7eoQCLYst0hyG6yRbSeCuDAQ3RmyRq4=;        b=oLGncj40J5x7jPxPHxaoj7crGMWPNlYP98wZVFGFmdxMtIC/BKBYjg2KugV8/2Xhbv         xVMjiJRzFaewRADCl0I9AHcQicKmIA+qSz9vHv7KaXZZK4AhmS23aws4c9HY4t8QzoTm         BDGu/DBCMjZnetGgTIMWtKFoEgviFz+hiGBvFOqhstYgW8bno2RBIlROQwPz7InNbu8s         UZDKPjRDZrkBANGMP3d4nl13EMZ4lfFyvQli9L4H271EAq9J6+FEJqvGCFSu45FlB58Y         ZuXSqxcKoPVqKYS5/e5DzoVw8vEEw8VJReO47+qL/xaru2gSPSZ1w7Qg+ULRjwyWmnfn         JUsw==</li>
<li>In-reply-to: &lt;<a href="msg00638.html">85011cbf-739d-c69a-5d66-a72611e3aef2@io-warnemuende.de</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00637.html">CAORxmhuDzG858S8HUnNzfEVMskemtzxX7BgQiPe-bunN2zR+ag@mail.gmail.com</a>&gt; &lt;<a href="msg00638.html">85011cbf-739d-c69a-5d66-a72611e3aef2@io-warnemuende.de</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr">Hi Martin,<div><br></div><div>Yes, I am able to reproduce your result (using 7.2.1 just to make sure the problem was not associated with the fixes from 7.2.0 to 7.2.1), as well as the older results using ferret 6.9.7 and 7.1.0.</div><div><br></div><div>I suspect the problem is the handling of calculations that exceed the allocated memory size.&#xA0; In 7.2.0 the ability to split the calculation over a transformed axis was added, and I suspect this might be the source of this problem.</div><div><br></div><div>To show this a little more clearly,&#xA0; I modified your script to play with the memory sizes for each region.&#xA0; I also added a &quot;can mem /all&quot; to make sure ferret was always re-reading data from the source.&#xA0; Using Ferret 7.2.1, for the smaller region I got the value 1.263E+09 for all memory sizes.&#xA0; For the larger region, the values were 3.244E+08 (for 30), 8.262E+08 (for 50), 4.973E+09 (for 300), and 4.973E+09 (for 500).&#xA0; Using Ferret 6.9.7 or 7.1.0 with the smaller region I got the value 1.232E+09 for all memory sizes and with the larger region I got the value 4.760E+09 for all memory sizes.</div><div><br></div><div>I do notice that your lon, lat, and depth axes are irregularly spaced.&#xA0; This might be pertinent to this problem, but I am not sure at this time.&#xA0; Obviously this is a high priority issue in 7.2 to get fixed.</div><div><br></div><div>Best regards,</div><div>Karl</div><div><br></div><div>===</div><div><br></div><div>My script:</div><div><br></div><div>(definitions as before)</div><div><br></div><div><div>set region/t=1-jan-2010:31-dec-2010/x=13.5:14.7/y=-23.5:-22.5</div><div><br></div><div>set memory/size=30</div><div>can memory/all</div><div>list n2_prod[x=@din,y=@din,k=@sum,t=@sum]</div><div><br></div><div>set memory/size=50</div><div>can memory/all</div><div>list n2_prod[x=@din,y=@din,k=@sum,t=@sum]</div><div><br></div><div>set memory/size=300</div><div>can memory/all</div><div>list n2_prod[x=@din,y=@din,k=@sum,t=@sum]</div><div><br></div><div>set memory/size=500</div><div>can memory/all</div><div>list n2_prod[x=@din,y=@din,k=@sum,t=@sum]</div><div><br></div><div>! Increase in y</div><div>set region/t=1-jan-2010:31-dec-2010/x=13.5:14.7/y=-28:-22.5</div><div><br></div><div>set memory/size=30</div><div>can memory/all</div><div>list n2_prod[x=@din,y=@din,k=@sum,t=@sum]</div><div><br></div><div>set memory/size=50</div><div>can memory/all</div><div>list n2_prod[x=@din,y=@din,k=@sum,t=@sum]</div><div><br></div><div>set memory/size=300</div><div>can memory/all</div><div>list n2_prod[x=@din,y=@din,k=@sum,t=@sum]</div><div><br></div><div>set memory/size=500</div><div>can memory/all</div><div>list n2_prod[x=@din,y=@din,k=@sum,t=@sum]</div></div><div><br></div></div><div class="gmail_extra"><br><div class="gmail_quote">On Tue, Sep 19, 2017 at 3:33 PM, Martin Schmidt <span dir="ltr">&lt;<a rel="nofollow" href="mailto:martin.schmidt@xxxxxxxxxxxxxxxxx" target="_blank">martin.schmidt@xxxxxxxxxxxxxxxxx</a>&gt;</span> wrote:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi,<br>
<br>
I find a strange behaviour with pyferret 7.20<br>
<br>
&lt;phy-8:mschmidt&gt;ferret<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; NOAA/PMEL TMAP<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; PyFerret v7.2 (optimized)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Linux 4.4.85-22-default - 09/19/17<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 19-Sep-17 23:27<br>
<br>
the binary is build on openSuse 42.3. netcdf/hdf/szip are build separately, all other ingredients come from the system. The compiler is gcc-5, python is 2.7.13.<br>
<br>
The following example illustrates the problem. Averaging and integrating a bigger dataset. Data are model results kept on a public THREDDS, so it should be reproducable. I leave things as they are without streamlining. Don&#39;t ask for the meaning ...<br>
<br>
use <a rel="nofollow" href="http://phy-50.io-warnemuende.de:8080/thredds/dodsC/genus/genus_run_88_5day_ocean.nc" rel="noreferrer" target="_blank">http://phy-50.io-warnemuende.d<wbr>e:8080/thredds/dodsC/genus/gen<wbr>us_run_88_5day_ocean.nc</a><br>
set region/t=1-jan-2010:31-dec-201<wbr>0/x=13.5:14.7/y=-23.5:-22.5<br>
<br>
let n2_prod_anamm = P_DET_ANAM_N2 * 13.25<br>
let n2_prod_denit = P_DET_DENIT_NH4 * 5.3/2<br>
let n2_prod_h2s&#xA0;&#xA0; = P_H2S_OXNO3_SUL * 0.2<br>
let n2_prod_sul&#xA0;&#xA0; = P_SUL_OXNO3_SO4*3/5<br>
let n2_prod = (n2_prod_anamm + n2_prod_denit + n2_prod_h2s + n2_prod_sul)<br>
<br>
list n2_prod[x=@din,y=@din,k=@sum,t<wbr>=@sum]<br>
<br>
yes? list n2_prod[x=@din,y=@din,k=@sum,t<wbr>=@sum]<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : (N2_PROD_ANAMM + N2_PROD_DENIT + N2_PROD_H2S + N2_PROD_SUL)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DATA SET : MOM4 Baltic Sea 3 n.m.<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILENAME : <a rel="nofollow" href="http://genus_run_88_5day_ocean.nc" rel="noreferrer" target="_blank">genus_run_88_5day_ocean.nc</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILEPATH : <a rel="nofollow" href="http://phy-50.io-warnemuende.de:8080/thredds/dodsC/genus/" rel="noreferrer" target="_blank">http://phy-50.io-warnemuende.d<wbr>e:8080/thredds/dodsC/genus/</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LONGITUDE: 13.5E to 14.7E (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LATITUDE : 23.5S to 22.5S (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DEPTH (m): -0.0009867 to 5700 (ZT summed)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TIME&#xA0;&#xA0;&#xA0;&#xA0; : 01-JAN-2010 00:00 to 31-DEC-2010 00:00 (ZT summed) JULIAN<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1.263E+09<br>
<br>
Now increase the region, the result should be growing significantly<br>
<br>
set region/t=1-jan-2010:31-dec-201<wbr>0/x=13.5:14.7/y=-28:-22.5 ! Note y!<br>
<br>
list n2_prod[x=@din,y=@din,k=@sum,t<wbr>=@sum]<br>
<br>
yes? list n2_prod[x=@din,y=@din,k=@sum,t<wbr>=@sum]<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : (N2_PROD_ANAMM + N2_PROD_DENIT + N2_PROD_H2S + N2_PROD_SUL)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DATA SET : MOM4 Baltic Sea 3 n.m.<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILENAME : <a rel="nofollow" href="http://genus_run_88_5day_ocean.nc" rel="noreferrer" target="_blank">genus_run_88_5day_ocean.nc</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILEPATH : <a rel="nofollow" href="http://phy-50.io-warnemuende.de:8080/thredds/dodsC/genus/" rel="noreferrer" target="_blank">http://phy-50.io-warnemuende.d<wbr>e:8080/thredds/dodsC/genus/</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LONGITUDE: 13.5E to 14.7E (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LATITUDE : 28S to 22.5S (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DEPTH (m): -0.0009867 to 5700 (ZT summed)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TIME&#xA0;&#xA0;&#xA0;&#xA0; : 01-JAN-2010 00:00 to 31-DEC-2010 00:00 (ZT summed) JULIAN<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 8.011E+08<br>
<br>
This is strange, since the quantity is positive everywhere. Check with stats (not shown).<br>
<br>
Now play with the memory size:<br>
<br>
set memory/size=30 ---&gt; 3.244E+08<br>
<br>
set memory/size=50 ---&gt; 3.244E+08 ! Is this stable? No!<br>
<br>
can memory<br>
<br>
set memory/size=50 ---&gt; 8.262E+08<br>
<br>
can memory<br>
<br>
set memory/size=300 ---&gt; 4.973E+09<br>
<br>
I think, this is enough to show, that something does not work correctly.<br>
<br>
The classical ferret shows similar results. Aggregating withouth THREDDS gives 4.973E+09 for the larger region without increasing the memory size!<br>
<br>
Now a previous ferret version:<br>
<br>
ferret<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; NOAA/PMEL TMAP<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; PyFERRET v7 (opt)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Linux 2.6.32-642.1.1.el6.x86_64 - 07/01/16<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 20-Sep-17 00:02<br>
<br>
CAN MODE LOGO<br>
SET MEM /SIZE=25.6<br>
&#xA0;Cached data cleared from memory<br>
SET MODE VERIFY<br>
yes? list n2_prod[x=@din,y=@din,k=@sum,t<wbr>=@sum]<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : (N2_PROD_ANAMM + N2_PROD_DENIT + N2_PROD_H2S + N2_PROD_SUL)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DATA SET : MOM4 Baltic Sea 3 n.m.<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILENAME : <a rel="nofollow" href="http://genus_run_88_5day_ocean.nc" rel="noreferrer" target="_blank">genus_run_88_5day_ocean.nc</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILEPATH : <a rel="nofollow" href="http://phy-50.io-warnemuende.de:8080/thredds/dodsC/genus/" rel="noreferrer" target="_blank">http://phy-50.io-warnemuende.d<wbr>e:8080/thredds/dodsC/genus/</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LONGITUDE: 13.5E to 14.7E (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LATITUDE : 23.5S to 22.5S (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DEPTH (m): -0.0009867 to 5700 (ZT summed)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TIME&#xA0;&#xA0;&#xA0;&#xA0; : 01-JAN-2010 00:00 to 31-DEC-2010 00:00 (ZT summed) JULIAN<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1.232E+09<br>
<br>
Similar, but not the same as before! Make the region bigger now.<br>
<br>
set region/t=1-jan-2010:31-dec-201<wbr>0/x=13.5:14.7/y=-28:-22.5<br>
<br>
list n2_prod[x=@din,y=@din,k=@sum,t<wbr>=@sum]<br>
<br>
yes? list n2_prod[x=@din,y=@din,k=@sum,t<wbr>=@sum]<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : (N2_PROD_ANAMM + N2_PROD_DENIT + N2_PROD_H2S + N2_PROD_SUL)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DATA SET : MOM4 Baltic Sea 3 n.m.<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILENAME : <a rel="nofollow" href="http://genus_run_88_5day_ocean.nc" rel="noreferrer" target="_blank">genus_run_88_5day_ocean.nc</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILEPATH : <a rel="nofollow" href="http://phy-50.io-warnemuende.de:8080/thredds/dodsC/genus/" rel="noreferrer" target="_blank">http://phy-50.io-warnemuende.d<wbr>e:8080/thredds/dodsC/genus/</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LONGITUDE: 13.5E to 14.7E (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LATITUDE : 28S to 22.5S (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DEPTH (m): -0.0009867 to 5700 (ZT summed)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TIME&#xA0;&#xA0;&#xA0;&#xA0; : 01-JAN-2010 00:00 to 31-DEC-2010 00:00 (ZT summed) JULIAN<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 4.760E+09<br>
<br>
Not in spectrum of the previous results!<br>
<br>
Now with another elder ferret:<br>
<br>
ferret<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; NOAA/PMEL TMAP<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FERRET v6.96<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Linux 2.6.18-406.el5 64-bit - 12/02/15<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 20-Sep-17 00:09<br>
<br>
CAN MODE LOGO<br>
SET MEM /SIZE=25.6<br>
&#xA0;Cached data cleared from memory<br>
SET MODE VERIFY<br>
<br>
use &quot;<a rel="nofollow" href="http://phy-50.io-warnemuende.de:8080/thredds/dodsC/genus/genus_run_88_5day_ocean.nc" rel="noreferrer" target="_blank">http://phy-50.io-warnemuende.<wbr>de:8080/thredds/dodsC/genus/ge<wbr>nus_run_88_5day_ocean.nc</a>&quot;<br>
....<br>
<br>
list n2_prod[x=@din,y=@din,k=@sum,t<wbr>=@sum]<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : (N2_PROD_ANAMM + N2_PROD_DENIT + N2_PROD_H2S + N2_PROD_SUL)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DATA SET : MOM4 Baltic Sea 3 n.m.<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILENAME : <a rel="nofollow" href="http://genus_run_88_5day_ocean.nc" rel="noreferrer" target="_blank">genus_run_88_5day_ocean.nc</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILEPATH : <a rel="nofollow" href="http://phy-50.io-warnemuende.de:8080/thredds/dodsC/genus/" rel="noreferrer" target="_blank">http://phy-50.io-warnemuende.d<wbr>e:8080/thredds/dodsC/genus/</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LONGITUDE: 13.5E to 14.7E (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LATITUDE : 23.5S to 22.5S (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DEPTH (m): -0.0009867 to 5700 (ZT summed)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TIME&#xA0;&#xA0;&#xA0;&#xA0; : 01-JAN-2010 00:00 to 31-DEC-2010 00:00 (ZT summed) JULIAN<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 1.232E+09<br>
<br>
!The same as with 7.0<br>
<br>
set region/t=1-jan-2010:31-dec-201<wbr>0/x=13.5:14.7/y=-28:-22.5<br>
<br>
yes? list n2_prod[x=@din,y=@din,k=@sum,t<wbr>=@sum]<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; VARIABLE : (N2_PROD_ANAMM + N2_PROD_DENIT + N2_PROD_H2S + N2_PROD_SUL)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DATA SET : MOM4 Baltic Sea 3 n.m.<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILENAME : <a rel="nofollow" href="http://genus_run_88_5day_ocean.nc" rel="noreferrer" target="_blank">genus_run_88_5day_ocean.nc</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; FILEPATH : <a rel="nofollow" href="http://phy-50.io-warnemuende.de:8080/thredds/dodsC/genus/" rel="noreferrer" target="_blank">http://phy-50.io-warnemuende.d<wbr>e:8080/thredds/dodsC/genus/</a><br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LONGITUDE: 13.5E to 14.7E (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LATITUDE : 28S to 22.5S (XY integ.)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; DEPTH (m): -0.0009867 to 5700 (ZT summed)<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; TIME&#xA0;&#xA0;&#xA0;&#xA0; : 01-JAN-2010 00:00 to 31-DEC-2010 00:00 (ZT summed) JULIAN<br>
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; 4.759E+09<br>
<br>
Again another result - with higher precision the difference does not become small.<br>
<br>
Is it possible to reproduce this finding, or is this specific for my build? Any help is very welcome!<br>
<br>
Greetings,<br>
<br>
Martin<br>
<br>
<br>
<br>
<br>
<br>
</blockquote></div><br><br clear="all"><div><br></div>-- <br><div class="gmail_signature" data-smartmail="gmail_signature"><div dir="ltr">Karl M. Smith, Ph.D.<br>JISAO Univ. Wash. and PMEL NOAA<br>&quot;The contents of this message are mine personally and do<br>not necessarily reflect any position of the Government<br>or the National Oceanic and Atmospheric Administration.&quot;<br></div></div>
</div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00637" href="msg00637.html">[ferret_users] error when saving a .ps figure</a></strong>
<ul><li><em>From:</em> karen guihou</li></ul></li>
<li><strong><a name="00638" href="msg00638.html">[ferret_users] memory problems in ferret 7.20 (pyferret)</a></strong>
<ul><li><em>From:</em> Martin Schmidt</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00638.html">[ferret_users] memory problems in ferret 7.20 (pyferret)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00642.html">[ferret_users] pH calculation from co2 in water</a></strong>
</li>

</UL>
<center>[<a href="msg00638.html">Thread Prev</a>][<a href="msg00642.html">Thread Next</a>][<A HREF="threads.html#00639">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
