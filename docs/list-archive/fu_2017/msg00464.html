<!-- MHonArc v2.6.18 -->
<!--X-Subject: [ferret_users] Masking in list command works for floats, not strings -->
<!--X-From-R13: "Dvrqr, Vryyn" <uryyn.evrqrNzcvp.qr> -->
<!--X-Date: Tue, 27 Jun 2017 09:39:12 &#45;0700 -->
<!--X-Message-Id: 99e4f7ced0844554ba730089bf8c4f1c@mpic.de -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Derived: binH506S0538H.bin -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[ferret_users] Masking in list command works for floats, not strings</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00461.html">Thread Prev</a>][<a href="msg00465.html">Thread Next</a>][<A HREF="threads.html#00464">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] Masking in list command works for floats, not strings</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>ferret users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] Masking in list command works for floats, not strings</strong></li>
<li><strong>From</strong>: <strong>&quot;Riede, Hella&quot; &lt;<a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 27 Jun 2017 16:38:59 +0000</li>
<li>Accept-language: en-US, de-DE</li>
<li>Arc-authentication-results: i=1; mx.google.com;       spf=pass (google.com: best guess record for domain of <a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxxx</a> designates 192.67.218.51 as permitted sender) smtp.mailfrom=<a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxxx</a></li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=mime-version:content-language:accept-language:message-id:date         :thread-index:thread-topic:subject:to:from         :arc-authentication-results;        bh=WDZlSw3AJyh+WS3zsRsJNjCfyqSJBS2eT39G7D36Zms=;        b=su6yii58oz/p3egsb43EMHpnfg44aF+XrHZB2taPaPuI8Jco4M9/k6E+Mw0qSsDAVo         PnkLeGQwgQX4H+QZH3j7nwcha7E+moakKO2pcZQCzTDcOMteNno4EnZak/ti/lgKs+Om         wAfoOVb29w4hPP1joMJyEkggagcxJDCmee3Ll4CBwZc+Bo4muSmPIDaqPZVAllZOF9dI         /u+OewksQeCRJMCE5ubU3K5FMg+S/Qp3KCdYVrEklUfkDHPj7zq+yHSbuzcBWbVy3lbi         9NRneV7hRu7/QyIMzhKe3cIH83H1XD9ji9gZEAyQ6mqXbUb0YRNccKDjdeXSg/Lfy8XI         qK0Q==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1498581550; cv=none;        d=google.com; s=arc-20160816;        b=davAk+FHoILfx76sOxUQVll1zdnFjheVsvOERUiHYF0ca1wj6ZRxCNJ8/muG406+mq         AnChZKK9ieDcWI1N65OM9xahKC9cSzPcZw2xxtk0IQDX/HatIKkM+T+XVXs+WXSzL5Hh         nMpGN/xjMvFfsU/nFscUMirv5DCs5V2Bx25B410MyWHZ6Tk19/1YzmjDMVYKc+71pLw0         0vsV646tpN5TnG7YIqMorkym08miH17LjmBMKZPVMEochLkSUQhIQWQwT11H4xS7V495         bcW3LjVsrRuAmWg/F/A7NXLPUm8h+kCErF4F+AD7fYRKB1g7ONTx//UeJ2TyHQc6SWPW         z5+A==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=from:to:subject:thread-topic:thread-index:date:message-id         :accept-language:content-language:mime-version:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=WDZlSw3AJyh+WS3zsRsJNjCfyqSJBS2eT39G7D36Zms=;        b=kD8NWvnPkGglj0Pyt05S0NrS5pq17NLYLOc4BSZX/+00or93f3XnalLUYT49oP6cYm         jgCMKCBJOZ/f0G80mIdKd17PBq3yxEjELkFe/yD21jad6385oCyv9Qf2VQnBwyC1VMpa         52BZYcv3J8JlG4jPbMr20NFDQ8tqJ0ymg9M6w3/ca+suRvtB3w/DNVqmNRBj/BdvDrpF         kP2exz0HBmUTOqfUlR4QKkbs4g6bWie59H4YVf6foOPY0idhouRmhOwn1ShSp3u7KWY/         Ln5jx1PMQ0bioJGjBHyTlbFn9TlsCfN8MaDTIHy99o7qsCTYpSjbDL5S7Cqkml5WeoIF         nChw==</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>Thread-index: AQHS72NKl8qVM0gqnEeRSg8WXMjiog==</li>
<li>Thread-topic: Masking in list command works for floats, not strings</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Dear ferreters,

I discovered listing while masking seems to work. But not in all cases (see also attached script file with more examples and comments):


yes? let test = {1,1,0}

!! problem with masked strings -&gt; unexpected values
yes? let strings = {&quot;a&quot;,&quot;b&quot;,&quot;c&quot;}
yes? list if (test) then strings
             VARIABLE : IF (TEST) THEN STRINGS
             SUBSET   : 3 points (X)
 1   / 1:  2.109-316
 2   / 2:  2.109-316
 3   / 3:  2.109-316
!! repeat the listing, and the values change every time

!! define a masked variable instead, then list - works
yes? let masked = if (test) then strings
yes? list masked
             VARIABLE : IF (TEST) THEN STRINGS
             SUBSET   : 3 points (X)
 1   / 1:&quot;a&quot;
 2   / 2:&quot;b&quot;
 3   / 3:&quot;&quot; 

!! OR do the same listing for a float first
yes? let floats = {2,3,4}
yes? list if (test) then floats
             VARIABLE : IF (TEST) THEN FLOATS
             SUBSET   : 3 points (X)
 1   / 1:  2.000
 2   / 2:  3.000
 3   / 3:   ....

!! now, also for strings listing while masking works
yes? list if (test) then strings
             VARIABLE : IF (TEST) THEN STRINGS
             SUBSET   : 3 points (X)
 1   / 1:&quot;a&quot;
 2   / 2:&quot;b&quot;
 3   / 3:&quot;&quot; 


In an interactive ferret session, I first had defined a masked variable for strings (in this example 'masked'), and had also listed it for testing. After that I discovered that listing while masking works too (of course I didn't know it only worked because I had defined and listed the 'masked' variable before, in the same session). So later in my ferret script I omitted defining the 'masked' variable, and used the listing while masking. The script did not crash, but gave me unexpected values like the ones above, instead of proper strings.

Would be good to fix this, or - if the syntax of listing while masking is not supported - to catch these cases and throw an error.

The story goes on, however, see attached script as it seems not possible to mask a string variable and then make an xsequence out of it - unless you do for instance the &quot;faulty listing while masking&quot; from above before the &quot;right&quot; listing.



Best wishes,
Hella

PyFerret v7.11 (beta/optim), Linux 4.4.0-72-generic - 04/19/17</pre><p><strong>Attachment:
<a href="binH506S0538H.bin" ><tt>mask_string.jnl</tt></a></strong><br>
<em>Description:</em> mask_string.jnl</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00465" href="msg00465.html">Re: [ferret_users] Masking in list command works for floats, not strings</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00461.html">[ferret_users] combine ncdf files with nc2mc.sh</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00465.html">Re: [ferret_users] Masking in list command works for floats, not strings</a></strong>
</li>

</UL>
<center>[<a href="msg00461.html">Thread Prev</a>][<a href="msg00465.html">Thread Next</a>][<A HREF="threads.html#00464">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
