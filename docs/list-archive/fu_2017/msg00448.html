<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Spatial average from multiple files; -->
<!--X-From-R13: Yneana Q <xneanap6Ntznvy.pbz> -->
<!--X-Date: Mon, 19 Jun 2017 22:20:56 &#45;0700 -->
<!--X-Message-Id: CAFYXeb9VVsqR22VsOTQvgX959Ki7AWjkhRSHCz5+PXQTgk_tUg@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAFYXeb_NKcc8SyPKgLrAK7jfGxmNHJCjsG5YDTynRQsRwJ39Og@mail.gmail.com -->
<!--X-Reference: aac88d67&#45;fbbf&#45;4326&#45;519c&#45;3960edbbeb89@csiro.au -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Spatial average from multiple files;</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00442.html">Thread Prev</a>][<a href="msg00450.html">Thread Next</a>][<A HREF="threads.html#00448">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Spatial average from multiple files;</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Russ Fiedler &lt;<a href="mailto:russell.fiedler@DOMAIN.HIDDEN">russell.fiedler@xxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Spatial average from multiple files;</strong></li>
<li><strong>From</strong>: <strong>Karnan C &lt;<a href="mailto:karnanc6@DOMAIN.HIDDEN">karnanc6@xxxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 20 Jun 2017 10:50:53 +0530</li>
<li>Arc-authentication-results: i=2; mx.google.com;       dkim=pass header.i=@gmail.com header.b=G98mc8y0;       spf=pass (google.com: domain of <a href="mailto:karnanc6@DOMAIN.HIDDEN">karnanc6@xxxxxxxxx</a> designates 2a00:1450:400c:c09::22e as permitted sender) smtp.mailfrom=<a href="mailto:karnanc6@DOMAIN.HIDDEN">karnanc6@xxxxxxxxx</a>;       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=gmail.com</li>
<li>Arc-authentication-results: i=1; mx.google.com;       dkim=pass header.i=@gmail.com header.b=G98mc8y0;       spf=pass (google.com: domain of <a href="mailto:karnanc6@DOMAIN.HIDDEN">karnanc6@xxxxxxxxx</a> designates 2a00:1450:400c:c09::22e as permitted sender) smtp.mailfrom=<a href="mailto:karnanc6@DOMAIN.HIDDEN">karnanc6@xxxxxxxxx</a>;       dmarc=pass (p=NONE sp=NONE dis=NONE) header.from=gmail.com</li>
<li>Arc-message-signature: i=2; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=list-archive:list-help:list-post:list-id:mailing-list:precedence         :content-transfer-encoding:cc:to:subject:message-id:date:from         :references:in-reply-to:mime-version:arc-authentication-results         :arc-message-signature:dkim-signature:arc-authentication-results;        bh=8Gy7Bq/ULW+xNtkavngbmaXCfyuLNGYrVFm/OqeQNAc=;        b=v98iia02xu1YHt99+AV0MKp3O+Mt6Z1kIKBAJxhqsjASfltUuscWg3a8z+yGnzUjDu         vxSbJmRkFIKnvJ4Sn645E0xG59Uq5HVqM0lUZe6ha/1ZDpzEEy1weZ4r+RgdCSNSNIUJ         +w/dRI5J2gzWIySmFE5F4HJoqtCK5jCfRRaVzNCZycIG5uolkPI15TH0kYA+8KWZaea4         YqRNW3xo8mpfEsF1n1BxnEGqnFOGqeEiH/MU97z0uU9axDItktrJ2O78PejJf4mQKs0k         xWB8beHJMutKBmYSEBW/Xq+mwZJ1zJ7kVWCA6+d01fHRW0TA66dyWEGdb4bOG1HnUUBK         e6LA==</li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-transfer-encoding:cc:to:subject:message-id:date:from         :references:in-reply-to:mime-version:dkim-signature         :arc-authentication-results;        bh=8Gy7Bq/ULW+xNtkavngbmaXCfyuLNGYrVFm/OqeQNAc=;        b=XMdOCtF6OYiDweemPTIS3FdeY0j7ldYZHl457pJB5GhnqiWq2lYicCmUGQHRd5ESts         X+aOxdcX0FY1JO/a7rYJRZPEwbpYD+bdjDmg2kzw+bd3XArLpCY+SCh+k0Ca9Zl9lLBm         ApxjVbXuN7nV2ex25gANQVgNVUgzoHj5WjTXuFWFFg6fK8Xw/lPwTulDD0DgN3VZL/Uk         PqXf/dcnJqu4JEuuVgKCp/jk1xT5h2lKqUPZAgJuVNyMlcblpvYIKTekNjKdKc+cnAos         7IKdFLknUQ0NBFLCV3HhTUwVdKboicegVhxCvwTWxnmJyQn2lYlDt1p9qpq9dn44MQGE         2Qmg==</li>
<li>Arc-seal: i=2; a=rsa-sha256; t=1497936055; cv=pass;        d=google.com; s=arc-20160816;        b=a48j/DPTok2wFDMBwHa9IZlwTGDyFXK0R35vdJ2yKLfnOAiA9a99GS0vdF3PCMilKD         L1KOgn/w+i1WyZeIT5aR3IqB9YkO+f210d0arXMHSFJSExhY81z0Ro9wo41sfmL4nU2q         eKbcFGfSFE9X3+40OfsoGxYLU/6PFmSFqNc/C9mldofK78nRHIka6Kj2bopZymwn15b1         oS2je+7rmj9VVSfAb1hjmWBK6h1ns/1FDy0fj5z81AVy6S1EBg3lSWzYKXhe/1cioqBq         o+Z9TL2MKD4jl+zEnaRY8OMD+ERQCVxdCCnZt2V5O1TrIDwHnaU6WOTtx+w1ilwYzTo0         GEAQ==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1497936054; cv=none;        d=google.com; s=arc-20160816;        b=ILrIauly1ywMUSkM/K3YTJm+43lG8kQtzfm30JwycQnljRu9c33oa52AILllLH+Hun         319cT46s0aqWioNe9UhEjXWtKGVFxxFeMQg0wsw8CmHDnhx9Qbvm34H6scxvv66jS+Qt         sOlGL9vb4HzJweGmyNwfOU0qTQe3wU/kFee3az3Jeid7AdhCow+BTIX9D9/xe6fdNytW         rc2gYcX1RJ2LjI3ESZRcmjZNYk8Ppnh+LcT6Kf6N1RrZ+bW8k6M+FgkQmS5SIsmBtLYF         9KK0UI8K0lR9MNI9itwm7F7ZZTst0zp1sciepz3W01XSX/vu/1sX92Wx/bBToUtBDAhZ         ec+g==</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=mime-version:in-reply-to:references:from:date:message-id:subject:to         :cc:content-transfer-encoding:x-original-sender         :x-original-authentication-results:precedence:mailing-list:list-id         :list-post:list-help:list-archive;        bh=8Gy7Bq/ULW+xNtkavngbmaXCfyuLNGYrVFm/OqeQNAc=;        b=Dvwq1hdTm+7/B8EjCepRd63tBncj9dzXXsByqvKY0nG92Ou/beCLFdc5GvWLQoprOn         UPPPwKpUSsHZFE5pHToOK5v9TVpgO7udrbXiujYt+0LvkPIPCR/PdkmxfxqnO1DLhY4v         rLoNCioASw8QcHFYxcfNiQ9w8dnLv3bt7xtERUXdxoAhdL4IJrcYP2no8zrOOyaNwynd         fWPxwz+Ubaq6hBt3bErZLW8PcIrcECC/pXqZqWWpNCk5IfwrOB6a20aLnk00Antljk0F         CgIAdvurHNPdON9JLlR9OK82IQNTxrCN0FHG2k8yZhM1EYy9dBnVWwNFFUjEiU1skZRG         DZoA==</li>
<li>In-reply-to: &lt;<a href="msg00442.html">aac88d67-fbbf-4326-519c-3960edbbeb89@csiro.au</a>&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00441.html">CAFYXeb_NKcc8SyPKgLrAK7jfGxmNHJCjsG5YDTynRQsRwJ39Og@mail.gmail.com</a>&gt; &lt;<a href="msg00442.html">aac88d67-fbbf-4326-519c-3960edbbeb89@csiro.au</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Thank you Dr Russ,
The suggested ensemble (DEFINE/DATA)&#xA0;method is working well.

yes? use 1.nc , 2.nc , 3.nc , 4.nc
yes? DEFINE DATA/AGGR/E/TITLE=&quot;kd&quot; KD490_aggr= 1, 2, 3, 4
yes? shade MODISA_L3M_KD_2014_KD_490[d=KD490_aggr,m=@ave]

Here the fill value (-32767) also took role in deriving average,
though my actual data range is 0.01 to 5.

Then I used the following scripts to change the fill value for each file

yes? set var/bad=0 MODISA_L3m_KD_2014_Kd_490

Then I followed above method (ensemble).
Now I got the spatial average.

Thank you very much.



2017-06-16 11:43 GMT+05:30 Russ Fiedler &lt;russell.fiedler@xxxxxxxx&gt;:
&gt;
&gt;
&gt; Hi,
&gt;
&gt; Try making an ensemble. This will make virtual dataset using the E/M dimension
&gt;
&gt; ENSEMBLE/title=&quot;KD490 Ensemble&quot; kd490_ens=1,2,3,4
&gt; show data kd490_ens
&gt;
&gt; shade MODISA_L3M_KD_2014_KD_490[d=kd490_ens,m=@ave]
&gt;
&gt;
&gt; Look up DEFINE/DATA in the documentation for more info.
&gt;
&gt; Russ
&gt;
&gt;
&gt; On 16/06/17 15:24, Karnan C wrote:
&gt;&gt;
&gt;&gt; Hi,
&gt;&gt;
&gt;&gt; I tried to derive spatial average of KD490 from four different files (1.nc, 2.nc, 3.nc and 4.nc&#xA0;downloaded from giovanni database)
&gt;&gt;
&gt;&gt; \\I used the following stpes
&gt;&gt;
&gt;&gt; yes? use 1.nc , 2.nc , 3.nc , 4.nc
&gt;&gt; yes? sh da
&gt;&gt; &#xA0; &#xA0; &#xA0;currently SET data sets:
&gt;&gt; &#xA0; &#xA0; 1&gt; ./1.nc
&gt;&gt; &#xA0;name &#xA0; &#xA0; title &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; I &#xA0; &#xA0; &#xA0; &#xA0; J &#xA0; &#xA0; &#xA0; &#xA0; K &#xA0; &#xA0; &#xA0; &#xA0; L &#xA0; &#xA0; &#xA0; &#xA0; M &#xA0; &#xA0; &#xA0; &#xA0; N
&gt;&gt; &#xA0;MODISA_L3M_KD_2014_KD_490
&gt;&gt; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Diffuse attenuation coefficient &#xA0;1:156 &#xA0; &#xA0; 1:96 &#xA0; &#xA0; &#xA0;... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ...
&gt;&gt;
&gt;&gt; &#xA0; &#xA0; 2&gt; ./2.nc
&gt;&gt; &#xA0;name &#xA0; &#xA0; title &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; I &#xA0; &#xA0; &#xA0; &#xA0; J &#xA0; &#xA0; &#xA0; &#xA0; K &#xA0; &#xA0; &#xA0; &#xA0; L &#xA0; &#xA0; &#xA0; &#xA0; M &#xA0; &#xA0; &#xA0; &#xA0; N
&gt;&gt; &#xA0;MODISA_L3M_KD_2014_KD_490
&gt;&gt; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Diffuse attenuation coefficient &#xA0;1:156 &#xA0; &#xA0; 1:96 &#xA0; &#xA0; &#xA0;... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ...
&gt;&gt;
&gt;&gt; &#xA0; &#xA0; 3&gt; ./3.nc
&gt;&gt; &#xA0;name &#xA0; &#xA0; title &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; I &#xA0; &#xA0; &#xA0; &#xA0; J &#xA0; &#xA0; &#xA0; &#xA0; K &#xA0; &#xA0; &#xA0; &#xA0; L &#xA0; &#xA0; &#xA0; &#xA0; M &#xA0; &#xA0; &#xA0; &#xA0; N
&gt;&gt; &#xA0;MODISA_L3M_KD_2014_KD_490
&gt;&gt; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Diffuse attenuation coefficient &#xA0;1:156 &#xA0; &#xA0; 1:96 &#xA0; &#xA0; &#xA0;... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ...
&gt;&gt;
&gt;&gt; &#xA0; &#xA0; 4&gt; ./4.nc &#xA0;(default)
&gt;&gt; &#xA0;name &#xA0; &#xA0; title &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; I &#xA0; &#xA0; &#xA0; &#xA0; J &#xA0; &#xA0; &#xA0; &#xA0; K &#xA0; &#xA0; &#xA0; &#xA0; L &#xA0; &#xA0; &#xA0; &#xA0; M &#xA0; &#xA0; &#xA0; &#xA0; N
&gt;&gt; &#xA0;MODISA_L3M_KD_2014_KD_490
&gt;&gt; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Diffuse attenuation coefficient &#xA0;1:156 &#xA0; &#xA0; 1:96 &#xA0; &#xA0; &#xA0;... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ... &#xA0; &#xA0; &#xA0; ...
&gt;&gt;
&gt;&gt;
&gt;&gt; yes? fill MODISA_L3M_KD_2014_KD_490[d=1]
&gt;&gt; yes? frame/file=Figure1.gif &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;//Figure1 in the attachement
&gt;&gt; yes? fill MODISA_L3M_KD_2014_KD_490[d=2]
&gt;&gt; yes? frame/file=Figure2.gif &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;//Figure2 in the attachement
&gt;&gt; yes? fill MODISA_L3M_KD_2014_KD_490[d=3]
&gt;&gt; yes? frame/file=Figure3.gif &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;//Figure3 in the attachement
&gt;&gt; yes? fill MODISA_L3M_KD_2014_KD_490[d=4]
&gt;&gt; yes? frame/file=Figure4.gif &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;//Figure4 in the attachement
&gt;&gt;
&gt;&gt; yes? fill (MODISA_L3M_KD_2014_KD_490[d=1]+MODISA_L3M_KD_2014_KD_490[d=2]+MODISA_L3M_KD_2014_KD_490[d=3]+MODISA_L3M_KD_2014_KD_490[d=4])/4
&gt;&gt;
&gt;&gt; yes? frame/file=Figure5.gif &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;//Figure5 in the attachement
&gt;&gt;
&gt;&gt;
&gt;&gt; //In the&#xA0;image, most of the regions were empty while taking the average (the method read from ferret user group).
&gt;&gt; //It was because of the missing data in any of the file (eg. 4.nc), led&#xA0;the empty regions, though other files having values.
&gt;&gt;
&gt;&gt; I should take the&#xA0;average from these files.
&gt;&gt; How can I solve this?
&gt;&gt; Is it possible to replace the 'no data (....)' as 'zero (0)'?
&gt;&gt; or Is it possible to feed K and L axis with some values like L value = 1,2,3 and 4 for each .nc files,&#xA0;respectively? May it be useful to take average like
&gt;&gt; &quot;yes? fill MODISA_L3M_KD_2014_KD_490 [l=1:4@AVE]&quot;.
&gt;&gt;
&gt;&gt; The sample data files attached here.
&gt;&gt;
&gt;&gt; Thanks.
&gt;&gt; --
&gt;&gt; C. Karnan, CSIR - SRF
&gt;&gt; National Institute of Oceanography (CSIR)
&gt;&gt; India.
&gt;
&gt;



-- 
C. Karnan, CSIR - SRF
Ph. D Research Scholar
National Institute of Oceanography (CSIR)
Regional Centre,&#xA0;Dr Salim Ali Road
Kochi - 682 018.
India.
Mobile No. +91 9633032345; +91 9941811608


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00450" href="msg00450.html">Re: [ferret_users] Spatial average from multiple files;</a></strong>
<ul><li><em>From:</em> Ansley C. Manke</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00441" href="msg00441.html">[ferret_users] Spatial average from multiple files;</a></strong>
<ul><li><em>From:</em> Karnan C</li></ul></li>
<li><strong><a name="00442" href="msg00442.html">Re: [ferret_users] Spatial average from multiple files;</a></strong>
<ul><li><em>From:</em> Russ Fiedler</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00442.html">Re: [ferret_users] Spatial average from multiple files;</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00450.html">Re: [ferret_users] Spatial average from multiple files;</a></strong>
</li>

</UL>
<center>[<a href="msg00442.html">Thread Prev</a>][<a href="msg00450.html">Thread Next</a>][<A HREF="threads.html#00448">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
