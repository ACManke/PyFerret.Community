<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] combine ncdf files with nc2mc.sh -->
<!--X-From-R13: Vryyn Dvrqr <uryyn.evrqrNzcvp.qr> -->
<!--X-Date: Sun, 25 Jun 2017 16:40:18 &#45;0700 -->
<!--X-Message-Id: a7b5d2ba&#45;4197&#45;da52&#45;7e50&#45;56ac74f39420@mpic.de -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: DB6PR07MB3367C4A7421AF50C75F5C3DD88D80@DB6PR07MB3367.eurprd07.prod.outlook.com -->
<!--X-Reference: WM!418b38c445c0c6fdf136fec73d283896f17fd6d6f7c7bc5a5c1bc212f4e3ef5d40a8b189839956dd9ecaf78d3f7dc11e!@mailhub&#45;mx3.ncl.ac.uk -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] combine ncdf files with nc2mc.sh</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00462.html">Thread Prev</a>][<a href="msg00466.html">Thread Next</a>][<A HREF="threads.html#00463">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] combine ncdf files with nc2mc.sh</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>&lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;, &lt;<a href="mailto:E.Gavilan-Pascual-Ahuir1@DOMAIN.HIDDEN">E.Gavilan-Pascual-Ahuir1@xxxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] combine ncdf files with nc2mc.sh</strong></li>
<li><strong>From</strong>: <strong>Hella Riede &lt;<a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 26 Jun 2017 01:40:12 +0200</li>
<li>Arc-authentication-results: i=1; mx.google.com;       spf=pass (google.com: best guess record for domain of <a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxxx</a> designates 192.67.218.51 as permitted sender) smtp.mailfrom=<a href="mailto:hella.riede@DOMAIN.HIDDEN">hella.riede@xxxxxxx</a></li>
<li>Arc-message-signature: i=1; a=rsa-sha256; c=relaxed/relaxed; d=google.com; s=arc-20160816;        h=content-transfer-encoding:content-language:in-reply-to:mime-version         :user-agent:date:message-id:from:references:to:subject         :arc-authentication-results;        bh=dMRMN5hFLIuGm+OhuSmud85t58lTDYMfQL0qQoDTuM0=;        b=Nh1eXMhPuMb+JtT8bPF5AAgm0Dzb7TnUemXM5cBnVj0nNxKf05Xqw82vxmtCMCcSf9         B06R81/0KTb449jI/ssihMI5302BGsQFtsymn0tkbBNA3kxbUXxlvC/eOTaCmzRzgez2         hfstlFf+Rbu57zEbq6eAg7Jpq6TB8qyFKEWGdaKS4y6LF/fJoFOcxHwx28d2FT88Sz6O         eyspMWW/UBDtTfKRp6MwaDiOKd5yVNMfuRt/nvaLfuM04iY4vD0DOWKNVFPuk/VgV3ah         WdAJPlTwwu7oBZaKhrvakWSCSSlTVj3j98GONjJeHOn+aBunI2oHWncFcMBwNFo93HSa         WpGA==</li>
<li>Arc-seal: i=1; a=rsa-sha256; t=1498434016; cv=none;        d=google.com; s=arc-20160816;        b=qH7SSgeRjEpU3GSHlRicIE7helEaGBYM2S8/2n+et6bMZCCTMeoleZ98VrGe3SpQRA         WMikxJ1oY+N4Y5oXiOz5Pgt+LxiKGn9lHt0L0Vc7ich0Z9qIpAVkDUZzTg4zUYH5ZTUa         Y0u7NHjJMyofurn1TiUGBFWSzoT0P14Que46sgoPq8PT97ovJApeH7/KC6+gsVFNOyIP         dE/oFMwofqwJmiEQyM5s/YkwMt702ftN0LrMyxTwDpLYbBxBujlOhRhj5Nry0Wtka79j         OdGelxiy0zpzaifDyYi3hUpJ1sdk/b+4izjnCHaIV99y+uZq5ih0Zjy2C0L16x3W8Lz8         MnFA==</li>
<li>Dkim-signature: v=1; a=rsa-sha256; c=relaxed/relaxed;        d=noaa-gov.20150623.gappssmtp.com; s=20150623;        h=subject:to:references:from:message-id:date:user-agent:mime-version         :in-reply-to:content-language:content-transfer-encoding         :x-original-sender:x-original-authentication-results:precedence         :mailing-list:list-id:list-post:list-help:list-archive;        bh=dMRMN5hFLIuGm+OhuSmud85t58lTDYMfQL0qQoDTuM0=;        b=Usd4lEv/qHnYqBRxTdcMMBOyy2hiYTWopKqImDaXJiamTblWAAkLEBWn28PWyRZ1XY         oHPDTJ2OxxwHdJ3z/RUg0NVCWpYHs/36TKXSZCiZguVmdFWuXIfMoKkyoYp8lB9JnAuO         eDK/ErpzPdaTDtLZh6vq7B9xCnNN3YExTPCMUKqtIMr22E538C12hWiun+816atmZCkq         XKyW2Uvqf2Y9GGpE/oNEye+HN9FdCD30kEgV/X1IojrLaON62plh3L3IxVj/cJhQMkLY         GLRhGtIVUYE2P69kqIEnnHqBjs8wvfGacD5vf0oFvdACl75bCF505TY+7IXhWJdlnQ1/         VltA==</li>
<li>In-reply-to: &lt;WM!418b38c445c0c6fdf136fec73d283896f17fd6d6f7c7bc5a5c1bc212f4e3ef5d40a8b189839956dd9ecaf78d3f7dc11e!@mailhub-mx3.ncl.ac.uk&gt;</li>
<li>List-archive: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/">https://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">https://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="https://groups.google.com/a/noaa.gov/group/ferret_users/post">https://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;DB6PR07MB3367C4A7421AF50C75F5C3DD88D80@DB6PR07MB3367.eurprd07.prod.outlook.com&gt; &lt;WM!418b38c445c0c6fdf136fec73d283896f17fd6d6f7c7bc5a5c1bc212f4e3ef5d40a8b189839956dd9ecaf78d3f7dc11e!@mailhub-mx3.ncl.ac.uk&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:52.0) Gecko/20100101 Thunderbird/52.1.1</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Dear Estanis,

looking into the script code of nc2mc here, <a  rel="nofollow" href="http://www.pa.op.dlr.de/~PatrickJoeckel/nc2mc/nc2mc">http://www.pa.op.dlr.de/~PatrickJoeckel/nc2mc/nc2mc</a>, you can see that this error message is triggered if 'tline' of the first nc file to be added to the descriptor file does not contain 1 or 4 fields:

switch (${#tline})
case 1:
   # special case
   echo 'WARNING: FORMAT OF units-ATTRIBUTE OF '$tname' NOT RECOGNIZED: '$tline
   set tline = ( &quot;${tline}&quot; &quot;since&quot; &quot;0001-01-01&quot; &quot;00:00:00&quot; )
   echo '... using '${tline} 'instead.'
   breaksw
case 4:
   # OK, do nothing
   breaksw
default:
   echo 'ERROR: FORMAT OF units-ATTRIBUTE OF '$tname' NOT RECOGNIZED: '$tline
   exit 4
   breaksw
endsw

'tline' is the line in a netCDF file that contains the time units, e.g., 'hours since 01-Jan-1900 00:00:00'. 4 fields would be the typical case, in this case field 1 is 'hours', field 2 is 'since', field 3 is '01-Jan-1900', and field 4 is '00:00:00'.

So the error does *not* relate to your already existing descriptor file, but to the first *.nc file to be added, which would be 'nemo1.nc' in your example. In a shell, execute this command to check the time units in your netCDF file and find out why it does not have 4 fields: ncdump -h nemo1.nc | less.

I actually wonder where your descriptor file comes from if nc2mc aborted with an error ...


Best wishes,
Hella




On 06/23/2017 08:13 PM, Estanislao Gavilan Pascual-Ahuir (PGR) wrote:
&gt; Dear Community,
&gt; 
&gt; 
&gt; I am trying to combine 2 ncdf files using nc2mc.sh. But I am having this error
&gt; 
&gt; 
&gt; ERROR: FORMAT OF units-ATTRIBUTE OF t NOT RECOGNIZED:
&gt; 
&gt; Thanks in advance for all your help.
&gt; 
&gt; 
&gt;  My descriptor file is:
&gt; 
&gt;  &amp;FORMAT_RECORD
&gt;      D_TYPE        = '  MC',
&gt;      D_FORMAT      = '  1A',
&gt;      D_SOURCE_CLASS       = 'MODEL OUTPUT',
&gt;  /
&gt;  &amp;BACKGROUND_RECORD
&gt;       D_EXPNUM      = 'Control',
&gt;       D_TITLE       = '',
&gt;       D_T0TIME      = '01-Jan-1900 00:00:00',
&gt;       D_TIME_UNIT   = 1.0,
&gt;       D_TIME_MODULO = .FALSE.,
&gt;  /
&gt;  &amp;MESSAGE_RECORD
&gt;       D_MESSAGE     = ' ',
&gt;       D_ALERT_ON_OPEN      = F,
&gt;       D_ALERT_ON_OUTPUT    = F,
&gt;  /
&gt;  &amp;EXTRA_RECORD
&gt;  /
&gt;  &amp;STEPFILE_RECORD
&gt;        s_filename    = 'nemo1.nc',
&gt;        S_START       = 3471508800,
&gt;        S_END  = 4417156800,
&gt;        S_DELTA       = 432000,
&gt;        S_NUM_OF_FILES       = 1,
&gt;        S_REGVARFLAG  = ' ',
&gt;  /
&gt;  &amp;STEPFILE_RECORD
&gt;        s_filename    = 'nemo2.nc',
&gt;        S_START       = 4417588800,
&gt;        S_END  = 6309316800,
&gt;        S_DELTA       = 432000,
&gt;        S_NUM_OF_FILES       = 1,
&gt;        S_REGVARFLAG  = ' ',
&gt;  /
&gt;  &amp;STEPFILE_RECORD
&gt;        s_filename    = '**END OF STEPFILES**'
&gt;  /
&gt; 
&gt; 
&gt; Kind regards,
&gt; 
&gt; 
&gt; Estanis
&gt; 
&gt; 

-- 
...............................................................................
  Hella Riede      hella.riede@xxxxxxx
  Air chemistry department: Modeling &amp; Global Observations
  Max Planck Institute for Chemistry, Hahn-Meitner-Weg 1, 55128 Mainz, Germany
  www.mpic.de   www.caribic.de
...............................................................................


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00461" href="msg00461.html">[ferret_users] combine ncdf files with nc2mc.sh</a></strong>
<ul><li><em>From:</em> Estanislao Gavilan Pascual-Ahuir (PGR)</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00462.html">Re: [ferret_users] combine ncdf files with nc2mc.sh</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00466.html">Re: [ferret_users] combine ncdf files with nc2mc.sh</a></strong>
</li>

</UL>
<center>[<a href="msg00462.html">Thread Prev</a>][<a href="msg00466.html">Thread Next</a>][<A HREF="threads.html#00463">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
