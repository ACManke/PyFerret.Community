<!-- MHonArc v2.5.4 -->
<!--X-Subject: Several variables in one unformatted file -->
<!--X-From-R13: orynaqNQSDQO.G[bagerny.QO -->
<!--X-Date: Wed, 4 Dec 1996 10:02:45 &#45;0800 -->
<!--X-Message-Id: 199612041759.MAA28581@rimbaud.CERCA.UMontreal.CA -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Several variables in one unformatted file</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00114.html">Thread Prev</a>][<a href="msg00117.html">Thread Next</a>][<A HREF="threads.html#00116">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Several variables in one unformatted file</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><A HREF="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxxxxxxxxxxxxx</A> (liste ferret)</strong></li>
<li><strong>Subject</strong>: <strong>Several variables in one unformatted file</strong></li>
<li><strong>From</strong>: <strong><A HREF="mailto:beland@DOMAIN.HIDDEN">beland@xxxxxxxxxxxxxxxxxx</A></strong></li>
<li>Date: Wed, 4 Dec 1996 12:59:53 -0500 (EST)</li>
<li>Sender: owner-ferret_users</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hello,

Using a Fortran program, I wrote an unformatted file containing four
two-dimensional fields.

The file was written like this:

   real A(64,32),B(64,32),C(64,32),D(64,32)

   open(10,file='tempmoy.dat',form='UNFORMATTED')
   write(10) A,B,C,D
   close(10)

I try to read it with ferret using

! Definition of gaussian grid 64x32
file /var=lats/columns=1 lats.gauss.32
define axis/x=0:354.375:5.625/unit=degrees x64
define axis/y/from_data/name=y32/unit=degrees lats
define grid/x=x64/y=y32 g64x32

file /var=&quot;T650,T1000,Tdiff,r&quot;/grid=g64x32/format=UNFORMATTED/COLUMNS=`64*32*4` tempmoy.dat

Unfortunately, when I try to display the fields with like this:

fill /line/key/title=&quot;Average temperature at 650 mb (1980) (Kelvins)&quot;/i=1:64/j=1:32 T650
fill /line/key/title=&quot;Average temperature at 1000 mb (1980) (Kelvins)&quot;/i=1:64/j=1:32 T1000
fill /lin/key/title=&quot;T1000 - T650 (1980) (Kelvins)&quot;/i=1:64/j=1:32 Tdiff
fill /line/key/title=&quot;r(T650,T1000) (1980)&quot;/i=1:64/j=1:32 r

I get strange results: the bottom part of each plot looks like
temperature data (values range from 240 to 300 approximately) and the
top part looks like it comes from either the third or fourth field.

What am I doing wrong ?  I suspect that I have to change something
either in the way I write the fields or the way I use &quot;file&quot;...

-- 
Michel Beland                 beland@CERCA.UMontreal.CA
professionnel de recherche    tel: (514)369-5223  fax: (514)369-3880
CERCA (CEntre de Recherche en Calcul Applique)
5160, boul. Decarie, bureau 400(423), Montreal (Quebec), Canada, H3X 2H9

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00117" href="msg00117.html">Re: Several variables in one unformatted file</a></strong>
<ul><li><em>From:</em> Mark Verschell</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00114.html">backing store and generating metacode without plotting window</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00117.html">Re: Several variables in one unformatted file</a></strong>
</li>

</UL>
<center>[<a href="msg00114.html">Thread Prev</a>][<a href="msg00117.html">Thread Next</a>][<A HREF="threads.html#00116">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<hr>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> / 
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.erl.noaa.gov">ERL</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://dread.pmel.noaa.gov">TMAP</a>
</address> <br> <a href="http://ferret.pmel.noaa.gov/Ferret/ferret_contact_us.html">Contact Us</a> | <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 
</font>
<!--X-User-Footer-End-->
</body>
</html>
