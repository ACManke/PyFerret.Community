<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] How to change the K&#45;index into L&#45;index (time index) -->
<!--X-From-R13: "Uhfgnsfba, Ivyyvnz W" <jvyyvnz.thfgnsfbaNcaay.tbi> -->
<!--X-Date: Wed, 15 May 2013 09:57:56 &#45;0700 -->
<!--X-Message-Id: CDB90B5C.C7A3%William.Gustafson@pnl.gov -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1368583011.21747.YahooMailNeo@web121004.mail.ne1.yahoo.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] How to change the K-index into L-index (time index)</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00333.html">Thread Prev</a>][<a href="msg00336.html">Thread Next</a>][<A HREF="threads.html#00335">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] How to change the K-index into L-index (time index)</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>dessy berlianty &lt;<a href="mailto:dessyberlianty@DOMAIN.HIDDEN">dessyberlianty@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] How to change the K-index into L-index (time index)</strong></li>
<li><strong>From</strong>: <strong>&quot;Gustafson, William I&quot; &lt;<a href="mailto:william.gustafson@DOMAIN.HIDDEN">william.gustafson@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Wed, 15 May 2013 09:57:45 -0700</li>
<li>Accept-language: en-US</li>
<li>Acceptlanguage: en-US</li>
<li>Cc: &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00333.html">1368583011.21747.YahooMailNeo@web121004.mail.ne1.yahoo.com</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>Pnnlmail: 1</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>Thread-index: Ac5RjSyG3fTlk2TFS6+TRnthwl65Bg==</li>
<li>Thread-topic: [ferret_users] How to change the K-index into L-index (time index)</li>
<li>User-agent: Microsoft-MacOutlook/14.3.4.130416</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Dessey,

In the case of opening netCDF files, you can also use the &quot;order&quot; argument when opening the file. I have to do this occasionally to bypass files that are not fully following conventions. Basically, the usage is something like:
use/order=XYT file.nc
which would force the 3-D variable in file.nc to be viewed in the horizontal and time dimensions. Sometimes these get read in as XYZ by default. If the file has a mix of 2-D and 3-D variables I don't know if this works or not&#x2014;I haven't tried it in that case.

-Bill
___________________________________________________________________

William I. Gustafson Jr., Ph.D.
Scientist
ATMOSPHERIC SCIENCES AND GLOBAL CHANGE DIVISION

Pacific Northwest National Laboratory
P.O. 999, MSIN K9-30
Richland, WA  99352
Tel: 509-372-6110
William.Gustafson@xxxxxxxx
<a  rel="nofollow" href="http://www.pnnl.gov/atmospheric/staff/staff_info.asp?staff_num=5716">http://www.pnnl.gov/atmospheric/staff/staff_info.asp?staff_num=5716</a>
<a  rel="nofollow" href="http://www.researcherid.com/rid/A-7732-2008">http://www.researcherid.com/rid/A-7732-2008</a>

From: dessy berlianty &lt;dessyberlianty@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:dessyberlianty@xxxxxxxxx">mailto:dessyberlianty@xxxxxxxxx</a>&gt;&gt;
Reply-To: dessy berlianty &lt;dessyberlianty@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:dessyberlianty@xxxxxxxxx">mailto:dessyberlianty@xxxxxxxxx</a>&gt;&gt;
Date: Tuesday, May 14, 2013 6:56 PM
To: Steve Hankin &lt;steven.c.hankin@xxxxxxxx&lt;<a  rel="nofollow" href="mailto:steven.c.hankin@xxxxxxxx">mailto:steven.c.hankin@xxxxxxxx</a>&gt;&gt;
Cc: samir pokhrel &lt;pokhrelsamir@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:pokhrelsamir@xxxxxxxxx">mailto:pokhrelsamir@xxxxxxxxx</a>&gt;&gt;, &quot;ferret_users@xxxxxxxx&lt;<a  rel="nofollow" href="mailto:ferret_users@xxxxxxxx">mailto:ferret_users@xxxxxxxx</a>&gt;&quot; &lt;ferret_users@xxxxxxxx&lt;<a  rel="nofollow" href="mailto:ferret_users@xxxxxxxx">mailto:ferret_users@xxxxxxxx</a>&gt;&gt;
Subject: Re: [ferret_users] How to change the K-index into L-index (time index)

Dear Steve,

Thank you for giving an alternative strategy of my case, and yes it is a netcdf file, an output file from COHERENS simulation.
I'll trying your suggestion and hopefully I could give a summary, right after I succeed using the nc operators as your suggestion.
Thank you very much.

Best regards,

dessy
________________________________
From: Steve Hankin &lt;steven.c.hankin@xxxxxxxx&lt;<a  rel="nofollow" href="mailto:steven.c.hankin@xxxxxxxx">mailto:steven.c.hankin@xxxxxxxx</a>&gt;&gt;
To: dessy berlianty &lt;dessyberlianty@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:dessyberlianty@xxxxxxxxx">mailto:dessyberlianty@xxxxxxxxx</a>&gt;&gt;
Cc: samir pokhrel &lt;pokhrelsamir@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:pokhrelsamir@xxxxxxxxx">mailto:pokhrelsamir@xxxxxxxxx</a>&gt;&gt;; &quot;ferret_users@xxxxxxxx&lt;<a  rel="nofollow" href="mailto:ferret_users@xxxxxxxx">mailto:ferret_users@xxxxxxxx</a>&gt;&quot; &lt;ferret_users@xxxxxxxx&lt;<a  rel="nofollow" href="mailto:ferret_users@xxxxxxxx">mailto:ferret_users@xxxxxxxx</a>&gt;&gt;
Sent: Tuesday, May 14, 2013 11:41 PM
Subject: Re: [ferret_users] How to change the K-index into L-index (time index)

Hi Dessy,

Glad you found a solution.

Is the underlying data in a netCDF file?  In most cases when the dimensions of a netCDF file get mapped by Ferret into the wrong orientation, it indicates that the file is lacking some expected CF attributes.  In your example it looks like the time axis is either missing or is lacking attributes ('units' or 'axis') to indicate its orientation.  An alternative strategy to working around this with Ferret commands would be to use the nc operators (<a  rel="nofollow" href="http://nco.sourceforge.net/">http://nco.sourceforge.net/</a>) to insert the missing attribute(s) into the file.

    - Steve

======================================

On 5/14/2013 12:32 AM, dessy berlianty wrote:
Dear Samir,

Thank you for your valuable suggestion.
After trying, following is the step to change index:

 1.  define new axis for x, y, and t:
    *   define axis/x=start:end:step xaxisname
    *   define axis/y=start:end:step yaxisname
    *   define axis/t=start:end:step taxisname
 2.  define new grid:
    *   define grid/x=xaxisname/y=yaxisname/t=taxisname gridname
 3.  check new grid:
    *   sh gr gridname
 4.  let dummy=x[gx=xaxisname]+y[gy=yaxisname]+t[gt=taxisname]
 5.  check dummy grid:
    *   sh gr dummy
 6.  save to nc files:
    *   save/file=&quot;/home/filename.nc&quot; reshape(varname,dummy)

I wish my summaries could be useful for those who will need it someday.
Again, thank you very much for your help.

Best regards,

dessy


________________________________
From: samir pokhrel &lt;pokhrelsamir@xxxxxxxxx&gt;&lt;<a  rel="nofollow" href="mailto:pokhrelsamir@xxxxxxxxx">mailto:pokhrelsamir@xxxxxxxxx</a>&gt;
To: dessy berlianty &lt;dessyberlianty@xxxxxxxxx&gt;&lt;<a  rel="nofollow" href="mailto:dessyberlianty@xxxxxxxxx">mailto:dessyberlianty@xxxxxxxxx</a>&gt;
Cc: &quot;ferret_users@xxxxxxxx&quot;&lt;<a  rel="nofollow" href="mailto:ferret_users@xxxxxxxx">mailto:ferret_users@xxxxxxxx</a>&gt; &lt;ferret_users@xxxxxxxx&gt;&lt;<a  rel="nofollow" href="mailto:ferret_users@xxxxxxxx">mailto:ferret_users@xxxxxxxx</a>&gt;
Sent: Tuesday, May 14, 2013 1:16 PM
Subject: Re: [ferret_users] How to change the K-index into L-index (time index)

Dear Dessy,

 You may use reshape function in which one variable can be wrapped in the dimension of the other.

go to following link and see the reshape function

<a  rel="nofollow" href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS">http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/variables-xpressions/XPRESSIONS</a>


regards
Samir



On Tue, May 14, 2013 at 7:54 AM, dessy berlianty &lt;dessyberlianty@xxxxxxxxx&lt;<a  rel="nofollow" href="mailto:dessyberlianty@xxxxxxxxx">mailto:dessyberlianty@xxxxxxxxx</a>&gt;&gt; wrote:
Dear Ferret Users,

I really need suggestion how to change the K-index into L-index (time index) for the followings dataset:

 name     title                                                    I         J            K         L         M         N
 XOUT     longitude                                        1:186     1:160      ...       ...       ...       ...
 YOUT     latitude                                          1:186     1:160      ...       ...       ...       ...
 DEPOUT   Mean_water_depth                       1:186     1:160      ...       ...       ...       ...
 TIME     Time                                                  ...       ...         1:673     ...       ...       ...
 UMVEL    X-component_of_depth-mean_curre 1:186     1:160    1:673     ...       ...       ...
 VMVEL    Y-component_of_depth-mean_curre 1:186     1:160   1:673     ...       ...       ...
 EFLUX2DU X-component_of_depth-integrated  1:186     1:160   1:673     ...       ...       ...
 EFLUX2DV Y-component_of_depth-integrated  1:186     1:160   1:673     ...       ...       ...
 ZETA     Surface_elevation                              1:186     1:160  1:673     ...       ...       ...
 ETOT2D   Vertically_integrated_total_ene        1:186     1:160   1:673     ...       ...       ...
 EDISSIP2D
          Vertically_integrated_energy_di              1:186     1:160   1:673     ...       ...       ...

If I'm not changing the K-index into time index (L), I'll need /transpose command for plotting each variable and Ferret always define the variable data as vertical dimension (not as time series as I wish).
And also I couldn't applying plot/vlog appropriately, even by using transpose. There will be a message as followings:
yes? plot/transpose/i=53/j=87/vlog zeta
 **ERROR: value out of legal range: Limits for log axis negative or too small: -1.16 : 1.21

yes? plot/transpose/i=53/j=87/vlog FFTA(zeta)

Bailing out of external function &quot;ffta&quot;:
     Time axis must be a regular axis
 **ERROR: error in external function

I would highly appreciate for any help.
Thank you in advance.

Best wishes,

dessy
---



--
Samir Pokhrel
Climate and Global Modelling Division
Indian Institute of Tropical Meteorology
NCL Post, Pashan
Pune-411008
INDIA







</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00342" href="msg00342.html">Re: [ferret_users] How to change the K-index into L-index (time index)</a></strong>
<ul><li><em>From:</em> Ge Peng - NOAA Affiliate</li></ul></li>
<li><strong><a name="00336" href="msg00336.html">Re: [ferret_users] How to change the K-index into L-index (time index)</a></strong>
<ul><li><em>From:</em> dessy berlianty</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00333" href="msg00333.html">Re: [ferret_users] How to change the K-index into L-index (time index)</a></strong>
<ul><li><em>From:</em> dessy berlianty</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00333.html">Re: [ferret_users] How to change the K-index into L-index (time index)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00336.html">Re: [ferret_users] How to change the K-index into L-index (time index)</a></strong>
</li>

</UL>
<center>[<a href="msg00333.html">Thread Prev</a>][<a href="msg00336.html">Thread Next</a>][<A HREF="threads.html#00335">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
