<!-- MHonArc v2.6.18 -->
<!--X-Subject: [ferret_users] Re: **ERROR: request exceeds memory setting: A negative number of words were requested. *** NOTE: The current grid is most likely too large -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Thu, 3 Jan 2013 17:31:31 &#45;0800 -->
<!--X-Message-Id: 50E630EE.7030104@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CACKeJX+t2sZh2CA047&#45;dBEpu+n42gyzZHzPbM2cYMuWRTFyjvA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>[ferret_users] Re: **ERROR: request exceeds memory setting: A negative number of words were requested. *** NOTE: The current grid is most likely too large</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00006.html">Thread Prev</a>][<a href="msg00007.html">Thread Next</a>][<A HREF="threads.html#00009">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[ferret_users] Re: **ERROR: request exceeds memory setting: A negative number of words were requested. *** NOTE: The current grid is most likely too large</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>antonio avio &lt;<a href="mailto:antonioavio@DOMAIN.HIDDEN">antonioavio@xxxxxxxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[ferret_users] Re: **ERROR: request exceeds memory setting: A negative number of words were requested. *** NOTE: The current grid is most likely too large</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Thu, 03 Jan 2013 17:31:26 -0800</li>
<li>Cc: <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a></li>
<li>In-reply-to: &lt;<a href="msg00006.html">CACKeJX+t2sZh2CA047-dBEpu+n42gyzZHzPbM2cYMuWRTFyjvA@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00006.html">CACKeJX+t2sZh2CA047-dBEpu+n42gyzZHzPbM2cYMuWRTFyjvA@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Thunderbird/17.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi Antonio,<br>
    If the number of words of memory becomes larger than what can be
    represented as an integer, the value overflows and shows up&nbsp; as an
    internal value that's negative. That's what's happening here.<br>
    <br>
    When you've reset the memory size, what does this show?<br>
    <blockquote><tt>yes? show memory </tt><br>
    </blockquote>
    For the variable you're trying to write out, what is the output of <br>
    <blockquote><tt>yes? show grid my_var </tt><br>
    </blockquote>
    When Ferret goes to start working on the calculations, it checks the
    size of the grid of the variable or the expressions that need to be
    loaded in order to compute it. Here, your variable is going to
    require such a large amount of memory that the number can't be
    expressed as an integer.&nbsp; The next step would be to see if the
    calculation will fit within the limit that you had asked for.&nbsp;
    (Recall that Ferret doesn't load data or do calculations until you
    issue an action command such as a plotting command or something
    that's going to list data in some way.&nbsp; So you hadn't actually done
    the calculations for that variable at the point when you saw the
    error.)<br>
    <br>
    In memory requests, we try to find cases where you ask for too much
    and write a good error message, but I'm finding that particular
    cases can fool our logic. What should happen on a too-large request
    is something like this, depending on what's actually available on
    the particular machine.<br>
    <blockquote><tt>yes?&nbsp; set memory/size=5.e4<br>
        &nbsp;Cached data cleared from memory<br>
        Unable to allocate 50000.0 Mwords of memory.<br>
        Restoring previous memory of 25.6 Mwords.</tt><br>
    </blockquote>
    &nbsp;But for instance I just tried this:<br>
    <blockquote><tt>yes? set memory/size=5.e12</tt><tt><br>
      </tt></blockquote>
    which is way more memory than I have available. Ferret should have
    issued a warning. In fact additional memory was not allocated:<br>
    <blockquote><tt>yes? show memory</tt><tt><br>
      </tt><tt>&nbsp;Current size of FERRET memory cache: 25.6 MegaWords&nbsp; (1
        word = 4 bytes)</tt><br>
    </blockquote>
    For your particular case, you may need to compute and write out your
    data out in chunks. If there is a time axis, assuming the
    calculation can be broken up in time, you can write out single
    timesteps or groups of timesteps, and use /APPEND to add more
    timesteps to the file.&nbsp; Other ways to break things up are possible;
    write back if you need help.<br>
    <br>
    Ansley<br>
    <br>
    <div class="moz-cite-prefix">On 1/3/2013 3:54 PM, antonio avio
      wrote:<br>
    </div>
    <blockquote
cite=""
      type="cite">Hi Ferreters,
      <div><br>
      </div>
      <div>I got this error message when simply saved my calculation
        output [high resolution]:</div>
      <div>
        <div>**ERROR: request exceeds memory setting: A negative number
          of words were requested.</div>
        <div>
          &nbsp;*** NOTE: The current grid is most likely too large</div>
      </div>
      <div>I have increased the memory allocation but, still got the
        same error.</div>
      <div><br>
      </div>
      <div>Anybody has an idea how to figure out this problems?</div>
      <div><br>
      </div>
      <div>Thanks a lot.</div>
      <div>Antonio</div>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00006" href="msg00006.html">[ferret_users] **ERROR: request exceeds memory setting: A negative number of words were requested. *** NOTE: The current grid is most likely too large</a></strong>
<ul><li><em>From:</em> antonio avio</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00006.html">[ferret_users] **ERROR: request exceeds memory setting: A negative number of words were requested. *** NOTE: The current grid is most likely too large</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00007.html">Re: [ferret_users] PyFerret for Mac OSX?</a></strong>
</li>

</UL>
<center>[<a href="msg00006.html">Thread Prev</a>][<a href="msg00007.html">Thread Next</a>][<A HREF="threads.html#00009">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
