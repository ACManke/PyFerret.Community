<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] memory usage creeping up -->
<!--X-From-R13: Yney Ezvgu &#45; @AOO Ossvyvngr <xney.fzvguNabnn.tbi> -->
<!--X-Date: Tue, 9 Jul 2013 10:27:34 &#45;0700 -->
<!--X-Message-Id: CAELLC7Un6+vvv4qEdWhaMOr+5GRNJ567oaeU&#45;dJL61fWxyncVw@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 1519860.JKMJK0UZMZ@ws&#45;mali -->
<!--X-Reference: 51DAEF07.2000403@noaa.gov -->
<!--X-Reference: 1373384143.41110.YahooMailNeo@web141102.mail.bf1.yahoo.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] memory usage creeping up</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00433.html">Thread Prev</a>][<a href="msg00436.html">Thread Next</a>][<A HREF="threads.html#00434">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] memory usage creeping up</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>jean li &lt;<a href="mailto:xgeast@DOMAIN.HIDDEN">xgeast@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] memory usage creeping up</strong></li>
<li><strong>From</strong>: <strong>Karl Smith - NOAA Affiliate &lt;<a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 9 Jul 2013 10:27:30 -0700</li>
<li>Cc: &quot;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&quot; &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00433.html">1373384143.41110.YahooMailNeo@web141102.mail.bf1.yahoo.com</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;1519860.JKMJK0UZMZ@ws-mali&gt;	&lt;<a href="msg00432.html">51DAEF07.2000403@noaa.gov</a>&gt;	&lt;<a href="msg00433.html">1373384143.41110.YahooMailNeo@web141102.mail.bf1.yahoo.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr"><div><div><div>Hi Jean,<br><br></div>Once Ferret quits, it is not possible for the program to keep memory reserved.&#xA0; You can use the Linux command &quot;ps -fu &lt;username&gt;&quot; (where &lt;username&gt; is you username on the machine) to display all processes you are running if you want to verify Ferret is no longer around.&#xA0; If there is still a ferret process running when you think you have exited all of them, you can use the Linux kill command to kill the runaway process (using the PID given in the ps command).&#xA0; <br>
<br>Linux (like most operating systems) does cache data read from disk, so what you may be noticing is the data from your data sets that you use being held in cache memory.&#xA0; However, if Linux needs more memory for some process, it will delete the oldest cached data and use that memory.&#xA0; So you will never get an out-of-memory error message just because a large amount of your memory happens to be used for caching data.&#xA0; You did not indicate whether you were getting an errors because of the memory usage.<br>
<br></div>Another thing to note with Ferret is the cancel data and cancel memory Ferret commands will not return memory to the operating system (one exception: when using string arrays - see below).&#xA0; Only changing the size given with the set memory Ferret command will do that.&#xA0; <br>
<br>If you are using string arrays, the memory for the strings are allocated separately from system memory, so cancelling string arrays will return memory to the system.&#xA0; But use of string arrays is very rare.<br><br></div>
<div>Regards,<br></div>Karl<br><br></div><div class="gmail_extra"><br><br><div class="gmail_quote">On Tue, Jul 9, 2013 at 8:35 AM, jean li <span dir="ltr">&lt;<a rel="nofollow" href="mailto:xgeast@xxxxxxxxx" target="_blank">xgeast@xxxxxxxxx</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div><div style="font-size:12pt;font-family:times new roman,new york,times,serif">Hi All:<br><br>I find that the memory usage creeping up after using Ferret. Even if I quit Ferret session, the memory couldn&#39;t be released. In my ferret code, I use<br>
cancel data and cancel memory but that doesn&#39;t seem to help. &#xA0; I could process the data with&#xA0; &quot;set mem/size=1500&quot;, but after a few runs, it filled up the memory of a 65G Linux cluster.&#xA0; The same problem occurred on my Linux (Dell) workstation as well. I am using ferret v6.64 on a 64 bit red hat Linux.<br>
<br>Thanks for your help.<br><br>Jean <br><br><div><span><br></span></div><div><br></div>  <div style="font-family:times new roman,new york,times,serif;font-size:12pt"> <div style="font-family:times new roman,new york,times,serif;font-size:12pt">
 <div dir="ltr"> <hr size="1"><font face="Arial"><b><span style="font-weight:bold"></span></b></font></div><div><br></div> </div> </div>  </div></div></blockquote></div><br><br clear="all"><br>-- <br>Karl M. Smith, Ph.D.<br>
JISAO Univ. Wash. and TMAP/PMEL NOAA<br>&quot;The contents of this message are mine personally and do<br>not necessarily reflect any position of the Government<br>or the National Oceanic and Atmospheric Administration.&quot;<br>

</div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00427" href="msg00427.html">[ferret_users] problem with merging time series data files</a></strong>
<ul><li><em>From:</em> Malgorzata Liszewska</li></ul></li>
<li><strong><a name="00432" href="msg00432.html">Re: [ferret_users] problem with merging time series data files</a></strong>
<ul><li><em>From:</em> Ansley Manke</li></ul></li>
<li><strong><a name="00433" href="msg00433.html">[ferret_users] memory usage creeping up</a></strong>
<ul><li><em>From:</em> jean li</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00433.html">[ferret_users] memory usage creeping up</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00436.html">Re: Fw: [ferret_users] memory usage creeping up</a></strong>
</li>

</UL>
<center>[<a href="msg00433.html">Thread Prev</a>][<a href="msg00436.html">Thread Next</a>][<A HREF="threads.html#00434">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
