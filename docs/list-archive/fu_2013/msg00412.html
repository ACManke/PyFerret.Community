<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Load data onto K axis -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Mon, 17 Jun 2013 10:34:51 &#45;0700 -->
<!--X-Message-Id: 51BF48B2.8090409@noaa.gov -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 1371215716.83816.YahooMailNeo@web171801.mail.ir2.yahoo.com -->
<!--X-Reference: CAH1tzCQe6g9sjcY4pDVm6Rk+x6oirJQV_YLeYb7bABUxE6UjGw@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Load data onto K axis</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00408.html">Thread Prev</a>][<a href="msg00407.html">Thread Next</a>][<A HREF="threads.html#00412">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Load data onto K axis</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Akshay Hegde &lt;<a href="mailto:akshay.k.hegde@DOMAIN.HIDDEN">akshay.k.hegde@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Load data onto K axis</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Mon, 17 Jun 2013 10:34:42 -0700</li>
<li>Cc: Kamoru Abiodun Lawal &lt;<a href="mailto:lawal_ka@DOMAIN.HIDDEN">lawal_ka@xxxxxxxxxxx</a>&gt;,        Ferret Users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00408.html">CAH1tzCQe6g9sjcY4pDVm6Rk+x6oirJQV_YLeYb7bABUxE6UjGw@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/">http://groups.google.com/a/noaa.gov/group/ferret_users/</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post">http://groups.google.com/a/noaa.gov/group/ferret_users/post</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;<a href="msg00406.html">1371215716.83816.YahooMailNeo@web171801.mail.ir2.yahoo.com</a>&gt; &lt;<a href="msg00408.html">CAH1tzCQe6g9sjcY4pDVm6Rk+x6oirJQV_YLeYb7bABUxE6UjGw@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20130509 Thunderbird/17.0.6</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi,<br>
    Have a look at the section "append, slab to NetCDF, example"&nbsp; in the
    <a rel="nofollow"
href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/index-1/">Ferret
      Users Guide index</a>,<br>
<a rel="nofollow" class="moz-txt-link-freetext" href="http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/converting-to-netcdf/SIMPLE-CONVERSIONS-USING-FERRET#_VPINDEXENTRY_1071">http://ferret.pmel.noaa.gov/Ferret/documentation/users-guide/converting-to-netcdf/SIMPLE-CONVERSIONS-USING-FERRET#_VPINDEXENTRY_1071</a><br>
    <br>
    That example shows opening a set of ascii files and appending the
    data from each one to a file.&nbsp; Your case is using netCDF files as
    the input. Say for example that file001.nc has K=1, file002.nc has
    K=2, etc, and that the depth or altitude values are increasing with
    each K, say for instance, Z=0, 1, 2, 3, ..., 99.&nbsp; <br>
    <br>
    You'll define the final z axis with all depths, and regrid the
    incoming data to that big axis.&nbsp; This will put the data from each
    file onto the correct level of the output axis. Use regridding to
    put the variable from the first file onto the first level of this
    axis and then write it to the output file. On this first write,
    tellFerret the length of the entire axis, and that you're writing
    just the k=1 level.&nbsp; Then <br>
    do the same with the other files, appending in the K direction.<br>
    <br>
    As long as the data in all the files have the same grid in XYT, you
    don't need to do anything to preserve those other dimensions. <br>
    <br>
    The details of defining the output axis, regridding to the output
    axis, and naming the files will depend on your data, but here is the
    general sequence of commands:<br>
    <tt><br>
    </tt>
    <blockquote><tt>! Define the output axis.</tt><br>
      <br>
      <tt>define axis/z=0:99:1/units=meters/</tt><tt>depth zax</tt><br>
      <br>
      <tt>! save the first dataset to the output file, writing the
        entire Z axis</tt><tt> with the /KLIMITS qualifier,<br>
        ! but saving just the /K=1 level.<br>
      </tt><br>
      <tt>use file001.nc</tt><br>
      <tt>let/units="`var,return=units`"/title="`var,return=title`"</tt><tt>&nbsp;
        var_out = var[gz=zax]</tt><br>
      <tt>save/clobber/file=file_all.nc/klimits=1:100/k=1&nbsp; var_out</tt><br>
      <tt>cancel data 1</tt><br>
      <tt><br>
      </tt><tt>! Open each file. This is a way to access files if they
        are named by the k level:</tt><tt><br>
      </tt><tt><br>
      </tt><tt>repeat/k=2:100:1 (def symbol kk = `k`; \</tt><tt><br>
      </tt><tt>
        &nbsp; define symbol filename = file00($kk).nc; \</tt><tt><br>
      </tt><tt>&nbsp;
        if `($kk) GT 9` then define symbol filename = file0($kk).nc; \</tt><tt><br>
      </tt><tt>&nbsp;
        if `($kk) GT 99` then define symbol filename = file($kk).nc;</tt><tt>
        \</tt><tt><br>
      </tt><tt>&nbsp; use ($filename)</tt><tt>; \</tt><tt><br>
      </tt><tt>&nbsp;
        let/units="`var,return=units`"/title="`var,return=title`"&nbsp;
        var_out = var[gz=zax]; \</tt><tt><br>
      </tt><tt>&nbsp; save/append/file=file_all.nc/k=($kk) var_out;\</tt><br>
      <tt>&nbsp; cancel data 1)</tt></blockquote>
    <tt><br>
    </tt><br>
    -Ansley<br>
    <br>
    <br>
    <br>
    <br>
    <div class="moz-cite-prefix">On 6/14/2013 7:03 AM, Akshay Hegde
      wrote:<br>
    </div>
    <blockquote
cite=""
      type="cite">
      <div dir="ltr">
        <div>
          <div>
            <div>I think it's not possible using the data file you have&nbsp;
              posted.. since K axis dimension is not same. <br>
              <br>
            </div>
            Akshay Hegde,<br>
          </div>
          National Institute of Oceanography,<br>
        </div>
        Dona Paula, Goa<br>
      </div>
      <div class="gmail_extra"><br>
        <br>
        <div class="gmail_quote">On Fri, Jun 14, 2013 at 6:45 PM, Kamoru
          Abiodun Lawal <span dir="ltr">&lt;<a rel="nofollow" moz-do-not-send="true"
              href="mailto:lawal_ka@xxxxxxxxxxx" target="_blank">lawal_ka@xxxxxxxxxxx</a>&gt;</span>
          wrote:<br>
          <blockquote class="gmail_quote" style="margin:0 0 0
            .8ex;border-left:1px #ccc solid;padding-left:1ex">
            <div>
              <div style="font-size:14pt;font-family:times new roman,new
                york,times,serif">
                <div>&nbsp; Dear Ferreters,<br>
                  <br>
                  Please help......<br>
                  I have 100 data with the each having the structure
                  below:<br>
                  <br>
                  &nbsp;&nbsp; name&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  I&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; J&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; K&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; L<br>
                  &nbsp; TEMP&nbsp;&nbsp;&nbsp;&nbsp; Temperature &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:144&nbsp;&nbsp;&nbsp;&nbsp;
                  1:96&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:54<br>
                  <br>
                  However, I want to join the data together onto the
                  K-axis to look like <br>
                  <br>
                  &nbsp;&nbsp;&nbsp; name&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; title&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                  I&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; J&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; K&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; L<br>
                  &nbsp; TEMP&nbsp;&nbsp;&nbsp;&nbsp; Temperature &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:144&nbsp;&nbsp;&nbsp;&nbsp;
                  1:96&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:100 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:54<br>
                  <br>
                  &nbsp;and retain the dimensions of I, J and L axes.<br>
                  Cheers!<span class="HOEnZb"><font color="#888888"><br>
                    </font></span></div>
                <span class="HOEnZb"><font color="#888888">
                    <div>
                      <div>
                        <div><font color="#0000ff">Kamoru Abiodun <b><u>LAWAL</u></b></font></div>
                        <div><span style="COLOR:rgb(96,191,0)">Climate
                            System Analysis Group,</span></div>
                        <div><span style="COLOR:rgb(96,191,0)">Department
                            of Environmental and Geographical Science,</span></div>
                        <div><span style="COLOR:rgb(96,191,0)">University
                            of Cape Town, Private Mail Bag X3,</span></div>
                        <div><span style="COLOR:rgb(96,191,0)">Rondebosch,
                            Cape Town, 7701, South Africa.</span></div>
                        <span style="COLOR:rgb(96,191,0)"><span
                            style="FONT-STYLE:italic;COLOR:rgb(255,0,0);FONT-WEIGHT:bold">.......there's

                            no wrong time for doing the right
                            things..........</span></span>
                        <div><span style="COLOR:rgb(96,191,0)"><span
                              style="FONT-STYLE:italic;COLOR:rgb(255,0,0);FONT-WEIGHT:bold"><font
                                color="#000000">&lt;&lt;&lt;&lt;---------------------------------------------------------------------------------------------------&gt;&gt;&gt;&gt;</font></span></span></div>
                        <br>
                      </div>
                    </div>
                  </font></span></div>
            </div>
          </blockquote>
        </div>
        <br>
      </div>
    </blockquote>
    <br>
  

</font></td></tr></table>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00406" href="msg00406.html">[ferret_users] Load data onto K axis</a></strong>
<ul><li><em>From:</em> Kamoru Abiodun Lawal</li></ul></li>
<li><strong><a name="00408" href="msg00408.html">Re: [ferret_users] Load data onto K axis</a></strong>
<ul><li><em>From:</em> Akshay Hegde</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00408.html">Re: [ferret_users] Load data onto K axis</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00407.html">[ferret_users] get variable name</a></strong>
</li>

</UL>
<center>[<a href="msg00408.html">Thread Prev</a>][<a href="msg00407.html">Thread Next</a>][<A HREF="threads.html#00412">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
