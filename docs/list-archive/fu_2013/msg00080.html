<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Generating nice PS file, problem with margins -->
<!--X-From-R13: Oafyrl [naxr <nafyrl.o.znaxrNabnn.tbi> -->
<!--X-Date: Tue, 29 Jan 2013 10:06:45 &#45;0800 -->
<!--X-Message-Id: 51080F81.3070500@noaa.gov -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: CAMxxcfYi4&#45;eiYvi5bxFDdseXsd7ie=jgRxF_=cH9VdOzY5napw@mail.gmail.com -->
<!--X-Reference: 20120828.120524.73303301.furue@hawaii.edu -->
<!--X-Reference: CAMxxcfZGkNJKZAUOvz817DSTV5QXTpmo0O0hCEgv&#45;ZuCKJBvdg@mail.gmail.com -->
<!--X-Reference: 20120829.105916.62300785.furue@hawaii.edu -->
<!--X-Reference: CAMxxcfYFWdF0P8O_UiMQ=q3zU38utU1O0VYC8KqTsd7FvhF37A@mail.gmail.com -->
<!--X-Derived: psyk_X2Odyd0.ps -->
<!--X-Derived: psE3H_YK_3tq.ps -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Generating nice PS file, problem with margins</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00076.html">Thread Prev</a>][<a href="msg00081.html">Thread Next</a>][<A HREF="threads.html#00080">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Generating nice PS file, problem with margins</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Szymon Roziewski &lt;<a href="mailto:szymon.roziewski@DOMAIN.HIDDEN">szymon.roziewski@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Generating nice PS file, problem with margins</strong></li>
<li><strong>From</strong>: <strong>Ansley Manke &lt;<a href="mailto:ansley.b.manke@DOMAIN.HIDDEN">ansley.b.manke@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Tue, 29 Jan 2013 10:05:53 -0800</li>
<li>Cc: ferret_users &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;CAMxxcfYFWdF0P8O_UiMQ=q3zU38utU1O0VYC8KqTsd7FvhF37A@mail.gmail.com&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAMxxcfYi4-eiYvi5bxFDdseXsd7ie=jgRxF_=cH9VdOzY5napw@mail.gmail.com&gt; &lt;20120828.120524.73303301.furue@hawaii.edu&gt; &lt;CAMxxcfZGkNJKZAUOvz817DSTV5QXTpmo0O0hCEgv-ZuCKJBvdg@mail.gmail.com&gt; &lt;20120829.105916.62300785.furue@hawaii.edu&gt; &lt;CAMxxcfYFWdF0P8O_UiMQ=q3zU38utU1O0VYC8KqTsd7FvhF37A@mail.gmail.com&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
<li>User-agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/20130107 Thunderbird/17.0.2</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<table width="100%"><tr><td bgcolor="#FFFFFF" style="background-color: #FFFFFF; color: #000000; "><font color="#000000">
  
  
    Hi Szymon ,<br>
    Yes, this is an issue with aliasing in the graphics. It's something
    that is much improved in PyFerret, as PyFerret uses different
    underlying graphics engines that give us more control over this. For
    more information, see here:<br>
    <br>
    <a rel="nofollow" class="moz-txt-link-freetext" href="http://ferret.pmel.noaa.gov/Ferret/documentation/pyferret">http://ferret.pmel.noaa.gov/Ferret/documentation/pyferret</a><br>
    <a rel="nofollow" class="moz-txt-link-freetext" href="http://ferret.pmel.noaa.gov/Ferret/documentation/pyferret/graphics/">http://ferret.pmel.noaa.gov/Ferret/documentation/pyferret/graphics/</a><br>
    <br>
    (Because pyFerret is currently a beta release, the commands that
    control the graphics settings are still under discussion and will
    probably change in future releases)<br>
    <br>
    There are workarounds for this in standard Ferret. One very good one
    is to draw a SHADE plot and then overlay it with a FILL plot using
    the same color levels.&nbsp; I've attached two plots - one with FILL only
    and the other with FILL overlaid on a SHADE.<br>
    <blockquote><tt>yes? use monthly_navy_winds</tt><tt><br>
      </tt><tt>
        yes? shade/L=55 uwnd</tt><tt><br>
      </tt><tt>
        yes? fill</tt><tt>/L=55</tt><tt>/over/nolab/lev uwnd </tt><tt><br>
      </tt></blockquote>
    Other suggestions have been made in the email archives. Find
    discussions by searching for "white lines".&nbsp; For instance here are
    two threads which talk about this:<br>
    <br>
<a rel="nofollow" class="moz-txt-link-freetext" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2011/msg00034.html">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2011/msg00034.html</a><br>
<a rel="nofollow" class="moz-txt-link-freetext" href="http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2010/msg00632.html">http://www.pmel.noaa.gov/maillists/tmap/ferret_users/fu_2010/msg00632.html</a><br>
    <br>
    and I would say that your suggestion about applying antialiasing
    using gs is another good idea.<br>
    <br>
    Ansley<br>
    <br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
    <div class="moz-cite-prefix">On 1/28/2013 7:31 AM, Szymon Roziewski
      wrote:<br>
    </div>
    <blockquote
cite=""
      type="cite">Hi there!<br>
      <br>
      <br>
      I 'm experiencing such an issue genereting graphics.<br>
      <br>
      Mainly, I have got 2 narrows line in the picture.<br>
      <br>
      I have no idea how to get rid off these.<br>
      <br>
      I attach necessary files, if someone may help I would appreciate
      and be really grateful.<br>
      <br>
      The command that I use.<br>
      <br>
      gs -q -dNOPAUSE -dBATCH -sDEVICE=pnmraw -r150x150
      -dTextAlphaBits=2 -dGraphicsAlphaBits=2 -sOutputFile=- <a rel="nofollow"
        moz-do-not-send="true" href="http://file_name.ps">file_name.ps</a>
      | pnmflip -r90 | convert -antialias - file_name.png<br>
      <br>
      <br>
      All the best,<br>
      Szymon Rozieski<br>
      <br>
      <br>
      <div class="gmail_quote">On 29 August 2012 22:59, Ryo Furue <span
          dir="ltr">&lt;<a rel="nofollow" moz-do-not-send="true"
            href="mailto:furue@xxxxxxxxxx" target="_blank">furue@xxxxxxxxxx</a>&gt;</span>
        wrote:<br>
        <blockquote class="gmail_quote" style="margin:0 0 0
          .8ex;border-left:1px #ccc solid;padding-left:1ex">Hi Szymon,<br>
          <div class="im"><br>
            &gt; When I switched off the options -dTextAlphaBits=4
            -dGraphicsAlphaBits=4<br>
            &gt; This leads to fonts are drawn only with 1 color.<br>
            &gt;<br>
          </div>
          &gt; So, using options *-dTextAlphaBits=2
          -dGraphicsAlphaBits=2*<br>
          <div class="im">&gt; was better, I got slightly differential
            colors (in gray scale) in fonts.<br>
            <br>
          </div>
          You seem to mean that you need smoother letterings (numbers
          and<br>
          alphabet characters). &nbsp;Is that right?<br>
          <br>
          In that case, I can think of three solutions:<br>
          <br>
          1) &nbsp;Search the Ferret mailing list archive for "antialias". &nbsp;I<br>
          &nbsp;remember somebody posted a script that alleviate the problem<br>
          &nbsp;of the thin lines (by thickening border lines?).<br>
          <br>
          2) &nbsp;Edit the PostScript file with a PostScript editor such as
          Inkscape<br>
          &nbsp;and Illustrator to replace the letterings with real
          text(*footnote);<br>
          &nbsp;and convert the resultant PostScript file with TextAlphaBits
          but<br>
          &nbsp;without GraphicsAlphaBits . &nbsp;In that way, you'll get smoother<br>
          &nbsp;text without introducing aliasing into the graphics part.<br>
          <br>
          3) Thicken the fonts in Ferret. &nbsp;In that way, they look fine
          (to me)<br>
          &nbsp;without smoothing by AlphaBits (antialiasing).<br>
          <br>
          I normally do (3).<br>
          <br>
          Regards,<br>
          Ryo<br>
          ----<br>
          (*footnote) &nbsp;Ferret's fonts are sets of lines, of not text
          characters.<br>
          Therefore, they are treat as (and they actually are) line
          graphics.<br>
          <div class="HOEnZb">
            <div class="h5"><br>
              <br>
              &gt;<br>
              &gt; Thank you very much,<br>
              &gt;<br>
              &gt; Kind regards,<br>
              &gt; Szymon Roziewski<br>
              &gt;<br>
              &gt;<br>
              &gt; On 29 August 2012 00:05, Ryo Furue &lt;<a rel="nofollow"
                moz-do-not-send="true" href="mailto:furue@xxxxxxxxxx">furue@xxxxxxxxxx</a>&gt;
              wrote:<br>
              &gt;<br>
              &gt;&gt; Dear Szymon,<br>
              &gt;&gt;<br>
              &gt;&gt; &gt; *gs -q -dNOPAUSE -dBATCH -sDEVICE=pnmraw
              -r150x150 -dTextAlphaBits=4<br>
              &gt;&gt; &gt; -dGraphicsAlphaBits=4 -sOutputFile=- <a rel="nofollow"
                moz-do-not-send="true" href="http://polycstline.ps"
                target="_blank">polycstline.ps</a> | pnmflip -r90 |<br>
              &gt;&gt; &gt; convert +antialias - polycstline.png*<br>
              &gt;&gt; &gt;<br>
              &gt;&gt; &gt; I changed line thickness and now I am quite
              happy about this wthat I<br>
              &gt;&gt; have.<br>
              &gt;&gt; &gt;<br>
              &gt;&gt; &gt; Mainly, I have this bluish lines on the plot
              and no idea of how I can get<br>
              &gt;&gt; &gt; rid off it.<br>
              &gt;&gt;<br>
              &gt;&gt; Those thin lines are due to antialiasing. &nbsp;In the
              above, you first<br>
              &gt;&gt; convert the PostScript file to a raster image
              using gs and finally<br>
              &gt;&gt; convert it to another raster format, PNG. &nbsp;I'm
              not familiar with<br>
              &gt;&gt; details of gs, but it must be performing the
              conversion with<br>
              &gt;&gt; antialising. . . . Hmm, but it seems
              GraphicsAlphaBits and<br>
              &gt;&gt; TextAlphaBits are the antialising operations
              here. &nbsp;What happens if<br>
              &gt;&gt; you don't use those options?<br>
              &gt;&gt;<br>
              &gt;&gt; (You switch off antialiasing for your "convert"
              command, but it's too<br>
              &gt;&gt; &nbsp;late.)<br>
              &gt;&gt;<br>
              &gt;&gt; Better still, the "convert" command can
              manipulate your image in a<br>
              &gt;&gt; lot of ways and you may not need to use "gs" in
              the first place:<br>
              &gt;&gt;<br>
              &gt;&gt; &nbsp;convert -density 150 -rotate 90 +antialias <a rel="nofollow"
                moz-do-not-send="true" href="http://polycstline.ps"
                target="_blank">polycstline.ps</a> polycstline.png<br>
              &gt;&gt;<br>
              &gt;&gt; or something along the lines.<br>
              &gt;&gt;<br>
              &gt;&gt; Regards,<br>
              &gt;&gt; Ryo<br>
              &gt;&gt;<br>
              &gt;<br>
              &gt;<br>
              &gt;<br>
              &gt; --<br>
              &gt; Z wyrazami szacunku,<br>
              &gt; Szymon Roziewski<br>
            </div>
          </div>
        </blockquote>
      </div>
      <br>
      <br clear="all">
      <br>
      -- <br>
      Z wyrazami szacunku,<br>
      Szymon Roziewski
    </blockquote>
    <br>
  

</font></td></tr></table><p><strong>Attachment:
<a href="psyk_X2Odyd0.ps" ><tt>fill_only.ps</tt></a></strong><br>
<em>Description:</em> PostScript document</p>
<p><strong>Attachment:
<a href="psE3H_YK_3tq.ps" ><tt>shade_and_fill.ps</tt></a></strong><br>
<em>Description:</em> PostScript document</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00076" href="msg00076.html">Re: [ferret_users] Generating nice PS file, problem with margins</a></strong>
<ul><li><em>From:</em> Szymon Roziewski</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00076.html">Re: [ferret_users] Generating nice PS file, problem with margins</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00081.html">Re: [ferret_users] Generating nice PS file, problem with margins</a></strong>
</li>

</UL>
<center>[<a href="msg00076.html">Thread Prev</a>][<a href="msg00081.html">Thread Next</a>][<A HREF="threads.html#00080">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
