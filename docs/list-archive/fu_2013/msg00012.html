<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [ferret_users] Fwd: ferret vs pyferret performance time.... -->
<!--X-From-R13: Yney Ezvgu &#45; @AOO Ossvyvngr <xney.fzvguNabnn.tbi> -->
<!--X-Date: Fri, 4 Jan 2013 07:21:11 &#45;0800 -->
<!--X-Message-Id: CAELLC7Uv4pwTk8vF32pZDD+DghFHj+gNUVutUsJohU1Rnrx2Dw@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAFP9GyZapfsNBohrOTw&#45;oQ7GrF_P+=juENfyKnGZA08qnRHeeQ@mail.gmail.com -->
<!--X-Reference: CAFP9GyakkiaLFnMhQU5gAg&#45;JC1enL3abPvcTYSbZ2rPLUwW4sA@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Re: [ferret_users] Fwd: ferret vs pyferret performance time....</title>
</head>
<body>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
<center>[<a href="msg00008.html">Thread Prev</a>][<a href="msg00013.html">Thread Next</a>][<A HREF="threads.html#00012">Index</A>]</center>

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [ferret_users] Fwd: ferret vs pyferret performance time....</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong>Sudheer Joseph &lt;<a href="mailto:sjo.india@DOMAIN.HIDDEN">sjo.india@xxxxxxxxx</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [ferret_users] Fwd: ferret vs pyferret performance time....</strong></li>
<li><strong>From</strong>: <strong>Karl Smith - NOAA Affiliate &lt;<a href="mailto:karl.smith@DOMAIN.HIDDEN">karl.smith@xxxxxxxx</a>&gt;</strong></li>
<li>Date: Fri, 4 Jan 2013 07:21:00 -0800</li>
<li>Cc: ferret &lt;<a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>&gt;</li>
<li>In-reply-to: &lt;<a href="msg00008.html">CAFP9GyakkiaLFnMhQU5gAg-JC1enL3abPvcTYSbZ2rPLUwW4sA@mail.gmail.com</a>&gt;</li>
<li>List-archive: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/?hl=en_US</a>&gt;</li>
<li>List-help: &lt;<a href="http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838">http://support.google.com/a/noaa.gov/bin/topic.py?hl=en_US&topic=25838</a>&gt;, &lt;<a href="mailto:ferret_users+help@noaa.gov">mailto:ferret_users+help@noaa.gov</a>&gt;</li>
<li>List-id: &lt;ferret_users.noaa.gov&gt;</li>
<li>List-post: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/post?hl=en_US</a>&gt;, &lt;<a href="mailto:ferret_users@noaa.gov">mailto:ferret_users@noaa.gov</a>&gt;</li>
<li>List-unsubscribe: &lt;<a href="http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US">http://groups.google.com/a/noaa.gov/group/ferret_users/subscribe?hl=en_US</a>&gt;, &lt;<a href="mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com">mailto:googlegroups-manage+809428289204+unsubscribe@googlegroups.com</a>&gt;</li>
<li>Mailing-list: list <a href="mailto:ferret_users@DOMAIN.HIDDEN">ferret_users@xxxxxxxx</a>; contact <a href="mailto:ferret_users%2Bowners@DOMAIN.HIDDEN">ferret_users+owners@xxxxxxxx</a></li>
<li>References: &lt;CAFP9GyZapfsNBohrOTw-oQ7GrF_P+=juENfyKnGZA08qnRHeeQ@mail.gmail.com&gt;	&lt;<a href="msg00008.html">CAFP9GyakkiaLFnMhQU5gAg-JC1enL3abPvcTYSbZ2rPLUwW4sA@mail.gmail.com</a>&gt;</li>
<li>Sender: <a href="mailto:owner-ferret_users@DOMAIN.HIDDEN">owner-ferret_users@xxxxxxxx</a></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
Hi Sudheer,<div><br></div><div>One thing I noticed is that you are requesting a LOT of memory. &#xA0;The value you supply is multiplied by 10^6 * size of the floating-point variable. &#xA0;So 1200 * 10^6 * 4 = 4.5 Gb for single-precision Ferret (6.67), and 1200 * 10^6 * 8 = 8.9 Gb for double-precision Ferret (6.84) and PyFerret. &#xA0;Do you really need this much memory dedicated to Ferret? &#xA0;More typical values used are 100 (0.74 Gb for double-precision) or 200 (1.5 Gb for double-precision).</div>
<div><br></div><div>I suspect this huge allocation of memory to Ferret or PyFerret is causing your machine to spend a lot of time swapping out memory to disk. &#xA0;The fact the elapsed time (the &quot;real&quot; time value - 25.6 sec and 5.31 min) is much larger that the time actually used by the processor (&quot;user&quot; plus &quot;sys&quot; time values - 17.8 sec and 34.5 sec) would support this, assuming there was not much else running on your machine at the same time. &#xA0;And if your machine became quite unresponsive in other command windows while these were running, swapping is almost certainly the problem. &#xA0;PyFerret also has Python and other Python modules loaded in memory, so more memory is needed and there would be even more swapping, and the reason for the much larger elapsed time. &#xA0;The actual processor time ratio for PyFerret vs Ferret (34.5 sec versus 17.8 sec - about 2:1) is about what is expected with the higher-quality graphics in PyFerret.</div>
<div><br></div><div>If there actually is that much data to be examined, it would be more efficient stay with a smaller amount of memory in Ferret and work with the data in pieces to get your desired result.</div><div><br>
</div><div>Karl</div><div><br></div><div class="gmail_extra"><br><br><div class="gmail_quote">On Thu, Jan 3, 2013 at 5:04 PM, Sudheer Joseph <span dir="ltr">&lt;<a rel="nofollow" href="mailto:sjo.india@xxxxxxxxx" target="_blank">sjo.india@xxxxxxxxx</a>&gt;</span> wrote:<br>
<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex">Dear developers/Users,<div>Between version 6.67 and 6.84 versions of ferret I get&#xA0;considerable&#xA0;delay when using&#xA0;t=@ngd] is this already noticed by some one or are there any solutions, If I use 6.67 I get the result in much less time compared to 6.84</div>

<div><br>Similarly&#xA0;</div><div><br><div class="gmail_quote"><div>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;I get a poor&#xA0;performance&#xA0;with pyferret when compared with normal ferret for the same set of&#xA0;operations. for the below script normal ferret takes 25 seconds where as pyferret takes 5 minutes. Why is this difference is this due to configuration issue ? are there anything in pyferret to set for making it faster? &#xA0;I do not get any message or error while starting pyferret as I have cdtime there with my python.</div>


<div>Please share your&#xA0;experience&#xA0;if any one has faced same and also if there a solution?</div><div><br></div><div>sjo@sjo-ltp../NC_FILES~$ time ferret -script m_tmi_percen_g21dg.jnl&#xA0;</div><div>set mem/size=1200</div><div>


&#xA0;Cached data cleared from memory</div><div>use <a rel="nofollow" href="http://m_minus_tmi_sst.nc" target="_blank">m_minus_tmi_sst.nc</a></div><div>let cls_1= if abs(m_TMI_SST) gt 1 then m_TMI_SST</div><div>let ngd=cls_1[t=@var]</div><div>

set reg/x=35:115/y=-35:26</div>
<div>......</div><div>.......</div><div>let perc_gud=(ngd/(ngd+nbd))*100</div><div>fill/lev=(1,100,5)/nolab/set perc_gud</div><div>ppl fill</div><div>contour/over/lev=(1,100,10)/nolab/set perc_gud</div><div>ppl contour/over</div>


<div><br></div><div>real<span style="white-space:pre-wrap">	</span>0m25.558s</div><div>user<span style="white-space:pre-wrap">	</span>0m15.109s</div><div>sys<span style="white-space:pre-wrap">	</span>0m2.716s</div>
<div>************************************************************</div><div><div>$ time pyferret -script hyc_tmi_percen_g21dg.jnl&#xA0;</div><div>set mem/size=1200</div><div>&#xA0;Cached data cleared from memory</div><div>use <a rel="nofollow" href="http://hyc_minus_tmi_sst.nc" target="_blank">hyc_minus_tmi_sst.nc</a></div>


<div>let cls_1= if abs(m_TMI_SST) gt 1 then m_TMI_SST</div><div>let ngd=cls_1[t=@ngd]</div><div>set reg/x=35:115/y=-35:26</div><div>......</div><div>......</div><div>fill/lev=(1,100,5)/nolab/set perc_gud</div><div>ppl fill</div>


<div>contour/over/lev=(1,100,10)/nolab/set perc_gud</div><div>ppl contour/over</div><div><br></div><div>real<span style="white-space:pre-wrap">	</span>5m18.710s</div><div>user<span style="white-space:pre-wrap">	</span>0m25.894s</div>


<div>sys<span style="white-space:pre-wrap">	</span>0m8.637s</div></div><div>*************************************************************</div>-- <br>with best regards<br><br>Sudheer<br><br>**********************************************************************************<br>


Dr. Sudheer Joseph &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <br>Scientist &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;<br>INDIAN NATIONAL CENTRE FOR OCEAN INFORMATION SERVICES (INCOIS)<br>


MINISTRY OF EARTH SCIENCES, GOVERNMENT OF INDIA<br>&quot;OCEAN VALLEY&quot; PRAGATHI NAGAR (BO)<br>OPP.JNTU, NIZAMPET SO<br>Andhra Pradesh, India. PIN- 500 090.<br>TEl:<a rel="nofollow" href="tel:%2B91-40-23044600" value="+914023044600" target="_blank">+91-40-23044600</a>(R),Tel:<a rel="nofollow" href="tel:%2B91-9440832534" value="+919440832534" target="_blank">+91-9440832534</a>(Mobile)<br>

Tel:<a rel="nofollow" href="tel:%2B91-40-23886047" value="+914023886047" target="_blank">+91-40-23886047</a>(O),Fax:<a rel="nofollow" href="tel:%2B91-40-23892910" value="+914023892910" target="_blank">+91-40-23892910</a>(O)<br>
E-mail: <a rel="nofollow" href="mailto:sudheer.joseph@xxxxxxxxx" target="_blank">sudheer.joseph@xxxxxxxxx</a>; &#xA0;<a rel="nofollow" href="mailto:sjo@xxxxxxxxxxxxx" target="_blank">sjo@xxxxxxxxxxxxx</a>.<br>Web- <a rel="nofollow" href="http://oppamthadathil.tripod.com" target="_blank">http://oppamthadathil.tripod.com</a><br>


&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;--------------* ---------------<br>&quot;The ultimate measure of a man is<br>not where he stands in moments of<br>comfort and convenience, but where<br>he stands at times of challenge and<br>controversy.&quot;<br>


&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Martin Luther King, Jr.<br>&quot;What we have done for ourselves alone dies with us.<br>What we have done for others and the world remains and is immortal.&quot;<br>- Albert Pines<br>
</div><br><br clear="all"><div><br></div>-- <br>with best regards<br><br>Sudheer<br><br>**********************************************************************************<br>Dr. Sudheer Joseph &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; <br>

Scientist &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;&#xA0;<br>INDIAN NATIONAL CENTRE FOR OCEAN INFORMATION SERVICES (INCOIS)<br>MINISTRY OF EARTH SCIENCES, GOVERNMENT OF INDIA<br>&quot;OCEAN VALLEY&quot; PRAGATHI NAGAR (BO)<br>

OPP.JNTU, NIZAMPET SO<br>Andhra Pradesh, India. PIN- 500 090.<br>TEl:<a rel="nofollow" href="tel:%2B91-40-23044600" value="+914023044600" target="_blank">+91-40-23044600</a>(R),Tel:<a rel="nofollow" href="tel:%2B91-9440832534" value="+919440832534" target="_blank">+91-9440832534</a>(Mobile)<br>
Tel:<a rel="nofollow" href="tel:%2B91-40-23886047" value="+914023886047" target="_blank">+91-40-23886047</a>(O),Fax:<a rel="nofollow" href="tel:%2B91-40-23892910" value="+914023892910" target="_blank">+91-40-23892910</a>(O)<br>E-mail: <a rel="nofollow" href="mailto:sudheer.joseph@xxxxxxxxx" target="_blank">sudheer.joseph@xxxxxxxxx</a>; &#xA0;<a rel="nofollow" href="mailto:sjo@xxxxxxxxxxxxx" target="_blank">sjo@xxxxxxxxxxxxx</a>.<br>

Web- <a rel="nofollow" href="http://oppamthadathil.tripod.com" target="_blank">http://oppamthadathil.tripod.com</a><br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0;--------------* ---------------<br>&quot;The ultimate measure of a man is<br>not where he stands in moments of<br>

comfort and convenience, but where<br>he stands at times of challenge and<br>controversy.&quot;<br>&#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; &#xA0; Martin Luther King, Jr.<br>&quot;What we have done for ourselves alone dies with us.<br>What we have done for others and the world remains and is immortal.&quot;<br>

- Albert Pines
</div>
</blockquote></div><br><br clear="all"><div><br></div>-- <br>Karl M. Smith, Ph.D.<br>JISAO Univ. Wash. and TMAP/PMEL NOAA<br>&quot;The contents of this message are mine personally and do<br>not necessarily reflect any position of the Government<br>
or the National Oceanic and Atmospheric Administration.&quot;<br>
</div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00013" href="msg00013.html">Re: [ferret_users] Fwd: ferret vs pyferret performance time....</a></strong>
<ul><li><em>From:</em> Sudheer Joseph</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00008" href="msg00008.html">[ferret_users] Fwd: ferret vs pyferret performance time....</a></strong>
<ul><li><em>From:</em> Sudheer Joseph</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<li>Previous by thread:
<strong><a href="msg00008.html">[ferret_users] Fwd: ferret vs pyferret performance time....</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00013.html">Re: [ferret_users] Fwd: ferret vs pyferret performance time....</a></strong>
</li>

</UL>
<center>[<a href="msg00008.html">Thread Prev</a>][<a href="msg00013.html">Thread Next</a>][<A HREF="threads.html#00012">Index</A>]</center>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<A HREF="http://ferret.pmel.noaa.gov/Ferret/contact-us">Contact Us</A>
<br>
<font size=-1>
<address>
<a href="http://www.doc.gov">Dept of Commerce</a> /
<a href="http://www.noaa.gov">NOAA</a> /
<a href="http://www.oar.noaa.gov">OAR</a> /
<a href="http://www.pmel.noaa.gov">PMEL</a> /
<a href="http://ferret.pmel.noaa.gov">Ferret</a>
</address>

<br>
 <a href="http://www.noaa.gov/privacy.html">Privacy Policy</a> | <a href="http://www.noaa.gov/disclaimer.html">Disclaimer</a> | <a href="accessibility.html">Accessibility Statement</a> 

</font>
<!--X-User-Footer-End-->
</body>
</html>
